/*
 * alphaTab v0.9.6.296 (develop)
 *
 * Copyright Â© 2020, Daniel Kuschny and Contributors, All rights reserved.
 * 
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * SoundFont loading and Audio Synthesis based on TinySoundFont (licensed under MIT)
 * Copyright (C) 2017, 2018 Bernhard Schelling (https://github.com/schellingb/TinySoundFont)
 *
 * TinySoundFont is based on SFZero (licensed under MIT)
 * Copyright (C) 2012 Steve Folta (https://github.com/stevefolta/SFZero)
 */ 
!function($hx_exports,$global){"use strict";$hx_exports.alphaTab=$hx_exports.alphaTab||{},$hx_exports.alphaTab.utils=$hx_exports.alphaTab.utils||{},$hx_exports.alphaTab.util=$hx_exports.alphaTab.util||{},$hx_exports.alphaTab.util._LogLevel=$hx_exports.alphaTab.util._LogLevel||{},$hx_exports.alphaTab.ui=$hx_exports.alphaTab.ui||{},$hx_exports.alphaTab.rendering=$hx_exports.alphaTab.rendering||{},$hx_exports.alphaTab.rendering.utils=$hx_exports.alphaTab.rendering.utils||{},$hx_exports.alphaTab.model=$hx_exports.alphaTab.model||{},$hx_exports.alphaTab.model._WhammyType=$hx_exports.alphaTab.model._WhammyType||{},$hx_exports.alphaTab.model._VibratoType=$hx_exports.alphaTab.model._VibratoType||{},$hx_exports.alphaTab.model._TripletFeel=$hx_exports.alphaTab.model._TripletFeel||{},$hx_exports.alphaTab.model._SlideOutType=$hx_exports.alphaTab.model._SlideOutType||{},$hx_exports.alphaTab.model._SlideInType=$hx_exports.alphaTab.model._SlideInType||{},$hx_exports.alphaTab.model._SimileMark=$hx_exports.alphaTab.model._SimileMark||{},$hx_exports.alphaTab.model._PickStroke=$hx_exports.alphaTab.model._PickStroke||{},$hx_exports.alphaTab.model._Ottavia=$hx_exports.alphaTab.model._Ottavia||{},$hx_exports.alphaTab.model._NoteAccidentalMode=$hx_exports.alphaTab.model._NoteAccidentalMode||{},$hx_exports.alphaTab.model._KeySignatureType=$hx_exports.alphaTab.model._KeySignatureType||{},$hx_exports.alphaTab.model._KeySignature=$hx_exports.alphaTab.model._KeySignature||{},$hx_exports.alphaTab.model._HarmonicType=$hx_exports.alphaTab.model._HarmonicType||{},$hx_exports.alphaTab.model._GraceType=$hx_exports.alphaTab.model._GraceType||{},$hx_exports.alphaTab.model._Fingers=$hx_exports.alphaTab.model._Fingers||{},$hx_exports.alphaTab.model._FermataType=$hx_exports.alphaTab.model._FermataType||{},$hx_exports.alphaTab.model._DynamicValue=$hx_exports.alphaTab.model._DynamicValue||{},$hx_exports.alphaTab.model._Duration=$hx_exports.alphaTab.model._Duration||{},$hx_exports.alphaTab.model._CrescendoType=$hx_exports.alphaTab.model._CrescendoType||{},$hx_exports.alphaTab.model._Clef=$hx_exports.alphaTab.model._Clef||{},$hx_exports.alphaTab.model._BrushType=$hx_exports.alphaTab.model._BrushType||{},$hx_exports.alphaTab.model._BendType=$hx_exports.alphaTab.model._BendType||{},$hx_exports.alphaTab.model._BendStyle=$hx_exports.alphaTab.model._BendStyle||{},$hx_exports.alphaTab.model._AutomationType=$hx_exports.alphaTab.model._AutomationType||{},$hx_exports.alphaTab.model._AccidentalType=$hx_exports.alphaTab.model._AccidentalType||{},$hx_exports.alphaTab.model._AccentuationType=$hx_exports.alphaTab.model._AccentuationType||{},$hx_exports.alphaTab.io=$hx_exports.alphaTab.io||{},$hx_exports.alphaTab.importer=$hx_exports.alphaTab.importer||{},$hx_exports.alphaTab.exporter=$hx_exports.alphaTab.exporter||{},$hx_exports.alphaTab.collections=$hx_exports.alphaTab.collections||{},$hx_exports.alphaTab.collections._FastList=$hx_exports.alphaTab.collections._FastList||{},$hx_exports.alphaTab.collections._FastDictionary=$hx_exports.alphaTab.collections._FastDictionary||{},$hx_exports.alphaTab._TabRhythmMode=$hx_exports.alphaTab._TabRhythmMode||{},$hx_exports.alphaTab._StaveProfile=$hx_exports.alphaTab._StaveProfile||{},$hx_exports.alphaTab._ScrollMode=$hx_exports.alphaTab._ScrollMode||{},$hx_exports.alphaTab._NotationMode=$hx_exports.alphaTab._NotationMode||{},$hx_exports.alphaTab._LayoutMode=$hx_exports.alphaTab._LayoutMode||{},$hx_exports.alphaTab._FingeringMode=$hx_exports.alphaTab._FingeringMode||{},$hx_exports.alphaTab.audio=$hx_exports.alphaTab.audio||{},$hx_exports.alphaTab.audio.generator=$hx_exports.alphaTab.audio.generator||{},$hx_exports.alphaTab.audio.synth=$hx_exports.alphaTab.audio.synth||{},$hx_exports.alphaTab.audio.synth.synthesis=$hx_exports.alphaTab.audio.synth.synthesis||{},$hx_exports.alphaTab.audio.synth.synthesis._OutputMode=$hx_exports.alphaTab.audio.synth.synthesis._OutputMode||{},$hx_exports.alphaTab.audio.synth.midi=$hx_exports.alphaTab.audio.synth.midi||{},$hx_exports.alphaTab.audio.synth.midi.event=$hx_exports.alphaTab.audio.synth.midi.event||{},$hx_exports.alphaTab.audio.synth.midi.event._MidiEventType=$hx_exports.alphaTab.audio.synth.midi.event._MidiEventType||{},$hx_exports.alphaTab.audio.synth.midi.event._ControllerType=$hx_exports.alphaTab.audio.synth.midi.event._ControllerType||{},$hx_exports.alphaTab.audio.synth.ds=$hx_exports.alphaTab.audio.synth.ds||{},$hx_exports.alphaTab.audio.synth._PlayerState=$hx_exports.alphaTab.audio.synth._PlayerState||{},$hx_exports.alphaTab.platform=$hx_exports.alphaTab.platform||{},$hx_exports.alphaTab.platform.javaScript=$hx_exports.alphaTab.platform.javaScript||{},$hx_exports.alphaTab.platform.model=$hx_exports.alphaTab.platform.model||{},$hx_exports.alphaTab.platform.model._TextBaseline=$hx_exports.alphaTab.platform.model._TextBaseline||{},$hx_exports.alphaTab.platform.model._TextAlign=$hx_exports.alphaTab.platform.model._TextAlign||{},$hx_exports.alphaTab.platform.model._FontStyle=$hx_exports.alphaTab.platform.model._FontStyle||{};function $estr(){return js.Boot.__string_rec(this,"")}function $extend(from,fields){function Inherit(){}Inherit.prototype=from;var proto=new Inherit;for(var name in fields)proto[name]=fields[name];return fields.toString!==Object.prototype.toString&&(proto.toString=fields.toString),proto}function EReg(r,opt){this.r=new RegExp(r,opt.split("u").join(""))}EReg.__name__=["EReg"],EReg.prototype={match:function(s){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(s),this.r.s=s,null!=this.r.m},matched:function(n){if(null!=this.r.m&&0<=n&&n<this.r.m.length)return this.r.m[n];throw new js._Boot.HaxeError("EReg::matched")},__class__:EReg};function HxOverrides(){}HxOverrides.__name__=["HxOverrides"],HxOverrides.cca=function(s,index){var x=s.charCodeAt(index);if(x==x)return x},HxOverrides.substr=function(s,pos,len){if(null==len)len=s.length;else if(len<0){if(0!=pos)return"";len=s.length+len}return s.substr(pos,len)},HxOverrides.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};function List(){this.length=0}List.__name__=["List"],List.prototype={add:function(item){var x=new _List.ListNode(item,null);null==this.h?this.h=x:this.q.next=x,this.q=x,this.length++},push:function(item){var x=new _List.ListNode(item,this.h);this.h=x,null==this.q&&(this.q=x),this.length++},__class__:List};var _List={ListNode:function(item,next){this.item=item,this.next=next}};_List.ListNode.__name__=["_List","ListNode"],_List.ListNode.prototype={__class__:_List.ListNode},Math.__name__=["Math"];function Std(){}Std.__name__=["Std"],Std.string=function(s){return js.Boot.__string_rec(s,"")},Std.parseInt=function(x){var v=parseInt(x,10);return 0!=v||120!=HxOverrides.cca(x,1)&&88!=HxOverrides.cca(x,1)||(v=parseInt(x)),isNaN(v)?null:v};function StringBuf(){this.b=""}StringBuf.__name__=["StringBuf"],StringBuf.prototype={__class__:StringBuf};function StringTools(){}StringTools.__name__=["StringTools"],StringTools.startsWith=function(s,start){return s.length>=start.length&&HxOverrides.substr(s,0,start.length)==start},StringTools.endsWith=function(s,end){var elen=end.length,slen=s.length;return elen<=slen&&HxOverrides.substr(s,slen-elen,elen)==end},StringTools.isSpace=function(s,pos){var c=HxOverrides.cca(s,pos);return 8<c&&c<14||32==c},StringTools.ltrim=function(s){for(var l=s.length,r=0;r<l&&StringTools.isSpace(s,r);)++r;return 0<r?HxOverrides.substr(s,r,l-r):s},StringTools.rtrim=function(s){for(var l=s.length,r=0;r<l&&StringTools.isSpace(s,l-r-1);)++r;return 0<r?HxOverrides.substr(s,0,l-r):s},StringTools.trim=function(s){return StringTools.ltrim(StringTools.rtrim(s))},StringTools.replace=function(s,sub,by){return s.split(sub).join(by)};function Type(){}Type.__name__=["Type"],Type.getClassName=function(c){var a=c.__name__;return null==a?null:a.join(".")};var alphaTab={};alphaTab.AlphaTabApi=$hx_exports.alphaTab.AlphaTabApi=function(uiFacade,settings){var _gthis=this;this._startTime=0,this._trackIndexes=null,this.uiFacade=null,this.container=null,this.renderer=null,this.score=null,this.settings=null,this.tracks=null,this.canvasElement=null,this._tickCache=null,this.player=null,this._cursorWrapper=null,this._barCursor=null,this._beatCursor=null,this._selectionWrapper=null,this._previousTick=0,this._playerState=0,this._currentBeat=null,this._previousStateForCursor=0,this._previousCursorCache=null,this._lastScroll=0,this._selecting=!1,this._selectionStart=null,this._selectionEnd=null,this.uiFacade=uiFacade,this.container=uiFacade.get_rootContainer(),uiFacade.initialize(this,settings),alphaTab.util.Logger.logLevel=this.settings.core.logLevel,this.canvasElement=uiFacade.createCanvasElement(),this.container.appendChild(this.canvasElement),this.container.addResize(alphaTab.platform.Platform.throttle(function(){_gthis.container.get_width()!=_gthis.renderer.get_width()&&_gthis.triggerResize()},uiFacade.get_resizeThrottle())),this.settings.core.useWorkers&&this.uiFacade.get_areWorkersSupported()&&alphaTab.Environment.getRenderEngineFactory(this.settings).supportsWorkers?this.renderer=this.uiFacade.createWorkerRenderer():this.renderer=new alphaTab.rendering.ScoreRenderer(this.settings);var initialResizeEventInfo=new alphaTab.ResizeEventArgs;initialResizeEventInfo.oldWidth=this.renderer.get_width(),initialResizeEventInfo.newWidth=system.Convert.toInt32_Single(this.container.get_width()),initialResizeEventInfo.settings=this.settings,this.onResize(initialResizeEventInfo),this.renderer.addPreRender($bind(this,this.onRenderStarted)),this.renderer.addRenderFinished(function(e){_gthis.onRenderFinished()}),this.renderer.addPostRenderFinished(function(){var duration=Date.now()-_gthis._startTime;alphaTab.util.Logger.info("rendering","Rendering completed in "+Std.string(duration)+"ms",null),_gthis.onPostRenderFinished()}),this.renderer.addPreRender(function(resize){_gthis._startTime=Date.now()}),this.renderer.addPartialRenderFinished($bind(this,this.appendRenderResult)),this.renderer.addRenderFinished(function(r){_gthis.appendRenderResult(r),_gthis.appendRenderResult(null)}),this.renderer.addError($bind(this,this.onError)),this.settings.player.enablePlayer&&this.setupPlayer(),this.setupClickHandling(),this.uiFacade.initialRender()},alphaTab.AlphaTabApi.__name__=["alphaTab","AlphaTabApi"],alphaTab.AlphaTabApi.prototype={destroy:function(){null!=this.player&&this.player.destroy(),this.uiFacade.destroy(),this.renderer.destroy()},updateSettings:function(){this.renderer.updateSettings(this.settings),this.settings.player.enablePlayer?this.setupPlayer():this.destroyPlayer()},load:function(scoreData,trackIndexes){var _gthis=this;try{return this.uiFacade.load(scoreData,function(score){_gthis.renderScore(score,trackIndexes)},function(error){_gthis.onError("import",error)})}catch(e){if(e instanceof js._Boot.HaxeError&&(e=e.val),js.Boot.__instanceof(e,system.Exception))return this.onError("import",e),!1;throw e}},renderScore:function(score,trackIndexes){var tracks=[];if(null==trackIndexes)0<score.tracks.length&&tracks.push(score.tracks[0]);else if(0==trackIndexes.length)0<score.tracks.length&&tracks.push(score.tracks[0]);else if(1==trackIndexes.length&&-1==trackIndexes[0])for(var track=$iterator(score.tracks)();track.hasNext();){var track1=track.next();tracks.push(track1)}else for(var index=new system.Int32ArrayIterator(trackIndexes);index.hasNext();){var index1=index.next();0<=index1&&index1<=score.tracks.length&&tracks.push(score.tracks[index1])}this.internalRenderTracks(score,tracks)},renderTracks:function(tracks){if(0<tracks.length){for(var score=tracks[0].score,track=HxOverrides.iter(tracks);track.hasNext();){if(track.next().score!=score)return void this.onError("load",(new alphaTab.AlphaTabException).AlphaTabException("All rendered tracks must belong to the same score."))}this.internalRenderTracks(score,tracks)}},internalRenderTracks:function(score,tracks){if(score!=this.score){alphaTab.model.ModelUtils.applyPitchOffsets(this.settings,score),this.score=score,this.tracks=tracks;this._trackIndexes=[];for(var track=HxOverrides.iter(tracks);track.hasNext();){var track1=track.next();this._trackIndexes.push(track1.index)}this.onLoaded(score),this.loadMidiForScore(),this.render()}else{this.tracks=tracks;this._trackIndexes=[];for(var track2=HxOverrides.iter(tracks);track2.hasNext();){var track3=track2.next();this._trackIndexes.push(track3.index)}this.render()}},triggerResize:function(){var _gthis=this;if(this.container.get_isVisible()){var _tmp=new alphaTab.ResizeEventArgs;_tmp.oldWidth=_gthis.renderer.get_width(),_tmp.newWidth=system.Convert.toInt32_Single(_gthis.container.get_width()),_tmp.settings=_gthis.settings;var resizeEventInfo=_tmp;this.onResize(resizeEventInfo),this.renderer.updateSettings(this.settings),this.renderer.set_width(system.Convert.toInt32_Single(this.container.get_width())),this.renderer.resizeRender()}else alphaTab.util.Logger.warning("Rendering","AlphaTab container was invisible while autosizing, waiting for element to become visible",null),this.uiFacade.addRootContainerBecameVisible(function(){alphaTab.util.Logger.info("Rendering","AlphaTab container became visible, doing autosizing",null),_gthis.triggerResize()})},appendRenderResult:function(result){if(null!=result){var tmp=this.canvasElement,this1=system.Convert.toInt32_Single(result.totalWidth);tmp.set_width(this1);var tmp1=this.canvasElement,this2=system.Convert.toInt32_Single(result.totalHeight);if(tmp1.set_height(this2),null!=this._cursorWrapper){var tmp2=this._cursorWrapper,this3=system.Convert.toInt32_Single(result.totalWidth);tmp2.set_width(this3);var tmp3=this._cursorWrapper,this4=system.Convert.toInt32_Single(result.totalHeight);tmp3.set_height(this4)}}null!=result&&null==result.renderResult||this.uiFacade.beginAppendRenderResults(result)},tex:function(tex,tracks){try{var parser=new alphaTab.importer.AlphaTexImporter,data=alphaTab.io.ByteBuffer.fromBuffer(alphaTab.platform.Platform.stringToByteArray(tex));parser.init(data,this.settings);var score=parser.readScore();this.renderScore(score,tracks)}catch(e){if(e instanceof js._Boot.HaxeError&&(e=e.val),!js.Boot.__instanceof(e,system.Exception))throw e;this.onError("import",e)}},loadSoundFont:function(data){return null!=this.player&&this.uiFacade.loadSoundFont(data)},render:function(){var _gthis=this;if(null!=this.renderer){var renderAction=null;(renderAction=function(){_gthis.uiFacade.get_canRender()?(_gthis.renderer.set_width(system.Convert.toInt32_Single(_gthis.container.get_width())),_gthis.renderer.renderScore(_gthis.score,new Int32Array(_gthis._trackIndexes))):_gthis.uiFacade.addCanRenderChanged(renderAction)})()}},get_isReadyForPlayback:function(){return null!=this.player&&this.player.get_isReadyForPlayback()},get_playerState:function(){return null==this.player?0:this.player.get_state()},get_masterVolume:function(){return null==this.player?0:this.player.get_masterVolume()},set_masterVolume:function(value){return null!=this.player&&this.player.set_masterVolume(value),this.get_masterVolume()},get_metronomeVolume:function(){return null==this.player?0:this.player.get_metronomeVolume()},set_metronomeVolume:function(value){return null!=this.player&&this.player.set_metronomeVolume(value),this.get_metronomeVolume()},get_tickPosition:function(){return null==this.player?0:this.player.get_tickPosition()},set_tickPosition:function(value){return null!=this.player&&this.player.set_tickPosition(value),this.get_tickPosition()},get_timePosition:function(){return null==this.player?0:this.player.get_timePosition()},set_timePosition:function(value){return null!=this.player&&this.player.set_timePosition(value),this.get_timePosition()},get_playbackRange:function(){return null==this.player?null:this.player.get_playbackRange()},set_playbackRange:function(value){return null!=this.player&&this.player.set_playbackRange(value),this.get_playbackRange()},get_playbackSpeed:function(){return null==this.player?0:this.player.get_playbackSpeed()},set_playbackSpeed:function(value){return null!=this.player&&this.player.set_playbackSpeed(value),this.get_playbackSpeed()},get_isLooping:function(){return null!=this.player&&this.player.get_isLooping()},set_isLooping:function(value){return null!=this.player&&this.player.set_isLooping(value),this.get_isLooping()},destroyPlayer:function(){null!=this.player&&(this.player.destroy(),this.player=null,this.destroyCursors())},setupPlayer:function(){var _gthis=this;null==this.player&&(this.player=this.uiFacade.createWorkerPlayer(),null!=this.player&&(this.player.addReady(function(){_gthis.loadMidiForScore()}),this.player.addReadyForPlayback(function(){if(_gthis.onReadyForPlayback(),null!=_gthis.tracks)for(var track=HxOverrides.iter(_gthis.tracks);track.hasNext();){var track1=track.next(),volume=track1.playbackInfo.volume/16;_gthis.player.setChannelVolume(track1.playbackInfo.primaryChannel,volume),_gthis.player.setChannelVolume(track1.playbackInfo.secondaryChannel,volume)}}),this.player.addSoundFontLoaded($bind(this,this.onSoundFontLoaded)),this.player.addSoundFontLoadFailed(function(e){_gthis.onError("soundFont",e)}),this.player.addMidiLoaded($bind(this,this.onMidiLoaded)),this.player.addMidiLoadFailed(function(e1){_gthis.onError("midi",e1)}),this.player.addStateChanged($bind(this,this.onPlayerStateChanged)),this.player.addPositionChanged($bind(this,this.onPlayerPositionChanged)),this.player.addFinished($bind(this,this.onPlayerFinished)),this.settings.player.enableCursor?this.setupCursors():this.destroyCursors()))},loadMidiForScore:function(){if(null!=this.player&&null!=this.score&&this.player.get_isReady()){alphaTab.util.Logger.info("AlphaTab","Generating Midi",null);var midiFile=new alphaTab.audio.synth.midi.MidiFile,handler=new alphaTab.audio.generator.AlphaSynthMidiFileHandler(midiFile),generator=new alphaTab.audio.generator.MidiFileGenerator(this.score,this.settings,handler);generator.generate(),this._tickCache=generator.tickLookup,this.player.loadMidiFile(midiFile)}},changeTrackVolume:function(tracks,volume){if(null!=this.player)for(var track=HxOverrides.iter(tracks);track.hasNext();){var track1=track.next();this.player.setChannelVolume(track1.playbackInfo.primaryChannel,volume),this.player.setChannelVolume(track1.playbackInfo.secondaryChannel,volume)}},changeTrackSolo:function(tracks,solo){if(null!=this.player)for(var track=HxOverrides.iter(tracks);track.hasNext();){var track1=track.next();this.player.setChannelSolo(track1.playbackInfo.primaryChannel,solo),this.player.setChannelSolo(track1.playbackInfo.secondaryChannel,solo)}},changeTrackMute:function(tracks,mute){if(null!=this.player)for(var track=HxOverrides.iter(tracks);track.hasNext();){var track1=track.next();this.player.setChannelMute(track1.playbackInfo.primaryChannel,mute),this.player.setChannelMute(track1.playbackInfo.secondaryChannel,mute)}},play:function(){return null!=this.player&&this.player.play()},pause:function(){null!=this.player&&this.player.pause()},playPause:function(){null!=this.player&&this.player.playPause()},stop:function(){null!=this.player&&this.player.stop()},destroyCursors:function(){null!=this._cursorWrapper&&(this.uiFacade.destroyCursors(),this._cursorWrapper=null,this._barCursor=null,this._beatCursor=null,this._selectionWrapper=null,this._previousTick=0,this._playerState=0)},setupCursors:function(){var _gthis=this,cursors=this.uiFacade.createCursors();null!=cursors&&(this._cursorWrapper=cursors.cursorWrapper,this._barCursor=cursors.barCursor,this._beatCursor=cursors.beatCursor,this._selectionWrapper=cursors.selectionWrapper,this._previousTick=0,this._playerState=0,this.renderer.addPostRenderFinished(function(){_gthis.cursorUpdateTick(_gthis._previousTick,!1)}),this.player.addPositionChanged(function(e){_gthis._previousTick=e.currentTick,_gthis.uiFacade.beginInvoke(function(){_gthis.cursorUpdateTick(e.currentTick,!1)})}),this.player.addStateChanged(function(e1){if(_gthis._playerState=e1.state,!e1.stopped&&0==e1.state){var currentBeat=_gthis._currentBeat,tickCache=_gthis._tickCache;null!=currentBeat&&null!=tickCache&&_gthis.player.set_tickPosition(tickCache.getMasterBarStart(currentBeat.voice.bar.get_masterBar())+currentBeat.playbackStart)}}))},cursorUpdateTick:function(tick,stop){null==stop&&(stop=!1);var _gthis=this;this.uiFacade.beginInvoke(function(){var cache=_gthis._tickCache;if(null!=cache){var tracks=_gthis.tracks;if(0<tracks.length){var beat=cache.findBeat(tracks,tick);if(null!=beat){var this1=beat.duration;_gthis.cursorUpdateBeat(beat.currentBeat,beat.nextBeat,this1,stop,beat.beatsToHighlight)}}}})},cursorUpdateBeat:function(beat,nextBeat,duration,stop,beatsToHighlight){if(null!=beat){var cache=this.renderer.get_boundsLookup();if(null!=cache){var previousBeat=this._currentBeat,previousCache=this._previousCursorCache,previousState=this._previousStateForCursor;if(this._currentBeat=beat,this._previousCursorCache=cache,this._previousStateForCursor=this._playerState,beat!=previousBeat||cache!=previousCache||previousState!=this._playerState){var barCursor=this._barCursor,beatCursor=this._beatCursor,beatBoundings=cache.findBeat(beat);if(null!=beatBoundings){var barBoundings=beatBoundings.barBounds.masterBarBounds,barBounds=barBoundings.visualBounds;if(barCursor.set_top(barBounds.y),barCursor.set_left(barBounds.x),barCursor.set_width(barBounds.w),barCursor.set_height(barBounds.h),beatCursor.stopAnimation(),beatCursor.set_top(barBounds.y),beatCursor.set_left(beatBoundings.visualBounds.x),beatCursor.set_height(barBounds.h),this.uiFacade.removeHighlights(),1==this._playerState||stop){var duration1=this.player.get_playbackSpeed();if(duration/=duration1,!stop){if(null!=beatsToHighlight)for(var highlight=$iterator(beatsToHighlight)();highlight.hasNext();){var highlight1=highlight.next(),className=alphaTab.rendering.glyphs.BeatContainerGlyph.getGroupId(highlight1);this.uiFacade.highlightElements(className)}var nextBeatX=barBoundings.visualBounds.x+barBoundings.visualBounds.w;if(null!=nextBeat&&(nextBeat.voice.bar.index==beat.voice.bar.index||nextBeat.voice.bar.index==beat.voice.bar.index+1)){var nextBeatBoundings=cache.findBeat(nextBeat);null!=nextBeatBoundings&&nextBeatBoundings.barBounds.masterBarBounds.staveGroupBounds==barBoundings.staveGroupBounds&&(nextBeatX=nextBeatBoundings.visualBounds.x)}this.uiFacade.beginInvoke(function(){beatCursor.transitionToX(duration,nextBeatX)})}if(!this._selecting&&0!=this.settings.player.scrollMode){var scrollElement=this.uiFacade.getScrollContainer(),isVertical=alphaTab.Environment.getLayoutEngineFactory(this.settings).vertical,mode=this.settings.player.scrollMode,elementOffset=this.uiFacade.getOffset(scrollElement,this.container);if(isVertical)switch(mode){case 1:var y=system.Convert.toInt32_Single(elementOffset.y+barBoundings.realBounds.y+this.settings.player.scrollOffsetY);y!=this._lastScroll&&(this._lastScroll=y,this.uiFacade.scrollToY(scrollElement,y,this.settings.player.scrollSpeed));break;case 2:var elementBottom=scrollElement.get_scrollTop()+this.uiFacade.getOffset(null,scrollElement).h;if(barBoundings.visualBounds.y+barBoundings.visualBounds.h>=elementBottom||barBoundings.visualBounds.y<scrollElement.get_scrollTop()){var scrollTop=barBoundings.realBounds.y+this.settings.player.scrollOffsetY;this._lastScroll=system.Convert.toInt32_Single(barBoundings.visualBounds.x),this.uiFacade.scrollToY(scrollElement,system.Convert.toInt32_Single(scrollTop),this.settings.player.scrollSpeed)}}else switch(mode){case 1:if(system.Convert.toInt32_Single(barBoundings.visualBounds.x)!=this._lastScroll){var scrollLeft=system.Convert.toInt32_Single(barBoundings.realBounds.x+this.settings.player.scrollOffsetX);this._lastScroll=system.Convert.toInt32_Single(barBoundings.visualBounds.x),this.uiFacade.scrollToX(scrollElement,scrollLeft,this.settings.player.scrollSpeed)}break;case 2:var elementRight=scrollElement.get_scrollLeft()+this.uiFacade.getOffset(null,scrollElement).w;if(barBoundings.visualBounds.x+barBoundings.visualBounds.w>=elementRight||barBoundings.visualBounds.x<scrollElement.get_scrollLeft()){var scrollLeft1=barBoundings.realBounds.x+this.settings.player.scrollOffsetX;this._lastScroll=system.Convert.toInt32_Single(barBoundings.visualBounds.x),this.uiFacade.scrollToX(scrollElement,system.Convert.toInt32_Single(scrollLeft1),this.settings.player.scrollSpeed)}}}this.onPlayedBeatChanged(beat)}}}}}},addPlayedBeatChanged:function(value){this.playedBeatChanged=system._EventAction1.EventAction1_Impl_.add(this.playedBeatChanged,value)},removePlayedBeatChanged:function(value){this.playedBeatChanged=system._EventAction1.EventAction1_Impl_.sub(this.playedBeatChanged,value)},onPlayedBeatChanged:function(beat){function handler(p){system._EventAction1.EventAction1_Impl_.invoke(_e,p)}var _e=this.playedBeatChanged;null!=handler&&handler(beat),this.uiFacade.triggerEvent(this.container,"playedBeatChanged",beat)},setupClickHandling:function(){var _gthis=this;this.canvasElement.addMouseDown(function(e){if(e.get_isLeftMouseButton()&&_gthis.settings.player.enablePlayer&&_gthis.settings.player.enableCursor){e.preventDefault();var relX=e.getX(_gthis.canvasElement),relY=e.getY(_gthis.canvasElement),beat=_gthis.renderer.get_boundsLookup().getBeatAtPos(relX,relY);null!=beat&&(_gthis._selectionStart=new alphaTab.SelectionInfo(beat),_gthis._selectionEnd=null,_gthis._selecting=!0)}}),this.canvasElement.addMouseMove(function(e1){if(_gthis._selecting&&_gthis.settings.player.enablePlayer&&_gthis.settings.player.enableCursor){var relX1=e1.getX(_gthis.canvasElement),relY1=e1.getY(_gthis.canvasElement),beat1=_gthis.renderer.get_boundsLookup().getBeatAtPos(relX1,relY1);null==beat1||null!=_gthis._selectionEnd&&_gthis._selectionEnd.beat==beat1||(_gthis._selectionEnd=new alphaTab.SelectionInfo(beat1),_gthis.cursorSelectRange(_gthis._selectionStart,_gthis._selectionEnd))}}),this.canvasElement.addMouseUp(function(e2){if(_gthis._selecting&&_gthis.settings.player.enablePlayer&&_gthis.settings.player.enableCursor){if(e2.preventDefault(),null!=_gthis._selectionEnd){var startTick=_gthis._selectionStart.beat.get_absoluteDisplayStart();if(_gthis._selectionStart.beat.get_absoluteDisplayStart()<startTick){var t=_gthis._selectionStart;_gthis._selectionStart=_gthis._selectionEnd,_gthis._selectionEnd=t}}if(null!=_gthis._selectionStart){var tickCache=_gthis._tickCache,realMasterBarStart=tickCache.getMasterBarStart(_gthis._selectionStart.beat.voice.bar.get_masterBar());if(_gthis.cursorUpdateBeat(_gthis._selectionStart.beat,null,0,!1,null),_gthis.player.set_tickPosition(realMasterBarStart+_gthis._selectionStart.beat.playbackStart),null!=_gthis._selectionEnd&&_gthis._selectionStart.beat!=_gthis._selectionEnd.beat){var realMasterBarEnd=tickCache.getMasterBarStart(_gthis._selectionEnd.beat.voice.bar.get_masterBar()),_gthis1=_gthis.player,_tmp=new alphaTab.audio.synth.PlaybackRange;_tmp.startTick=realMasterBarStart+_gthis._selectionStart.beat.playbackStart,_tmp.endTick=realMasterBarEnd+_gthis._selectionEnd.beat.playbackStart+_gthis._selectionEnd.beat.playbackDuration-50,_gthis1.set_playbackRange(_tmp)}else _gthis._selectionStart=null,_gthis.player.set_playbackRange(null),_gthis.cursorSelectRange(_gthis._selectionStart,_gthis._selectionEnd)}_gthis._selecting=!1}}),this.renderer.addPostRenderFinished(function(){null!=_gthis._selectionStart&&_gthis.settings.player.enablePlayer&&_gthis.settings.player.enableCursor&&_gthis.cursorSelectRange(_gthis._selectionStart,_gthis._selectionEnd)})},cursorSelectRange:function(startBeat,endBeat){var cache=this.renderer.get_boundsLookup();if(null!=cache){var selectionWrapper=this._selectionWrapper;if(selectionWrapper.clear(),null!=startBeat&&null!=endBeat&&startBeat.beat!=endBeat.beat){null==startBeat.bounds&&(startBeat.bounds=cache.findBeat(startBeat.beat)),null==endBeat.bounds&&(endBeat.bounds=cache.findBeat(endBeat.beat));var startTick=startBeat.beat.get_absolutePlaybackStart();if(endBeat.beat.get_absolutePlaybackStart()<startTick){var t=startBeat;startBeat=endBeat,endBeat=t}var startX=startBeat.bounds.realBounds.x,endX=endBeat.bounds.realBounds.x+endBeat.bounds.realBounds.w;if(endBeat.beat.index==endBeat.beat.voice.beats.length-1&&(endX=endBeat.bounds.barBounds.masterBarBounds.realBounds.x+endBeat.bounds.barBounds.masterBarBounds.realBounds.w),startBeat.bounds.barBounds.masterBarBounds.staveGroupBounds!=endBeat.bounds.barBounds.masterBarBounds.staveGroupBounds){var staffStartX=startBeat.bounds.barBounds.masterBarBounds.staveGroupBounds.visualBounds.x,staffEndX=startBeat.bounds.barBounds.masterBarBounds.staveGroupBounds.visualBounds.x+startBeat.bounds.barBounds.masterBarBounds.staveGroupBounds.visualBounds.w,startSelection=this.uiFacade.createSelectionElement();startSelection.set_top(startBeat.bounds.barBounds.masterBarBounds.visualBounds.y),startSelection.set_left(startX),startSelection.set_width(staffEndX-startX),startSelection.set_height(startBeat.bounds.barBounds.masterBarBounds.visualBounds.h),selectionWrapper.appendChild(startSelection);for(var staffStartIndex=startBeat.bounds.barBounds.masterBarBounds.staveGroupBounds.index+1,staffEndIndex=endBeat.bounds.barBounds.masterBarBounds.staveGroupBounds.index,staffIndex=staffStartIndex;staffIndex<staffEndIndex;){var staffBounds=cache.staveGroups[staffIndex],middleSelection=this.uiFacade.createSelectionElement();middleSelection.set_top(staffBounds.visualBounds.y),middleSelection.set_left(staffStartX),middleSelection.set_width(staffEndX-staffStartX),middleSelection.set_height(staffBounds.visualBounds.h),selectionWrapper.appendChild(middleSelection),++staffIndex}var endSelection=this.uiFacade.createSelectionElement();endSelection.set_top(endBeat.bounds.barBounds.masterBarBounds.visualBounds.y),endSelection.set_left(staffStartX),endSelection.set_width(endX-staffStartX),endSelection.set_height(endBeat.bounds.barBounds.masterBarBounds.visualBounds.h),selectionWrapper.appendChild(endSelection)}else{var selection=this.uiFacade.createSelectionElement();selection.set_top(startBeat.bounds.barBounds.masterBarBounds.visualBounds.y),selection.set_left(startX),selection.set_width(endX-startX),selection.set_height(startBeat.bounds.barBounds.masterBarBounds.visualBounds.h),selectionWrapper.appendChild(selection)}}}},addLoaded:function(value){this.loaded=system._EventAction1.EventAction1_Impl_.add(this.loaded,value)},removeLoaded:function(value){this.loaded=system._EventAction1.EventAction1_Impl_.sub(this.loaded,value)},onLoaded:function(obj){function handler(p){system._EventAction1.EventAction1_Impl_.invoke(_e,p)}var _e=this.loaded;null!=handler&&handler(obj),this.uiFacade.triggerEvent(this.container,"loaded",obj)},addResize:function(value){this.resize=system._EventAction1.EventAction1_Impl_.add(this.resize,value)},removeResize:function(value){this.resize=system._EventAction1.EventAction1_Impl_.sub(this.resize,value)},onResize:function(obj){function handler(p){system._EventAction1.EventAction1_Impl_.invoke(_e,p)}var _e=this.resize;null!=handler&&handler(obj),this.uiFacade.triggerEvent(this.container,"resize",obj)},addRenderStarted:function(value){this.renderStarted=system._EventAction1.EventAction1_Impl_.add(this.renderStarted,value)},removeRenderStarted:function(value){this.renderStarted=system._EventAction1.EventAction1_Impl_.sub(this.renderStarted,value)},onRenderStarted:function(resize){function handler(p){system._EventAction1.EventAction1_Impl_.invoke(_e,p)}var _e=this.renderStarted;null!=handler&&handler(resize),this.uiFacade.triggerEvent(this.container,"render",resize)},addRenderFinished:function(value){this.renderFinished=system._EventAction.EventAction_Impl_.add(this.renderFinished,value)},removeRenderFinished:function(value){this.renderFinished=system._EventAction.EventAction_Impl_.sub(this.renderFinished,value)},onRenderFinished:function(){function handler(){system._EventAction.EventAction_Impl_.invoke(_e)}var _e=this.renderFinished;null!=handler&&handler(),this.uiFacade.triggerEvent(this.container,"rendered",null)},addPostRenderFinished:function(value){this.postRenderFinished=system._EventAction.EventAction_Impl_.add(this.postRenderFinished,value)},removePostRenderFinished:function(value){this.postRenderFinished=system._EventAction.EventAction_Impl_.sub(this.postRenderFinished,value)},onPostRenderFinished:function(){function handler(){system._EventAction.EventAction_Impl_.invoke(_e)}var _e=this.postRenderFinished;null!=handler&&handler(),this.uiFacade.triggerEvent(this.container,"postRendered",null)},addError:function(value){this.error=system._EventAction2.EventAction2_Impl_.add(this.error,value)},removeError:function(value){this.error=system._EventAction2.EventAction2_Impl_.sub(this.error,value)},onError:function(type,details){alphaTab.util.Logger.error(type,"An unexpected error occurred",details);function handler(p1,p2){system._EventAction2.EventAction2_Impl_.invoke(_e,p1,p2)}var _e=this.error;null!=handler&&handler(type,details),this.uiFacade.triggerEvent(this.container,"error",{type:type,details:details})},addReadyForPlayback:function(value){this.readyForPlayback=system._EventAction.EventAction_Impl_.add(this.readyForPlayback,value)},removeReadyForPlayback:function(value){this.readyForPlayback=system._EventAction.EventAction_Impl_.sub(this.readyForPlayback,value)},onReadyForPlayback:function(){function handler(){system._EventAction.EventAction_Impl_.invoke(_e)}var _e=this.readyForPlayback;null!=handler&&handler(),this.uiFacade.triggerEvent(this.container,"playerReady",null)},addPlayerFinished:function(value){this.playerFinished=system._EventAction.EventAction_Impl_.add(this.playerFinished,value)},removePlayerFinished:function(value){this.playerFinished=system._EventAction.EventAction_Impl_.sub(this.playerFinished,value)},onPlayerFinished:function(){function handler(){system._EventAction.EventAction_Impl_.invoke(_e)}var _e=this.playerFinished;null!=handler&&handler(),this.uiFacade.triggerEvent(this.container,"finished",null)},addSoundFontLoaded:function(value){this.soundFontLoaded=system._EventAction.EventAction_Impl_.add(this.soundFontLoaded,value)},removeSoundFontLoaded:function(value){this.soundFontLoaded=system._EventAction.EventAction_Impl_.sub(this.soundFontLoaded,value)},onSoundFontLoaded:function(){function handler(){system._EventAction.EventAction_Impl_.invoke(_e)}var _e=this.soundFontLoaded;null!=handler&&handler(),this.uiFacade.triggerEvent(this.container,"soundFontLoaded",null)},addMidiLoaded:function(value){this.midiLoaded=system._EventAction.EventAction_Impl_.add(this.midiLoaded,value)},removeMidiLoaded:function(value){this.midiLoaded=system._EventAction.EventAction_Impl_.sub(this.midiLoaded,value)},onMidiLoaded:function(){function handler(){system._EventAction.EventAction_Impl_.invoke(_e)}var _e=this.midiLoaded;null!=handler&&handler(),this.uiFacade.triggerEvent(this.container,"midiFileLoaded",null)},addPlayerStateChanged:function(value){this.playerStateChanged=system._EventAction1.EventAction1_Impl_.add(this.playerStateChanged,value)},removePlayerStateChanged:function(value){this.playerStateChanged=system._EventAction1.EventAction1_Impl_.sub(this.playerStateChanged,value)},onPlayerStateChanged:function(e){function handler(p){system._EventAction1.EventAction1_Impl_.invoke(_e,p)}var _e=this.playerStateChanged;null!=handler&&handler(e),this.uiFacade.triggerEvent(this.container,"playerStateChanged",e)},addPlayerPositionChanged:function(value){this.playerPositionChanged=system._EventAction1.EventAction1_Impl_.add(this.playerPositionChanged,value)},removePlayerPositionChanged:function(value){this.playerPositionChanged=system._EventAction1.EventAction1_Impl_.sub(this.playerPositionChanged,value)},onPlayerPositionChanged:function(e){function handler(p){system._EventAction1.EventAction1_Impl_.invoke(_e,p)}var _e=this.playerPositionChanged;null!=handler&&handler(e),this.uiFacade.triggerEvent(this.container,"positionChanged",e)},__class__:alphaTab.AlphaTabApi};var system={Exception:function(){}};system.Exception.__name__=["system","Exception"],system.Exception.prototype={Exception_CsString:function(message){return this.message=message,this},__class__:system.Exception},alphaTab.AlphaTabException=$hx_exports.alphaTab.AlphaTabException=function(){system.Exception.call(this)},alphaTab.AlphaTabException.__name__=["alphaTab","AlphaTabException"],alphaTab.AlphaTabException.__super__=system.Exception,alphaTab.AlphaTabException.prototype=$extend(system.Exception.prototype,{AlphaTabException:function(message){return this.Exception_CsString(message),this},__class__:alphaTab.AlphaTabException}),alphaTab.CoreSettings=$hx_exports.alphaTab.CoreSettings=function(){this.includeNoteBounds=!1,this.useWorkers=!0,this.logLevel=2,this.engine="default",this.enableLazyLoading=!0,this.scriptFile=null,this.fontDirectory=null;var global=$global;if(global.document&&global.alphatab_root?(this.scriptFile=global.alphatab_root,this.scriptFile=alphaTab.CoreSettings.ensureFullUrl(this.scriptFile),this.scriptFile=alphaTab.CoreSettings.appendScriptName(this.scriptFile)):this.scriptFile=alphaTab.Environment.scriptFile,global.document&&global.alphatab_font)this.fontDirectory=global.alphatab_font,this.fontDirectory=alphaTab.CoreSettings.ensureFullUrl(this.fontDirectory);else{this.fontDirectory=this.scriptFile;var s=this.fontDirectory;if(null!=s&&0!=s.length){var this1=this.fontDirectory,this2=system.Convert.toUInt16(47),lastSlash=this1.lastIndexOf(String.fromCharCode(this2));0<=lastSlash&&(this.fontDirectory=HxOverrides.substr(this.fontDirectory,0,lastSlash)+"/Font/")}}},alphaTab.CoreSettings.__name__=["alphaTab","CoreSettings"],alphaTab.CoreSettings.ensureFullUrl=function(relativeUrl){var global=$global;if(StringTools.startsWith(relativeUrl,"http")||StringTools.startsWith(relativeUrl,"https")||StringTools.startsWith(relativeUrl,"file"))return relativeUrl;var root="";root+=Std.string(global.location.protocol),root+=Std.string("//"),global.location.hostname&&(root+=Std.string(global.location.hostname)),global.location.port&&(root+=Std.string(":"),root+=Std.string(global.location.port));var directory=global.location.pathname.split("/").slice(0,-1).join("/");return 0<directory.length&&(StringTools.startsWith(directory,"/")||(root+=Std.string("/")),root+=Std.string(directory)),StringTools.startsWith(relativeUrl,"/")||(root+=Std.string("/")),root+=Std.string(relativeUrl)},alphaTab.CoreSettings.appendScriptName=function(url){return null==url||0==url.length||StringTools.endsWith(url,".js")||(StringTools.endsWith(url,"/")||(url+="/"),url+="AlphaTab.js"),url},alphaTab.CoreSettings.toJson=function(obj){var json={};return obj.fillToJson(json),json},alphaTab.CoreSettings.fromJson=function(json){if(null==json)return null;var obj=new alphaTab.CoreSettings;return obj.fillFromJson(json),obj},alphaTab.CoreSettings.prototype={fillToJson:function(json){json.scriptFile=this.scriptFile,json.fontDirectory=this.fontDirectory,json.enableLazyLoading=this.enableLazyLoading,json.engine=this.engine,json.logLevel=alphaTab.util._LogLevel.LogLevel_Impl_.toJson(this.logLevel),json.useWorkers=this.useWorkers,json.includeNoteBounds=this.includeNoteBounds},fillFromJson:function(json){if(null!=json)for(var $k in json)this.setProperty($k.toLowerCase(),json[$k])},setProperty:function(property,value){switch(property){case"enablelazyloading":return this.enableLazyLoading=value,!0;case"engine":return this.engine=value,!0;case"fontdirectory":return this.fontDirectory=value,!0;case"includenotebounds":return this.includeNoteBounds=value,!0;case"loglevel":return this.logLevel=alphaTab.util._LogLevel.LogLevel_Impl_.fromJson(value),!0;case"scriptfile":return this.scriptFile=value,!0;case"useworkers":return this.useWorkers=value,!0}return!1},__class__:alphaTab.CoreSettings},alphaTab.DisplaySettings=$hx_exports.alphaTab.DisplaySettings=function(){this.resources=new alphaTab.RenderingResources,this.barCountPerPartial=10,this.barCount=-1,this.startBar=1,this.barsPerRow=-1,this.staveProfile=0,this.layoutMode=0,this.stretchForce=1,this.scale=1,this.padding=null},alphaTab.DisplaySettings.__name__=["alphaTab","DisplaySettings"],alphaTab.DisplaySettings.toJson=function(obj){var json={};return obj.fillToJson(json),json},alphaTab.DisplaySettings.fromJson=function(json){if(null==json)return null;var obj=new alphaTab.DisplaySettings;return obj.fillFromJson(json),obj},alphaTab.DisplaySettings.prototype={fillToJson:function(json){json.scale=this.scale,json.stretchForce=this.stretchForce,json.layoutMode=alphaTab._LayoutMode.LayoutMode_Impl_.toJson(this.layoutMode),json.staveProfile=alphaTab._StaveProfile.StaveProfile_Impl_.toJson(this.staveProfile),json.barsPerRow=this.barsPerRow,json.startBar=this.startBar,json.barCount=this.barCount,json.barCountPerPartial=this.barCountPerPartial,null==json.resources?json.resources=alphaTab.RenderingResources.toJson(this.resources):this.resources.fillToJson(json.resources),json.padding=null==this.padding?null:this.padding.slice()},fillFromJson:function(json){if(null!=json)for(var $k in json)this.setProperty($k.toLowerCase(),json[$k])},setProperty:function(property,value){switch(property){case"barcount":return this.barCount=value,!0;case"barcountperpartial":return this.barCountPerPartial=value,!0;case"barsperrow":return this.barsPerRow=value,!0;case"layoutmode":return this.layoutMode=alphaTab._LayoutMode.LayoutMode_Impl_.fromJson(value),!0;case"padding":return this.padding=null==value?null:value.slice(),!0;case"scale":return this.scale=value,!0;case"startbar":return this.startBar=value,!0;case"staveprofile":return this.staveProfile=alphaTab._StaveProfile.StaveProfile_Impl_.fromJson(value),!0;case"stretchforce":return this.stretchForce=value,!0}if(alphaTab.platform.Platform.equalsAny(property,["resources"]))return null==this.resources?this.resources=alphaTab.RenderingResources.fromJson(value):this.resources.fillFromJson(value),!0;var partialMatch=alphaTab.platform.Platform.findStartsWith(property,["resources"]);return!(null==partialMatch||(null==this.resources&&(this.resources=new alphaTab.RenderingResources),!this.resources.setProperty(HxOverrides.substr(property,partialMatch.length,null),value)))},__class__:alphaTab.DisplaySettings},alphaTab.platform={},alphaTab.platform.ICanvas=function(){},alphaTab.platform.ICanvas.__name__=["alphaTab","platform","ICanvas"],alphaTab.platform.ICanvas.prototype={__class__:alphaTab.platform.ICanvas},alphaTab.platform.svg={},alphaTab.platform.svg.SvgCanvas=function(){this.Buffer=null,this._currentPath=null,this._currentPathIsEmpty=!1,this.set_color(null),this.set_lineWidth(0),this.set_font(null),this.set_textAlign(0),this.set_textBaseline(0),this.set_settings(null);this._currentPath="",this._currentPathIsEmpty=!0,this.set_color(new alphaTab.platform.model.Color(255,255,255,255)),this.set_lineWidth(1),this.set_font(new alphaTab.platform.model.Font("Arial",10,0)),this.set_textAlign(0),this.set_textBaseline(0)},alphaTab.platform.svg.SvgCanvas.__name__=["alphaTab","platform","svg","SvgCanvas"],alphaTab.platform.svg.SvgCanvas.__interfaces__=[alphaTab.platform.ICanvas],alphaTab.platform.svg.SvgCanvas.prototype={get_color:function(){return this.__Color},set_color:function(value){return this.__Color=value},get_lineWidth:function(){return this.__LineWidth},set_lineWidth:function(value){return this.__LineWidth=value},get_font:function(){return this.__Font},set_font:function(value){return this.__Font=value},get_textAlign:function(){return this.__TextAlign},set_textAlign:function(value){return this.__TextAlign=value},get_textBaseline:function(){return this.__TextBaseline},set_textBaseline:function(value){return this.__TextBaseline=value},get_settings:function(){return this.__Settings},set_settings:function(value){return this.__Settings=value},beginRender:function(width,height){this.Buffer="",this.Buffer+=Std.string('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'),this.Buffer+=Std.string(width),this.Buffer+=Std.string('px" height="');var s=system.Convert.toInt32_Single(height);this.Buffer+=Std.string(s),this.Buffer+=Std.string('px" class="at-surface-svg">\n');this._currentPath="",this._currentPathIsEmpty=!0},beginGroup:function(identifier){this.Buffer+=Std.string('<g class="'+identifier+'">')},endGroup:function(){this.Buffer+=Std.string("</g>")},endRender:function(){return this.Buffer+=Std.string("</svg>"),this.Buffer},fillRect:function(x,y,w,h){if(0<w){var s='<rect x="'+Std.string(+system.Convert.toInt32_Single(x))+'" y="'+Std.string(+system.Convert.toInt32_Single(y))+'" width="'+Std.string(w)+'" height="'+Std.string(h)+'" fill="'+this.get_color().rgba+'" />\n';this.Buffer+=Std.string(s)}},strokeRect:function(x,y,w,h){var s='<rect x="'+Std.string(+system.Convert.toInt32_Single(x))+'" y="'+Std.string(+system.Convert.toInt32_Single(y))+'" width="'+Std.string(w)+'" height="'+Std.string(h)+'" stroke="'+this.get_color().rgba+'"';if(this.Buffer+=Std.string(s),1!=this.get_lineWidth()){var s1=' stroke-width="'+Std.string(this.get_lineWidth())+'"';this.Buffer+=Std.string(s1)}this.Buffer+=Std.string(' fill="transparent" />\n')},beginPath:function(){},closePath:function(){this._currentPath+=Std.string(" z")},moveTo:function(x,y){this._currentPath+=Std.string(" M"+Std.string(+x)+","+Std.string(+y))},lineTo:function(x,y){this._currentPathIsEmpty=!1,this._currentPath+=Std.string(" L"+Std.string(+x)+","+Std.string(+y))},quadraticCurveTo:function(cpx,cpy,x,y){this._currentPathIsEmpty=!1,this._currentPath+=Std.string(" Q"+Std.string(cpx)+","+Std.string(cpy)+","+Std.string(x)+","+Std.string(y))},bezierCurveTo:function(cp1X,cp1Y,cp2X,cp2Y,x,y){this._currentPathIsEmpty=!1,this._currentPath+=Std.string(" C"+Std.string(cp1X)+","+Std.string(cp1Y)+","+Std.string(cp2X)+","+Std.string(cp2Y)+","+Std.string(x)+","+Std.string(y))},fillCircle:function(x,y,radius){this._currentPathIsEmpty=!1,this._currentPath+=Std.string(" M"+Std.string(x-radius)+","+Std.string(y)+" A1,1 0 0,0 "+Std.string(x+radius)+","+Std.string(y)+" A1,1 0 0,0 "+Std.string(x-radius)+","+Std.string(y)+" z"),this.fill()},fill:function(){if(!this._currentPathIsEmpty){if(this.Buffer+=Std.string('<path d="'+this._currentPath+'"'),"#000000"!=this.get_color().rgba){var s=' fill="'+this.get_color().rgba+'"';this.Buffer+=Std.string(s)}this.Buffer+=Std.string(' style="stroke: none"/>')}this._currentPath="",this._currentPathIsEmpty=!0},stroke:function(){if(!this._currentPathIsEmpty){var s='<path d="'+this._currentPath+'" stroke="'+this.get_color().rgba+'"';1!=this.get_lineWidth()&&(s=s+(' stroke-width="'+Std.string(this.get_lineWidth()))+'"'),s+=' style="fill: none" />',this.Buffer+=Std.string(s)}this._currentPath="",this._currentPathIsEmpty=!0},fillText:function(text,x,y){if(""!=text){var s='<text x="'+Std.string(system.Convert.toInt32_Single(x))+'" y="'+Std.string(system.Convert.toInt32_Single(y))+'" style="stroke: none; font:'+this.get_font().toCssString(this.get_settings().display.scale)+'"  dominant-baseline="'+this.getSvgBaseLine()+'"';"#000000"!=this.get_color().rgba&&(s=s+(' fill="'+this.get_color().rgba)+'"'),0!=this.get_textAlign()&&(s=s+(' text-anchor="'+this.getSvgTextAlignment(this.get_textAlign()))+'"'),s=s+">"+text+"</text>",this.Buffer+=Std.string(s)}},getSvgTextAlignment:function(textAlign){switch(textAlign){case 0:return"start";case 1:return"middle";case 2:return"end"}return""},getSvgBaseLine:function(){switch(this.get_textBaseline()){case 0:return"hanging";case 1:return"middle";case 2:return"bottom";default:return""}},measureText:function(text){return null==text||0==text.length?0:alphaTab.platform.svg.FontSizes.measureString(text,this.get_font().family,this.get_font().size,this.get_font().style)},fillMusicFontSymbol:function(x,y,scale,symbol,centerAtPosition){throw null==centerAtPosition&&(centerAtPosition=!1),new js._Boot.HaxeError("abstract")},fillMusicFontSymbols:function(x,y,scale,symbols,centerAtPosition){throw null==centerAtPosition&&(centerAtPosition=!1),new js._Boot.HaxeError("abstract")},onRenderFinished:function(){return null},beginRotate:function(centerX,centerY,angle){this.Buffer+=Std.string('<g transform="translate('+Std.string(centerX)+" ,"+Std.string(centerY)+") rotate( "+Std.string(angle)+')">')},endRotate:function(){this.Buffer+=Std.string("</g>")},__class__:alphaTab.platform.svg.SvgCanvas},alphaTab.platform.svg.CssFontSvgCanvas=function(){alphaTab.platform.svg.SvgCanvas.call(this)},alphaTab.platform.svg.CssFontSvgCanvas.__name__=["alphaTab","platform","svg","CssFontSvgCanvas"],alphaTab.platform.svg.CssFontSvgCanvas.__super__=alphaTab.platform.svg.SvgCanvas,alphaTab.platform.svg.CssFontSvgCanvas.prototype=$extend(alphaTab.platform.svg.SvgCanvas.prototype,{fillMusicFontSymbol:function(x,y,scale,symbol,centerAtPosition){null==centerAtPosition&&(centerAtPosition=!1),-1!=symbol&&this.fillMusicFontSymbolText(x,y,scale,"&#"+Std.string(symbol)+";",centerAtPosition)},fillMusicFontSymbols:function(x,y,scale,symbols,centerAtPosition){null==centerAtPosition&&(centerAtPosition=!1);for(var s="",symbol=HxOverrides.iter(symbols);symbol.hasNext();){var symbol1=symbol.next();-1!=symbol1&&(s=s+("&#"+Std.string(symbol1))+";")}this.fillMusicFontSymbolText(x,y,scale,s,centerAtPosition)},fillMusicFontSymbolText:function(x,y,scale,symbols,centerAtPosition){null==centerAtPosition&&(centerAtPosition=!1);var s='<g transform="translate('+Std.string(+system.Convert.toInt32_Single(x))+" "+Std.string(+system.Convert.toInt32_Single(y))+')" class="at" ><text';if(this.Buffer+=Std.string(s),this.Buffer+=Std.string(1!=scale?' style="font-size: '+Std.string(100*scale)+'%; stroke:none"':' style="stroke:none"'),"#000000"!=this.get_color().rgba){var s1=' fill="'+this.get_color().rgba+'"';this.Buffer+=Std.string(s1)}if(centerAtPosition){var s2=' text-anchor="'+this.getSvgTextAlignment(1)+'"';this.Buffer+=Std.string(s2)}this.Buffer+=Std.string(">"+symbols+"</text></g>")},__class__:alphaTab.platform.svg.CssFontSvgCanvas}),alphaTab.platform.model={},alphaTab.platform.model.Color=$hx_exports.alphaTab.platform.model.Color=function(r,g,b,a){null==a&&(a=255),this.raw=0,this.rgba=null,this.raw=a<<24|r<<16|g<<8|b,this.updateRgba()},alphaTab.platform.model.Color.__name__=["alphaTab","platform","model","Color"],alphaTab.platform.model.Color.fromJson=function(json){if(null==json)return null;if(js.Boot.__instanceof(json,alphaTab.platform.model.Color))return json;switch(typeof json){case"number":var c=new alphaTab.platform.model.Color(0,0,0,0),raw=json;return c.raw=system.Convert.toInt32_Double(raw),c.updateRgba(),c;case"string":var s=json;if(StringTools.startsWith(s,"#")){if(4==s.length){var s1=HxOverrides.substr(s,1,1),tmp=system.Convert.toUInt8(17*parseInt(s1,16)),s2=HxOverrides.substr(s,2,1),tmp1=system.Convert.toUInt8(17*parseInt(s2,16)),s3=HxOverrides.substr(s,3,1);return new alphaTab.platform.model.Color(tmp,tmp1,system.Convert.toUInt8(17*parseInt(s3,16)),255)}if(5==s.length){var s4=HxOverrides.substr(s,1,1),tmp2=system.Convert.toUInt8(17*parseInt(s4,16)),s5=HxOverrides.substr(s,2,1),tmp3=system.Convert.toUInt8(17*parseInt(s5,16)),s6=HxOverrides.substr(s,3,1),tmp4=system.Convert.toUInt8(17*parseInt(s6,16)),s7=HxOverrides.substr(s,4,1);return new alphaTab.platform.model.Color(tmp2,tmp3,tmp4,system.Convert.toUInt8(17*parseInt(s7,16)))}if(7==s.length){var s8=HxOverrides.substr(s,1,2),tmp5=system.Convert.toUInt8(parseInt(s8,16)),s9=HxOverrides.substr(s,3,2),tmp6=system.Convert.toUInt8(parseInt(s9,16)),s10=HxOverrides.substr(s,5,2);return new alphaTab.platform.model.Color(tmp5,tmp6,system.Convert.toUInt8(parseInt(s10,16)),255)}if(9==s.length){var s11=HxOverrides.substr(s,1,2),tmp7=system.Convert.toUInt8(parseInt(s11,16)),s12=HxOverrides.substr(s,3,2),tmp8=system.Convert.toUInt8(parseInt(s12,16)),s13=HxOverrides.substr(s,5,2),tmp9=system.Convert.toUInt8(parseInt(s13,16)),s14=HxOverrides.substr(s,7,2);return new alphaTab.platform.model.Color(tmp7,tmp8,tmp9,system.Convert.toUInt8(parseInt(s14,16)))}}else if(StringTools.startsWith(s,"rgba")||StringTools.startsWith(s,"rgb")){var start=s.indexOf("("),end=s.lastIndexOf(")");if(-1==start||-1==end)throw new js._Boot.HaxeError((new alphaTab.utils.SerializationException).SerializationException("No values specified for rgb/rgba function"));var a=HxOverrides.substr(s,start+1,end-start-1),this2=system.Convert.toUInt16(44),numbers=system._CsString.CsString_Impl_.split_CharArray(a,[this2]);if(3==numbers.length)return new alphaTab.platform.model.Color(system.Convert.toUInt8(alphaTab.platform.Platform.parseIntMinValue(numbers[0])),system.Convert.toUInt8(alphaTab.platform.Platform.parseIntMinValue(numbers[1])),system.Convert.toUInt8(alphaTab.platform.Platform.parseIntMinValue(numbers[2])),255);if(4==numbers.length)return new alphaTab.platform.model.Color(system.Convert.toUInt8(alphaTab.platform.Platform.parseIntMinValue(numbers[0])),system.Convert.toUInt8(alphaTab.platform.Platform.parseIntMinValue(numbers[1])),system.Convert.toUInt8(alphaTab.platform.Platform.parseIntMinValue(numbers[2])),system.Convert.toUInt8(system.Convert.toInt32_Single(255*parseFloat(numbers[3]))))}}throw new js._Boot.HaxeError((new alphaTab.utils.SerializationException).SerializationException("Unsupported format for color"))},alphaTab.platform.model.Color.toJson=function(obj){return obj.raw},alphaTab.platform.model.Color.random=function(opacity){return null==opacity&&(opacity=100),new alphaTab.platform.model.Color(system.Convert.toUInt8(alphaTab.platform.Platform.random(255)),system.Convert.toUInt8(alphaTab.platform.Platform.random(255)),system.Convert.toUInt8(alphaTab.platform.Platform.random(255)),opacity)},alphaTab.platform.model.Color.prototype={updateRgba:function(){255==this.get_a()?this.rgba="#"+alphaTab.platform.Platform.toHexString(this.get_r(),2)+alphaTab.platform.Platform.toHexString(this.get_g(),2)+alphaTab.platform.Platform.toHexString(this.get_b(),2):this.rgba="rgba("+Std.string(this.get_r())+","+Std.string(this.get_g())+","+Std.string(this.get_b())+","+Std.string(this.get_a()/255)+")"},get_a:function(){return system.Convert.toUInt8(this.raw>>24&255)},get_r:function(){return system.Convert.toUInt8(this.raw>>16&255)},get_g:function(){return system.Convert.toUInt8(this.raw>>8&255)},get_b:function(){return system.Convert.toUInt8(255&this.raw)},__class__:alphaTab.platform.model.Color},alphaTab.platform.model.Font=$hx_exports.alphaTab.platform.model.Font=function(family,size,style){null==style&&(style=0),this._css=null,this._cssScale=0,this.family=null,this.size=0,this.style=0,this.family=family,this.size=size,this.style=style,this._css=this.toCssString(1)},alphaTab.platform.model.Font.__name__=["alphaTab","platform","model","Font"],alphaTab.platform.model.Font.fromJson=function(value){if(null==value)return null;if(js.Boot.__instanceof(value,alphaTab.platform.model.Font))return value;if("object"==typeof value&&value.family)return new alphaTab.platform.model.Font(value.family,value.size,js.Boot.__cast(value.style,Int));if("string"==typeof value&&$global.document){var fontText=value,el=window.document.createElement("span");el.setAttribute("style","font: "+fontText);var style=el.style,s=style.fontFamily;null!=s&&0!=s.length||(style.fontFamily="sans-serif");var family=style.fontFamily;(StringTools.startsWith(family,"'")&&StringTools.endsWith(family,"'")||StringTools.startsWith(family,'"')&&StringTools.endsWith(family,'"'))&&(family=HxOverrides.substr(family,1,family.length-2));var fontSize,fontSizeString=style.fontSize.toLowerCase();switch(fontSizeString){case"large":case"larger":fontSize=18;break;case"medium":fontSize=16;break;case"small":case"smaller":fontSize=13;break;case"x-large":fontSize=24;break;case"x-small":fontSize=10;break;case"xx-large":fontSize=32;break;case"xx-small":fontSize=7;break;default:try{if(StringTools.endsWith(fontSizeString,"em")){var s1=HxOverrides.substr(fontSizeString,0,fontSizeString.length-2);fontSize=16*parseFloat(s1)}else if(StringTools.endsWith(fontSizeString,"pt")){var s2=HxOverrides.substr(fontSizeString,0,fontSizeString.length-2);fontSize=16*parseFloat(s2)/12}else if(StringTools.endsWith(fontSizeString,"px")){var s3=HxOverrides.substr(fontSizeString,0,fontSizeString.length-2);fontSize=parseFloat(s3)}else fontSize=12}catch(__e){fontSize=12}}var fontStyle=0;switch("italic"==style.fontStyle&&(fontStyle|=2),style.fontWeight.toLowerCase()){case"lighter":case"normal":break;default:fontStyle|=1}return new alphaTab.platform.model.Font(family,fontSize,fontStyle)}throw new js._Boot.HaxeError((new alphaTab.utils.SerializationException).SerializationException("Unsupported value for Font"))},alphaTab.platform.model.Font.toJson=function(font){var json={};return json.family=font.family,json.size=font.size,json.style=font.style,json},alphaTab.platform.model.Font.prototype={get_isBold:function(){return 0!=(1&this.style)},get_isItalic:function(){return 0!=(2&this.style)},clone:function(){return new alphaTab.platform.model.Font(this.family,this.size,this.style)},toCssString:function(scale){if(null==this._css||!(Math.abs(scale-this._cssScale)<.01)){var buf="";this.get_isBold()&&(buf+=Std.string("bold ")),this.get_isItalic()&&(buf+=Std.string("italic ")),buf+=Std.string(this.size*scale),buf+=Std.string("px "),buf+=Std.string("'"),buf+=Std.string(this.family),buf+=Std.string("'"),this._css=buf,this._cssScale=scale}return this._css},__class__:alphaTab.platform.model.Font},alphaTab.RenderEngineFactory=function(supportsWorkers,canvas){this.supportsWorkers=!1,this.createCanvas=null,this.supportsWorkers=supportsWorkers,this.createCanvas=canvas},alphaTab.RenderEngineFactory.__name__=["alphaTab","RenderEngineFactory"],alphaTab.RenderEngineFactory.prototype={__class__:alphaTab.RenderEngineFactory},alphaTab.platform.javaScript={},alphaTab.platform.javaScript.Html5Canvas=function(){this._measureCanvas=null,this._measureContext=null,this._canvas=null,this._context=null,this._color=null,this._font=null,this._musicFont=null,this._lineWidth=0,this.set_settings(null),this._color=new alphaTab.platform.model.Color(0,0,0,255);var fontElement=window.document.createElement("span");fontElement.classList.add("at"),window.document.body.appendChild(fontElement);var style=window.getComputedStyle(fontElement),family=style.fontFamily;(StringTools.startsWith(family,'"')||StringTools.startsWith(family,"'"))&&(family=HxOverrides.substr(family,1,family.length-2));var s=style.fontSize;this._musicFont=new alphaTab.platform.model.Font(family,parseFloat(s),0),this._measureCanvas=js.Boot.__cast(window.document.createElement("canvas"),HTMLCanvasElement),this._measureCanvas.width=10,this._measureCanvas.height=10,this._measureCanvas.style.width="10px",this._measureCanvas.style.height="10px",this._measureContext=this._measureCanvas.getContext("2d"),this._measureContext.textBaseline="top"},alphaTab.platform.javaScript.Html5Canvas.__name__=["alphaTab","platform","javaScript","Html5Canvas"],alphaTab.platform.javaScript.Html5Canvas.__interfaces__=[alphaTab.platform.ICanvas],alphaTab.platform.javaScript.Html5Canvas.prototype={get_settings:function(){return this.__Settings},set_settings:function(value){return this.__Settings=value},onRenderFinished:function(){return null},beginRender:function(width,height){this._canvas=js.Boot.__cast(window.document.createElement("canvas"),HTMLCanvasElement);var tmp=system.Convert.toInt32_Single(width);this._canvas.width=tmp;var tmp1=system.Convert.toInt32_Single(height);this._canvas.height=tmp1,this._canvas.style.width=Std.string(width)+"px",this._canvas.style.height=Std.string(height)+"px",this._context=this._canvas.getContext("2d"),this._context.textBaseline="top",this._context.lineWidth=this._lineWidth},endRender:function(){var result=this._canvas;return this._canvas=null,result},get_color:function(){return this._color},set_color:function(value){return this._color.rgba==value.rgba||(this._color=value,this._context.strokeStyle=value.rgba,this._context.fillStyle=value.rgba),this.get_color()},get_lineWidth:function(){return this._lineWidth},set_lineWidth:function(value){return this._lineWidth=value,null!=this._context&&(this._context.lineWidth=value),this.get_lineWidth()},fillRect:function(x,y,w,h){0<w&&this._context.fillRect(+system.Convert.toInt32_Single(x),+system.Convert.toInt32_Single(y),w,h)},strokeRect:function(x,y,w,h){this._context.strokeRect(+x,+y,w,h)},beginPath:function(){this._context.beginPath()},closePath:function(){this._context.closePath()},moveTo:function(x,y){this._context.moveTo(+x,+y)},lineTo:function(x,y){this._context.lineTo(+x,+y)},quadraticCurveTo:function(cpx,cpy,x,y){this._context.quadraticCurveTo(cpx,cpy,x,y)},bezierCurveTo:function(cp1x,cp1y,cp2x,cp2y,x,y){this._context.bezierCurveTo(cp1x,cp1y,cp2x,cp2y,x,y)},fillCircle:function(x,y,radius){this._context.beginPath(),this._context.arc(x,y,radius,0,6.28318530717958,!0),this.fill()},fill:function(){this._context.fill()},stroke:function(){this._context.stroke()},get_font:function(){return this._font},set_font:function(value){if(this._font=value,null!=this._context){var tmp=value.toCssString(this.get_settings().display.scale);this._context.font=tmp}var tmp1=value.toCssString(this.get_settings().display.scale);return this._measureContext.font=tmp1,this.get_font()},get_textAlign:function(){switch(this._context.textAlign){case"center":return 1;case"left":return 0;case"right":return 2;default:return 0}},set_textAlign:function(value){switch(value){case 0:this._context.textAlign="left";break;case 1:this._context.textAlign="center";break;case 2:this._context.textAlign="right"}return this.get_textAlign()},get_textBaseline:function(){switch(this._context.textBaseline){case"bottom":return 2;case"middle":return 1;case"top":default:return 0}},set_textBaseline:function(value){switch(value){case 0:this._context.textBaseline="top";break;case 1:this._context.textBaseline="middle";break;case 2:this._context.textBaseline="bottom"}return this.get_textBaseline()},beginGroup:function(identifier){},endGroup:function(){},fillText:function(text,x,y){x=system.Convert.toInt32_Single(x),y=system.Convert.toInt32_Single(y),this._context.fillText(text,x,y)},measureText:function(text){return js.Boot.__cast(this._measureContext.measureText(text).width,Float)},fillMusicFontSymbol:function(x,y,scale,symbol,centerAtPosition){null==centerAtPosition&&(centerAtPosition=!1),-1!=symbol&&this.fillMusicFontSymbolText(x,y,scale,String.fromCharCode(symbol),centerAtPosition)},fillMusicFontSymbols:function(x,y,scale,symbols,centerAtPosition){null==centerAtPosition&&(centerAtPosition=!1);for(var s="",symbol=HxOverrides.iter(symbols);symbol.hasNext();){var symbol1=symbol.next();-1!=symbol1&&(s+=String.fromCharCode(symbol1))}this.fillMusicFontSymbolText(x,y,scale,s,centerAtPosition)},fillMusicFontSymbolText:function(x,y,scale,symbols,centerAtPosition){null==centerAtPosition&&(centerAtPosition=!1),x=system.Convert.toInt32_Single(x),y=system.Convert.toInt32_Single(y);var textAlign=this._context.textAlign,baseLine=this._context.textBaseline,font=this._context.font,tmp=this._musicFont.toCssString(scale);this._context.font=tmp,this._context.textBaseline="middle",centerAtPosition&&(this._context.textAlign="center"),this._context.fillText(symbols,x,y),this._context.textBaseline=baseLine,this._context.font=font,this._context.textAlign=textAlign},beginRotate:function(centerX,centerY,angle){this._context.save(),this._context.translate(centerX,centerY);this._context.rotate(3.14159265358979*angle/180)},endRotate:function(){this._context.restore()},__class__:alphaTab.platform.javaScript.Html5Canvas},alphaTab.platform.javaScript.JQueryAlphaTab=function(){this._initListeners=[]},alphaTab.platform.javaScript.JQueryAlphaTab.__name__=["alphaTab","platform","javaScript","JQueryAlphaTab"],alphaTab.platform.javaScript.JQueryAlphaTab.Restore=function(selector){$(selector).empty().removeData("alphaTab")},alphaTab.platform.javaScript.JQueryAlphaTab.prototype={exec:function(element,method,args){if("string"!=typeof method&&(args=[method],method="init"),95==system.Convert.toUInt16(HxOverrides.cca(method,0))||"Exec"==method)return null;var jElement=$(element),context=jElement.data("alphaTab");if("destroy"==method&&!context)return null;if("init"!=method&&!context)throw new Error("alphaTab not initialized");var apiMethod=this[method];if(apiMethod){var realArgs=[jElement,context].concat(args);return apiMethod.apply(this,realArgs)}return alphaTab.util.Logger.error("Api","Method '"+method+"' does not exist on jQuery.alphaTab",null),null},init:function(element,context,options){if(!context){context=new alphaTab.platform.javaScript.AlphaTabApi(element[0],options),element.data("alphaTab",context);for(var listener=$iterator(this._initListeners)();listener.hasNext();){listener.next()(element,context,options)}}},destroy:function(element,context){element.removeData("alphaTab"),context.destroy()},print:function(element,context,width){context.print(width)},load:function(element,context,data,tracks){return context.load(data,tracks)},render:function(element,context){context.render()},renderScore:function(element,context,score,tracks){context.renderScore(score,tracks)},renderTracks:function(element,context,tracks){context.renderTracks(tracks)},invalidate:function(element,context){context.render()},tex:function(element,context,tex,tracks){context.tex(tex,tracks)},muteTrack:function(element,context,tracks,mute){context.changeTrackMute(tracks,mute)},soloTrack:function(element,context,tracks,solo){context.changeTrackSolo(tracks,solo)},trackVolume:function(element,context,tracks,volume){context.changeTrackVolume(tracks,volume)},loadSoundFont:function(element,context,value){context.loadSoundFont(value)},pause:function(element,context){context.pause()},play:function(element,context){return context.play()},playPause:function(element,context){context.playPause()},stop:function(element,context){context.stop()},api:function(element,context){return context},player:function(element,context){return context.player},isReadyForPlayback:function(element,context){return context.get_isReadyForPlayback()},playerState:function(element,context){return context.get_playerState()},masterVolume:function(element,context,masterVolume){return"number"==typeof masterVolume&&context.set_masterVolume(masterVolume),context.get_masterVolume()},metronomeVolume:function(element,context,metronomeVolume){return"number"==typeof metronomeVolume&&context.set_metronomeVolume(metronomeVolume),context.get_metronomeVolume()},playbackSpeed:function(element,context,playbackSpeed){return"number"==typeof playbackSpeed&&context.set_playbackSpeed(playbackSpeed),context.get_playbackSpeed()},tickPosition:function(element,context,tickPosition){return"number"==typeof tickPosition&&context.set_tickPosition(tickPosition),context.get_tickPosition()},timePosition:function(element,context,timePosition){return"number"==typeof timePosition&&context.set_timePosition(timePosition),context.get_timePosition()},loop:function(element,context,loop){return"boolean"==typeof loop&&context.set_isLooping(loop),context.get_isLooping()},renderer:function(element,context){return context.renderer},score:function(element,context){return context.score},settings:function(element,context){return context.settings},tracks:function(element,context){return context.tracks},_oninit:function(listener){this._initListeners.push(listener)},__class__:alphaTab.platform.javaScript.JQueryAlphaTab},alphaTab.util={},alphaTab.util.Logger=function(){},alphaTab.util.Logger.__name__=["alphaTab","util","Logger"],alphaTab.util.Logger.debug=function(category,msg,details){alphaTab.util.Logger.log(1,category,msg,details)},alphaTab.util.Logger.warning=function(category,msg,details){alphaTab.util.Logger.log(3,category,msg,details)},alphaTab.util.Logger.info=function(category,msg,details){alphaTab.util.Logger.log(2,category,msg,details)},alphaTab.util.Logger.error=function(category,msg,details){alphaTab.util.Logger.log(4,category,msg,details)},alphaTab.util.Logger.log=function(logLevel,category,msg,details){logLevel<alphaTab.util.Logger.logLevel||0==alphaTab.util.Logger.logLevel||alphaTab.platform.Platform.log(logLevel,category,msg,details)},alphaTab.util.Logger.prototype={__class__:alphaTab.util.Logger},alphaTab.platform.Platform=function(){},alphaTab.platform.Platform.__name__=["alphaTab","platform","Platform"],alphaTab.platform.Platform.parseFloat=function(s){return parseFloat(s)},alphaTab.platform.Platform.parseHex=function(s){return parseInt(s,16)},alphaTab.platform.Platform.getCallerName=function(){return arguments.callee.caller.caller.name},alphaTab.platform.Platform.equalsAny=function(value,values){for(var x=HxOverrides.iter(values);x.hasNext();){if(value==x.next())return!0}return!1},alphaTab.platform.Platform.findStartsWith=function(value,values){for(var x=HxOverrides.iter(values);x.hasNext();){var x1=x.next();if(StringTools.startsWith(value,x1))return x1}return null},alphaTab.platform.Platform.log=function(logLevel,category,msg,details){msg="[AlphaTab]["+category+"] "+msg;var $console=$global.console;switch(logLevel){case 0:break;case 1:msg="[Debug]"+msg,$console.debug(msg,details);break;case 2:msg="[Info]"+msg,$console.info(msg,details);break;case 3:$console.warn(msg,details);break;case 4:var stack=haxe.CallStack.toString(haxe.CallStack.callStack());$console.error(msg,stack,details)}},alphaTab.platform.Platform.newObject=function(){return{}},alphaTab.platform.Platform.jsonExists=function(json,property){return json&&property in json},alphaTab.platform.Platform.jsonKeys=function(json){return Object.keys(json)},alphaTab.platform.Platform.log2=function(f){return Math.log2(f)},alphaTab.platform.Platform.parseIntMinValue=function(s){var val=parseInt(s);return isNaN(val)?-2147483648:val},alphaTab.platform.Platform.cloneArray=function(array){return new Int32Array(array)},alphaTab.platform.Platform.blockCopy=function(src,srcOffset,dst,dstOffset,count){dst.set(src.subarray(srcOffset,srcOffset+count),dstOffset)},alphaTab.platform.Platform.stringFromCharCode=function(c){return String.fromCharCode(c)},alphaTab.platform.Platform.readSignedByte=function(readable){var n=readable.readByte();return 128<=n?system.Convert.toInt8(n-256):system.Convert.toInt8(n)},alphaTab.platform.Platform.toString=function(data,encoding){if($global.textDecoder){var detectedEncoding=alphaTab.platform.Platform.detectEncoding(data);return null!=detectedEncoding&&(encoding=detectedEncoding),null==encoding&&(encoding="utf-8"),new TextDecoder(encoding).decode(data)}for(var s="",i=0;i<data.length;){var c=data[i++];if(c<128){if(0==c)break;s+=String.fromCharCode(c)}else if(c<224)s+=String.fromCharCode((63&c)<<6|127&data[i++]);else if(c<240)s+=String.fromCharCode((31&c)<<12|(127&data[i++])<<6|127&data[i++]);else{var u=(15&c)<<18|(127&data[i++])<<12|(127&data[i++])<<6|127&data[i++];s+=String.fromCharCode(55232+(u>>18)),s+=String.fromCharCode(1023&u|56320)}}return s},alphaTab.platform.Platform.stringToByteArray=function(contents){for(var byteArray=new Uint8Array(contents.length),i=0;i<contents.length;){var this2=system.Convert.toUInt16(HxOverrides.cca(contents,i));byteArray[i]=system.Convert.toUInt8(this2),++i}return byteArray},alphaTab.platform.Platform.s4=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},alphaTab.platform.Platform.newGuid=function(){var lhs=alphaTab.platform.Platform.s4()+alphaTab.platform.Platform.s4(),this1=system.Convert.toUInt16(45),lhs1=lhs+String.fromCharCode(this1)+alphaTab.platform.Platform.s4(),this2=system.Convert.toUInt16(45),lhs2=lhs1+String.fromCharCode(this2)+alphaTab.platform.Platform.s4(),this3=system.Convert.toUInt16(45),lhs3=lhs2+String.fromCharCode(this3)+alphaTab.platform.Platform.s4(),this4=system.Convert.toUInt16(45);return lhs3+String.fromCharCode(this4)+alphaTab.platform.Platform.s4()+alphaTab.platform.Platform.s4()+alphaTab.platform.Platform.s4()},alphaTab.platform.Platform.member_Object_CsString1=function(s,name){return s[name]},alphaTab.platform.Platform.hasMember=function(s,name){return name in s},alphaTab.platform.Platform.member_Object_CsString_T1=function(s,name,value){return s[name]=value},alphaTab.platform.Platform.match=function(s,regex){return s.match(regex)},alphaTab.platform.Platform.isTruthy=function(o){return!!o},alphaTab.platform.Platform.isNaN=function(v){return isNaN(v)},alphaTab.platform.Platform.typeOf=function(o){return typeof o},alphaTab.platform.Platform.arrayBufferToByteArray=function(data){return new Uint8Array(data)},alphaTab.platform.Platform.toDouble=function(bytes){return new Float64Array(bytes.buffer)[0]},alphaTab.platform.Platform.toFloat=function(bytes){return new Float32Array(bytes.buffer)[0]},alphaTab.platform.Platform.clearIntArray=function(array){for(var i=0;i<array.length;)array[i]=0,++i},alphaTab.platform.Platform.clearShortArray=function(array){for(var i=0;i<array.length;)array[i]=0,++i},alphaTab.platform.Platform.random=function(max){var m=max;return Math.random()*m|0},alphaTab.platform.Platform.randomDouble=function(){return Math.random()},alphaTab.platform.Platform.get_supportsWebAudio=function(){return!!window.ScriptProcessorNode},alphaTab.platform.Platform.get_supportsWebWorkers=function(){return!!window.Worker},alphaTab.platform.Platform.get_forceFlash=function(){return!!window.ForceFlash},alphaTab.platform.Platform.get_supportsTextDecoder=function(){return!!$global.textDecoder},alphaTab.platform.Platform.arrayCopy_SingleArray_Int32_SingleArray_Int32_Int32=function(src,srcOffset,dst,dstOffset,count){dst.set(src.subarray(srcOffset,srcOffset+count),dstOffset)},alphaTab.platform.Platform.arrayCopy_Int32Array_Int32_Int32Array_Int32_Int32=function(src,srcOffset,dst,dstOffset,count){dst.set(src.subarray(srcOffset,srcOffset+count),dstOffset)},alphaTab.platform.Platform.arrayCopy_Int16Array_Int32_Int16Array_Int32_Int32=function(src,srcOffset,dst,dstOffset,count){dst.set(src.subarray(srcOffset,srcOffset+count),dstOffset)},alphaTab.platform.Platform.arrayCopy_ByteArray_Int32_ByteArray_Int32_Int32=function(src,srcOffset,dst,dstOffset,count){dst.set(src.subarray(srcOffset,srcOffset+count),dstOffset)},alphaTab.platform.Platform.arrayCopy_TArray_Int32_TArray_Int32_Int321=function(src,srcOffset,dst,dstOffset,count){for(var i=0;i<count;)dst[dstOffset+i]=src[srcOffset+i],++i},alphaTab.platform.Platform.reverse=function(array){array.reverse()},alphaTab.platform.Platform.getTypeName=function(obj){return Type.getClassName(null==obj?null:js.Boot.getClass(obj))},alphaTab.platform.Platform.throttle=function(action,delay){var timeoutId=0;return function(){window.clearTimeout(timeoutId),timeoutId=window.setTimeout(action,delay)}},alphaTab.platform.Platform.getCurrentMilliseconds=function(){return Date.now()},alphaTab.platform.Platform.isStringNumber=function(s,allowSign){if(null==allowSign&&(allowSign=!0),0==s.length)return!1;var c=system.Convert.toUInt16(HxOverrides.cca(s,0));return alphaTab.platform.Platform.isCharNumber(c,allowSign)},alphaTab.platform.Platform.isCharNumber=function(c,allowSign){return null==allowSign&&(allowSign=!0),!(!allowSign||45!=c)||48<=c&&c<=57},alphaTab.platform.Platform.isWhiteSpace=function(c){return 32==c||11==c||13==c||10==c||9==c},alphaTab.platform.Platform.isAlmostEqualTo=function(a,b){return Math.abs(a-b)<1e-5},alphaTab.platform.Platform.toHexString=function(n,digits){null==digits&&(digits=0);for(var s="";;){var this1=system.Convert.toUInt16(HxOverrides.cca("0123456789ABCDEF",15&n));if(s=String.fromCharCode(this1)+s,!(0<(n>>=4)))break}for(;s.length<digits;)s="0"+s;return s},alphaTab.platform.Platform.toUInt32=function(i){return system.Convert.toUInt32(i)},alphaTab.platform.Platform.toInt16=function(i){return system.Convert.toInt16(i)},alphaTab.platform.Platform.toUInt16=function(i){return system.Convert.toUInt16(i)},alphaTab.platform.Platform.toUInt8=function(i){return system.Convert.toUInt8(i)},alphaTab.platform.Platform.detectEncoding=function(data){return 2<data.length&&254==data[0]&&255==data[1]?"utf-16be":2<data.length&&255==data[0]&&254==data[1]?"utf-16le":4<data.length&&0==data[0]&&0==data[1]&&254==data[2]&&255==data[3]?"utf-32be":4<data.length&&255==data[0]&&254==data[1]&&0==data[2]&&0==data[3]?"utf-32le":null};var haxe={CallStack:function(){}};haxe.CallStack.__name__=["haxe","CallStack"],haxe.CallStack.getStack=function(e){if(null==e)return[];var oldValue=Error.prepareStackTrace;Error.prepareStackTrace=function(error,callsites){for(var stack=[],_g=0;_g<callsites.length;){var site=callsites[_g];++_g,null!=haxe.CallStack.wrapCallSite&&(site=haxe.CallStack.wrapCallSite(site));var method=null,fullName=site.getFunctionName();if(null!=fullName){var idx=fullName.lastIndexOf(".");if(0<=idx){var className=HxOverrides.substr(fullName,0,idx),methodName=HxOverrides.substr(fullName,idx+1,null);method=haxe.StackItem.Method(className,methodName)}}stack.push(haxe.StackItem.FilePos(method,site.getFileName(),site.getLineNumber()))}return stack};var a=haxe.CallStack.makeStack(e.stack);return Error.prepareStackTrace=oldValue,a},haxe.CallStack.callStack=function(){try{throw new Error}catch(e){e instanceof js._Boot.HaxeError&&(e=e.val);var a=haxe.CallStack.getStack(e);return a.shift(),a}},haxe.CallStack.toString=function(stack){for(var b=new StringBuf,_g=0;_g<stack.length;){var s=stack[_g];++_g,b.b+="\nCalled from ",haxe.CallStack.itemToString(b,s)}return b.b},haxe.CallStack.itemToString=function(b,s){switch(s[1]){case 0:b.b+="a C function";break;case 1:var m=s[2];b.b+="module ",b.b+=null==m?"null":""+m;break;case 2:var line=s[4],file=s[3],s1=s[2];null!=s1&&(haxe.CallStack.itemToString(b,s1),b.b+=" ("),b.b+=null==file?"null":""+file,b.b+=" line ",b.b+=null==line?"null":""+line,null!=s1&&(b.b+=")");break;case 3:var meth=s[3],cname=s[2];b.b+=null==cname?"null":""+cname,b.b+=".",b.b+=null==meth?"null":""+meth;break;case 4:var n=s[2];b.b+="local function #",b.b+=null==n?"null":""+n}},haxe.CallStack.makeStack=function(s){if(null==s)return[];if("string"!=typeof s)return s;var stack=s.split("\n");"Error"==stack[0]&&stack.shift();for(var m=[],rie10=new EReg("^   at ([A-Za-z0-9_. ]+) \\(([^)]+):([0-9]+):([0-9]+)\\)$",""),_g=0;_g<stack.length;){var line=stack[_g];if(++_g,rie10.match(line)){var path=rie10.matched(1).split("."),meth=path.pop(),file=rie10.matched(2),line1=Std.parseInt(rie10.matched(3));m.push(haxe.StackItem.FilePos("Anonymous function"==meth?haxe.StackItem.LocalFunction():"Global code"==meth?null:haxe.StackItem.Method(path.join("."),meth),file,line1))}else m.push(haxe.StackItem.Module(StringTools.trim(line)))}return m};var js={Boot:function(){}};function $iterator(o){return o instanceof Array?function(){return HxOverrides.iter(o)}:"function"==typeof o.iterator?$bind(o,o.iterator):o.iterator}js.Boot.__name__=["js","Boot"],js.Boot.getClass=function(o){if(o instanceof Array&&null==o.__enum__)return Array;var cl=o.__class__;if(null!=cl)return cl;var name=js.Boot.__nativeClassName(o);return null!=name?js.Boot.__resolveNativeClass(name):null},js.Boot.__string_rec=function(o,s){if(null==o)return"null";if(5<=s.length)return"<...>";var t=typeof o;switch("function"==t&&(o.__name__||o.__ename__)&&(t="object"),t){case"function":return"<function>";case"object":if(o instanceof Array){if(o.__enum__){if(2==o.length)return o[0];var str=o[0]+"(";s+="\t";for(var _g1=2,_g=o.length;_g1<_g;){var i=_g1++;str+=2!=i?","+js.Boot.__string_rec(o[i],s):js.Boot.__string_rec(o[i],s)}return str+")"}var str1="[";s+="\t";for(var _g11=0,_g2=o.length;_g11<_g2;){var i2=_g11++;str1+=(0<i2?",":"")+js.Boot.__string_rec(o[i2],s)}return str1+="]"}var tostr;try{tostr=o.toString}catch(e){return"???"}if(null!=tostr&&tostr!=Object.toString&&"function"==typeof tostr){var s2=o.toString();if("[object Object]"!=s2)return s2}var k=null,str2="{\n";s+="\t";var hasp=null!=o.hasOwnProperty;for(var k in o)hasp&&!o.hasOwnProperty(k)||"prototype"!=k&&"__class__"!=k&&"__super__"!=k&&"__interfaces__"!=k&&"__properties__"!=k&&(2!=str2.length&&(str2+=", \n"),str2+=s+k+" : "+js.Boot.__string_rec(o[k],s));return str2+="\n"+(s=s.substring(1))+"}";case"string":return o;default:return String(o)}},js.Boot.__interfLoop=function(cc,cl){if(null==cc)return!1;if(cc==cl)return!0;var intf=cc.__interfaces__;if(null!=intf)for(var _g1=0,_g=intf.length;_g1<_g;){var i1=intf[_g1++];if(i1==cl||js.Boot.__interfLoop(i1,cl))return!0}return js.Boot.__interfLoop(cc.__super__,cl)},js.Boot.__instanceof=function(o,cl){if(null==cl)return!1;switch(cl){case Array:return o instanceof Array&&null==o.__enum__;case Bool:return"boolean"==typeof o;case Dynamic:return!0;case Float:return"number"==typeof o;case Int:return"number"==typeof o&&(0|o)===o;case String:return"string"==typeof o;default:if(null==o)return!1;if("function"==typeof cl){if(o instanceof cl)return!0;if(js.Boot.__interfLoop(js.Boot.getClass(o),cl))return!0}else if("object"==typeof cl&&js.Boot.__isNativeObj(cl)&&o instanceof cl)return!0;return cl==Class&&null!=o.__name__?!0:cl==Enum&&null!=o.__ename__||o.__enum__==cl}},js.Boot.__cast=function(o,t){if(js.Boot.__instanceof(o,t))return o;throw new js._Boot.HaxeError("Cannot cast "+Std.string(o)+" to "+Std.string(t))},js.Boot.__nativeClassName=function(o){var name=js.Boot.__toStr.call(o).slice(8,-1);return"Object"==name||"Function"==name||"Math"==name||"JSON"==name?null:name},js.Boot.__isNativeObj=function(o){return null!=js.Boot.__nativeClassName(o)},js.Boot.__resolveNativeClass=function(name){return $global[name]},haxe.StackItem={__ename__:!0,__constructs__:["CFunction","Module","FilePos","Method","LocalFunction"]},haxe.StackItem.CFunction=["CFunction",0],haxe.StackItem.CFunction.toString=$estr,haxe.StackItem.CFunction.__enum__=haxe.StackItem,haxe.StackItem.Module=function(m){var $x=["Module",1,m];return $x.__enum__=haxe.StackItem,$x.toString=$estr,$x},haxe.StackItem.FilePos=function(s,file,line){var $x=["FilePos",2,s,file,line];return $x.__enum__=haxe.StackItem,$x.toString=$estr,$x},haxe.StackItem.Method=function(classname,method){var $x=["Method",3,classname,method];return $x.__enum__=haxe.StackItem,$x.toString=$estr,$x},haxe.StackItem.LocalFunction=function(v){var $x=["LocalFunction",4,v];return $x.__enum__=haxe.StackItem,$x.toString=$estr,$x},alphaTab.utils={},alphaTab.utils.FontLoadingChecker=function(family,fallbackText){this._family=null,this._fallbackText=null,this._isStarted=!1,this.isFontLoaded=!1,this._family=family,this._fallbackText=null==fallbackText?"BESbwy":fallbackText},alphaTab.utils.FontLoadingChecker.__name__=["alphaTab","utils","FontLoadingChecker"],alphaTab.utils.FontLoadingChecker.prototype={addFontLoaded:function(value){this.fontLoaded=system._EventAction1.EventAction1_Impl_.add(this.fontLoaded,value)},removeFontLoaded:function(value){this.fontLoaded=system._EventAction1.EventAction1_Impl_.sub(this.fontLoaded,value)},onFontLoaded:function(){function handler(p){system._EventAction1.EventAction1_Impl_.invoke(_e,p)}var _e=this.fontLoaded;null!=handler&&handler(this._family)},checkForFontAvailability:function(){var _gthis=this;if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope)this.isFontLoaded=!1;else if(!this._isStarted){this._isStarted=!0;var failCounter=0,failCounterId=window.setInterval(function(){failCounter+=1,alphaTab.util.Logger.warning("Rendering","Could not load font '"+_gthis._family+"' within "+Std.string(5*failCounter)+" seconds",null)},5e3);if(alphaTab.util.Logger.debug("Font","Start checking for font availablility: "+this._family,null),!!window.document.fonts&&!!window.document.fonts.load){alphaTab.util.Logger.debug("Font","["+this._family+"] Font API available",null);var checkFont=null;(checkFont=function(){var checkFont1="1em "+_gthis._family;window.document.fonts.load(checkFont1).then(function(_){alphaTab.util.Logger.debug("Font","["+_gthis._family+"] Font API signaled loaded",null);var checkFont2="1em "+_gthis._family;return window.document.fonts.check(checkFont2)?(alphaTab.util.Logger.info("Rendering","["+_gthis._family+"] Font API signaled available",null),_gthis.isFontLoaded=!0,window.clearInterval(failCounterId),_gthis.onFontLoaded()):(alphaTab.util.Logger.debug("Font","["+_gthis._family+"] Font API loaded reported, but font not available, checking later again",null),window.setTimeout(function(){checkFont()},250)),!0})})()}else{alphaTab.util.Logger.debug("Font","["+this._family+"] Font API not available, using resize trick",null);var sans=null,serif=null,monospace=null,initialSansWidth=-1,initialSerifWidth=-1,initialMonospaceWidth=-1,checkFont3=null;checkFont3=function(){null==sans&&(sans=_gthis.createCheckerElement("sans-serif"),serif=_gthis.createCheckerElement("serif"),monospace=_gthis.createCheckerElement("monospace"),window.document.body.appendChild(sans),window.document.body.appendChild(serif),window.document.body.appendChild(monospace),initialSansWidth=sans.offsetWidth,initialSerifWidth=serif.offsetWidth,initialMonospaceWidth=monospace.offsetWidth,sans.style.fontFamily="'"+_gthis._family+"',sans-serif",serif.style.fontFamily="'"+_gthis._family+"',serif",monospace.style.fontFamily="'"+_gthis._family+"',monospace");var sansWidth=sans.offsetWidth,serifWidth=serif.offsetWidth,monospaceWidth=monospace.offsetWidth;(sansWidth!=initialSansWidth&&serifWidth!=initialSerifWidth||sansWidth!=initialSansWidth&&monospaceWidth!=initialMonospaceWidth||serifWidth!=initialSerifWidth&&monospaceWidth!=initialMonospaceWidth)&&(sansWidth==serifWidth||sansWidth==monospaceWidth||serifWidth==monospaceWidth)?(window.document.body.removeChild(sans),window.document.body.removeChild(serif),window.document.body.removeChild(monospace),_gthis.isFontLoaded=!0,window.clearInterval(failCounterId),_gthis.onFontLoaded()):window.setTimeout(checkFont3,250)},window.addEventListener("DOMContentLoaded",function(){checkFont3()})}}},createCheckerElement:function(family){var document=window.document,checkerElement=document.createElement("span");return checkerElement.style.display="inline-block",checkerElement.style.position="absolute",checkerElement.style.overflow="hidden",checkerElement.style.top="-1000px",checkerElement.style.fontSize="100px",checkerElement.style.fontFamily=family,checkerElement.innerHTML=this._fallbackText,document.body.appendChild(checkerElement),checkerElement},__class__:alphaTab.utils.FontLoadingChecker},alphaTab.platform.javaScript.AlphaTabWebWorker=function(main){this._renderer=null,this._main=null,this._main=main,this._main.addEventListener("message",$bind(this,this.handleMessage),!1)},alphaTab.platform.javaScript.AlphaTabWebWorker.__name__=["alphaTab","platform","javaScript","AlphaTabWebWorker"],alphaTab.platform.javaScript.AlphaTabWebWorker.init=function(){new alphaTab.platform.javaScript.AlphaTabWebWorker($global)},alphaTab.platform.javaScript.AlphaTabWebWorker.prototype={handleMessage:function(e){var _gthis=this,data=js.Boot.__cast(e,MessageEvent).data;switch(data?data.cmd:""){case"alphaTab.initialize":var settings=new alphaTab.Settings;settings.fillFromJson(data.settings),alphaTab.util.Logger.logLevel=settings.core.logLevel,this._renderer=new alphaTab.rendering.ScoreRenderer(settings),this._renderer.addPartialRenderFinished(function(result){_gthis._main.postMessage({cmd:"alphaTab.partialRenderFinished",result:result})}),this._renderer.addRenderFinished(function(result1){_gthis._main.postMessage({cmd:"alphaTab.renderFinished",result:result1})}),this._renderer.addPostRenderFinished(function(){_gthis._main.postMessage({cmd:"alphaTab.postRenderFinished",boundsLookup:_gthis._renderer.get_boundsLookup().toJson()})}),this._renderer.addPreRender(function(resize){_gthis._main.postMessage({cmd:"alphaTab.preRender",resize:resize})}),this._renderer.addError($bind(this,this.error));break;case"alphaTab.invalidate":this._renderer.render();break;case"alphaTab.renderScore":this.updateFontSizes(data.fontSizes);var score=alphaTab.model.JsonConverter.jsObjectToScore(data.score,this._renderer.settings);this.renderMultiple(score,data.trackIndexes);break;case"alphaTab.resizeRender":this._renderer.resizeRender();break;case"alphaTab.setWidth":this._renderer.set_width(data.width);break;case"alphaTab.updateSettings":this.updateSettings(data.settings)}},updateFontSizes:function(fontSizes){if(null!=fontSizes){if(null==alphaTab.platform.svg.FontSizes.FontSizeLookupTables){alphaTab.platform.svg.FontSizes.FontSizeLookupTables={}}for(var keys=Object.keys(fontSizes),font=HxOverrides.iter(keys);font.hasNext();){var font1=font.next();alphaTab.platform.svg.FontSizes.FontSizeLookupTables[font1]=fontSizes[font1]}}},updateSettings:function(json){this._renderer.settings.fillFromJson(json)},renderMultiple:function(score,trackIndexes){try{this._renderer.renderScore(score,trackIndexes)}catch(e){if(e instanceof js._Boot.HaxeError&&(e=e.val),!js.Boot.__instanceof(e,system.Exception))throw e;this.error("render",e)}},error:function(type,e){alphaTab.util.Logger.error(type,"An unexpected error occurred in worker",e);var error=JSON.parse(JSON.stringify(e)),e2=e;e2.message&&(error.message=e2.message),e2.stack&&(error.stack=e2.stack),e2.constructor&&e2.constructor.name&&(error.type=e2.constructor.name),this._main.postMessage({cmd:"alphaTab.error",error:{type:type,detail:error}})},__class__:alphaTab.platform.javaScript.AlphaTabWebWorker},alphaTab.platform.javaScript.AlphaSynthWebWorker=function(main,id){this._player=null,this._main=null,this._main=main,this._main.addEventListener("message",$bind(this,this.handleMessage)),this._player=new alphaTab.audio.synth.AlphaSynth(new alphaTab.platform.javaScript.AlphaSynthWorkerSynthOutput),this._player.addPositionChanged($bind(this,this.onPositionChanged)),this._player.addStateChanged($bind(this,this.onPlayerStateChanged)),this._player.addFinished($bind(this,this.onFinished)),this._player.addSoundFontLoaded($bind(this,this.onSoundFontLoaded)),this._player.addSoundFontLoadFailed($bind(this,this.onSoundFontLoadFailed)),this._player.addSoundFontLoadFailed($bind(this,this.onSoundFontLoadFailed)),this._player.addMidiLoaded($bind(this,this.onMidiLoaded)),this._player.addMidiLoadFailed($bind(this,this.onMidiLoadFailed)),this._player.addReadyForPlayback($bind(this,this.onReadyForPlayback)),this._main.postMessage({cmd:"alphaSynth.ready"})},alphaTab.platform.javaScript.AlphaSynthWebWorker.__name__=["alphaTab","platform","javaScript","AlphaSynthWebWorker"],alphaTab.platform.javaScript.AlphaSynthWebWorker.init=function(){var main=$global;main.addEventListener("message",function(e){var data=e.data;"alphaSynth.initialize"==data.cmd&&(alphaTab.platform.javaScript.AlphaSynthWorkerSynthOutput.preferredSampleRate=data.sampleRate,alphaTab.util.Logger.logLevel=data.logLevel,new alphaTab.platform.javaScript.AlphaSynthWebWorker(main,data.id))})},alphaTab.platform.javaScript.AlphaSynthWebWorker.prototype={handleMessage:function(e){var data=e.data;switch(data.cmd){case"alphaSynth.loadMidi":this._player.loadMidiFile(alphaTab.model.JsonConverter.jsObjectToMidiFile(data.midi));break;case"alphaSynth.loadSoundFontBytes":this._player.loadSoundFont(data.data);break;case"alphaSynth.pause":this._player.pause();break;case"alphaSynth.play":this._player.play();break;case"alphaSynth.playPause":this._player.playPause();break;case"alphaSynth.resetChannelStates":this._player.resetChannelStates();break;case"alphaSynth.setChannelMute":this._player.setChannelMute(data.channel,data.mute);break;case"alphaSynth.setChannelProgram":this._player.setChannelProgram(data.channel,data.program);break;case"alphaSynth.setChannelSolo":this._player.setChannelSolo(data.channel,data.solo);break;case"alphaSynth.setChannelVolume":this._player.setChannelVolume(data.channel,data.volume);break;case"alphaSynth.setIsLooping":this._player.set_isLooping(data.value);break;case"alphaSynth.setLogLevel":alphaTab.util.Logger.logLevel=data.value;break;case"alphaSynth.setMasterVolume":this._player.set_masterVolume(data.value);break;case"alphaSynth.setMetronomeVolume":this._player.set_metronomeVolume(data.value);break;case"alphaSynth.setPlaybackRange":this._player.set_playbackRange(data.value);break;case"alphaSynth.setPlaybackSpeed":this._player.set_playbackSpeed(data.value);break;case"alphaSynth.setTickPosition":this._player.set_tickPosition(data.value);break;case"alphaSynth.setTimePosition":this._player.set_timePosition(data.value);break;case"alphaSynth.stop":this._player.stop()}},onPositionChanged:function(e){this._main.postMessage({cmd:"alphaSynth.positionChanged",currentTime:e.currentTime,endTime:e.endTime,currentTick:e.currentTick,endTick:e.endTick})},onPlayerStateChanged:function(e){this._main.postMessage({cmd:"alphaSynth.playerStateChanged",state:e.state,stopped:e.stopped})},onFinished:function(){this._main.postMessage({cmd:"alphaSynth.finished"})},onSoundFontLoaded:function(){this._main.postMessage({cmd:"alphaSynth.soundFontLoaded"})},onSoundFontLoadFailed:function(e){this._main.postMessage({cmd:"alphaSynth.soundFontLoadFailed",error:this.serializeException(e)})},serializeException:function(e){var error=JSON.parse(JSON.stringify(e)),e2=e;return e2.message&&(error.message=e2.message),e2.stack&&(error.stack=e2.stack),e2.constructor&&e2.constructor.name&&(error.type=e2.constructor.name),error},onMidiLoaded:function(){this._main.postMessage({cmd:"alphaSynth.midiLoaded"})},onMidiLoadFailed:function(e){this._main.postMessage({cmd:"alphaSynth.midiLoaded",error:this.serializeException(e)})},onReadyForPlayback:function(){this._main.postMessage({cmd:"alphaSynth.readyForPlayback"})},sendLog:function(level,s){this._main.postMessage({cmd:"alphaSynth.log",level:level,message:s})},__class__:alphaTab.platform.javaScript.AlphaSynthWebWorker},alphaTab.audio={},alphaTab.audio.synth={},alphaTab.audio.synth.ISynthOutput=$hx_exports.alphaTab.audio.synth.ISynthOutput=function(){},alphaTab.audio.synth.ISynthOutput.__name__=["alphaTab","audio","synth","ISynthOutput"],alphaTab.audio.synth.ISynthOutput.prototype={__class__:alphaTab.audio.synth.ISynthOutput},alphaTab.platform.javaScript.AlphaSynthWorkerSynthOutput=function(){this._worker=null},alphaTab.platform.javaScript.AlphaSynthWorkerSynthOutput.__name__=["alphaTab","platform","javaScript","AlphaSynthWorkerSynthOutput"],alphaTab.platform.javaScript.AlphaSynthWorkerSynthOutput.__interfaces__=[alphaTab.audio.synth.ISynthOutput],alphaTab.platform.javaScript.AlphaSynthWorkerSynthOutput.prototype={get_sampleRate:function(){return alphaTab.platform.javaScript.AlphaSynthWorkerSynthOutput.preferredSampleRate},open:function(){alphaTab.util.Logger.debug("AlphaSynth","Initializing webworker worker",null),this._worker=$global,this._worker.addEventListener("message",$bind(this,this.handleMessage)),system._EventAction.EventAction_Impl_.invoke(this.ready)},handleMessage:function(e){var data=e.data;switch(data.cmd){case"alphaSynth.output.finished":system._EventAction.EventAction_Impl_.invoke(this.finished);break;case"alphaSynth.output.sampleRequest":system._EventAction.EventAction_Impl_.invoke(this.sampleRequest);break;case"alphaSynth.output.samplesPlayed":system._EventAction1.EventAction1_Impl_.invoke(this.samplesPlayed,data.samples)}},addReady:function(value){this.ready=system._EventAction.EventAction_Impl_.add(this.ready,value)},removeReady:function(value){this.ready=system._EventAction.EventAction_Impl_.sub(this.ready,value)},addSamplesPlayed:function(value){this.samplesPlayed=system._EventAction1.EventAction1_Impl_.add(this.samplesPlayed,value)},removeSamplesPlayed:function(value){this.samplesPlayed=system._EventAction1.EventAction1_Impl_.sub(this.samplesPlayed,value)},addSampleRequest:function(value){this.sampleRequest=system._EventAction.EventAction_Impl_.add(this.sampleRequest,value)},removeSampleRequest:function(value){this.sampleRequest=system._EventAction.EventAction_Impl_.sub(this.sampleRequest,value)},addFinished:function(value){this.finished=system._EventAction.EventAction_Impl_.add(this.finished,value)},removeFinished:function(value){this.finished=system._EventAction.EventAction_Impl_.sub(this.finished,value)},sequencerFinished:function(){this._worker.postMessage({cmd:"alphaSynth.output.sequencerFinished"})},addSamples:function(samples){this._worker.postMessage({cmd:"alphaSynth.output.addSamples",samples:samples})},play:function(){this._worker.postMessage({cmd:"alphaSynth.output.play"})},pause:function(){this._worker.postMessage({cmd:"alphaSynth.output.pause"})},resetSamples:function(){this._worker.postMessage({cmd:"alphaSynth.output.resetSamples"})},activate:function(){},__class__:alphaTab.platform.javaScript.AlphaSynthWorkerSynthOutput},alphaTab.audio.synth.IAlphaSynth=$hx_exports.alphaTab.audio.synth.IAlphaSynth=function(){},alphaTab.audio.synth.IAlphaSynth.__name__=["alphaTab","audio","synth","IAlphaSynth"],alphaTab.audio.synth.IAlphaSynth.prototype={__class__:alphaTab.audio.synth.IAlphaSynth},alphaTab.audio.synth.AlphaSynth=$hx_exports.alphaTab.audio.synth.AlphaSynth=function(output){var _gthis=this;this._sequencer=null,this._synthesizer=null,this._isSoundFontLoaded=!1,this._isMidiLoaded=!1,this._tickPosition=0,this._timePosition=0,this._metronomeVolume=0,this.output=null,this.set_isReady(!1),this.set_state(0),alphaTab.util.Logger.debug("AlphaSynth","Initializing player",null),this.set_state(0),alphaTab.util.Logger.debug("AlphaSynth","Creating output",null),this.output=output,this.output.addReady(function(){_gthis.set_isReady(!0),_gthis.onReady(),_gthis.checkReadyForPlayback()}),this.output.addFinished(function(){_gthis.stop(),alphaTab.util.Logger.debug("AlphaSynth","Finished playback",null),_gthis.onFinished(),_gthis._sequencer.isLooping&&_gthis.play()}),this.output.addSampleRequest(function(){_gthis._sequencer.fillMidiEventQueue();var samples=_gthis._synthesizer.synthesize();_gthis.output.addSamples(samples),_gthis._sequencer.checkForStop()}),this.output.addSamplesPlayed($bind(this,this.onSamplesPlayed)),alphaTab.util.Logger.debug("AlphaSynth","Creating synthesizer",null);var this1=this.output.get_sampleRate();this._synthesizer=new alphaTab.audio.synth.synthesis.TinySoundFont(this1),this._sequencer=new alphaTab.audio.synth.MidiFileSequencer(this._synthesizer),this._sequencer.addFinished($bind($_=this.output,$_.sequencerFinished)),alphaTab.util.Logger.debug("AlphaSynth","Opening output",null),this.output.open()},alphaTab.audio.synth.AlphaSynth.__name__=["alphaTab","audio","synth","AlphaSynth"],alphaTab.audio.synth.AlphaSynth.__interfaces__=[alphaTab.audio.synth.IAlphaSynth],alphaTab.audio.synth.AlphaSynth.prototype={get_isReady:function(){return this.__IsReady},set_isReady:function(value){return this.__IsReady=value},get_isReadyForPlayback:function(){return!(!this.get_isReady()||!this._isSoundFontLoaded)&&this._isMidiLoaded},get_state:function(){return this.__State},set_state:function(value){return this.__State=value},get_logLevel:function(){return alphaTab.util.Logger.logLevel},set_logLevel:function(value){return alphaTab.util.Logger.logLevel=value},get_masterVolume:function(){return this._synthesizer.globalGainDb},set_masterVolume:function(value){return value=alphaTab.audio.synth.util.SynthHelper.clampF(value,0,1),this._synthesizer.globalGainDb=value,this.get_masterVolume()},get_metronomeVolume:function(){return this._metronomeVolume},set_metronomeVolume:function(value){return value=alphaTab.audio.synth.util.SynthHelper.clampF(value,0,1),this._metronomeVolume=value,this._synthesizer.set_metronomeVolume(value),this.get_metronomeVolume()},get_playbackSpeed:function(){return this._sequencer.playbackSpeed},set_playbackSpeed:function(value){value=alphaTab.audio.synth.util.SynthHelper.clampD(value,.125,8);var oldSpeed=this._sequencer.playbackSpeed;return this._sequencer.playbackSpeed=value,this.updateTimePosition(this._timePosition*(oldSpeed/value)),this.get_playbackSpeed()},get_tickPosition:function(){return this._tickPosition},set_tickPosition:function(value){return this.set_timePosition(this._sequencer.tickPositionToTimePosition(value)),this.get_tickPosition()},get_timePosition:function(){return this._timePosition},set_timePosition:function(value){return alphaTab.util.Logger.debug("AlphaSynth","Seeking to position "+Std.string(value)+"ms",null),this._sequencer.seek(value),this.updateTimePosition(value),this.output.resetSamples(),this.get_timePosition()},get_playbackRange:function(){return this._sequencer.get_playbackRange()},set_playbackRange:function(value){return this._sequencer.set_playbackRange(value),null!=value&&this.set_tickPosition(value.startTick),this.get_playbackRange()},get_isLooping:function(){return this._sequencer.isLooping},set_isLooping:function(value){return this._sequencer.isLooping=value},destroy:function(){alphaTab.util.Logger.debug("AlphaSynth","Destroying player",null),this.stop()},play:function(){return!(1==this.get_state()||!this.get_isReadyForPlayback())&&(this.output.activate(),this._synthesizer.setupMetronomeChannel(this.get_metronomeVolume()),alphaTab.util.Logger.debug("AlphaSynth","Starting playback",null),this.set_state(1),this.onStateChanged(new alphaTab.audio.synth.PlayerStateChangedEventArgs(this.get_state(),!1)),this.output.play(),!0)},pause:function(){0!=this.get_state()&&this.get_isReadyForPlayback()&&(alphaTab.util.Logger.debug("AlphaSynth","Pausing playback",null),this.set_state(0),this.onStateChanged(new alphaTab.audio.synth.PlayerStateChangedEventArgs(this.get_state(),!1)),this.output.pause(),this._synthesizer.noteOffAll(!1))},playPause:function(){1!=this.get_state()&&this.get_isReadyForPlayback()?this.play():this.pause()},stop:function(){this.get_isReadyForPlayback()&&(alphaTab.util.Logger.debug("AlphaSynth","Stopping playback",null),this.set_state(0),this.output.pause(),this._sequencer.stop(),this._synthesizer.noteOffAll(!0),this.set_tickPosition(null!=this._sequencer.get_playbackRange()?this._sequencer.get_playbackRange().startTick:0),this.onStateChanged(new alphaTab.audio.synth.PlayerStateChangedEventArgs(this.get_state(),!0)))},loadSoundFont:function(data){this.pause();var input=alphaTab.io.ByteBuffer.fromBuffer(data);try{alphaTab.util.Logger.info("AlphaSynth","Loading soundfont from bytes",null);var soundFont=new alphaTab.audio.synth.soundFont.Hydra;soundFont.load(input),this._synthesizer.loadPresets(soundFont),this._isSoundFontLoaded=!0,this.onSoundFontLoaded(),alphaTab.util.Logger.info("AlphaSynth","soundFont successfully loaded",null),this.checkReadyForPlayback()}catch(e){if(e instanceof js._Boot.HaxeError&&(e=e.val),!js.Boot.__instanceof(e,system.Exception))throw e;alphaTab.util.Logger.error("AlphaSynth","Could not load soundfont from bytes "+Std.string(e),null),this.onSoundFontLoadFailed(e)}},checkReadyForPlayback:function(){this.get_isReadyForPlayback()&&(this._synthesizer.setupMetronomeChannel(this.get_metronomeVolume()),this.onReadyForPlayback())},loadMidiFile:function(midiFile){this.stop();try{alphaTab.util.Logger.info("AlphaSynth","Loading midi from model",null),this._sequencer.loadMidi(midiFile),this._isMidiLoaded=!0,this.onMidiLoaded(),alphaTab.util.Logger.info("AlphaSynth","Midi successfully loaded",null),this.checkReadyForPlayback(),this.set_tickPosition(0)}catch(e){if(e instanceof js._Boot.HaxeError&&(e=e.val),!js.Boot.__instanceof(e,system.Exception))throw e;alphaTab.util.Logger.error("AlphaSynth","Could not load midi from model "+Std.string(e),null),this.onMidiLoadFailed(e)}},setChannelMute:function(channel,mute){this._synthesizer.channelSetMute(channel,mute)},resetChannelStates:function(){this._synthesizer.resetChannelStates()},setChannelSolo:function(channel,solo){this._synthesizer.channelSetSolo(channel,solo)},setChannelVolume:function(channel,volume){volume=alphaTab.audio.synth.util.SynthHelper.clampF(volume,0,1),this._synthesizer.channelSetMixVolume(channel,volume)},setChannelProgram:function(channel,program){program=alphaTab.audio.synth.util.SynthHelper.clampB(program,0,127),this._sequencer.setChannelProgram(channel,program),this._synthesizer.channelSetPresetNumber(channel,program,!1)},onSamplesPlayed:function(sampleCount){var playedMillis=sampleCount/js.Boot.__cast(this._synthesizer.outSampleRate,Float)*1e3;this.updateTimePosition(this._timePosition+playedMillis)},updateTimePosition:function(timePosition){var currentTime=this._timePosition=timePosition,currentTick=this._tickPosition=this._sequencer.timePositionToTickPosition(currentTime),endTime=this._sequencer.get_endTime(),endTick=this._sequencer.endTick;alphaTab.util.Logger.debug("AlphaSynth","Position changed: (time: "+Std.string(currentTime)+"/"+Std.string(endTime)+", tick: "+Std.string(currentTick)+"/"+Std.string(endTime)+", Active Voices: "+Std.string(this._synthesizer.get_activeVoiceCount()),null),this.onPositionChanged(new alphaTab.audio.synth.PositionChangedEventArgs(currentTime,endTime,currentTick,endTick))},addReady:function(value){this.ready=system._EventAction.EventAction_Impl_.add(this.ready,value)},removeReady:function(value){this.ready=system._EventAction.EventAction_Impl_.sub(this.ready,value)},onReady:function(){function handler(){system._EventAction.EventAction_Impl_.invoke(_e)}var _e=this.ready;null!=handler&&handler()},addFinished:function(value){this.finished=system._EventAction.EventAction_Impl_.add(this.finished,value)},removeFinished:function(value){this.finished=system._EventAction.EventAction_Impl_.sub(this.finished,value)},onFinished:function(){function handler(){system._EventAction.EventAction_Impl_.invoke(_e)}var _e=this.finished;null!=handler&&handler()},addStateChanged:function(value){this.stateChanged=system._EventAction1.EventAction1_Impl_.add(this.stateChanged,value)},removeStateChanged:function(value){this.stateChanged=system._EventAction1.EventAction1_Impl_.sub(this.stateChanged,value)},onStateChanged:function(e){function handler(p){system._EventAction1.EventAction1_Impl_.invoke(_e,p)}var _e=this.stateChanged;null!=handler&&handler(e)},addSoundFontLoaded:function(value){this.soundFontLoaded=system._EventAction.EventAction_Impl_.add(this.soundFontLoaded,value)},removeSoundFontLoaded:function(value){this.soundFontLoaded=system._EventAction.EventAction_Impl_.sub(this.soundFontLoaded,value)},onSoundFontLoaded:function(){function handler(){system._EventAction.EventAction_Impl_.invoke(_e)}var _e=this.soundFontLoaded;null!=handler&&handler()},addReadyForPlayback:function(value){this.readyForPlayback=system._EventAction.EventAction_Impl_.add(this.readyForPlayback,value)},removeReadyForPlayback:function(value){this.readyForPlayback=system._EventAction.EventAction_Impl_.sub(this.readyForPlayback,value)},onReadyForPlayback:function(){function handler(){system._EventAction.EventAction_Impl_.invoke(_e)}var _e=this.readyForPlayback;null!=handler&&handler()},addSoundFontLoadFailed:function(value){this.soundFontLoadFailed=system._EventAction1.EventAction1_Impl_.add(this.soundFontLoadFailed,value)},removeSoundFontLoadFailed:function(value){this.soundFontLoadFailed=system._EventAction1.EventAction1_Impl_.sub(this.soundFontLoadFailed,value)},onSoundFontLoadFailed:function(e){function handler(p){system._EventAction1.EventAction1_Impl_.invoke(_e,p)}var _e=this.soundFontLoadFailed;null!=handler&&handler(e)},addMidiLoaded:function(value){this.midiLoaded=system._EventAction.EventAction_Impl_.add(this.midiLoaded,value)},removeMidiLoaded:function(value){this.midiLoaded=system._EventAction.EventAction_Impl_.sub(this.midiLoaded,value)},onMidiLoaded:function(){function handler(){system._EventAction.EventAction_Impl_.invoke(_e)}var _e=this.midiLoaded;null!=handler&&handler()},addMidiLoadFailed:function(value){this.midiLoadFailed=system._EventAction1.EventAction1_Impl_.add(this.midiLoadFailed,value)},removeMidiLoadFailed:function(value){this.midiLoadFailed=system._EventAction1.EventAction1_Impl_.sub(this.midiLoadFailed,value)},onMidiLoadFailed:function(e){function handler(p){system._EventAction1.EventAction1_Impl_.invoke(_e,p)}var _e=this.midiLoadFailed;null!=handler&&handler(e)},addPositionChanged:function(value){this.positionChanged=system._EventAction1.EventAction1_Impl_.add(this.positionChanged,value)},removePositionChanged:function(value){this.positionChanged=system._EventAction1.EventAction1_Impl_.sub(this.positionChanged,value)},onPositionChanged:function(e){function handler(p){system._EventAction1.EventAction1_Impl_.invoke(_e,p)}var _e=this.positionChanged;null!=handler&&handler(e)},__class__:alphaTab.audio.synth.AlphaSynth},alphaTab.audio.synth.synthesis={},alphaTab.audio.synth.synthesis.TinySoundFont=function(sampleRate){this._soloChannels={};this._mutedChannels={};var this12=new Int32Array(32);this._midiEventCounts=this12,this._midiEventQueue=new alphaTab.audio.synth.ds.LinkedList,this._isAnySolo=!1,this._presets=null,this._voices=null,this._channels=null,this._voicePlayIndex=0,this.fontSamples=null,this.outputMode=0,this.outSampleRate=0,this.globalGainDb=0,this.outSampleRate=sampleRate,this.outputMode=0;this._voices=[]},alphaTab.audio.synth.synthesis.TinySoundFont.__name__=["alphaTab","audio","synth","synthesis","TinySoundFont"],alphaTab.audio.synth.synthesis.TinySoundFont.prototype={synthesize:function(){return this.fillWorkingBuffer(!1)},synthesizeSilent:function(){this.fillWorkingBuffer(!0)},channelGetMixVolume:function(channel){return null!=this._channels&&channel<this._channels.channelList.length?this._channels.channelList[channel].mixVolume:1},channelSetMixVolume:function(channel,volume){for(var c=this.channelInit(channel),v=$iterator(this._voices)();v.hasNext();){var v1=v.next();v1.playingChannel==channel&&-1!=v1.playingPreset&&(v1.mixVolume=volume)}c.mixVolume=volume},channelSetMute:function(channel,mute){mute?this._mutedChannels[channel]=!0:delete this._mutedChannels[channel]},channelSetSolo:function(channel,solo){solo?this._soloChannels[channel]=!0:delete this._soloChannels[channel];var this2=this._soloChannels;this._isAnySolo=0<Object.keys(this2).length},resetChannelStates:function(){this._mutedChannels={};this._soloChannels={},this._isAnySolo=!1},dispatchEvent:function(i,synthEvent){this._midiEventQueue.addFirst(synthEvent);var tmp1=this._midiEventCounts[i];this._midiEventCounts[i]=tmp1+1},fillWorkingBuffer:function(silent){for(var buffer=new Float32Array(4096),bufferPos=0,anySolo=this._isAnySolo,x=0;x<32;){if(0<this._midiEventQueue.length)for(var i=0;i<this._midiEventCounts[x];){var m=this._midiEventQueue.removeLast();if(m.isMetronome){this.channelNoteOff(16,33);this.channelNoteOn(16,33,95/127)}else this.processMidiMessage(m.event);++i}for(var voice=$iterator(this._voices)();voice.hasNext();){var voice1=voice.next();if(-1!=voice1.playingPreset){var channel=voice1.playingChannel,isChannelMuted=this._mutedChannels.hasOwnProperty(channel)||anySolo&&!this._soloChannels.hasOwnProperty(channel);silent?voice1.kill():voice1.render(this,buffer,bufferPos,64,isChannelMuted)}}bufferPos+=128,++x}return alphaTab.platform.Platform.clearIntArray(this._midiEventCounts),buffer},processMidiMessage:function(e){alphaTab.util.Logger.debug("Midi","Processing midi "+e.get_command(),null);var command=e.get_command(),channel=e.get_channel(),data1=e.get_data1(),data2=e.get_data2();switch(command){case 128:this.channelNoteOff(channel,data1);break;case 144:this.channelNoteOn(channel,data1,data2/127);break;case 160:break;case 176:this.channelMidiControl(channel,data1,data2);break;case 192:this.channelSetPresetNumber(channel,data1,9==channel);break;case 208:break;case 224:var this2=system.Convert.toInt16(data1|data2<<8);this.channelSetPitchWheel(channel,this2)}},get_metronomeVolume:function(){return this.channelGetMixVolume(16)},set_metronomeVolume:function(value){return this.channelSetMixVolume(16,value),this.get_metronomeVolume()},setupMetronomeChannel:function(volume){this.channelSetVolume(16,1),this.channelSetMixVolume(16,volume),this.channelSetPresetNumber(16,0,!0)},resetSoft:function(){for(var v=$iterator(this._voices)();v.hasNext();){var v1=v.next();-1!=v1.playingPreset&&(v1.ampEnv.segment<6||0!=v1.ampEnv.parameters.release)&&v1.endQuick(this.outSampleRate)}if(null!=this._channels)for(var c=$iterator(this._channels.channelList)();c.hasNext();){var c1=c.next();c1.presetIndex=c1.bank=0,c1.pitchWheel=c1.midiPan=8192,c1.midiVolume=c1.midiExpression=16383,c1.midiRpn=65535,c1.midiData=0,c1.panOffset=0,c1.gainDb=0,c1.pitchRange=2,c1.tuning=0}},get_presetCount:function(){return this._presets.length},reset:function(){for(var v=$iterator(this._voices)();v.hasNext();){var v1=v.next();-1!=v1.playingPreset&&(v1.ampEnv.segment<6||0!=v1.ampEnv.parameters.release)&&v1.endQuick(this.outSampleRate)}this._channels=null},setOutput:function(outputMode,sampleRate,globalGainDb){var tmp;(this.outputMode=outputMode,1<=sampleRate)?tmp=sampleRate:tmp=44100;this.outSampleRate=tmp,this.globalGainDb=globalGainDb},noteOn:function(presetIndex,key,vel){var midiVelocity=system.Convert.toInt32_Single(127*vel);if(!(presetIndex<0||presetIndex>=this._presets.length)){if(vel<=0)this.noteOff(presetIndex,key);else for(var voicePlayIndex=this._voicePlayIndex++,region=HxOverrides.iter(this._presets[presetIndex].regions);region.hasNext();){var region1=region.next();if(!(key<region1.loKey||key>region1.hiKey||midiVelocity<region1.loVel||midiVelocity>region1.hiVel)){var voice=null;if(0!=region1.group)for(var v=$iterator(this._voices)();v.hasNext();){var v1=v.next();v1.playingPreset==presetIndex&&v1.region.group==region1.group?v1.endQuick(this.outSampleRate):-1==v1.playingPreset&&null==voice&&(voice=v1)}else for(var v2=$iterator(this._voices)();v2.hasNext();){var v3=v2.next();-1==v3.playingPreset&&(voice=v3)}if(null==voice){for(var i=0;i<4;){var _tmp=new alphaTab.audio.synth.synthesis.Voice;_tmp.playingPreset=-1;var newVoice=_tmp;this._voices.push(newVoice),++i}voice=this._voices[this._voices.length-4]}voice.region=region1,voice.playingPreset=presetIndex,voice.playingKey=key,voice.playIndex=voicePlayIndex;if(voice.noteGainDb=this.globalGainDb-region1.attenuation-alphaTab.audio.synth.util.SynthHelper.gainToDecibels(1/vel),null!=this._channels)this._channels.setupVoice(this,voice);else{voice.calcPitchRatio(0,this.outSampleRate);var this4=.5-region1.pan;voice.panFactorLeft=js.Boot.__cast(Math.sqrt(this4),Float);var this6=.5+region1.pan;voice.panFactorRight=js.Boot.__cast(Math.sqrt(this6),Float)}var this7=region1.offset;voice.sourceSamplePosition=this7;var doLoop=0!=region1.loopMode&&region1.loopStart<region1.loopEnd;voice.loopStart=doLoop?region1.loopStart:0,voice.loopEnd=doLoop?region1.loopEnd:0,voice.ampEnv.setup(region1.ampEnv,key,midiVelocity,!0,this.outSampleRate),voice.modEnv.setup(region1.modEnv,key,midiVelocity,!1,this.outSampleRate);var this9=region1.initialFilterQ/10/20;if(voice.lowPass.qInv=1/Math.pow(10,this9),voice.lowPass.z1=voice.lowPass.z2=0,voice.lowPass.active=region1.initialFilterFc<=13500,voice.lowPass.active){var this10=region1.initialFilterFc;voice.lowPass.setup(alphaTab.audio.synth.util.SynthHelper.cents2Hertz(this10)/this.outSampleRate)}voice.modLfo.setup(region1.delayModLFO,region1.freqModLFO,this.outSampleRate),voice.vibLfo.setup(region1.delayVibLFO,region1.freqVibLFO,this.outSampleRate)}}}},bankNoteOn:function(bank,presetNumber,key,vel){var presetIndex=this.getPresetIndex(bank,presetNumber);return-1!=presetIndex&&(this.noteOn(presetIndex,key,vel),!0)},noteOff:function(presetIndex,key){for(var matchFirst=null,matchLast=null,matches=[],v=$iterator(this._voices)();v.hasNext();){var v1=v.next();v1.playingPreset!=presetIndex||v1.playingKey!=key||6<=v1.ampEnv.segment||(null==matchFirst||v1.playIndex<matchFirst.playIndex?(matchLast=matchFirst=v1,matches.push(v1)):v1.playIndex==matchFirst.playIndex&&(matchLast=v1,matches.push(v1)))}if(null!=matchFirst)for(var v2=$iterator(matches)();v2.hasNext();){var v3=v2.next();v3!=matchFirst&&v3!=matchLast&&(v3.playIndex!=matchFirst.playIndex||v3.playingPreset!=presetIndex||v3.playingKey!=key||6<=v3.ampEnv.segment)||v3.end(this.outSampleRate)}},bankNoteOff:function(bank,presetNumber,key){var presetIndex=this.getPresetIndex(bank,presetNumber);return-1!=presetIndex&&(this.noteOff(presetIndex,key),!0)},noteOffAll:function(immediate){for(var voice=$iterator(this._voices)();voice.hasNext();){var voice1=voice.next();-1!=voice1.playingPreset&&voice1.ampEnv.segment<6&&(immediate?voice1.endQuick(this.outSampleRate):voice1.end(this.outSampleRate))}},get_activeVoiceCount:function(){for(var count=0,v=$iterator(this._voices)();v.hasNext();){-1!=v.next().playingPreset&&++count}return count},channelInit:function(channel){if(null!=this._channels&&channel<this._channels.channelList.length)return this._channels.channelList[channel];null==this._channels&&(this._channels=new alphaTab.audio.synth.synthesis.Channels);for(var i=this._channels.channelList.length;i<=channel;){var c=new alphaTab.audio.synth.synthesis.Channel;c.presetIndex=c.bank=0,c.pitchWheel=c.midiPan=8192,c.midiVolume=c.midiExpression=16383,c.midiRpn=65535,c.midiData=0,c.panOffset=0,c.gainDb=0,c.pitchRange=2,c.tuning=0,c.mixVolume=1,this._channels.channelList.push(c),++i}return this._channels.channelList[channel]},getPresetIndex:function(bank,presetNumber){for(var i=0;i<this._presets.length;){var preset=this._presets[i];if(preset.presetNumber==presetNumber&&preset.bank==bank)return i;++i}return-1},getPresetName:function(presetIndex){return presetIndex<0||presetIndex>=this._presets.length?null:this._presets[presetIndex].name},bankGetPresetName:function(bank,presetNumber){return this.getPresetName(this.getPresetIndex(bank,presetNumber))},channelNoteOn:function(channel,key,vel){null==this._channels||channel>this._channels.channelList.length||(this._channels.activeChannel=channel,this.noteOn(this._channels.channelList[channel].presetIndex,key,vel))},channelNoteOff:function(channel,key){for(var matches=[],matchFirst=null,matchLast=null,v=$iterator(this._voices)();v.hasNext();){var v1=v.next();-1==v1.playingPreset||v1.playingChannel!=channel||v1.playingKey!=key||6<=v1.ampEnv.segment||(null==matchFirst||v1.playIndex<matchFirst.playIndex?(matchFirst=matchLast=v1,matches.push(v1)):v1.playIndex==matchFirst.playIndex&&(matchLast=v1,matches.push(v1)))}if(null!=matchFirst)for(var v2=$iterator(matches)();v2.hasNext();){var v3=v2.next();v3!=matchFirst&&v3!=matchLast&&(v3.playIndex!=matchFirst.playIndex||-1==v3.playingPreset||v3.playingChannel!=channel||v3.playingKey!=key||6<=v3.ampEnv.segment)||v3.end(this.outSampleRate)}},channelNoteOffAll:function(channel){for(var v=$iterator(this._voices)();v.hasNext();){var v1=v.next();-1!=v1.playingPreset&&v1.playingChannel==channel&&v1.ampEnv.segment<6&&v1.end(this.outSampleRate)}},channelSoundsOffAll:function(channel){for(var v=$iterator(this._voices)();v.hasNext();){var v1=v.next();-1!=v1.playingPreset&&v1.playingChannel==channel&&(v1.ampEnv.segment<6||0==v1.ampEnv.parameters.release)&&v1.endQuick(this.outSampleRate)}},channelSetPresetIndex:function(channel,presetIndex){this.channelInit(channel).presetIndex=system.Convert.toUInt16(presetIndex)},channelSetPresetNumber:function(channel,presetNumber,midiDrums){null==midiDrums&&(midiDrums=!1);var presetIndex,c=this.channelInit(channel);return midiDrums?(-1==(presetIndex=this.getPresetIndex(128|32767&c.bank,presetNumber))&&(presetIndex=this.getPresetIndex(128,presetNumber)),-1==presetIndex&&(presetIndex=this.getPresetIndex(128,0)),-1==presetIndex&&(presetIndex=this.getPresetIndex(2047&c.bank,presetNumber))):presetIndex=this.getPresetIndex(2047&c.bank,presetNumber),-1==presetIndex&&(presetIndex=this.getPresetIndex(0,presetNumber)),-1!=presetIndex&&(c.presetIndex=system.Convert.toUInt16(presetIndex),!0)},channelSetBank:function(channel,bank){this.channelInit(channel).bank=system.Convert.toUInt16(bank)},channelSetBankPreset:function(channel,bank,presetNumber){var c=this.channelInit(channel),presetIndex=this.getPresetIndex(bank,presetNumber);return-1!=presetIndex&&(c.presetIndex=system.Convert.toUInt16(presetIndex),c.bank=system.Convert.toUInt16(bank),!0)},channelSetPan:function(channel,pan){for(var v=$iterator(this._voices)();v.hasNext();){var v1=v.next();if(v1.playingChannel==channel&&-1!=v1.playingPreset){var newPan=v1.region.pan+pan-.5;if(newPan<=-.5)v1.panFactorLeft=1,v1.panFactorRight=0;else{if(.5<=newPan)v1.panFactorLeft=0,v1.panFactorRight=1;else{var this4=.5-newPan;v1.panFactorLeft=js.Boot.__cast(Math.sqrt(this4),Float);var this6=.5+newPan;v1.panFactorRight=js.Boot.__cast(Math.sqrt(this6),Float)}}}}this.channelInit(channel).panOffset=pan-.5},channelSetVolume:function(channel,volume){var c=this.channelInit(channel),gainDb=alphaTab.audio.synth.util.SynthHelper.gainToDecibels(volume),gainDBChange=gainDb-c.gainDb;if(0!=gainDBChange){for(var v=$iterator(this._voices)();v.hasNext();){var v1=v.next();v1.playingChannel==channel&&-1!=v1.playingPreset&&(v1.noteGainDb=v1.noteGainDb+gainDBChange)}c.gainDb=gainDb}},channelSetPitchWheel:function(channel,pitchWheel){var c=this.channelInit(channel);c.pitchWheel!=pitchWheel&&(c.pitchWheel=system.Convert.toUInt16(pitchWheel),this.channelApplyPitch(channel,c))},channelApplyPitch:function(channel,c){var pitchShift;if(8192==c.pitchWheel)pitchShift=c.tuning;else{pitchShift=c.pitchWheel/16383*c.pitchRange*2-c.pitchRange+c.tuning}for(var v=$iterator(this._voices)();v.hasNext();){var v1=v.next();v1.playingChannel==channel&&-1!=v1.playingPreset&&v1.calcPitchRatio(pitchShift,this.outSampleRate)}},channelSetPitchRange:function(channel,pitchRange){var c=this.channelInit(channel);c.pitchRange!=pitchRange&&(c.pitchRange=pitchRange,8192!=c.pitchWheel&&this.channelApplyPitch(channel,c))},channelSetTuning:function(channel,tuning){var c=this.channelInit(channel);c.tuning!=tuning&&(c.tuning=tuning,this.channelApplyPitch(channel,c))},channelMidiControl:function(channel,controller,controlValue){var c=this.channelInit(channel);switch(controller){case 0:return void(c.bank=system.Convert.toUInt16(32768|controlValue));case 6:if(c.midiData=system.Convert.toUInt16(127&c.midiData|controlValue<<7),0==c.midiRpn){this.channelSetPitchRange(channel,(c.midiData>>7)+.01*(127&c.midiData))}else if(1==c.midiRpn){this.channelSetTuning(channel,system.Convert.toInt32_Single(c.tuning)+(c.midiData-8192)/8192)}else if(2==c.midiRpn&&6==controller){this.channelSetTuning(channel,controlValue-64+(c.tuning-system.Convert.toInt32_Single(c.tuning)))}return;case 7:c.midiVolume=system.Convert.toUInt16(127&c.midiVolume|controlValue<<7);var this7=c.midiVolume/16383*(c.midiExpression/16383);return void this.channelSetVolume(channel,js.Boot.__cast(Math.pow(this7,3),Float));case 10:c.midiPan=system.Convert.toUInt16(127&c.midiPan|controlValue<<7);return void this.channelSetPan(channel,c.midiPan/16383);case 11:c.midiExpression=system.Convert.toUInt16(127&c.midiExpression|controlValue<<7);var this11=c.midiVolume/16383*(c.midiExpression/16383);return void this.channelSetVolume(channel,js.Boot.__cast(Math.pow(this11,3),Float));case 32:return void(c.bank=system.Convert.toUInt16((0!=(32768&c.bank)?(127&c.bank)<<7:0)|controlValue));case 38:if(c.midiData=system.Convert.toUInt16(16256&c.midiData|controlValue),0==c.midiRpn){this.channelSetPitchRange(channel,(c.midiData>>7)+.01*(127&c.midiData))}else if(1==c.midiRpn){this.channelSetTuning(channel,system.Convert.toInt32_Single(c.tuning)+(c.midiData-8192)/8192)}else if(2==c.midiRpn&&6==controller){this.channelSetTuning(channel,controlValue-64+(c.tuning-system.Convert.toInt32_Single(c.tuning)))}return;case 39:c.midiVolume=system.Convert.toUInt16(16256&c.midiVolume|controlValue);var this18=c.midiVolume/16383*(c.midiExpression/16383);return void this.channelSetVolume(channel,js.Boot.__cast(Math.pow(this18,3),Float));case 42:c.midiPan=system.Convert.toUInt16(16256&c.midiPan|controlValue);return void this.channelSetPan(channel,c.midiPan/16383);case 43:c.midiExpression=system.Convert.toUInt16(16256&c.midiExpression|controlValue);var this22=c.midiVolume/16383*(c.midiExpression/16383);return void this.channelSetVolume(channel,js.Boot.__cast(Math.pow(this22,3),Float));case 98:case 99:return void(c.midiRpn=65535);case 100:return void(c.midiRpn=system.Convert.toUInt16(16256&(65535==c.midiRpn?0:c.midiRpn)|controlValue));case 101:return void(c.midiRpn=system.Convert.toUInt16(127&(65535==c.midiRpn?0:c.midiRpn)|controlValue<<7));case 120:return void this.channelSoundsOffAll(channel);case 121:return c.midiVolume=c.midiExpression=16383,c.midiPan=8192,c.bank=0,this.channelSetVolume(channel,1),this.channelSetPan(channel,.5),void this.channelSetPitchRange(channel,2);case 123:return void this.channelNoteOffAll(channel);case 5:case 64:case 65:case 66:case 96:case 97:case 122:case 124:case 125:case 126:case 127:return}},channelGetPresetIndex:function(channel){return null!=this._channels&&channel<this._channels.channelList.length?this._channels.channelList[channel].presetIndex:0},channelGetPresetBank:function(channel){return null!=this._channels&&channel<this._channels.channelList.length?32767&this._channels.channelList[channel].bank:0},channelGetPan:function(channel){if(null!=this._channels&&channel<this._channels.channelList.length){return this._channels.channelList[channel].panOffset-.5}return.5},channelGetVolume:function(channel){return null!=this._channels&&channel<this._channels.channelList.length?alphaTab.audio.synth.util.SynthHelper.decibelsToGain(this._channels.channelList[channel].gainDb):1},channelGetPitchWheel:function(channel){return null!=this._channels&&channel<this._channels.channelList.length?this._channels.channelList[channel].pitchWheel:8192},channelGetPitchRange:function(channel){return null!=this._channels&&channel<this._channels.channelList.length?this._channels.channelList[channel].pitchRange:2},channelGetTuning:function(channel){return null!=this._channels&&channel<this._channels.channelList.length?this._channels.channelList[channel].tuning:0},loadPresets:function(hydra){var size=hydra.phdrs.length-1,this1=new Array(size);this._presets=this1,this.fontSamples=hydra.fontSamples;for(var phdrIndex=0;phdrIndex<hydra.phdrs.length-1;){for(var sortedIndex=0,phdr=hydra.phdrs[phdrIndex],otherPhdrIndex=0;otherPhdrIndex<hydra.phdrs.length;){var otherPhdr=hydra.phdrs[otherPhdrIndex];if(otherPhdrIndex==phdrIndex||otherPhdr.bank>phdr.bank)++otherPhdrIndex;else{if(otherPhdr.bank<phdr.bank)++sortedIndex;else{if(otherPhdr.preset>phdr.preset){++otherPhdrIndex;continue}(otherPhdr.preset<phdr.preset||otherPhdrIndex<phdrIndex)&&++sortedIndex}++otherPhdrIndex}}var regionIndex=0,preset=this._presets[sortedIndex]=new alphaTab.audio.synth.synthesis.Preset;preset.name=phdr.presetName,preset.bank=phdr.bank,preset.presetNumber=phdr.preset;for(var regionNum=0,pbagIndex=phdr.presetBagNdx;pbagIndex<hydra.phdrs[phdrIndex+1].presetBagNdx;){for(var plokey=0,phikey=127,plovel=0,phivel=127,pgenIndex=hydra.pbags[pbagIndex].genNdx;pgenIndex<hydra.pbags[pbagIndex+1].genNdx;){var pgen=hydra.pgens[pgenIndex];if(43!=pgen.genOper)if(44!=pgen.genOper)if(41==pgen.genOper)if(pgen.genAmount.wordAmount>=hydra.insts.length)++pgenIndex;else{for(var ibagIndex=hydra.insts[pgen.genAmount.wordAmount].instBagNdx;ibagIndex<hydra.insts[pgen.genAmount.wordAmount+1].instBagNdx;){for(var ilokey=0,ihikey=127,ilovel=0,ihivel=127,igenIndex=hydra.ibags[ibagIndex].instGenNdx;igenIndex<hydra.ibags[ibagIndex+1].instGenNdx;){var igen=hydra.igens[igenIndex];43!=igen.genOper?(44!=igen.genOper?53==igen.genOper&&plokey<=ihikey&&ilokey<=phikey&&plovel<=ihivel&&ilovel<=phivel&&++regionNum:(ilovel=igen.genAmount.get_lowByteAmount(),ihivel=igen.genAmount.get_highByteAmount()),++igenIndex):(ilokey=igen.genAmount.get_lowByteAmount(),ihikey=igen.genAmount.get_highByteAmount(),++igenIndex)}++ibagIndex}++pgenIndex}else++pgenIndex;else plovel=pgen.genAmount.get_lowByteAmount(),phivel=pgen.genAmount.get_highByteAmount(),++pgenIndex;else plokey=pgen.genAmount.get_lowByteAmount(),phikey=pgen.genAmount.get_highByteAmount(),++pgenIndex}++pbagIndex}var this2=new Array(regionNum);preset.regions=this2;var globalRegion=(new alphaTab.audio.synth.synthesis.Region).Region();globalRegion.clear(!0);for(var pbagIndex1=phdr.presetBagNdx;pbagIndex1<hydra.phdrs[phdrIndex+1].presetBagNdx;){for(var pbag1=hydra.pbags[pbagIndex1],presetRegion=(new alphaTab.audio.synth.synthesis.Region).Region_Region(globalRegion),hadGenInstrument=!1,pgenIndex1=pbag1.genNdx;pgenIndex1<hydra.pbags[pbagIndex1+1].genNdx;){var pgen1=hydra.pgens[pgenIndex1];if(41==pgen1.genOper){var whichInst=pgen1.genAmount.wordAmount;if(whichInst>=hydra.insts.length){++pgenIndex1;continue}var instRegion=(new alphaTab.audio.synth.synthesis.Region).Region();instRegion.clear(!1);for(var inst=hydra.insts[whichInst],ibagIndex1=inst.instBagNdx;ibagIndex1<hydra.insts[whichInst+1].instBagNdx;){for(var ibag1=hydra.ibags[ibagIndex1],zoneRegion=(new alphaTab.audio.synth.synthesis.Region).Region_Region(instRegion),hadSampleId=!1,igenIndex1=ibag1.instGenNdx;igenIndex1<hydra.ibags[ibagIndex1+1].instGenNdx;){var igen1=hydra.igens[igenIndex1];if(53==igen1.genOper){if(zoneRegion.hiKey<presetRegion.loKey||zoneRegion.loKey>presetRegion.hiKey){++igenIndex1;continue}if(zoneRegion.hiVel<presetRegion.loVel||zoneRegion.loVel>presetRegion.hiVel){++igenIndex1;continue}if(presetRegion.loKey>zoneRegion.loKey&&(zoneRegion.loKey=presetRegion.loKey),presetRegion.hiKey<zoneRegion.hiKey&&(zoneRegion.hiKey=presetRegion.hiKey),presetRegion.loVel>zoneRegion.loVel&&(zoneRegion.loVel=presetRegion.loVel),presetRegion.hiVel<zoneRegion.hiVel&&(zoneRegion.hiVel=presetRegion.hiVel),zoneRegion.offset=zoneRegion.offset+presetRegion.offset,zoneRegion.end=zoneRegion.end+presetRegion.end,zoneRegion.loopStart=zoneRegion.loopStart+presetRegion.loopStart,zoneRegion.loopEnd=zoneRegion.loopEnd+presetRegion.loopEnd,zoneRegion.transpose=zoneRegion.transpose+presetRegion.transpose,zoneRegion.tune=zoneRegion.tune+presetRegion.tune,zoneRegion.pitchKeyTrack=zoneRegion.pitchKeyTrack+presetRegion.pitchKeyTrack,zoneRegion.attenuation=zoneRegion.attenuation+presetRegion.attenuation,zoneRegion.pan=zoneRegion.pan+presetRegion.pan,zoneRegion.ampEnv.delay=zoneRegion.ampEnv.delay+presetRegion.ampEnv.delay,zoneRegion.ampEnv.attack=zoneRegion.ampEnv.attack+presetRegion.ampEnv.attack,zoneRegion.ampEnv.hold=zoneRegion.ampEnv.hold+presetRegion.ampEnv.hold,zoneRegion.ampEnv.decay=zoneRegion.ampEnv.decay+presetRegion.ampEnv.decay,zoneRegion.ampEnv.sustain=zoneRegion.ampEnv.sustain+presetRegion.ampEnv.sustain,zoneRegion.ampEnv.release=zoneRegion.ampEnv.release+presetRegion.ampEnv.release,zoneRegion.modEnv.delay=zoneRegion.modEnv.delay+presetRegion.modEnv.delay,zoneRegion.modEnv.attack=zoneRegion.modEnv.attack+presetRegion.modEnv.attack,zoneRegion.modEnv.hold=zoneRegion.modEnv.hold+presetRegion.modEnv.hold,zoneRegion.modEnv.decay=zoneRegion.modEnv.decay+presetRegion.modEnv.decay,zoneRegion.modEnv.sustain=zoneRegion.modEnv.sustain+presetRegion.modEnv.sustain,zoneRegion.modEnv.release=zoneRegion.modEnv.release+presetRegion.modEnv.release,zoneRegion.initialFilterQ=zoneRegion.initialFilterQ+presetRegion.initialFilterQ,zoneRegion.initialFilterFc=zoneRegion.initialFilterFc+presetRegion.initialFilterFc,zoneRegion.modEnvToPitch=zoneRegion.modEnvToPitch+presetRegion.modEnvToPitch,zoneRegion.modEnvToFilterFc=zoneRegion.modEnvToFilterFc+presetRegion.modEnvToFilterFc,zoneRegion.delayModLFO=zoneRegion.delayModLFO+presetRegion.delayModLFO,zoneRegion.freqModLFO=zoneRegion.freqModLFO+presetRegion.freqModLFO,zoneRegion.modLfoToPitch=zoneRegion.modLfoToPitch+presetRegion.modLfoToPitch,zoneRegion.modLfoToFilterFc=zoneRegion.modLfoToFilterFc+presetRegion.modLfoToFilterFc,zoneRegion.modLfoToVolume=zoneRegion.modLfoToVolume+presetRegion.modLfoToVolume,zoneRegion.delayVibLFO=zoneRegion.delayVibLFO+presetRegion.delayVibLFO,zoneRegion.freqVibLFO=zoneRegion.freqVibLFO+presetRegion.freqVibLFO,zoneRegion.vibLfoToPitch=zoneRegion.vibLfoToPitch+presetRegion.vibLfoToPitch,zoneRegion.ampEnv.envToSecs(!0),zoneRegion.modEnv.envToSecs(!1),zoneRegion.delayModLFO=zoneRegion.delayModLFO<-11950?0:alphaTab.audio.synth.util.SynthHelper.timecents2Secs_Single(zoneRegion.delayModLFO),zoneRegion.delayVibLFO=zoneRegion.delayVibLFO<-11950?0:alphaTab.audio.synth.util.SynthHelper.timecents2Secs_Single(zoneRegion.delayVibLFO),zoneRegion.pan<-.5)zoneRegion.pan=-.5;else{.5<zoneRegion.pan&&(zoneRegion.pan=.5)}(zoneRegion.initialFilterQ<1500||13500<zoneRegion.initialFilterQ)&&(zoneRegion.initialFilterQ=0);var shdr=hydra.sHdrs[igen1.genAmount.wordAmount];zoneRegion.offset=zoneRegion.offset+shdr.start,zoneRegion.end=zoneRegion.end+shdr.end,zoneRegion.loopStart=zoneRegion.loopStart+shdr.startLoop,zoneRegion.loopEnd=zoneRegion.loopEnd+shdr.endLoop,0<shdr.endLoop&&(zoneRegion.loopEnd=zoneRegion.loopEnd-1),-1==zoneRegion.pitchKeyCenter&&(zoneRegion.pitchKeyCenter=shdr.originalPitch),zoneRegion.tune=zoneRegion.tune+shdr.pitchCorrection,zoneRegion.sampleRate=shdr.sampleRate,0!=zoneRegion.end&&zoneRegion.end<this.fontSamples.length?zoneRegion.end++:zoneRegion.end=system.Convert.toUInt32(this.fontSamples.length),preset.regions[regionIndex]=(new alphaTab.audio.synth.synthesis.Region).Region_Region(zoneRegion),++regionIndex,hadSampleId=!0}else zoneRegion.operator(igen1.genOper,igen1.genAmount);++igenIndex1}ibag1!=hydra.ibags[inst.instBagNdx]||hadSampleId||(instRegion=(new alphaTab.audio.synth.synthesis.Region).Region_Region(zoneRegion)),++ibagIndex1}hadGenInstrument=!0}else presetRegion.operator(pgen1.genOper,pgen1.genAmount);++pgenIndex1}pbag1!=hydra.pbags[phdr.presetBagNdx]||hadGenInstrument||(globalRegion=presetRegion),++pbagIndex1}++phdrIndex}},__class__:alphaTab.audio.synth.synthesis.TinySoundFont},alphaTab.audio.synth.MidiFileSequencer=function(synthesizer){this._synthesizer=null,this._tempoChanges=null,this._firstProgramEventPerChannel=null,this._synthData=null,this._division=0,this._eventIndex=0,this._currentTime=0,this._playbackRange=null,this._playbackRangeStartTime=0,this._playbackRangeEndTime=0,this._endTime=0,this.isLooping=!1,this.endTick=0,this.playbackSpeed=0,this._synthesizer=synthesizer;this._firstProgramEventPerChannel={};this._tempoChanges=[],this.playbackSpeed=1},alphaTab.audio.synth.MidiFileSequencer.__name__=["alphaTab","audio","synth","MidiFileSequencer"],alphaTab.audio.synth.MidiFileSequencer.prototype={get_playbackRange:function(){return this._playbackRange},set_playbackRange:function(value){return null!=(this._playbackRange=value)&&(this._playbackRangeStartTime=this.tickPositionToTimePositionWithSpeed(value.startTick,1),this._playbackRangeEndTime=this.tickPositionToTimePositionWithSpeed(value.endTick,1)),this.get_playbackRange()},get_endTime:function(){return this._endTime/this.playbackSpeed},seek:function(timePosition){if(timePosition*=this.playbackSpeed,null!=this.get_playbackRange()&&(timePosition<this._playbackRangeStartTime?timePosition=this._playbackRangeStartTime:timePosition>this._playbackRangeEndTime&&(timePosition=this._playbackRangeEndTime)),(timePosition-=25)<0&&(timePosition=0),timePosition>this._currentTime)this.silentProcess(timePosition-this._currentTime);else if(timePosition<this._currentTime){this._currentTime=0,this._eventIndex=0;var metronomeVolume=this._synthesizer.get_metronomeVolume();this._synthesizer.noteOffAll(!0),this._synthesizer.resetSoft(),this._synthesizer.setupMetronomeChannel(metronomeVolume),this.silentProcess(timePosition)}},silentProcess:function(milliseconds){if(!(milliseconds<=0)){for(var start=Date.now(),finalTime=this._currentTime+milliseconds;this._currentTime<finalTime;)this.fillMidiEventQueueLimited(finalTime-this._currentTime)&&this._synthesizer.synthesizeSilent();var duration=Date.now()-start;alphaTab.util.Logger.debug("Sequencer","Silent seek finished in "+Std.string(duration)+"ms",null)}},loadMidi:function(midiFile){this._tempoChanges=[],this._division=midiFile.division,this._eventIndex=0,this._currentTime=0;this._synthData=[];for(var bpm=120,absTick=0,absTime=0,metronomeLength=0,metronomeTick=0,metronomeTime=0,previousTick=0,mEvent=$iterator(midiFile.events)();mEvent.hasNext();){var mEvent1=mEvent.next(),synthData=new alphaTab.audio.synth.synthesis.SynthEvent(this._synthData.length,mEvent1);this._synthData.push(synthData);var deltaTick=mEvent1.tick-previousTick;if(absTick+=deltaTick,absTime+=deltaTick*(6e4/(bpm*midiFile.division)),synthData.time=absTime,previousTick=mEvent1.tick,255==mEvent1.get_command()&&81==mEvent1.get_data1()){var meta=js.Boot.__cast(mEvent1,alphaTab.audio.synth.midi.event.MetaNumberEvent);bpm=6e7/js.Boot.__cast(meta.value,Float),this._tempoChanges.push(new alphaTab.audio.synth.MidiFileSequencerTempoChange(bpm,absTick,system.Convert.toInt32_Double(absTime)))}else if(255==mEvent1.get_command()&&88==mEvent1.get_data1()){var this3=js.Boot.__cast(mEvent1,alphaTab.audio.synth.midi.event.MetaDataEvent).data[1],timeSignatureDenominator=system.Convert.toInt32_Double(Math.pow(2,this3));metronomeLength=system.Convert.toInt32_Double(this._division*(4/timeSignatureDenominator))}else if(192==mEvent1.get_command()){var channel=mEvent1.get_channel();this._firstProgramEventPerChannel.hasOwnProperty(channel)||(this._firstProgramEventPerChannel[channel]=synthData)}if(0<metronomeLength)for(;metronomeTick<absTick;){var metronome=alphaTab.audio.synth.synthesis.SynthEvent.newMetronomeEvent(this._synthData.length,metronomeLength);this._synthData.push(metronome),metronome.time=metronomeTime,metronomeTick+=metronomeLength,metronomeTime+=metronomeLength*(6e4/(bpm*midiFile.division))}}this._synthData.sort(function(a1,b1){return b=b1,(a=a1).time>b.time?1:a.time<b.time?-1:a.eventIndex-b.eventIndex;var a,b}),this._endTime=absTime,this.endTick=absTick},fillMidiEventQueue:function(){return this.fillMidiEventQueueLimited(-1)},fillMidiEventQueueLimited:function(maxMilliseconds){var millisecondsPerBuffer=64/js.Boot.__cast(this._synthesizer.outSampleRate,Float)*1e3*this.playbackSpeed;0<maxMilliseconds&&maxMilliseconds<millisecondsPerBuffer&&(millisecondsPerBuffer=maxMilliseconds);for(var anyEventsDispatched=!1,endTime=this.get_internalEndTime(),i=0;i<32;){for(this._currentTime=this._currentTime+millisecondsPerBuffer;this._eventIndex<this._synthData.length&&this._synthData[this._eventIndex].time<this._currentTime&&this._currentTime<endTime;)this._synthesizer.dispatchEvent(i,this._synthData[this._eventIndex]),this._eventIndex++,anyEventsDispatched=!0;++i}return anyEventsDispatched},tickPositionToTimePosition:function(tickPosition){return this.tickPositionToTimePositionWithSpeed(tickPosition,this.playbackSpeed)},timePositionToTickPosition:function(timePosition){return this.timePositionToTickPositionWithSpeed(timePosition,this.playbackSpeed)},tickPositionToTimePositionWithSpeed:function(tickPosition,playbackSpeed){for(var timePosition=0,bpm=120,lastChange=0,i=0;i<this._tempoChanges.length;){var c=this._tempoChanges[i];if(tickPosition<c.ticks)break;timePosition=c.time,bpm=c.bpm,lastChange=c.ticks,++i}return(timePosition+=(tickPosition-=lastChange)*(6e4/(bpm*this._division)))/playbackSpeed},timePositionToTickPositionWithSpeed:function(timePosition,playbackSpeed){timePosition*=playbackSpeed;for(var ticks=0,bpm=120,lastChange=0,i=0;i<this._tempoChanges.length;){var c=this._tempoChanges[i];if(timePosition<c.time)break;ticks=c.ticks,bpm=c.bpm,lastChange=c.time,++i}return timePosition-=lastChange,(ticks+=system.Convert.toInt32_Double(timePosition/(6e4/(bpm*this._division))))+1},addFinished:function(value){this.finished=system._EventAction.EventAction_Impl_.add(this.finished,value)},removeFinished:function(value){this.finished=system._EventAction.EventAction_Impl_.sub(this.finished,value)},onFinished:function(){function finished(){system._EventAction.EventAction_Impl_.invoke(_e)}var _e=this.finished;null!=finished&&finished()},get_internalEndTime:function(){return null==this.get_playbackRange()?this._endTime:this._playbackRangeEndTime},checkForStop:function(){if(this._currentTime>=this.get_internalEndTime()){var metronomeVolume=this._synthesizer.get_metronomeVolume();this._synthesizer.noteOffAll(!0),this._synthesizer.resetSoft(),this._synthesizer.setupMetronomeChannel(metronomeVolume),this.onFinished()}},stop:function(){if(null==this.get_playbackRange())this._currentTime=0,this._eventIndex=0;else if(null!=this.get_playbackRange()){var this1=this.get_playbackRange().startTick;this._currentTime=this1,this._eventIndex=0}},setChannelProgram:function(channel,program){this._firstProgramEventPerChannel.hasOwnProperty(channel)&&this._firstProgramEventPerChannel[channel].event.set_data1(program)},__class__:alphaTab.audio.synth.MidiFileSequencer},alphaTab.rendering={},alphaTab.rendering.layout={},alphaTab.rendering.layout.ScoreLayout=function(renderer){this._barRendererLookup=null,this.renderer=null,this.width=0,this.height=0,this.ScoreInfoGlyphs=null,this.ChordDiagrams=null,this.TuningGlyph=null,this.firstBarIndex=0,this.lastBarIndex=0,this.renderer=renderer;this._barRendererLookup={}},alphaTab.rendering.layout.ScoreLayout.__name__=["alphaTab","rendering","layout","ScoreLayout"],alphaTab.rendering.layout.ScoreLayout.prototype={get_name:function(){throw new js._Boot.HaxeError("abstract")},get_supportsResize:function(){throw new js._Boot.HaxeError("abstract")},resize:function(){throw new js._Boot.HaxeError("abstract")},layoutAndRender:function(){var score=this.renderer.score,startIndex=this.renderer.settings.display.startBar;--startIndex,startIndex=Math.min(score.masterBars.length-1,Math.max(0,startIndex)),this.firstBarIndex=startIndex;var endBarIndex=this.renderer.settings.display.barCount;endBarIndex<0&&(endBarIndex=score.masterBars.length),endBarIndex=startIndex+endBarIndex-1,endBarIndex=Math.min(score.masterBars.length-1,Math.max(0,endBarIndex)),this.lastBarIndex=endBarIndex,this.createScoreInfoGlyphs(),this.doLayoutAndRender()},doLayoutAndRender:function(){throw new js._Boot.HaxeError("abstract")},createScoreInfoGlyphs:function(){alphaTab.util.Logger.info("ScoreLayout","Creating score info glyphs",null);var flags=this.renderer.settings.notation.hideInfo?0:511,score=this.renderer.score,res=this.renderer.settings.display.resources;this.ScoreInfoGlyphs={};var s=score.title;null!=s&&0!=s.length&&0!=(1&flags)&&(this.ScoreInfoGlyphs[1]=new alphaTab.rendering.glyphs.TextGlyph(0,0,score.title,res.titleFont,1));var s1=score.subTitle;null!=s1&&0!=s1.length&&0!=(2&flags)&&(this.ScoreInfoGlyphs[2]=new alphaTab.rendering.glyphs.TextGlyph(0,0,score.subTitle,res.subTitleFont,1));var s2=score.artist;null!=s2&&0!=s2.length&&0!=(4&flags)&&(this.ScoreInfoGlyphs[4]=new alphaTab.rendering.glyphs.TextGlyph(0,0,score.artist,res.subTitleFont,1));var s3=score.album;null!=s3&&0!=s3.length&&0!=(8&flags)&&(this.ScoreInfoGlyphs[8]=new alphaTab.rendering.glyphs.TextGlyph(0,0,score.album,res.subTitleFont,1));var s4=score.music;if(!!(null!=s4&&0!=s4.length&&score.music==score.words)&&0!=(64&flags))this.ScoreInfoGlyphs[64]=new alphaTab.rendering.glyphs.TextGlyph(0,0,"Music and Words by "+score.words,res.wordsFont,1);else{var s5=score.music;null!=s5&&0!=s5.length&&0!=(32&flags)&&(this.ScoreInfoGlyphs[32]=new alphaTab.rendering.glyphs.TextGlyph(0,0,"Music by "+score.music,res.wordsFont,2));var s6=score.words;null!=s6&&0!=s6.length&&0!=(16&flags)&&(this.ScoreInfoGlyphs[16]=new alphaTab.rendering.glyphs.TextGlyph(0,0,"Words by "+score.words,res.wordsFont,0))}if(!this.renderer.settings.notation.hideTuning){for(var staffWithTuning=null,track=HxOverrides.iter(this.renderer.tracks);track.hasNext();){for(var staff=$iterator(track.next().staves)();staff.hasNext();){var staff1=staff.next();if(!staff1.isPercussion&&staff1.get_isStringed()&&0<staff1.tuning.length){staffWithTuning=staff1;break}}if(null!=staffWithTuning)break}if(null!=staffWithTuning){var tuning=alphaTab.model.Tuning.findTuning(staffWithTuning.tuning);null!=tuning&&(this.TuningGlyph=new alphaTab.rendering.glyphs.TuningGlyph(0,0,this.get_scale(),res,tuning))}}if(!this.renderer.settings.notation.hideChordDiagrams){this.ChordDiagrams=new alphaTab.rendering.glyphs.ChordDiagramContainerGlyph(0,0),this.ChordDiagrams.renderer=new alphaTab.rendering.BarRendererBase(this.renderer,null);for(var chords={},track2=HxOverrides.iter(this.renderer.tracks);track2.hasNext();)for(var staff2=$iterator(track2.next().staves)();staff2.hasNext();)for(var staff3=staff2.next(),this3=staff3.chords,chordId=$iterator(Object.keys(this3))();chordId.hasNext();){var chordId1=chordId.next();if(!chords.hasOwnProperty(chordId1)){var chord=staff3.chords[chordId1];chord.showDiagram&&(chords[chordId1]=chord,this.ChordDiagrams.addChord(chord))}}}},get_scale:function(){return this.renderer.settings.display.scale},createEmptyStaveGroup:function(){var group=new alphaTab.rendering.staves.StaveGroup;group.layout=this;for(var trackIndex=0;trackIndex<this.renderer.tracks.length;){for(var track=this.renderer.tracks[trackIndex],hasScore=!1,staff=$iterator(track.staves)();staff.hasNext();){if(staff.next().showStandardNotation){hasScore=!0;break}}for(var staffIndex=0;staffIndex<track.staves.length;){var staveProfile,staff2=track.staves[staffIndex];if(staff2.isPercussion)staveProfile=2;else if(0!=this.renderer.settings.display.staveProfile)staveProfile=this.renderer.settings.display.staveProfile;else if(staff2.showTablature&&staff2.showStandardNotation)staveProfile=1;else if(staff2.showTablature)staveProfile=hasScore?4:3;else{if(!staff2.showStandardNotation){++staffIndex;continue}staveProfile=2}for(var profile=alphaTab.Environment.StaveProfiles[staveProfile],factory=HxOverrides.iter(profile);factory.hasNext();){var factory1=factory.next();factory1.canCreate(track,staff2)&&group.addStaff(track,new alphaTab.rendering.staves.Staff(trackIndex,staff2,factory1))}++staffIndex}++trackIndex}return group},registerBarRenderer:function(key,renderer){if(!this._barRendererLookup.hasOwnProperty(key)){this._barRendererLookup[key]={}}this._barRendererLookup[key][renderer.bar.id]=renderer},unregisterBarRenderer:function(key,renderer){this._barRendererLookup.hasOwnProperty(key)&&delete this._barRendererLookup[key][renderer.bar.id]},getRendererForBar:function(key,bar){var barRendererId=bar.id;return this._barRendererLookup.hasOwnProperty(key)&&this._barRendererLookup[key].hasOwnProperty(barRendererId)?this._barRendererLookup[key][barRendererId]:null},renderAnnotation:function(){var canvas=this.renderer.canvas,resources=this.renderer.settings.display.resources,size=12*this.renderer.settings.display.scale,height=2*size;this.height=this.height+height;var x=this.width/2;canvas.beginRender(this.width,height),canvas.set_color(resources.mainGlyphColor),canvas.set_font(new alphaTab.platform.model.Font(resources.copyrightFont.family,size,1)),canvas.set_textAlign(1),canvas.fillText("rendered by alphaTab (https://alphaTab.net)",x,size);var result=canvas.endRender(),tmp=this.renderer,_tmp=new alphaTab.rendering.RenderFinishedEventArgs;_tmp.width=this.width,_tmp.height=height,_tmp.renderResult=result,_tmp.totalWidth=this.width,_tmp.totalHeight=height,_tmp.firstMasterBarIndex=-1,_tmp.lastMasterBarIndex=-1,tmp.onPartialRenderFinished(_tmp)},__class__:alphaTab.rendering.layout.ScoreLayout},alphaTab.rendering.layout.PageViewLayout=function(renderer){alphaTab.rendering.layout.ScoreLayout.call(this,renderer),this._groups=null,this._allMasterBarRenderers=null,this._barsFromPreviousGroup=null,this._pagePadding=null;this._barsFromPreviousGroup=[]},alphaTab.rendering.layout.PageViewLayout.__name__=["alphaTab","rendering","layout","PageViewLayout"],alphaTab.rendering.layout.PageViewLayout.__super__=alphaTab.rendering.layout.ScoreLayout,alphaTab.rendering.layout.PageViewLayout.prototype=$extend(alphaTab.rendering.layout.ScoreLayout.prototype,{get_name:function(){return"PageView"},doLayoutAndRender:function(){this._pagePadding=this.renderer.settings.display.padding,null==this._pagePadding&&(this._pagePadding=alphaTab.rendering.layout.PageViewLayout.PagePadding),1==this._pagePadding.length?this._pagePadding=new Float32Array([this._pagePadding[0],this._pagePadding[0],this._pagePadding[0],this._pagePadding[0]]):2==this._pagePadding.length&&(this._pagePadding=new Float32Array([this._pagePadding[0],this._pagePadding[1],this._pagePadding[0],this._pagePadding[1]]));var x=this._pagePadding[0],y=this._pagePadding[1],this1=this.renderer.get_width();this.width=this1;this._allMasterBarRenderers=[],y=this.layoutAndRenderScoreInfo(x,y,-1),y=this.layoutAndRenderChordDiagrams(y,-1),y=this.layoutAndRenderScore(x,y),this.height=y+this._pagePadding[3]},get_supportsResize:function(){return!0},resize:function(){var x=this._pagePadding[0],y=this._pagePadding[1],this1=this.renderer.get_width();this.width=this1;var oldHeight=this.height;y=this.layoutAndRenderScoreInfo(x,y,oldHeight),y=this.layoutAndRenderChordDiagrams(y,oldHeight),y=this.resizeAndRenderScore(x,y,oldHeight),this.height=y+this._pagePadding[3]},layoutAndRenderChordDiagrams:function(y,totalHeight){null==totalHeight&&(totalHeight=-1);if(null==this.ChordDiagrams)return y;var res=this.renderer.settings.display.resources;this.ChordDiagrams.width=this.width,this.ChordDiagrams.doLayout();var canvas=this.renderer.canvas;canvas.beginRender(this.width,this.ChordDiagrams.height),canvas.set_color(res.scoreInfoColor),canvas.set_textAlign(1),this.ChordDiagrams.paint(0,0,canvas);var result=canvas.endRender();y+=this.ChordDiagrams.height;var tmp=this.renderer,_tmp=new alphaTab.rendering.RenderFinishedEventArgs;return _tmp.width=this.width,_tmp.height=this.ChordDiagrams.height,_tmp.renderResult=result,_tmp.totalWidth=this.width,_tmp.totalHeight=totalHeight<0?y:totalHeight,_tmp.firstMasterBarIndex=-1,_tmp.lastMasterBarIndex=-1,tmp.onPartialRenderFinished(_tmp),y},layoutAndRenderScoreInfo:function(x,y,totalHeight){null==totalHeight&&(totalHeight=-1);alphaTab.util.Logger.debug(this.get_name(),"Layouting score info",null);for(var scale=this.get_scale(),res=this.renderer.settings.display.resources,centeredGlyphs=[1,2,4,8,64],i=0;i<centeredGlyphs.length;){if(this.ScoreInfoGlyphs.hasOwnProperty(centeredGlyphs[i])){var glyph=this.ScoreInfoGlyphs[centeredGlyphs[i]];glyph.x=this.width/2,glyph.y=y,glyph.textAlign=1,y+=glyph.font.size}++i}var musicOrWords=!1,musicOrWordsHeight=0;if(this.ScoreInfoGlyphs.hasOwnProperty(32)){var glyph1=this.ScoreInfoGlyphs[32];glyph1.x=this.width-this._pagePadding[2],glyph1.y=y,glyph1.textAlign=2,musicOrWords=!0,musicOrWordsHeight=glyph1.font.size}if(this.ScoreInfoGlyphs.hasOwnProperty(16)){var glyph2=this.ScoreInfoGlyphs[16];glyph2.x=x,glyph2.y=y,musicOrWords=!(glyph2.textAlign=0),musicOrWordsHeight=glyph2.font.size}musicOrWords&&(y+=musicOrWordsHeight),null!=this.TuningGlyph&&(y+=20*scale,this.TuningGlyph.x=x,this.TuningGlyph.y=y,y+=this.TuningGlyph.height),y+=20*scale;var canvas=this.renderer.canvas;canvas.beginRender(this.width,y),canvas.set_color(res.scoreInfoColor),canvas.set_textAlign(1);for(var this2=this.ScoreInfoGlyphs,key=$iterator(Object.keys(this2))();key.hasNext();){var key1=key.next();this.ScoreInfoGlyphs[key1].paint(0,0,canvas)}null!=this.TuningGlyph&&this.TuningGlyph.paint(0,0,canvas);var result=canvas.endRender(),tmp=this.renderer,_tmp=new alphaTab.rendering.RenderFinishedEventArgs;return _tmp.width=this.width,_tmp.height=y,_tmp.renderResult=result,_tmp.totalWidth=this.width,_tmp.totalHeight=totalHeight<0?y:totalHeight,_tmp.firstMasterBarIndex=-1,_tmp.lastMasterBarIndex=-1,tmp.onPartialRenderFinished(_tmp),y},resizeAndRenderScore:function(x,y,oldHeight){var canvas=this.renderer.canvas;if(-1!=this.renderer.settings.display.barsPerRow)for(var i=0;i<this._groups.length;){var group=this._groups[i];this.fitGroup(group),group.finalizeGroup(),y+=this.paintGroup(group,oldHeight,canvas),++i}else{this._groups=[];var currentIndex=0,maxWidth=this.get_maxWidth(),group1=this.createEmptyStaveGroup();for(group1.index=this._groups.length,group1.x=x,group1.y=y;currentIndex<this._allMasterBarRenderers.length;){var renderers=this._allMasterBarRenderers[currentIndex];if(group1.width+renderers.width<=maxWidth||0==group1.masterBarsRenderers.length)group1.addMasterBarRenderers(this.renderer.tracks,renderers),++currentIndex;else{for(;null!=renderers&&!renderers.canWrap&&1<group1.masterBarsRenderers.length;)renderers=group1.revertLastBar(),--currentIndex;group1.isFull=!0,group1.isLast=this.lastBarIndex==group1.get_lastBarIndex(),this._groups.push(group1),this.fitGroup(group1),group1.finalizeGroup(),y+=this.paintGroup(group1,oldHeight,canvas),(group1=this.createEmptyStaveGroup()).index=this._groups.length,group1.x=x,group1.y=y}}group1.isLast=this.lastBarIndex==group1.get_lastBarIndex(),this.fitGroup(group1),group1.finalizeGroup(),y+=this.paintGroup(group1,oldHeight,canvas)}return y},layoutAndRenderScore:function(x,y){var canvas=this.renderer.canvas,currentBarIndex=this.firstBarIndex,endBarIndex=this.lastBarIndex;for(this._groups=[];currentBarIndex<=endBarIndex;){var group=this.createStaveGroup(currentBarIndex,endBarIndex);this._groups.push(group),group.x=x,group.y=y,currentBarIndex=group.get_lastBarIndex()+1,this.fitGroup(group),group.finalizeGroup(),alphaTab.util.Logger.info(this.get_name(),"Rendering partial from bar "+Std.string(group.get_firstBarIndex())+" to "+Std.string(group.get_lastBarIndex()),null),y+=this.paintGroup(group,y,canvas)}return y},paintGroup:function(group,totalHeight,canvas){var height=group.get_height()+20*this.get_scale();canvas.beginRender(this.width,height),this.renderer.canvas.set_color(this.renderer.settings.display.resources.mainGlyphColor),this.renderer.canvas.set_textAlign(0),group.paint(0,-group.y,canvas),totalHeight+=height;var result=canvas.endRender(),args=new alphaTab.rendering.RenderFinishedEventArgs;return args.totalWidth=this.width,args.totalHeight=totalHeight,args.width=this.width,args.height=height,args.renderResult=result,args.firstMasterBarIndex=group.get_firstBarIndex(),args.lastMasterBarIndex=group.get_lastBarIndex(),this.renderer.onPartialRenderFinished(args),height},fitGroup:function(group){(group.isFull||group.width>this.get_maxWidth())&&group.scaleToWidth(this.get_maxWidth()),this.width=Math.max(this.width,group.width)},createStaveGroup:function(currentBarIndex,endIndex){var group=this.createEmptyStaveGroup();group.index=this._groups.length;for(var barsPerRow=this.renderer.settings.display.barsPerRow,maxWidth=this.get_maxWidth(),end=endIndex+1,i=currentBarIndex;i<end;){if(0<this._barsFromPreviousGroup.length)for(var renderer=$iterator(this._barsFromPreviousGroup)();renderer.hasNext();){var renderer1=renderer.next();group.addMasterBarRenderers(this.renderer.tracks,renderer1),i=renderer1.masterBar.index}else{var renderers=group.addBars(this.renderer.tracks,i);this._allMasterBarRenderers.push(renderers)}var groupIsFull=!(this._barsFromPreviousGroup=[]);if((-1==barsPerRow&&group.width>=maxWidth&&0!=group.masterBarsRenderers.length||group.masterBarsRenderers.length==barsPerRow+1)&&(groupIsFull=!0),groupIsFull){var reverted=group.revertLastBar();if(null!=reverted)for(this._barsFromPreviousGroup.push(reverted);null!=reverted&&!reverted.canWrap&&1<group.masterBarsRenderers.length;)reverted=group.revertLastBar(),this._barsFromPreviousGroup.push(reverted);return group.isFull=!0,group.isLast=!1,this._barsFromPreviousGroup.reverse(),group}group.x=0,++i}return group.isLast=endIndex==group.get_lastBarIndex(),group},get_maxWidth:function(){return this.renderer.get_width()-this._pagePadding[0]-this._pagePadding[2]},__class__:alphaTab.rendering.layout.PageViewLayout}),alphaTab.LayoutEngineFactory=function(vertical,layout){this.vertical=!1,this.createLayout=null,this.vertical=vertical,this.createLayout=layout},alphaTab.LayoutEngineFactory.__name__=["alphaTab","LayoutEngineFactory"],alphaTab.LayoutEngineFactory.prototype={__class__:alphaTab.LayoutEngineFactory},alphaTab.rendering.layout.HorizontalScreenLayout=function(renderer){alphaTab.rendering.layout.ScoreLayout.call(this,renderer),this._group=null,this._pagePadding=null},alphaTab.rendering.layout.HorizontalScreenLayout.__name__=["alphaTab","rendering","layout","HorizontalScreenLayout"],alphaTab.rendering.layout.HorizontalScreenLayout.__super__=alphaTab.rendering.layout.ScoreLayout,alphaTab.rendering.layout.HorizontalScreenLayout.prototype=$extend(alphaTab.rendering.layout.ScoreLayout.prototype,{get_name:function(){return"HorizontalScreen"},get_supportsResize:function(){return!1},resize:function(){},doLayoutAndRender:function(){this._pagePadding=this.renderer.settings.display.padding,null==this._pagePadding&&(this._pagePadding=alphaTab.rendering.layout.HorizontalScreenLayout.PagePadding),1==this._pagePadding.length?this._pagePadding=new Float32Array([this._pagePadding[0],this._pagePadding[0],this._pagePadding[0],this._pagePadding[0]]):2==this._pagePadding.length&&(this._pagePadding=new Float32Array([this._pagePadding[0],this._pagePadding[1],this._pagePadding[0],this._pagePadding[1]]));var score=this.renderer.score,canvas=this.renderer.canvas,startIndex=this.renderer.settings.display.startBar;--startIndex;var currentBarIndex=startIndex=Math.min(score.masterBars.length-1,Math.max(0,startIndex)),endBarIndex=this.renderer.settings.display.barCount;endBarIndex<=0&&(endBarIndex=score.masterBars.length),endBarIndex=startIndex+endBarIndex-1,endBarIndex=Math.min(score.masterBars.length-1,Math.max(0,endBarIndex)),this._group=this.createEmptyStaveGroup(),this._group.isLast=!0,this._group.x=this._pagePadding[0],this._group.y=this._pagePadding[1];for(var countPerPartial=this.renderer.settings.display.barCountPerPartial,partials=[],currentPartial=new alphaTab.rendering.layout.HorizontalScreenLayoutPartialInfo;currentBarIndex<=endBarIndex;){var result=this._group.addBars(this.renderer.tracks,currentBarIndex);if(0==currentPartial.masterBars.length&&result.isLinkedToPrevious&&0<partials.length){var previousPartial=partials[partials.length-1];previousPartial.masterBars.push(score.masterBars[currentBarIndex]),previousPartial.width=previousPartial.width+result.width}else currentPartial.masterBars.push(score.masterBars[currentBarIndex]),currentPartial.width=currentPartial.width+result.width,currentPartial.masterBars.length>=countPerPartial&&(0==partials.length&&(currentPartial.width=currentPartial.width+(this._group.x+this._group.accoladeSpacing)),partials.push(currentPartial),alphaTab.util.Logger.info(this.get_name(),"Finished partial from bar "+Std.string(currentPartial.masterBars[0].index)+" to "+Std.string(currentPartial.masterBars[currentPartial.masterBars.length-1].index),null),currentPartial=new alphaTab.rendering.layout.HorizontalScreenLayoutPartialInfo);++currentBarIndex}0<currentPartial.masterBars.length&&(0==partials.length&&(currentPartial.width=currentPartial.width+(this._group.x+this._group.accoladeSpacing)),partials.push(currentPartial),alphaTab.util.Logger.info(this.get_name(),"Finished partial from bar "+Std.string(currentPartial.masterBars[0].index)+" to "+Std.string(currentPartial.masterBars[currentPartial.masterBars.length-1].index),null)),this._group.finalizeGroup(),this.height=this._group.y+this._group.get_height()+this._pagePadding[3],this.width=this._group.x+this._group.width+this._pagePadding[2];for(var i=currentBarIndex=0;i<partials.length;){var partial=partials[i];canvas.beginRender(partial.width,this.height),canvas.set_color(this.renderer.settings.display.resources.mainGlyphColor),canvas.set_textAlign(0);var renderX=this._group.getBarX(partial.masterBars[0].index)+this._group.accoladeSpacing;0==i&&(renderX-=this._group.x+this._group.accoladeSpacing),alphaTab.util.Logger.info(this.get_name(),"Rendering partial from bar "+Std.string(partial.masterBars[0].index)+" to "+Std.string(partial.masterBars[partial.masterBars.length-1].index),null),this._group.paintPartial(-renderX,this._group.y,this.renderer.canvas,currentBarIndex,partial.masterBars.length);var result1=canvas.endRender(),tmp=this.renderer,_tmp=new alphaTab.rendering.RenderFinishedEventArgs;_tmp.totalWidth=this.width,_tmp.totalHeight=this.height,_tmp.width=partial.width,_tmp.height=this.height,_tmp.renderResult=result1,_tmp.firstMasterBarIndex=partial.masterBars[0].index,_tmp.lastMasterBarIndex=partial.masterBars[partial.masterBars.length-1].index,tmp.onPartialRenderFinished(_tmp),currentBarIndex+=partial.masterBars.length,++i}},__class__:alphaTab.rendering.layout.HorizontalScreenLayout}),alphaTab.rendering.IEffectBarRendererInfo=function(){},alphaTab.rendering.IEffectBarRendererInfo.__name__=["alphaTab","rendering","IEffectBarRendererInfo"],alphaTab.rendering.IEffectBarRendererInfo.prototype={__class__:alphaTab.rendering.IEffectBarRendererInfo},alphaTab.rendering.effects={},alphaTab.rendering.effects.TempoEffectInfo=function(){},alphaTab.rendering.effects.TempoEffectInfo.__name__=["alphaTab","rendering","effects","TempoEffectInfo"],alphaTab.rendering.effects.TempoEffectInfo.__interfaces__=[alphaTab.rendering.IEffectBarRendererInfo],alphaTab.rendering.effects.TempoEffectInfo.prototype={get_effectId:function(){return"tempo"},get_hideOnMultiTrack:function(){return!0},get_canShareBand:function(){return!1},get_sizingMode:function(){return 0},shouldCreateGlyph:function(settings,beat){return 0==beat.voice.bar.staff.index&&0==beat.voice.index&&0==beat.index&&(null!=beat.voice.bar.get_masterBar().tempoAutomation||0==beat.voice.bar.index)},createNewGlyph:function(renderer,beat){var tempo;return tempo=null!=beat.voice.bar.get_masterBar().tempoAutomation?system.Convert.toInt32_Single(beat.voice.bar.get_masterBar().tempoAutomation.value):beat.voice.bar.staff.track.score.tempo,new alphaTab.rendering.glyphs.TempoGlyph(0,0,tempo)},canExpand:function(from,to){return!0},__class__:alphaTab.rendering.effects.TempoEffectInfo},alphaTab.rendering.effects.TripletFeelEffectInfo=function(){},alphaTab.rendering.effects.TripletFeelEffectInfo.__name__=["alphaTab","rendering","effects","TripletFeelEffectInfo"],alphaTab.rendering.effects.TripletFeelEffectInfo.__interfaces__=[alphaTab.rendering.IEffectBarRendererInfo],alphaTab.rendering.effects.TripletFeelEffectInfo.prototype={get_effectId:function(){return"triplet-feel"},get_hideOnMultiTrack:function(){return!0},get_canShareBand:function(){return!1},get_sizingMode:function(){return 0},shouldCreateGlyph:function(settings,beat){return 0==beat.index&&(0==beat.voice.bar.get_masterBar().index&&0!=beat.voice.bar.get_masterBar().tripletFeel||0<beat.voice.bar.get_masterBar().index&&beat.voice.bar.get_masterBar().tripletFeel!=beat.voice.bar.get_masterBar().previousMasterBar.tripletFeel)},createNewGlyph:function(renderer,beat){return new alphaTab.rendering.glyphs.TripletFeelGlyph(beat.voice.bar.get_masterBar().tripletFeel)},canExpand:function(from,to){return!0},__class__:alphaTab.rendering.effects.TripletFeelEffectInfo},alphaTab.rendering.effects.MarkerEffectInfo=function(){},alphaTab.rendering.effects.MarkerEffectInfo.__name__=["alphaTab","rendering","effects","MarkerEffectInfo"],alphaTab.rendering.effects.MarkerEffectInfo.__interfaces__=[alphaTab.rendering.IEffectBarRendererInfo],alphaTab.rendering.effects.MarkerEffectInfo.prototype={get_effectId:function(){return"marker"},get_hideOnMultiTrack:function(){return!0},get_canShareBand:function(){return!0},get_sizingMode:function(){return 0},shouldCreateGlyph:function(settings,beat){return 0==beat.voice.bar.staff.index&&0==beat.voice.index&&0==beat.index&&beat.voice.bar.get_masterBar().get_isSectionStart()},createNewGlyph:function(renderer,beat){var tmp,s=beat.voice.bar.get_masterBar().section.marker;return tmp=null==s||0==s.length?beat.voice.bar.get_masterBar().section.text:"["+beat.voice.bar.get_masterBar().section.marker+"] "+beat.voice.bar.get_masterBar().section.text,new alphaTab.rendering.glyphs.TextGlyph(0,0,tmp,renderer.get_resources().markerFont,0)},canExpand:function(from,to){return!0},__class__:alphaTab.rendering.effects.MarkerEffectInfo},alphaTab.rendering.effects.TextEffectInfo=function(){},alphaTab.rendering.effects.TextEffectInfo.__name__=["alphaTab","rendering","effects","TextEffectInfo"],alphaTab.rendering.effects.TextEffectInfo.__interfaces__=[alphaTab.rendering.IEffectBarRendererInfo],alphaTab.rendering.effects.TextEffectInfo.prototype={get_effectId:function(){return"text"},get_hideOnMultiTrack:function(){return!1},get_canShareBand:function(){return!1},get_sizingMode:function(){return 1},shouldCreateGlyph:function(settings,beat){var s=beat.text;return!(null==s||0==StringTools.trim(s).length)},createNewGlyph:function(renderer,beat){return new alphaTab.rendering.glyphs.TextGlyph(0,0,beat.text,renderer.get_resources().effectFont,0)},canExpand:function(from,to){return!0},__class__:alphaTab.rendering.effects.TextEffectInfo},alphaTab.rendering.effects.ChordsEffectInfo=function(){},alphaTab.rendering.effects.ChordsEffectInfo.__name__=["alphaTab","rendering","effects","ChordsEffectInfo"],alphaTab.rendering.effects.ChordsEffectInfo.__interfaces__=[alphaTab.rendering.IEffectBarRendererInfo],alphaTab.rendering.effects.ChordsEffectInfo.prototype={get_effectId:function(){return"chords"},get_hideOnMultiTrack:function(){return!1},get_canShareBand:function(){return!0},get_sizingMode:function(){return 1},shouldCreateGlyph:function(settings,beat){return beat.get_hasChord()},createNewGlyph:function(renderer,beat){return new alphaTab.rendering.glyphs.TextGlyph(0,0,beat.get_chord().name,renderer.get_resources().effectFont,1)},canExpand:function(from,to){return!1},__class__:alphaTab.rendering.effects.ChordsEffectInfo},alphaTab.rendering.effects.FermataEffectInfo=function(){},alphaTab.rendering.effects.FermataEffectInfo.__name__=["alphaTab","rendering","effects","FermataEffectInfo"],alphaTab.rendering.effects.FermataEffectInfo.__interfaces__=[alphaTab.rendering.IEffectBarRendererInfo],alphaTab.rendering.effects.FermataEffectInfo.prototype={get_effectId:function(){return"fermata"},get_hideOnMultiTrack:function(){return!1},get_canShareBand:function(){return!1},get_sizingMode:function(){return 1},shouldCreateGlyph:function(settings,beat){return null!=beat.fermata},createNewGlyph:function(renderer,beat){return new alphaTab.rendering.glyphs.FermataGlyph(0,0,beat.fermata.type)},canExpand:function(from,to){return!0},__class__:alphaTab.rendering.effects.FermataEffectInfo},alphaTab.rendering.effects.WhammyBarEffectInfo=function(){},alphaTab.rendering.effects.WhammyBarEffectInfo.__name__=["alphaTab","rendering","effects","WhammyBarEffectInfo"],alphaTab.rendering.effects.WhammyBarEffectInfo.__interfaces__=[alphaTab.rendering.IEffectBarRendererInfo],alphaTab.rendering.effects.WhammyBarEffectInfo.prototype={get_effectId:function(){return"whammy"},get_hideOnMultiTrack:function(){return!1},get_canShareBand:function(){return!1},get_sizingMode:function(){return 4},shouldCreateGlyph:function(settings,beat){return beat.get_hasWhammyBar()},createNewGlyph:function(renderer,beat){return new alphaTab.rendering.glyphs.LineRangedGlyph("w/bar")},canExpand:function(from,to){return!0},__class__:alphaTab.rendering.effects.WhammyBarEffectInfo},alphaTab.rendering.effects.NoteEffectInfoBase=function(){this.LastCreateInfo=null},alphaTab.rendering.effects.NoteEffectInfoBase.__name__=["alphaTab","rendering","effects","NoteEffectInfoBase"],alphaTab.rendering.effects.NoteEffectInfoBase.__interfaces__=[alphaTab.rendering.IEffectBarRendererInfo],alphaTab.rendering.effects.NoteEffectInfoBase.prototype={shouldCreateGlyph:function(settings,beat){this.LastCreateInfo=[];for(var i=0,j=beat.notes.length;i<j;){var n=beat.notes[i];this.shouldCreateGlyphForNote(n)&&this.LastCreateInfo.push(n),++i}return 0<this.LastCreateInfo.length},shouldCreateGlyphForNote:function(note){throw new js._Boot.HaxeError("abstract")},get_effectId:function(){throw new js._Boot.HaxeError("abstract")},get_hideOnMultiTrack:function(){return!1},get_canShareBand:function(){return!0},get_sizingMode:function(){throw new js._Boot.HaxeError("abstract")},createNewGlyph:function(renderer,beat){throw new js._Boot.HaxeError("abstract")},canExpand:function(from,to){return!0},__class__:alphaTab.rendering.effects.NoteEffectInfoBase},alphaTab.rendering.effects.TrillEffectInfo=function(){alphaTab.rendering.effects.NoteEffectInfoBase.call(this)},alphaTab.rendering.effects.TrillEffectInfo.__name__=["alphaTab","rendering","effects","TrillEffectInfo"],alphaTab.rendering.effects.TrillEffectInfo.__super__=alphaTab.rendering.effects.NoteEffectInfoBase,alphaTab.rendering.effects.TrillEffectInfo.prototype=$extend(alphaTab.rendering.effects.NoteEffectInfoBase.prototype,{get_effectId:function(){return"trill"},shouldCreateGlyphForNote:function(note){return note.get_isTrill()},get_sizingMode:function(){return 1},createNewGlyph:function(renderer,beat){return new alphaTab.rendering.glyphs.TrillGlyph(0,0)},__class__:alphaTab.rendering.effects.TrillEffectInfo}),alphaTab.rendering.effects.OttaviaEffectInfo=function(aboveStaff){this._aboveStaff=!1,this._aboveStaff=aboveStaff},alphaTab.rendering.effects.OttaviaEffectInfo.__name__=["alphaTab","rendering","effects","OttaviaEffectInfo"],alphaTab.rendering.effects.OttaviaEffectInfo.__interfaces__=[alphaTab.rendering.IEffectBarRendererInfo],alphaTab.rendering.effects.OttaviaEffectInfo.prototype={get_effectId:function(){return"ottavia-"+(this._aboveStaff?"above":"below")},get_hideOnMultiTrack:function(){return!1},get_canShareBand:function(){return!0},get_sizingMode:function(){return 4},shouldCreateGlyph:function(settings,beat){switch(beat.ottava){case 0:case 1:return this._aboveStaff;case 3:case 4:return!this._aboveStaff}return!1},createNewGlyph:function(renderer,beat){return new alphaTab.rendering.glyphs.OttavaGlyph(beat.ottava,this._aboveStaff)},canExpand:function(from,to){return from.ottava==to.ottava},__class__:alphaTab.rendering.effects.OttaviaEffectInfo},alphaTab.rendering.effects.WideBeatVibratoEffectInfo=function(){},alphaTab.rendering.effects.WideBeatVibratoEffectInfo.__name__=["alphaTab","rendering","effects","WideBeatVibratoEffectInfo"],alphaTab.rendering.effects.WideBeatVibratoEffectInfo.__interfaces__=[alphaTab.rendering.IEffectBarRendererInfo],alphaTab.rendering.effects.WideBeatVibratoEffectInfo.prototype={get_effectId:function(){return"wide-beat-vibrato"},get_hideOnMultiTrack:function(){return!1},get_canShareBand:function(){return!0},get_sizingMode:function(){return 5},shouldCreateGlyph:function(settings,beat){return 2==beat.vibrato},createNewGlyph:function(renderer,beat){return new alphaTab.rendering.glyphs.BeatVibratoGlyph(2)},canExpand:function(from,to){return!0},__class__:alphaTab.rendering.effects.WideBeatVibratoEffectInfo},alphaTab.rendering.effects.SlightBeatVibratoEffectInfo=function(){},alphaTab.rendering.effects.SlightBeatVibratoEffectInfo.__name__=["alphaTab","rendering","effects","SlightBeatVibratoEffectInfo"],alphaTab.rendering.effects.SlightBeatVibratoEffectInfo.__interfaces__=[alphaTab.rendering.IEffectBarRendererInfo],alphaTab.rendering.effects.SlightBeatVibratoEffectInfo.prototype={get_effectId:function(){return"slight-beat-vibrato"},get_hideOnMultiTrack:function(){return!1},get_canShareBand:function(){return!0},get_sizingMode:function(){return 5},shouldCreateGlyph:function(settings,beat){return 1==beat.vibrato},createNewGlyph:function(renderer,beat){return new alphaTab.rendering.glyphs.BeatVibratoGlyph(1)},canExpand:function(from,to){return!0},__class__:alphaTab.rendering.effects.SlightBeatVibratoEffectInfo},alphaTab.rendering.effects.WideNoteVibratoEffectInfo=function(){alphaTab.rendering.effects.NoteEffectInfoBase.call(this)},alphaTab.rendering.effects.WideNoteVibratoEffectInfo.__name__=["alphaTab","rendering","effects","WideNoteVibratoEffectInfo"],alphaTab.rendering.effects.WideNoteVibratoEffectInfo.__super__=alphaTab.rendering.effects.NoteEffectInfoBase,alphaTab.rendering.effects.WideNoteVibratoEffectInfo.prototype=$extend(alphaTab.rendering.effects.NoteEffectInfoBase.prototype,{get_effectId:function(){return"wide-note-vibrato"},shouldCreateGlyphForNote:function(note){return 2==note.vibrato||!!note.isTieDestination&&2==note.tieOrigin.vibrato},get_sizingMode:function(){return 5},createNewGlyph:function(renderer,beat){return new alphaTab.rendering.glyphs.NoteVibratoGlyph(0,0,2,1.2)},__class__:alphaTab.rendering.effects.WideNoteVibratoEffectInfo}),alphaTab.rendering.effects.SlightNoteVibratoEffectInfo=function(){alphaTab.rendering.effects.NoteEffectInfoBase.call(this)},alphaTab.rendering.effects.SlightNoteVibratoEffectInfo.__name__=["alphaTab","rendering","effects","SlightNoteVibratoEffectInfo"],alphaTab.rendering.effects.SlightNoteVibratoEffectInfo.__super__=alphaTab.rendering.effects.NoteEffectInfoBase,alphaTab.rendering.effects.SlightNoteVibratoEffectInfo.prototype=$extend(alphaTab.rendering.effects.NoteEffectInfoBase.prototype,{get_effectId:function(){return"slight-note-vibrato"},shouldCreateGlyphForNote:function(note){return 1==note.vibrato||!!note.isTieDestination&&1==note.tieOrigin.vibrato},get_sizingMode:function(){return 5},createNewGlyph:function(renderer,beat){return new alphaTab.rendering.glyphs.NoteVibratoGlyph(0,0,1,1.2)},__class__:alphaTab.rendering.effects.SlightNoteVibratoEffectInfo}),alphaTab.rendering.effects.AlternateEndingsEffectInfo=function(){},alphaTab.rendering.effects.AlternateEndingsEffectInfo.__name__=["alphaTab","rendering","effects","AlternateEndingsEffectInfo"],alphaTab.rendering.effects.AlternateEndingsEffectInfo.__interfaces__=[alphaTab.rendering.IEffectBarRendererInfo],alphaTab.rendering.effects.AlternateEndingsEffectInfo.prototype={get_effectId:function(){return"alternate-feel"},get_hideOnMultiTrack:function(){return!0},get_canShareBand:function(){return!1},get_sizingMode:function(){return 6},shouldCreateGlyph:function(settings,beat){return 0==beat.index&&0!=beat.voice.bar.get_masterBar().alternateEndings},createNewGlyph:function(renderer,beat){return new alphaTab.rendering.glyphs.AlternateEndingsGlyph(0,0,beat.voice.bar.get_masterBar().alternateEndings)},canExpand:function(from,to){return!0},__class__:alphaTab.rendering.effects.AlternateEndingsEffectInfo},alphaTab.rendering.BarRendererFactory=function(){this.isInAccolade=!1,this.isRelevantForBoundsLookup=!1,this.hideOnMultiTrack=!1,this.hideOnPercussionTrack=!1,this.isInAccolade=!0,this.isRelevantForBoundsLookup=!0,this.hideOnPercussionTrack=!1,this.hideOnMultiTrack=!1},alphaTab.rendering.BarRendererFactory.__name__=["alphaTab","rendering","BarRendererFactory"],alphaTab.rendering.BarRendererFactory.prototype={get_staffId:function(){throw new js._Boot.HaxeError("abstract")},canCreate:function(track,staff){return!this.hideOnPercussionTrack||!staff.isPercussion},create:function(renderer,bar){throw new js._Boot.HaxeError("abstract")},__class__:alphaTab.rendering.BarRendererFactory},alphaTab.rendering.EffectBarRendererFactory=function(staffId,infos){alphaTab.rendering.BarRendererFactory.call(this),this._infos=null,this._staffId=null,this._infos=infos,this._staffId=staffId,this.isInAccolade=!1,this.isRelevantForBoundsLookup=!1},alphaTab.rendering.EffectBarRendererFactory.__name__=["alphaTab","rendering","EffectBarRendererFactory"],alphaTab.rendering.EffectBarRendererFactory.__super__=alphaTab.rendering.BarRendererFactory,alphaTab.rendering.EffectBarRendererFactory.prototype=$extend(alphaTab.rendering.BarRendererFactory.prototype,{get_staffId:function(){return this._staffId},create:function(renderer,bar){return new alphaTab.rendering.EffectBarRenderer(renderer,bar,this._infos)},__class__:alphaTab.rendering.EffectBarRendererFactory}),alphaTab.rendering.ScoreBarRendererFactory=function(){alphaTab.rendering.BarRendererFactory.call(this)},alphaTab.rendering.ScoreBarRendererFactory.__name__=["alphaTab","rendering","ScoreBarRendererFactory"],alphaTab.rendering.ScoreBarRendererFactory.__super__=alphaTab.rendering.BarRendererFactory,alphaTab.rendering.ScoreBarRendererFactory.prototype=$extend(alphaTab.rendering.BarRendererFactory.prototype,{get_staffId:function(){return"score"},create:function(renderer,bar){return new alphaTab.rendering.ScoreBarRenderer(renderer,bar)},__class__:alphaTab.rendering.ScoreBarRendererFactory}),alphaTab.rendering.effects.CrescendoEffectInfo=function(){},alphaTab.rendering.effects.CrescendoEffectInfo.__name__=["alphaTab","rendering","effects","CrescendoEffectInfo"],alphaTab.rendering.effects.CrescendoEffectInfo.__interfaces__=[alphaTab.rendering.IEffectBarRendererInfo],alphaTab.rendering.effects.CrescendoEffectInfo.prototype={get_effectId:function(){return"crescendo"},get_hideOnMultiTrack:function(){return!1},get_canShareBand:function(){return!0},get_sizingMode:function(){return 5},shouldCreateGlyph:function(settings,beat){return 0!=beat.crescendo},createNewGlyph:function(renderer,beat){return new alphaTab.rendering.glyphs.CrescendoGlyph(0,0,beat.crescendo)},canExpand:function(from,to){return from.crescendo==to.crescendo},__class__:alphaTab.rendering.effects.CrescendoEffectInfo},alphaTab.rendering.effects.DynamicsEffectInfo=function(){},alphaTab.rendering.effects.DynamicsEffectInfo.__name__=["alphaTab","rendering","effects","DynamicsEffectInfo"],alphaTab.rendering.effects.DynamicsEffectInfo.__interfaces__=[alphaTab.rendering.IEffectBarRendererInfo],alphaTab.rendering.effects.DynamicsEffectInfo.prototype={get_effectId:function(){return"dynamics"},get_hideOnMultiTrack:function(){return!1},get_canShareBand:function(){return!1},get_sizingMode:function(){return 1},shouldCreateGlyph:function(settings,beat){return this.internalShouldCreateGlyph(beat)},internalShouldCreateGlyph:function(beat){if(beat.voice.bar.staff.track.score.stylesheet.hideDynamics||beat.isEmpty||beat.voice.isEmpty)return!1;var show=0==beat.voice.index&&0==beat.index&&0==beat.voice.bar.index||null!=beat.previousBeat&&beat.dynamics!=beat.previousBeat.dynamics;if(show&&0<beat.voice.index)for(var voice=$iterator(beat.voice.bar.voices)();voice.hasNext();){var voice1=voice.next();if(voice1.index<beat.voice.index){var beatAtSamePos=voice1.getBeatAtDisplayStart(beat.displayStart);null!=beatAtSamePos&&beat.dynamics==beatAtSamePos.dynamics&&this.internalShouldCreateGlyph(beatAtSamePos)&&(show=!1)}}return show},createNewGlyph:function(renderer,beat){return new alphaTab.rendering.glyphs.DynamicsGlyph(0,0,beat.dynamics)},canExpand:function(from,to){return!0},__class__:alphaTab.rendering.effects.DynamicsEffectInfo},alphaTab.rendering.effects.LyricsEffectInfo=function(){},alphaTab.rendering.effects.LyricsEffectInfo.__name__=["alphaTab","rendering","effects","LyricsEffectInfo"],alphaTab.rendering.effects.LyricsEffectInfo.__interfaces__=[alphaTab.rendering.IEffectBarRendererInfo],alphaTab.rendering.effects.LyricsEffectInfo.prototype={get_effectId:function(){return"lyrics"},get_hideOnMultiTrack:function(){return!1},get_canShareBand:function(){return!1},get_sizingMode:function(){return 1},shouldCreateGlyph:function(settings,beat){return null!=beat.lyrics},createNewGlyph:function(renderer,beat){return new alphaTab.rendering.glyphs.LyricsGlyph(0,0,beat.lyrics,renderer.get_resources().effectFont,1)},canExpand:function(from,to){return!0},__class__:alphaTab.rendering.effects.LyricsEffectInfo},alphaTab.rendering.effects.TapEffectInfo=function(){},alphaTab.rendering.effects.TapEffectInfo.__name__=["alphaTab","rendering","effects","TapEffectInfo"],alphaTab.rendering.effects.TapEffectInfo.__interfaces__=[alphaTab.rendering.IEffectBarRendererInfo],alphaTab.rendering.effects.TapEffectInfo.prototype={get_effectId:function(){return"tap"},get_hideOnMultiTrack:function(){return!1},get_canShareBand:function(){return!0},get_sizingMode:function(){return 1},shouldCreateGlyph:function(settings,beat){return!(!beat.slap&&!beat.pop)||beat.tap},createNewGlyph:function(renderer,beat){var res=renderer.get_resources();return beat.slap?new alphaTab.rendering.glyphs.TextGlyph(0,0,"S",res.effectFont,0):beat.pop?new alphaTab.rendering.glyphs.TextGlyph(0,0,"P",res.effectFont,0):new alphaTab.rendering.glyphs.TextGlyph(0,0,"T",res.effectFont,0)},canExpand:function(from,to){return!0},__class__:alphaTab.rendering.effects.TapEffectInfo},alphaTab.rendering.effects.FadeInEffectInfo=function(){},alphaTab.rendering.effects.FadeInEffectInfo.__name__=["alphaTab","rendering","effects","FadeInEffectInfo"],alphaTab.rendering.effects.FadeInEffectInfo.__interfaces__=[alphaTab.rendering.IEffectBarRendererInfo],alphaTab.rendering.effects.FadeInEffectInfo.prototype={get_effectId:function(){return"fade-in"},get_hideOnMultiTrack:function(){return!1},get_canShareBand:function(){return!0},get_sizingMode:function(){return 1},shouldCreateGlyph:function(settings,beat){return beat.fadeIn},createNewGlyph:function(renderer,beat){return new alphaTab.rendering.glyphs.FadeInGlyph(0,0)},canExpand:function(from,to){return!0},__class__:alphaTab.rendering.effects.FadeInEffectInfo},alphaTab.rendering.effects.HarmonicsEffectInfo=function(harmonicType){switch(alphaTab.rendering.effects.NoteEffectInfoBase.call(this),this._harmonicType=0,this._beat=null,this._effectId=null,this._harmonicType=harmonicType){case 1:this._effectId="harmonics-natural";break;case 2:this._effectId="harmonics-artificial";break;case 3:this._effectId="harmonics-pinch";break;case 4:this._effectId="harmonics-tap";break;case 5:this._effectId="harmonics-semi";break;case 6:this._effectId="harmonics-feedback"}},alphaTab.rendering.effects.HarmonicsEffectInfo.__name__=["alphaTab","rendering","effects","HarmonicsEffectInfo"],alphaTab.rendering.effects.HarmonicsEffectInfo.harmonicToString=function(type){switch(type){case 1:return"N.H.";case 2:return"A.H.";case 3:return"P.H.";case 4:return"T.H.";case 5:return"S.H.";case 6:return"Fdbk."}return""},alphaTab.rendering.effects.HarmonicsEffectInfo.__super__=alphaTab.rendering.effects.NoteEffectInfoBase,alphaTab.rendering.effects.HarmonicsEffectInfo.prototype=$extend(alphaTab.rendering.effects.NoteEffectInfoBase.prototype,{get_effectId:function(){return this._effectId},shouldCreateGlyphForNote:function(note){return!(!note.get_isHarmonic()||note.harmonicType!=this._harmonicType)&&(note.beat!=this._beat&&(this._beat=note.beat),!0)},get_sizingMode:function(){return 4},createNewGlyph:function(renderer,beat){return new alphaTab.rendering.glyphs.LineRangedGlyph(alphaTab.rendering.effects.HarmonicsEffectInfo.harmonicToString(this._harmonicType))},__class__:alphaTab.rendering.effects.HarmonicsEffectInfo}),alphaTab.rendering.effects.LetRingEffectInfo=function(){},alphaTab.rendering.effects.LetRingEffectInfo.__name__=["alphaTab","rendering","effects","LetRingEffectInfo"],alphaTab.rendering.effects.LetRingEffectInfo.__interfaces__=[alphaTab.rendering.IEffectBarRendererInfo],alphaTab.rendering.effects.LetRingEffectInfo.prototype={get_effectId:function(){return"let-ring"},get_canShareBand:function(){return!1},get_hideOnMultiTrack:function(){return!1},shouldCreateGlyph:function(settings,beat){return beat.isLetRing},get_sizingMode:function(){return 4},createNewGlyph:function(renderer,beat){return new alphaTab.rendering.glyphs.LineRangedGlyph("LetRing")},canExpand:function(from,to){return!0},__class__:alphaTab.rendering.effects.LetRingEffectInfo},alphaTab.rendering.effects.CapoEffectInfo=function(){},alphaTab.rendering.effects.CapoEffectInfo.__name__=["alphaTab","rendering","effects","CapoEffectInfo"],alphaTab.rendering.effects.CapoEffectInfo.__interfaces__=[alphaTab.rendering.IEffectBarRendererInfo],alphaTab.rendering.effects.CapoEffectInfo.prototype={get_effectId:function(){return"capo"},get_hideOnMultiTrack:function(){return!1},get_canShareBand:function(){return!1},get_sizingMode:function(){return 1},shouldCreateGlyph:function(settings,beat){return 0==beat.index&&0==beat.voice.bar.index&&0!=beat.voice.bar.staff.capo},createNewGlyph:function(renderer,beat){return new alphaTab.rendering.glyphs.TextGlyph(0,0,"Capo. fret "+Std.string(beat.voice.bar.staff.capo),renderer.get_resources().effectFont,0)},canExpand:function(from,to){return!1},__class__:alphaTab.rendering.effects.CapoEffectInfo},alphaTab.rendering.effects.FingeringEffectInfo=function(){},alphaTab.rendering.effects.FingeringEffectInfo.__name__=["alphaTab","rendering","effects","FingeringEffectInfo"],alphaTab.rendering.effects.FingeringEffectInfo.__interfaces__=[alphaTab.rendering.IEffectBarRendererInfo],alphaTab.rendering.effects.FingeringEffectInfo.prototype={get_effectId:function(){return"fingering"},get_hideOnMultiTrack:function(){return!1},get_canShareBand:function(){return!0},get_sizingMode:function(){return 1},shouldCreateGlyph:function(settings,beat){return 0==beat.voice.index&&!beat.get_isRest()&&2==settings.notation.fingeringMode&&3==settings.notation.fingeringMode&&(1==beat.notes.length&&beat.notes[0].isFingering)},createNewGlyph:function(renderer,beat){var finger=-2,isLeft=!1,note=beat.notes[0];-2!=note.leftHandFinger?(finger=note.leftHandFinger,isLeft=!0):-2!=note.rightHandFinger&&(finger=note.rightHandFinger);var s=alphaTab.model.ModelUtils.fingerToString(renderer.get_settings(),beat,finger,isLeft);return new alphaTab.rendering.glyphs.TextGlyph(0,0,s,renderer.get_resources().fingeringFont,0)},canExpand:function(from,to){return!0},__class__:alphaTab.rendering.effects.FingeringEffectInfo},alphaTab.rendering.effects.PalmMuteEffectInfo=function(){alphaTab.rendering.effects.NoteEffectInfoBase.call(this)},alphaTab.rendering.effects.PalmMuteEffectInfo.__name__=["alphaTab","rendering","effects","PalmMuteEffectInfo"],alphaTab.rendering.effects.PalmMuteEffectInfo.__super__=alphaTab.rendering.effects.NoteEffectInfoBase,alphaTab.rendering.effects.PalmMuteEffectInfo.prototype=$extend(alphaTab.rendering.effects.NoteEffectInfoBase.prototype,{get_effectId:function(){return"palm-mute"},shouldCreateGlyphForNote:function(note){return note.isPalmMute},get_sizingMode:function(){return 4},createNewGlyph:function(renderer,beat){return new alphaTab.rendering.glyphs.LineRangedGlyph("P.M.")},__class__:alphaTab.rendering.effects.PalmMuteEffectInfo}),alphaTab.rendering.effects.PickStrokeEffectInfo=function(){},alphaTab.rendering.effects.PickStrokeEffectInfo.__name__=["alphaTab","rendering","effects","PickStrokeEffectInfo"],alphaTab.rendering.effects.PickStrokeEffectInfo.__interfaces__=[alphaTab.rendering.IEffectBarRendererInfo],alphaTab.rendering.effects.PickStrokeEffectInfo.prototype={get_effectId:function(){return"pick-stroke"},get_hideOnMultiTrack:function(){return!1},get_canShareBand:function(){return!0},get_sizingMode:function(){return 1},shouldCreateGlyph:function(settings,beat){return 0!=beat.pickStroke},createNewGlyph:function(renderer,beat){return new alphaTab.rendering.glyphs.PickStrokeGlyph(0,0,beat.pickStroke)},canExpand:function(from,to){return!0},__class__:alphaTab.rendering.effects.PickStrokeEffectInfo},alphaTab.rendering.effects.PickSlideEffectInfo=function(){alphaTab.rendering.effects.NoteEffectInfoBase.call(this)},alphaTab.rendering.effects.PickSlideEffectInfo.__name__=["alphaTab","rendering","effects","PickSlideEffectInfo"],alphaTab.rendering.effects.PickSlideEffectInfo.__super__=alphaTab.rendering.effects.NoteEffectInfoBase,alphaTab.rendering.effects.PickSlideEffectInfo.prototype=$extend(alphaTab.rendering.effects.NoteEffectInfoBase.prototype,{get_effectId:function(){return"pick-slide"},shouldCreateGlyphForNote:function(note){return 5==note.slideOutType||6==note.slideOutType},get_sizingMode:function(){return 4},createNewGlyph:function(renderer,beat){return new alphaTab.rendering.glyphs.LineRangedGlyph("P.S.")},__class__:alphaTab.rendering.effects.PickSlideEffectInfo}),alphaTab.rendering.TabBarRendererFactory=function(showTimeSignature,showRests,showTiedNotes){alphaTab.rendering.BarRendererFactory.call(this),this._showTimeSignature=!1,this._showRests=!1,this._showTiedNotes=!1,this._showTimeSignature=showTimeSignature,this._showRests=showRests,this._showTiedNotes=showTiedNotes,this.hideOnPercussionTrack=!0},alphaTab.rendering.TabBarRendererFactory.__name__=["alphaTab","rendering","TabBarRendererFactory"],alphaTab.rendering.TabBarRendererFactory.__super__=alphaTab.rendering.BarRendererFactory,alphaTab.rendering.TabBarRendererFactory.prototype=$extend(alphaTab.rendering.BarRendererFactory.prototype,{get_staffId:function(){return"tab"},canCreate:function(track,staff){return 0<staff.tuning.length&&alphaTab.rendering.BarRendererFactory.prototype.canCreate.call(this,track,staff)},create:function(renderer,bar){var tabBarRenderer=new alphaTab.rendering.TabBarRenderer(renderer,bar);return tabBarRenderer.showRests=this._showRests,tabBarRenderer.showTimeSignature=this._showTimeSignature,tabBarRenderer.showTiedNotes=this._showTiedNotes,tabBarRenderer},__class__:alphaTab.rendering.TabBarRendererFactory}),alphaTab.Environment=function(){},alphaTab.Environment.__name__=["alphaTab","Environment"],alphaTab.Environment.platformInit=function(){if(alphaTab.Environment.RenderEngines.svg=new alphaTab.RenderEngineFactory(!0,function(){return new alphaTab.platform.svg.CssFontSvgCanvas}),alphaTab.Environment.RenderEngines.html5=new alphaTab.RenderEngineFactory(!1,function(){return new alphaTab.platform.javaScript.Html5Canvas}),alphaTab.Environment.RenderEngines.default=alphaTab.Environment.RenderEngines.svg,alphaTab.Environment.registerJQueryPlugin(),Math.log2=Math.log2||function(x){return Math.log(x)*Math.LOG2E},Int32Array.prototype.slice=Int32Array.prototype.slice||function(begin,end){return new Int32Array(Array.prototype.slice.call(this,begin,end))},$global.document){window.AudioContext=window.AudioContext||window.webkitAudioContext;var document=window.document,vbAjaxLoader="";vbAjaxLoader+="Function VbAjaxLoader(method, fileName)\r\n",vbAjaxLoader+="    Dim xhr\r\n",vbAjaxLoader+='    Set xhr = CreateObject("Microsoft.XMLHTTP")\r\n',vbAjaxLoader+="    xhr.Open method, fileName, False\r\n",vbAjaxLoader+='    xhr.setRequestHeader "Accept-Charset", "x-user-defined"\r\n',vbAjaxLoader+="    xhr.send\r\n",vbAjaxLoader+="    Dim byteArray()\r\n",vbAjaxLoader+="    if xhr.Status = 200 Then\r\n",vbAjaxLoader+="        Dim byteString\r\n",vbAjaxLoader+="        Dim i\r\n",vbAjaxLoader+="        byteString=xhr.responseBody\r\n",vbAjaxLoader+="        ReDim byteArray(LenB(byteString))\r\n",vbAjaxLoader+="        For i = 1 To LenB(byteString)\r\n",vbAjaxLoader+="            byteArray(i-1) = AscB(MidB(byteString, i, 1))\r\n",vbAjaxLoader+="        Next\r\n",vbAjaxLoader+="    End If\r\n",vbAjaxLoader+="    VbAjaxLoader=byteArray\r\n",vbAjaxLoader+="End Function\r\n";var vbAjaxLoaderScript=document.createElement("script");vbAjaxLoaderScript.setAttribute("type","text/vbscript");var inlineScript=document.createTextNode(vbAjaxLoader);vbAjaxLoaderScript.appendChild(inlineScript),document.addEventListener("DOMContentLoaded",function(){document.body.appendChild(vbAjaxLoaderScript)},!1);var scriptElement=document.currentScript;if(!scriptElement)try{var error=new Error,stack=error.stack;if(!stack)throw error;alphaTab.Environment.scriptFile=alphaTab.Environment.scriptFileFromStack(stack)}catch(e){if(e instanceof js._Boot.HaxeError&&(e=e.val),!js.Boot.__instanceof(e,Error))throw e;var stack1=e.stack;stack1?alphaTab.Environment.scriptFile=alphaTab.Environment.scriptFileFromStack(stack1):scriptElement=document.querySelector("script[data-alphatab]")}var s=alphaTab.Environment.scriptFile;null!=s&&0!=s.length||(scriptElement?alphaTab.Environment.scriptFile=scriptElement.src:alphaTab.util.Logger.warning("Environment","Could not automatically find alphaTab script file for worker, please add the data-alphatab attribute to the script tag that includes alphaTab or provide it when initializing alphaTab",null)),alphaTab.Environment.bravuraFontChecker=new alphaTab.utils.FontLoadingChecker("alphaTab","&#"+Std.string(57424)+";"),alphaTab.Environment.bravuraFontChecker.checkForFontAvailability()}else{"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&(alphaTab.platform.javaScript.AlphaTabWebWorker.init(),alphaTab.platform.javaScript.AlphaSynthWebWorker.init())}},alphaTab.Environment.registerJQueryPlugin=function(){if($global&&"jQuery"in $global){var jquery=window.jQuery,api=new alphaTab.platform.javaScript.JQueryAlphaTab;jquery.fn.alphaTab=function(method){if(1!=this.length)return this.each(function(){var tmp1=Array.prototype.slice.call(arguments,1);api.exec(this,method,tmp1)});var _this1=this[0],tmp=Array.prototype.slice.call(arguments,1);return api.exec(_this1,method,tmp)},jquery.alphaTab={restore:alphaTab.platform.javaScript.JQueryAlphaTab.Restore},jquery.fn.alphaTab.fn=api}},alphaTab.Environment.scriptFileFromStack=function(stack){var matches=stack.match("(data:text\\/javascript(?:;[^,]+)?,.+?|(?:|blob:)(?:http[s]?|file):\\/\\/[\\/]?.+?\\/[^:\\)]*?)(?::\\d+)(?::\\d+)?");return(matches=matches||stack.match("^(?:|[^:@]*@|.+\\)@(?=data:text\\/javascript|blob|http[s]?|file)|.+?\\s+(?: at |@)(?:[^:\\(]+ )*[\\(]?)(data:text\\/javascript(?:;[^,]+)?,.+?|(?:|blob:)(?:http[s]?|file):\\/\\/[\\/]?.+?\\/[^:\\)]*?)(?::\\d+)(?::\\d+)?"))||(matches=stack.match("\\)@(data:text\\/javascript(?:;[^,]+)?,.+?|(?:|blob:)(?:http[s]?|file):\\/\\/[\\/]?.+?\\/[^:\\)]*?)(?::\\d+)(?::\\d+)?"))?matches[1]:null},alphaTab.Environment.createScoreRenderer=function(settings){return new alphaTab.rendering.ScoreRenderer(settings)},alphaTab.Environment.getRenderEngineFactory=function(settings){return null!=settings.core.engine&&alphaTab.Environment.RenderEngines.hasOwnProperty(settings.core.engine)?alphaTab.Environment.RenderEngines[settings.core.engine]:alphaTab.Environment.RenderEngines.default},alphaTab.Environment.getLayoutEngineFactory=function(settings){return alphaTab.Environment.LayoutEngines[settings.display.layoutMode]},alphaTab.Environment.init=function(){alphaTab.Environment.RenderEngines={};alphaTab.Environment.LayoutEngines={};alphaTab.Environment.StaveProfiles={},alphaTab.Environment.platformInit(),alphaTab.Environment.LayoutEngines[0]=new alphaTab.LayoutEngineFactory(!0,function(r){return new alphaTab.rendering.layout.PageViewLayout(r)}),alphaTab.Environment.LayoutEngines[1]=new alphaTab.LayoutEngineFactory(!1,function(r1){return new alphaTab.rendering.layout.HorizontalScreenLayout(r1)}),alphaTab.Environment.StaveProfiles[1]=[new alphaTab.rendering.EffectBarRendererFactory("score-effects",[new alphaTab.rendering.effects.TempoEffectInfo,new alphaTab.rendering.effects.TripletFeelEffectInfo,new alphaTab.rendering.effects.MarkerEffectInfo,new alphaTab.rendering.effects.TextEffectInfo,new alphaTab.rendering.effects.ChordsEffectInfo,new alphaTab.rendering.effects.FermataEffectInfo,new alphaTab.rendering.effects.WhammyBarEffectInfo,new alphaTab.rendering.effects.TrillEffectInfo,new alphaTab.rendering.effects.OttaviaEffectInfo(!0),new alphaTab.rendering.effects.WideBeatVibratoEffectInfo,new alphaTab.rendering.effects.SlightBeatVibratoEffectInfo,new alphaTab.rendering.effects.WideNoteVibratoEffectInfo,new alphaTab.rendering.effects.SlightNoteVibratoEffectInfo,new alphaTab.rendering.effects.AlternateEndingsEffectInfo]),new alphaTab.rendering.ScoreBarRendererFactory,new alphaTab.rendering.EffectBarRendererFactory("tab-effects",[new alphaTab.rendering.effects.CrescendoEffectInfo,new alphaTab.rendering.effects.OttaviaEffectInfo(!1),new alphaTab.rendering.effects.DynamicsEffectInfo,new alphaTab.rendering.effects.LyricsEffectInfo,new alphaTab.rendering.effects.TrillEffectInfo,new alphaTab.rendering.effects.WideBeatVibratoEffectInfo,new alphaTab.rendering.effects.SlightBeatVibratoEffectInfo,new alphaTab.rendering.effects.WideNoteVibratoEffectInfo,new alphaTab.rendering.effects.SlightNoteVibratoEffectInfo,new alphaTab.rendering.effects.TapEffectInfo,new alphaTab.rendering.effects.FadeInEffectInfo,new alphaTab.rendering.effects.HarmonicsEffectInfo(1),new alphaTab.rendering.effects.HarmonicsEffectInfo(2),new alphaTab.rendering.effects.HarmonicsEffectInfo(3),new alphaTab.rendering.effects.HarmonicsEffectInfo(4),new alphaTab.rendering.effects.HarmonicsEffectInfo(5),new alphaTab.rendering.effects.HarmonicsEffectInfo(6),new alphaTab.rendering.effects.LetRingEffectInfo,new alphaTab.rendering.effects.CapoEffectInfo,new alphaTab.rendering.effects.FingeringEffectInfo,new alphaTab.rendering.effects.PalmMuteEffectInfo,new alphaTab.rendering.effects.PickStrokeEffectInfo,new alphaTab.rendering.effects.PickSlideEffectInfo]),new alphaTab.rendering.TabBarRendererFactory(!1,!1,!1)],alphaTab.Environment.StaveProfiles[2]=[new alphaTab.rendering.EffectBarRendererFactory("score-effects",[new alphaTab.rendering.effects.TempoEffectInfo,new alphaTab.rendering.effects.TripletFeelEffectInfo,new alphaTab.rendering.effects.MarkerEffectInfo,new alphaTab.rendering.effects.TextEffectInfo,new alphaTab.rendering.effects.ChordsEffectInfo,new alphaTab.rendering.effects.FermataEffectInfo,new alphaTab.rendering.effects.WhammyBarEffectInfo,new alphaTab.rendering.effects.TrillEffectInfo,new alphaTab.rendering.effects.OttaviaEffectInfo(!0),new alphaTab.rendering.effects.WideBeatVibratoEffectInfo,new alphaTab.rendering.effects.SlightBeatVibratoEffectInfo,new alphaTab.rendering.effects.WideNoteVibratoEffectInfo,new alphaTab.rendering.effects.SlightNoteVibratoEffectInfo,new alphaTab.rendering.effects.FadeInEffectInfo,new alphaTab.rendering.effects.LetRingEffectInfo,new alphaTab.rendering.effects.PalmMuteEffectInfo,new alphaTab.rendering.effects.PickStrokeEffectInfo,new alphaTab.rendering.effects.PickSlideEffectInfo,new alphaTab.rendering.effects.AlternateEndingsEffectInfo]),new alphaTab.rendering.ScoreBarRendererFactory,new alphaTab.rendering.EffectBarRendererFactory("score-bottom-effects",[new alphaTab.rendering.effects.CrescendoEffectInfo,new alphaTab.rendering.effects.OttaviaEffectInfo(!1),new alphaTab.rendering.effects.DynamicsEffectInfo,new alphaTab.rendering.effects.LyricsEffectInfo])];var tabEffectInfos=[new alphaTab.rendering.effects.TempoEffectInfo,new alphaTab.rendering.effects.TripletFeelEffectInfo,new alphaTab.rendering.effects.MarkerEffectInfo,new alphaTab.rendering.effects.TextEffectInfo,new alphaTab.rendering.effects.ChordsEffectInfo,new alphaTab.rendering.effects.FermataEffectInfo,new alphaTab.rendering.effects.TrillEffectInfo,new alphaTab.rendering.effects.WideBeatVibratoEffectInfo,new alphaTab.rendering.effects.SlightBeatVibratoEffectInfo,new alphaTab.rendering.effects.WideNoteVibratoEffectInfo,new alphaTab.rendering.effects.SlightNoteVibratoEffectInfo,new alphaTab.rendering.effects.TapEffectInfo,new alphaTab.rendering.effects.FadeInEffectInfo,new alphaTab.rendering.effects.HarmonicsEffectInfo(2),new alphaTab.rendering.effects.HarmonicsEffectInfo(3),new alphaTab.rendering.effects.HarmonicsEffectInfo(4),new alphaTab.rendering.effects.HarmonicsEffectInfo(5),new alphaTab.rendering.effects.HarmonicsEffectInfo(6),new alphaTab.rendering.effects.LetRingEffectInfo,new alphaTab.rendering.effects.CapoEffectInfo,new alphaTab.rendering.effects.FingeringEffectInfo,new alphaTab.rendering.effects.PalmMuteEffectInfo,new alphaTab.rendering.effects.PickStrokeEffectInfo,new alphaTab.rendering.effects.PickSlideEffectInfo,new alphaTab.rendering.effects.AlternateEndingsEffectInfo];alphaTab.Environment.StaveProfiles[3]=[new alphaTab.rendering.EffectBarRendererFactory("tab-effects",tabEffectInfos),new alphaTab.rendering.TabBarRendererFactory(!0,!0,!0),new alphaTab.rendering.EffectBarRendererFactory("tab-bottom-effects",[new alphaTab.rendering.effects.LyricsEffectInfo])],alphaTab.Environment.StaveProfiles[4]=[new alphaTab.rendering.EffectBarRendererFactory("tab-effects",tabEffectInfos),new alphaTab.rendering.TabBarRendererFactory(!1,!1,!1),new alphaTab.rendering.EffectBarRendererFactory("tab-bottom-effects",[new alphaTab.rendering.effects.LyricsEffectInfo])]},alphaTab.Environment.prototype={__class__:alphaTab.Environment},alphaTab._FingeringMode={},alphaTab._FingeringMode.FingeringMode_Impl_=$hx_exports.alphaTab._FingeringMode.FingeringMode_Impl_={},alphaTab._FingeringMode.FingeringMode_Impl_.__name__=["alphaTab","_FingeringMode","FingeringMode_Impl_"],alphaTab._FingeringMode.FingeringMode_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab._FingeringMode.FingeringMode_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab._FingeringMode.FingeringMode_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab._FingeringMode.FingeringMode_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab._FingeringMode.FingeringMode_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab._FingeringMode.FingeringMode_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab._FingeringMode.FingeringMode_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab._FingeringMode.FingeringMode_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab._FingeringMode.FingeringMode_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab._FingeringMode.FingeringMode_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab._FingeringMode.FingeringMode_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab._FingeringMode.FingeringMode_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab._FingeringMode.FingeringMode_Impl_.toString=function(this1){switch(this1){case 0:return"ScoreDefault";case 1:return"ScoreForcePiano";case 2:return"SingleNoteEffectBand";case 3:return"SingleNoteEffectBandForcePiano"}return""},alphaTab._FingeringMode.FingeringMode_Impl_.fromString=function(str){switch(str.toLowerCase()){case"scoredefault":return 0;case"scoreforcepiano":return 1;case"singlenoteeffectband":return 2;case"singlenoteeffectbandforcepiano":return 3}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab._FingeringMode.FingeringMode_Impl_.toJson=function(obj){return obj},alphaTab._FingeringMode.FingeringMode_Impl_.fromJson=function(json){if("number"==typeof json)return json;if("string"==typeof json)return alphaTab._FingeringMode.FingeringMode_Impl_.fromString(json);throw new js._Boot.HaxeError((new alphaTab.utils.SerializationException).SerializationException("Unsupported value type"))},alphaTab.ImporterSettings=$hx_exports.alphaTab.ImporterSettings=function(){this.mergePartGroupsInMusicXml=!1,this.encoding="utf-8"},alphaTab.ImporterSettings.__name__=["alphaTab","ImporterSettings"],alphaTab.ImporterSettings.toJson=function(obj){var json={};return obj.fillToJson(json),json},alphaTab.ImporterSettings.fromJson=function(json){if(null==json)return null;var obj=new alphaTab.ImporterSettings;return obj.fillFromJson(json),obj},alphaTab.ImporterSettings.prototype={fillToJson:function(json){json.encoding=this.encoding,json.mergePartGroupsInMusicXml=this.mergePartGroupsInMusicXml},fillFromJson:function(json){if(null!=json)for(var $k in json)this.setProperty($k.toLowerCase(),json[$k])},setProperty:function(property,value){switch(property){case"encoding":return this.encoding=value,!0;case"mergepartgroupsinmusicxml":return this.mergePartGroupsInMusicXml=value,!0}return!1},__class__:alphaTab.ImporterSettings},alphaTab._LayoutMode={},alphaTab._LayoutMode.LayoutMode_Impl_=$hx_exports.alphaTab._LayoutMode.LayoutMode_Impl_={},alphaTab._LayoutMode.LayoutMode_Impl_.__name__=["alphaTab","_LayoutMode","LayoutMode_Impl_"],alphaTab._LayoutMode.LayoutMode_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab._LayoutMode.LayoutMode_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab._LayoutMode.LayoutMode_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab._LayoutMode.LayoutMode_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab._LayoutMode.LayoutMode_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab._LayoutMode.LayoutMode_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab._LayoutMode.LayoutMode_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab._LayoutMode.LayoutMode_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab._LayoutMode.LayoutMode_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab._LayoutMode.LayoutMode_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab._LayoutMode.LayoutMode_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab._LayoutMode.LayoutMode_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab._LayoutMode.LayoutMode_Impl_.toString=function(this1){switch(this1){case 0:return"Page";case 1:return"Horizontal"}return""},alphaTab._LayoutMode.LayoutMode_Impl_.fromString=function(str){switch(str.toLowerCase()){case"horizontal":return 1;case"page":return 0}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab._LayoutMode.LayoutMode_Impl_.toJson=function(obj){return obj},alphaTab._LayoutMode.LayoutMode_Impl_.fromJson=function(json){if("number"==typeof json)return json;if("string"==typeof json)return alphaTab._LayoutMode.LayoutMode_Impl_.fromString(json);throw new js._Boot.HaxeError((new alphaTab.utils.SerializationException).SerializationException("Unsupported value type"))},alphaTab.Main=function(){},alphaTab.Main.__name__=["alphaTab","Main"],alphaTab.Main.main=function(){},alphaTab._NotationMode={},alphaTab._NotationMode.NotationMode_Impl_=$hx_exports.alphaTab._NotationMode.NotationMode_Impl_={},alphaTab._NotationMode.NotationMode_Impl_.__name__=["alphaTab","_NotationMode","NotationMode_Impl_"],alphaTab._NotationMode.NotationMode_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab._NotationMode.NotationMode_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab._NotationMode.NotationMode_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab._NotationMode.NotationMode_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab._NotationMode.NotationMode_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab._NotationMode.NotationMode_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab._NotationMode.NotationMode_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab._NotationMode.NotationMode_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab._NotationMode.NotationMode_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab._NotationMode.NotationMode_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab._NotationMode.NotationMode_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab._NotationMode.NotationMode_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab._NotationMode.NotationMode_Impl_.toString=function(this1){switch(this1){case 0:return"GuitarPro";case 1:return"SongBook"}return""},alphaTab._NotationMode.NotationMode_Impl_.fromString=function(str){switch(str.toLowerCase()){case"guitarpro":return 0;case"songbook":return 1}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab._NotationMode.NotationMode_Impl_.toJson=function(obj){return obj},alphaTab._NotationMode.NotationMode_Impl_.fromJson=function(json){if("number"==typeof json)return json;if("string"==typeof json)return alphaTab._NotationMode.NotationMode_Impl_.fromString(json);throw new js._Boot.HaxeError((new alphaTab.utils.SerializationException).SerializationException("Unsupported value type"))},alphaTab.NotationSettings=$hx_exports.alphaTab.NotationSettings=function(){this.slurHeight=7,this.extendLineEffectsToBeatEnd=!1,this.showZeroOnDiveWhammy=!1,this.showTabNoteOnTiedBend=!0,this.showParenthesisForTiedBends=!0,this.extendBendArrowsOnTiedNotes=!0,this.smallGraceTabNotes=!0;var this1=new Int32Array(0);this.displayTranspositionPitches=this1;var this11=new Int32Array(0);this.transpositionPitches=this11,this.rhythmHeight=15,this.rhythmMode=0,this.hideChordDiagrams=!1,this.hideTrackNames=!1,this.hideTuning=!1,this.hideInfo=!1,this.fingeringMode=0,this.notationMode=0},alphaTab.NotationSettings.__name__=["alphaTab","NotationSettings"],alphaTab.NotationSettings.toJson=function(obj){var json={};return obj.fillToJson(json),json},alphaTab.NotationSettings.fromJson=function(json){if(null==json)return null;var obj=new alphaTab.NotationSettings;return obj.fillFromJson(json),obj},alphaTab.NotationSettings.prototype={fillToJson:function(json){json.notationMode=alphaTab._NotationMode.NotationMode_Impl_.toJson(this.notationMode),json.fingeringMode=alphaTab._FingeringMode.FingeringMode_Impl_.toJson(this.fingeringMode),json.hideInfo=this.hideInfo,json.hideTuning=this.hideTuning,json.hideTrackNames=this.hideTrackNames,json.hideChordDiagrams=this.hideChordDiagrams,json.rhythmMode=alphaTab._TabRhythmMode.TabRhythmMode_Impl_.toJson(this.rhythmMode),json.rhythmHeight=this.rhythmHeight,json.transpositionPitches=null==this.transpositionPitches?null:this.transpositionPitches.slice(),json.displayTranspositionPitches=null==this.displayTranspositionPitches?null:this.displayTranspositionPitches.slice(),json.smallGraceTabNotes=this.smallGraceTabNotes,json.extendBendArrowsOnTiedNotes=this.extendBendArrowsOnTiedNotes,json.showParenthesisForTiedBends=this.showParenthesisForTiedBends,json.showTabNoteOnTiedBend=this.showTabNoteOnTiedBend,json.showZeroOnDiveWhammy=this.showZeroOnDiveWhammy,json.extendLineEffectsToBeatEnd=this.extendLineEffectsToBeatEnd,json.slurHeight=this.slurHeight},fillFromJson:function(json){if(null!=json)for(var $k in json)this.setProperty($k.toLowerCase(),json[$k])},setProperty:function(property,value){switch(property){case"displaytranspositionpitches":return this.displayTranspositionPitches=null==value?null:value.slice(),!0;case"extendbendarrowsontiednotes":return this.extendBendArrowsOnTiedNotes=value,!0;case"extendlineeffectstobeatend":return this.extendLineEffectsToBeatEnd=value,!0;case"fingeringmode":return this.fingeringMode=alphaTab._FingeringMode.FingeringMode_Impl_.fromJson(value),!0;case"hidechorddiagrams":return this.hideChordDiagrams=value,!0;case"hideinfo":return this.hideInfo=value,!0;case"hidetracknames":return this.hideTrackNames=value,!0;case"hidetuning":return this.hideTuning=value,!0;case"notationmode":return this.notationMode=alphaTab._NotationMode.NotationMode_Impl_.fromJson(value),!0;case"rhythmheight":return this.rhythmHeight=value,!0;case"rhythmmode":return this.rhythmMode=alphaTab._TabRhythmMode.TabRhythmMode_Impl_.fromJson(value),!0;case"showparenthesisfortiedbends":return this.showParenthesisForTiedBends=value,!0;case"showtabnoteontiedbend":return this.showTabNoteOnTiedBend=value,!0;case"showzeroondivewhammy":return this.showZeroOnDiveWhammy=value,!0;case"slurheight":return this.slurHeight=value,!0;case"smallgracetabnotes":return this.smallGraceTabNotes=value,!0;case"transpositionpitches":return this.transpositionPitches=null==value?null:value.slice(),!0}return!1},__class__:alphaTab.NotationSettings},alphaTab.PlayerSettings=$hx_exports.alphaTab.PlayerSettings=function(){this.playTripletFeel=!0,this.vibrato=new alphaTab.VibratoPlaybackSettings,this.songBookDipDuration=150,this.songBookBendDuration=75,this.scrollSpeed=300,this.scrollMode=1,this.scrollOffsetY=0,this.scrollOffsetX=0,this.enableCursor=!0,this.enablePlayer=!1,this.scrollElement="html,body",this.soundFont=null},alphaTab.PlayerSettings.__name__=["alphaTab","PlayerSettings"],alphaTab.PlayerSettings.toJson=function(obj){var json={};return obj.fillToJson(json),json},alphaTab.PlayerSettings.fromJson=function(json){if(null==json)return null;var obj=new alphaTab.PlayerSettings;return obj.fillFromJson(json),obj},alphaTab.PlayerSettings.prototype={fillToJson:function(json){json.soundFont=this.soundFont,json.scrollElement=this.scrollElement,json.enablePlayer=this.enablePlayer,json.enableCursor=this.enableCursor,json.scrollOffsetX=this.scrollOffsetX,json.scrollOffsetY=this.scrollOffsetY,json.scrollMode=alphaTab._ScrollMode.ScrollMode_Impl_.toJson(this.scrollMode),json.scrollSpeed=this.scrollSpeed,json.songBookBendDuration=this.songBookBendDuration,json.songBookDipDuration=this.songBookDipDuration,null==json.vibrato?json.vibrato=alphaTab.VibratoPlaybackSettings.toJson(this.vibrato):this.vibrato.fillToJson(json.vibrato)},fillFromJson:function(json){if(null!=json)for(var $k in json)this.setProperty($k.toLowerCase(),json[$k])},setProperty:function(property,value){switch(property){case"enablecursor":return this.enableCursor=value,!0;case"enableplayer":return this.enablePlayer=value,!0;case"scrollelement":return this.scrollElement=value,!0;case"scrollmode":return this.scrollMode=alphaTab._ScrollMode.ScrollMode_Impl_.fromJson(value),!0;case"scrolloffsetx":return this.scrollOffsetX=value,!0;case"scrolloffsety":return this.scrollOffsetY=value,!0;case"scrollspeed":return this.scrollSpeed=value,!0;case"songbookbendduration":return this.songBookBendDuration=value,!0;case"songbookdipduration":return this.songBookDipDuration=value,!0;case"soundfont":return this.soundFont=value,!0}if(alphaTab.platform.Platform.equalsAny(property,["vibrato"]))return null==this.vibrato?this.vibrato=alphaTab.VibratoPlaybackSettings.fromJson(value):this.vibrato.fillFromJson(value),!0;var partialMatch=alphaTab.platform.Platform.findStartsWith(property,["vibrato"]);return!(null==partialMatch||(null==this.vibrato&&(this.vibrato=new alphaTab.VibratoPlaybackSettings),!this.vibrato.setProperty(HxOverrides.substr(property,partialMatch.length,null),value)))},__class__:alphaTab.PlayerSettings},alphaTab.ProgressEventArgs=$hx_exports.alphaTab.ProgressEventArgs=function(loaded,total){this.loaded=0,this.total=0,this.loaded=loaded,this.total=total},alphaTab.ProgressEventArgs.__name__=["alphaTab","ProgressEventArgs"],alphaTab.ProgressEventArgs.prototype={__class__:alphaTab.ProgressEventArgs},alphaTab.RenderingResources=$hx_exports.alphaTab.RenderingResources=function(){this.copyrightFont=null,this.titleFont=null,this.subTitleFont=null,this.wordsFont=null,this.effectFont=null,this.fretboardNumberFont=null,this.tablatureFont=null,this.graceFont=null,this.staffLineColor=null,this.barSeparatorColor=null,this.barNumberFont=null,this.barNumberColor=null,this.fingeringFont=null,this.markerFont=null,this.mainGlyphColor=null,this.secondaryGlyphColor=null,this.scoreInfoColor=null;this.effectFont=new alphaTab.platform.model.Font("Georgia",12,2),this.copyrightFont=new alphaTab.platform.model.Font("Arial",12,1),this.fretboardNumberFont=new alphaTab.platform.model.Font("Arial",11,0),this.titleFont=new alphaTab.platform.model.Font("Georgia",32,0),this.subTitleFont=new alphaTab.platform.model.Font("Georgia",20,0),this.wordsFont=new alphaTab.platform.model.Font("Georgia",15,0),this.tablatureFont=new alphaTab.platform.model.Font("Arial",13,0),this.graceFont=new alphaTab.platform.model.Font("Arial",11,0),this.staffLineColor=new alphaTab.platform.model.Color(165,165,165,255),this.barSeparatorColor=new alphaTab.platform.model.Color(34,34,17,255),this.barNumberFont=new alphaTab.platform.model.Font("Arial",11,0),this.barNumberColor=new alphaTab.platform.model.Color(200,0,0,255),this.fingeringFont=new alphaTab.platform.model.Font("Georgia",14,0),this.markerFont=new alphaTab.platform.model.Font("Georgia",14,1),this.scoreInfoColor=new alphaTab.platform.model.Color(0,0,0,255),this.mainGlyphColor=new alphaTab.platform.model.Color(0,0,0,255),this.secondaryGlyphColor=new alphaTab.platform.model.Color(0,0,0,100)},alphaTab.RenderingResources.__name__=["alphaTab","RenderingResources"],alphaTab.RenderingResources.toJson=function(obj){var json={};return obj.fillToJson(json),json},alphaTab.RenderingResources.fromJson=function(json){if(null==json)return null;var obj=new alphaTab.RenderingResources;return obj.fillFromJson(json),obj},alphaTab.RenderingResources.prototype={fillToJson:function(json){json.copyrightFont=alphaTab.platform.model.Font.toJson(this.copyrightFont),json.titleFont=alphaTab.platform.model.Font.toJson(this.titleFont),json.subTitleFont=alphaTab.platform.model.Font.toJson(this.subTitleFont),json.wordsFont=alphaTab.platform.model.Font.toJson(this.wordsFont),json.effectFont=alphaTab.platform.model.Font.toJson(this.effectFont),json.fretboardNumberFont=alphaTab.platform.model.Font.toJson(this.fretboardNumberFont),json.tablatureFont=alphaTab.platform.model.Font.toJson(this.tablatureFont),json.graceFont=alphaTab.platform.model.Font.toJson(this.graceFont),json.staffLineColor=alphaTab.platform.model.Color.toJson(this.staffLineColor),json.barSeparatorColor=alphaTab.platform.model.Color.toJson(this.barSeparatorColor),json.barNumberFont=alphaTab.platform.model.Font.toJson(this.barNumberFont),json.barNumberColor=alphaTab.platform.model.Color.toJson(this.barNumberColor),json.fingeringFont=alphaTab.platform.model.Font.toJson(this.fingeringFont),json.markerFont=alphaTab.platform.model.Font.toJson(this.markerFont),json.mainGlyphColor=alphaTab.platform.model.Color.toJson(this.mainGlyphColor),json.secondaryGlyphColor=alphaTab.platform.model.Color.toJson(this.secondaryGlyphColor),json.scoreInfoColor=alphaTab.platform.model.Color.toJson(this.scoreInfoColor)},fillFromJson:function(json){if(null!=json)for(var $k in json)this.setProperty($k.toLowerCase(),json[$k])},setProperty:function(property,value){switch(property){case"barnumbercolor":return this.barNumberColor=alphaTab.platform.model.Color.fromJson(value),!0;case"barnumberfont":return this.barNumberFont=alphaTab.platform.model.Font.fromJson(value),!0;case"barseparatorcolor":return this.barSeparatorColor=alphaTab.platform.model.Color.fromJson(value),!0;case"copyrightfont":return this.copyrightFont=alphaTab.platform.model.Font.fromJson(value),!0;case"effectfont":return this.effectFont=alphaTab.platform.model.Font.fromJson(value),!0;case"fingeringfont":return this.fingeringFont=alphaTab.platform.model.Font.fromJson(value),!0;case"fretboardnumberfont":return this.fretboardNumberFont=alphaTab.platform.model.Font.fromJson(value),!0;case"gracefont":return this.graceFont=alphaTab.platform.model.Font.fromJson(value),!0;case"mainglyphcolor":return this.mainGlyphColor=alphaTab.platform.model.Color.fromJson(value),!0;case"markerfont":return this.markerFont=alphaTab.platform.model.Font.fromJson(value),!0;case"scoreinfocolor":return this.scoreInfoColor=alphaTab.platform.model.Color.fromJson(value),!0;case"secondaryglyphcolor":return this.secondaryGlyphColor=alphaTab.platform.model.Color.fromJson(value),!0;case"stafflinecolor":return this.staffLineColor=alphaTab.platform.model.Color.fromJson(value),!0;case"subtitlefont":return this.subTitleFont=alphaTab.platform.model.Font.fromJson(value),!0;case"tablaturefont":return this.tablatureFont=alphaTab.platform.model.Font.fromJson(value),!0;case"titlefont":return this.titleFont=alphaTab.platform.model.Font.fromJson(value),!0;case"wordsfont":return this.wordsFont=alphaTab.platform.model.Font.fromJson(value),!0}return!1},__class__:alphaTab.RenderingResources},alphaTab.ResizeEventArgs=$hx_exports.alphaTab.ResizeEventArgs=function(){this.oldWidth=0,this.newWidth=0,this.settings=null},alphaTab.ResizeEventArgs.__name__=["alphaTab","ResizeEventArgs"],alphaTab.ResizeEventArgs.prototype={__class__:alphaTab.ResizeEventArgs},alphaTab._ScrollMode={},alphaTab._ScrollMode.ScrollMode_Impl_=$hx_exports.alphaTab._ScrollMode.ScrollMode_Impl_={},alphaTab._ScrollMode.ScrollMode_Impl_.__name__=["alphaTab","_ScrollMode","ScrollMode_Impl_"],alphaTab._ScrollMode.ScrollMode_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab._ScrollMode.ScrollMode_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab._ScrollMode.ScrollMode_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab._ScrollMode.ScrollMode_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab._ScrollMode.ScrollMode_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab._ScrollMode.ScrollMode_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab._ScrollMode.ScrollMode_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab._ScrollMode.ScrollMode_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab._ScrollMode.ScrollMode_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab._ScrollMode.ScrollMode_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab._ScrollMode.ScrollMode_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab._ScrollMode.ScrollMode_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab._ScrollMode.ScrollMode_Impl_.toString=function(this1){switch(this1){case 0:return"Off";case 1:return"Continuous";case 2:return"OffScreen"}return""},alphaTab._ScrollMode.ScrollMode_Impl_.fromString=function(str){switch(str.toLowerCase()){case"continuous":return 1;case"off":return 0;case"offscreen":return 2}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab._ScrollMode.ScrollMode_Impl_.toJson=function(obj){return obj},alphaTab._ScrollMode.ScrollMode_Impl_.fromJson=function(json){if("number"==typeof json)return json;if("string"==typeof json)return alphaTab._ScrollMode.ScrollMode_Impl_.fromString(json);throw new js._Boot.HaxeError((new alphaTab.utils.SerializationException).SerializationException("Unsupported value type"))},alphaTab.SelectionInfo=function(beat){this.beat=null,this.bounds=null,this.beat=beat},alphaTab.SelectionInfo.__name__=["alphaTab","SelectionInfo"],alphaTab.SelectionInfo.prototype={__class__:alphaTab.SelectionInfo},alphaTab.Settings=$hx_exports.alphaTab.Settings=function(){this.player=new alphaTab.PlayerSettings,this.importer=new alphaTab.ImporterSettings,this.notation=new alphaTab.NotationSettings,this.display=new alphaTab.DisplaySettings,this.core=new alphaTab.CoreSettings},alphaTab.Settings.__name__=["alphaTab","Settings"],alphaTab.Settings.fromJson=function(json){if(null==json)return null;var obj=new alphaTab.Settings;return obj.fillFromJson(json),obj},alphaTab.Settings.toJson=function(obj){var json={};return obj.fillToJson(json),json},alphaTab.Settings.get_songBook=function(){var settings=new alphaTab.Settings;return settings.setSongBookModeSettings(),settings},alphaTab.Settings.prototype={fillFromJson:function(json){if(null!=json)for(var $k in json)this.setProperty($k.toLowerCase(),json[$k])},fillFromDataAttributes:function(dataAttributes){for(var dataAttributesObject=dataAttributes,keys=Object.keys(dataAttributesObject),key=HxOverrides.iter(keys);key.hasNext();){var key1=key.next();this.setProperty(key1.toLowerCase(),dataAttributes[key1])}},setProperty:function(property,value){if(alphaTab.platform.Platform.equalsAny(property,["core",""]))return null==this.core?this.core=alphaTab.CoreSettings.fromJson(value):this.core.fillFromJson(value),!0;var partialMatch=alphaTab.platform.Platform.findStartsWith(property,["core",""]);if(null!=partialMatch&&(null==this.core&&(this.core=new alphaTab.CoreSettings),this.core.setProperty(HxOverrides.substr(property,partialMatch.length,null),value)))return!0;if(alphaTab.platform.Platform.equalsAny(property,["display",""]))return null==this.display?this.display=alphaTab.DisplaySettings.fromJson(value):this.display.fillFromJson(value),!0;var partialMatch1=alphaTab.platform.Platform.findStartsWith(property,["display",""]);if(null!=partialMatch1&&(null==this.display&&(this.display=new alphaTab.DisplaySettings),this.display.setProperty(HxOverrides.substr(property,partialMatch1.length,null),value)))return!0;if(alphaTab.platform.Platform.equalsAny(property,["notation"]))return null==this.notation?this.notation=alphaTab.NotationSettings.fromJson(value):this.notation.fillFromJson(value),!0;var partialMatch2=alphaTab.platform.Platform.findStartsWith(property,["notation"]);if(null!=partialMatch2&&(null==this.notation&&(this.notation=new alphaTab.NotationSettings),this.notation.setProperty(HxOverrides.substr(property,partialMatch2.length,null),value)))return!0;if(alphaTab.platform.Platform.equalsAny(property,["importer"]))return null==this.importer?this.importer=alphaTab.ImporterSettings.fromJson(value):this.importer.fillFromJson(value),!0;var partialMatch3=alphaTab.platform.Platform.findStartsWith(property,["importer"]);if(null!=partialMatch3&&(null==this.importer&&(this.importer=new alphaTab.ImporterSettings),this.importer.setProperty(HxOverrides.substr(property,partialMatch3.length,null),value)))return!0;if(alphaTab.platform.Platform.equalsAny(property,["player"]))return null==this.player?this.player=alphaTab.PlayerSettings.fromJson(value):this.player.fillFromJson(value),!0;var partialMatch4=alphaTab.platform.Platform.findStartsWith(property,["player"]);return!(null==partialMatch4||(null==this.player&&(this.player=new alphaTab.PlayerSettings),!this.player.setProperty(HxOverrides.substr(property,partialMatch4.length,null),value)))},setSongBookModeSettings:function(){this.notation.notationMode=1,this.notation.smallGraceTabNotes=!1,this.notation.fingeringMode=2,this.notation.extendBendArrowsOnTiedNotes=!1,this.notation.showParenthesisForTiedBends=!1,this.notation.showTabNoteOnTiedBend=!1,this.notation.showZeroOnDiveWhammy=!0},fillToJson:function(json){null==json.core?json.core=alphaTab.CoreSettings.toJson(this.core):this.core.fillToJson(json.core),null==json.display?json.display=alphaTab.DisplaySettings.toJson(this.display):this.display.fillToJson(json.display),null==json.notation?json.notation=alphaTab.NotationSettings.toJson(this.notation):this.notation.fillToJson(json.notation),null==json.importer?json.importer=alphaTab.ImporterSettings.toJson(this.importer):this.importer.fillToJson(json.importer),null==json.player?json.player=alphaTab.PlayerSettings.toJson(this.player):this.player.fillToJson(json.player)},__class__:alphaTab.Settings},alphaTab._StaveProfile={},alphaTab._StaveProfile.StaveProfile_Impl_=$hx_exports.alphaTab._StaveProfile.StaveProfile_Impl_={},alphaTab._StaveProfile.StaveProfile_Impl_.__name__=["alphaTab","_StaveProfile","StaveProfile_Impl_"],alphaTab._StaveProfile.StaveProfile_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab._StaveProfile.StaveProfile_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab._StaveProfile.StaveProfile_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab._StaveProfile.StaveProfile_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab._StaveProfile.StaveProfile_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab._StaveProfile.StaveProfile_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab._StaveProfile.StaveProfile_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab._StaveProfile.StaveProfile_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab._StaveProfile.StaveProfile_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab._StaveProfile.StaveProfile_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab._StaveProfile.StaveProfile_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab._StaveProfile.StaveProfile_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab._StaveProfile.StaveProfile_Impl_.toString=function(this1){switch(this1){case 0:return"Default";case 1:return"ScoreTab";case 2:return"Score";case 3:return"Tab";case 4:return"TabMixed"}return""},alphaTab._StaveProfile.StaveProfile_Impl_.fromString=function(str){switch(str.toLowerCase()){case"default":return 0;case"score":return 2;case"scoretab":return 1;case"tab":return 3;case"tabmixed":return 4}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab._StaveProfile.StaveProfile_Impl_.toJson=function(obj){return obj},alphaTab._StaveProfile.StaveProfile_Impl_.fromJson=function(json){if("number"==typeof json)return json;if("string"==typeof json)return alphaTab._StaveProfile.StaveProfile_Impl_.fromString(json);throw new js._Boot.HaxeError((new alphaTab.utils.SerializationException).SerializationException("Unsupported value type"))},alphaTab._TabRhythmMode={},alphaTab._TabRhythmMode.TabRhythmMode_Impl_=$hx_exports.alphaTab._TabRhythmMode.TabRhythmMode_Impl_={},alphaTab._TabRhythmMode.TabRhythmMode_Impl_.__name__=["alphaTab","_TabRhythmMode","TabRhythmMode_Impl_"],alphaTab._TabRhythmMode.TabRhythmMode_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab._TabRhythmMode.TabRhythmMode_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab._TabRhythmMode.TabRhythmMode_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab._TabRhythmMode.TabRhythmMode_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab._TabRhythmMode.TabRhythmMode_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab._TabRhythmMode.TabRhythmMode_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab._TabRhythmMode.TabRhythmMode_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab._TabRhythmMode.TabRhythmMode_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab._TabRhythmMode.TabRhythmMode_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab._TabRhythmMode.TabRhythmMode_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab._TabRhythmMode.TabRhythmMode_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab._TabRhythmMode.TabRhythmMode_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab._TabRhythmMode.TabRhythmMode_Impl_.toString=function(this1){switch(this1){case 0:return"Hidden";case 1:return"ShowWithBeams";case 2:return"ShowWithBars"}return""},alphaTab._TabRhythmMode.TabRhythmMode_Impl_.fromString=function(str){switch(str.toLowerCase()){case"hidden":return 0;case"showwithbars":return 2;case"showwithbeams":return 1}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab._TabRhythmMode.TabRhythmMode_Impl_.toJson=function(obj){return obj},alphaTab._TabRhythmMode.TabRhythmMode_Impl_.fromJson=function(json){if("number"==typeof json)return json;if("string"==typeof json)return alphaTab._TabRhythmMode.TabRhythmMode_Impl_.fromString(json);throw new js._Boot.HaxeError((new alphaTab.utils.SerializationException).SerializationException("Unsupported value type"))},alphaTab.VibratoPlaybackSettings=$hx_exports.alphaTab.VibratoPlaybackSettings=function(){this.beatSlightAmplitude=3,this.beatSlightLength=240,this.beatWideAmplitude=3,this.beatWideLength=240,this.noteSlightAmplitude=2,this.noteSlightLength=480,this.noteWideAmplitude=2,this.noteWideLength=480},alphaTab.VibratoPlaybackSettings.__name__=["alphaTab","VibratoPlaybackSettings"],alphaTab.VibratoPlaybackSettings.toJson=function(obj){var json={};return obj.fillToJson(json),json},alphaTab.VibratoPlaybackSettings.fromJson=function(json){if(null==json)return null;var obj=new alphaTab.VibratoPlaybackSettings;return obj.fillFromJson(json),obj},alphaTab.VibratoPlaybackSettings.prototype={fillToJson:function(json){json.noteWideLength=this.noteWideLength,json.noteWideAmplitude=this.noteWideAmplitude,json.noteSlightLength=this.noteSlightLength,json.noteSlightAmplitude=this.noteSlightAmplitude,json.beatWideLength=this.beatWideLength,json.beatWideAmplitude=this.beatWideAmplitude,json.beatSlightLength=this.beatSlightLength,json.beatSlightAmplitude=this.beatSlightAmplitude},fillFromJson:function(json){if(null!=json)for(var $k in json)this.setProperty($k.toLowerCase(),json[$k])},setProperty:function(property,value){switch(property){case"beatslightamplitude":return this.beatSlightAmplitude=value,!0;case"beatslightlength":return this.beatSlightLength=value,!0;case"beatwideamplitude":return this.beatWideAmplitude=value,!0;case"beatwidelength":return this.beatWideLength=value,!0;case"noteslightamplitude":return this.noteSlightAmplitude=value,!0;case"noteslightlength":return this.noteSlightLength=value,!0;case"notewideamplitude":return this.noteWideAmplitude=value,!0;case"notewidelength":return this.noteWideLength=value,!0}return!1},__class__:alphaTab.VibratoPlaybackSettings},alphaTab.audio.BeatTickLookup=$hx_exports.alphaTab.audio.BeatTickLookup=function(){this._highlightedBeats=null,this.start=0,this.end=0,this.beat=null,this.isEmptyBar=!1,this.beatsToHighlight=null;this._highlightedBeats={};this.beatsToHighlight=[]},alphaTab.audio.BeatTickLookup.__name__=["alphaTab","audio","BeatTickLookup"],alphaTab.audio.BeatTickLookup.prototype={highlightBeat:function(beat){this._highlightedBeats.hasOwnProperty(beat.id)||(this._highlightedBeats[beat.id]=!0,this.beatsToHighlight.push(beat))},__class__:alphaTab.audio.BeatTickLookup},alphaTab.audio.GeneralMidi=function(){},alphaTab.audio.GeneralMidi.__name__=["alphaTab","audio","GeneralMidi"],alphaTab.audio.GeneralMidi.getValue=function(name){if(null==alphaTab.audio.GeneralMidi._values){alphaTab.audio.GeneralMidi._values={},alphaTab.audio.GeneralMidi._values.acousticgrandpiano=0,alphaTab.audio.GeneralMidi._values.brightacousticpiano=1,alphaTab.audio.GeneralMidi._values.electricgrandpiano=2,alphaTab.audio.GeneralMidi._values.honkytonkpiano=3,alphaTab.audio.GeneralMidi._values.electricpiano1=4,alphaTab.audio.GeneralMidi._values.electricpiano2=5,alphaTab.audio.GeneralMidi._values.harpsichord=6,alphaTab.audio.GeneralMidi._values.clavinet=7,alphaTab.audio.GeneralMidi._values.celesta=8,alphaTab.audio.GeneralMidi._values.glockenspiel=9,alphaTab.audio.GeneralMidi._values.musicbox=10,alphaTab.audio.GeneralMidi._values.vibraphone=11,alphaTab.audio.GeneralMidi._values.marimba=12,alphaTab.audio.GeneralMidi._values.xylophone=13,alphaTab.audio.GeneralMidi._values.tubularbells=14,alphaTab.audio.GeneralMidi._values.dulcimer=15,alphaTab.audio.GeneralMidi._values.drawbarorgan=16,alphaTab.audio.GeneralMidi._values.percussiveorgan=17,alphaTab.audio.GeneralMidi._values.rockorgan=18,alphaTab.audio.GeneralMidi._values.churchorgan=19,alphaTab.audio.GeneralMidi._values.reedorgan=20,alphaTab.audio.GeneralMidi._values.accordion=21,alphaTab.audio.GeneralMidi._values.harmonica=22,alphaTab.audio.GeneralMidi._values.tangoaccordion=23,alphaTab.audio.GeneralMidi._values.acousticguitarnylon=24,alphaTab.audio.GeneralMidi._values.acousticguitarsteel=25,alphaTab.audio.GeneralMidi._values.electricguitarjazz=26,alphaTab.audio.GeneralMidi._values.electricguitarclean=27,alphaTab.audio.GeneralMidi._values.electricguitarmuted=28,alphaTab.audio.GeneralMidi._values.overdrivenguitar=29,alphaTab.audio.GeneralMidi._values.distortionguitar=30,alphaTab.audio.GeneralMidi._values.guitarharmonics=31,alphaTab.audio.GeneralMidi._values.acousticbass=32,alphaTab.audio.GeneralMidi._values.electricbassfinger=33,alphaTab.audio.GeneralMidi._values.electricbasspick=34,alphaTab.audio.GeneralMidi._values.fretlessbass=35,alphaTab.audio.GeneralMidi._values.slapbass1=36,alphaTab.audio.GeneralMidi._values.slapbass2=37,alphaTab.audio.GeneralMidi._values.synthbass1=38,alphaTab.audio.GeneralMidi._values.synthbass2=39,alphaTab.audio.GeneralMidi._values.violin=40,alphaTab.audio.GeneralMidi._values.viola=41,alphaTab.audio.GeneralMidi._values.cello=42,alphaTab.audio.GeneralMidi._values.contrabass=43,alphaTab.audio.GeneralMidi._values.tremolostrings=44,alphaTab.audio.GeneralMidi._values.pizzicatostrings=45,alphaTab.audio.GeneralMidi._values.orchestralharp=46,alphaTab.audio.GeneralMidi._values.timpani=47,alphaTab.audio.GeneralMidi._values.stringensemble1=48,alphaTab.audio.GeneralMidi._values.stringensemble2=49,alphaTab.audio.GeneralMidi._values.synthstrings1=50,alphaTab.audio.GeneralMidi._values.synthstrings2=51,alphaTab.audio.GeneralMidi._values.choiraahs=52,alphaTab.audio.GeneralMidi._values.voiceoohs=53,alphaTab.audio.GeneralMidi._values.synthvoice=54,alphaTab.audio.GeneralMidi._values.orchestrahit=55,alphaTab.audio.GeneralMidi._values.trumpet=56,alphaTab.audio.GeneralMidi._values.trombone=57,alphaTab.audio.GeneralMidi._values.tuba=58,alphaTab.audio.GeneralMidi._values.mutedtrumpet=59,alphaTab.audio.GeneralMidi._values.frenchhorn=60,alphaTab.audio.GeneralMidi._values.brasssection=61,alphaTab.audio.GeneralMidi._values.synthbrass1=62,alphaTab.audio.GeneralMidi._values.synthbrass2=63,alphaTab.audio.GeneralMidi._values.sopranosax=64,alphaTab.audio.GeneralMidi._values.altosax=65,alphaTab.audio.GeneralMidi._values.tenorsax=66,alphaTab.audio.GeneralMidi._values.baritonesax=67,alphaTab.audio.GeneralMidi._values.oboe=68,alphaTab.audio.GeneralMidi._values.englishhorn=69,alphaTab.audio.GeneralMidi._values.bassoon=70,alphaTab.audio.GeneralMidi._values.clarinet=71,alphaTab.audio.GeneralMidi._values.piccolo=72,alphaTab.audio.GeneralMidi._values.flute=73,alphaTab.audio.GeneralMidi._values.recorder=74,alphaTab.audio.GeneralMidi._values.panflute=75,alphaTab.audio.GeneralMidi._values.blownbottle=76,alphaTab.audio.GeneralMidi._values.shakuhachi=77,alphaTab.audio.GeneralMidi._values.whistle=78,alphaTab.audio.GeneralMidi._values.ocarina=79,alphaTab.audio.GeneralMidi._values.lead1square=80,alphaTab.audio.GeneralMidi._values.lead2sawtooth=81,alphaTab.audio.GeneralMidi._values.lead3calliope=82,alphaTab.audio.GeneralMidi._values.lead4chiff=83,alphaTab.audio.GeneralMidi._values.lead5charang=84,alphaTab.audio.GeneralMidi._values.lead6voice=85,alphaTab.audio.GeneralMidi._values.lead7fifths=86,alphaTab.audio.GeneralMidi._values.lead8bassandlead=87,alphaTab.audio.GeneralMidi._values.pad1newage=88,alphaTab.audio.GeneralMidi._values.pad2warm=89,alphaTab.audio.GeneralMidi._values.pad3polysynth=90,alphaTab.audio.GeneralMidi._values.pad4choir=91,alphaTab.audio.GeneralMidi._values.pad5bowed=92,alphaTab.audio.GeneralMidi._values.pad6metallic=93,alphaTab.audio.GeneralMidi._values.pad7halo=94,alphaTab.audio.GeneralMidi._values.pad8sweep=95,alphaTab.audio.GeneralMidi._values.fx1rain=96,alphaTab.audio.GeneralMidi._values.fx2soundtrack=97,alphaTab.audio.GeneralMidi._values.fx3crystal=98,alphaTab.audio.GeneralMidi._values.fx4atmosphere=99,alphaTab.audio.GeneralMidi._values.fx5brightness=100,alphaTab.audio.GeneralMidi._values.fx6goblins=101,alphaTab.audio.GeneralMidi._values.fx7echoes=102,alphaTab.audio.GeneralMidi._values.fx8scifi=103,alphaTab.audio.GeneralMidi._values.sitar=104,alphaTab.audio.GeneralMidi._values.banjo=105,alphaTab.audio.GeneralMidi._values.shamisen=106,alphaTab.audio.GeneralMidi._values.koto=107,alphaTab.audio.GeneralMidi._values.kalimba=108,alphaTab.audio.GeneralMidi._values.bagpipe=109,alphaTab.audio.GeneralMidi._values.fiddle=110,alphaTab.audio.GeneralMidi._values.shanai=111,alphaTab.audio.GeneralMidi._values.tinklebell=112,alphaTab.audio.GeneralMidi._values.agogo=113,alphaTab.audio.GeneralMidi._values.steeldrums=114,alphaTab.audio.GeneralMidi._values.woodblock=115,alphaTab.audio.GeneralMidi._values.taikodrum=116,alphaTab.audio.GeneralMidi._values.melodictom=117,alphaTab.audio.GeneralMidi._values.synthdrum=118,alphaTab.audio.GeneralMidi._values.reversecymbal=119,alphaTab.audio.GeneralMidi._values.guitarfretnoise=120,alphaTab.audio.GeneralMidi._values.breathnoise=121,alphaTab.audio.GeneralMidi._values.seashore=122,alphaTab.audio.GeneralMidi._values.birdtweet=123,alphaTab.audio.GeneralMidi._values.telephonering=124,alphaTab.audio.GeneralMidi._values.helicopter=125,alphaTab.audio.GeneralMidi._values.applause=126,alphaTab.audio.GeneralMidi._values.gunshot=127}return name=StringTools.replace(name.toLowerCase()," ",""),alphaTab.audio.GeneralMidi._values.hasOwnProperty(name)?alphaTab.audio.GeneralMidi._values[name]:0},alphaTab.audio.GeneralMidi.isPiano=function(program){return program<=7||16<=program&&program<=23},alphaTab.audio.GeneralMidi.isGuitar=function(program){return 24<=program&&program<=39||105==program||43==program},alphaTab.audio.GeneralMidi.prototype={__class__:alphaTab.audio.GeneralMidi},alphaTab.audio.MasterBarTickLookup=$hx_exports.alphaTab.audio.MasterBarTickLookup=function(){this.start=0,this.end=0,this.tempo=0,this.masterBar=null,this.beats=null,this.nextMasterBar=null;this.beats=[]},alphaTab.audio.MasterBarTickLookup.__name__=["alphaTab","audio","MasterBarTickLookup"],alphaTab.audio.MasterBarTickLookup.prototype={finish:function(){this.beats.sort(function(a1,b1){return b=b1,a1.start-b.start;var b})},addBeat:function(beat){this.beats.push(beat)},__class__:alphaTab.audio.MasterBarTickLookup},alphaTab.audio.MidiTickLookup=$hx_exports.alphaTab.audio.MidiTickLookup=function(){this._currentMasterBar=null,this.masterBarLookup=null,this.masterBars=null;this.masterBars=[];this.masterBarLookup={}},alphaTab.audio.MidiTickLookup.__name__=["alphaTab","audio","MidiTickLookup"],alphaTab.audio.MidiTickLookup.prototype={finish:function(){for(var previous=null,activeBeats=[],bar=$iterator(this.masterBars)();bar.hasNext();){var bar1=bar.next();bar1.finish(),null!=previous&&(previous.nextMasterBar=bar1);for(var beat=$iterator(bar1.beats)();beat.hasNext();){for(var beat1=beat.next(),newActiveBeats=[],activeBeat=$iterator(activeBeats)();activeBeat.hasNext();){var activeBeat1=activeBeat.next();activeBeat1.end>beat1.start&&(newActiveBeats.push(activeBeat1),beat1.highlightBeat(activeBeat1.beat),beat1.start<=activeBeat1.start&&activeBeat1.highlightBeat(beat1.beat))}newActiveBeats.push(beat1),activeBeats=newActiveBeats}previous=bar1}},findBeat:function(tracks,tick){var masterBar=this.findMasterBar(tick);if(null==masterBar)return null;for(var trackLookup={},track=HxOverrides.iter(tracks);track.hasNext();){trackLookup[track.next().index]=!0}for(var beat=null,index=0,beats=masterBar.beats,b=0;b<beats.length;){var currentBeat=beats[b];if(trackLookup.hasOwnProperty(currentBeat.beat.voice.bar.staff.track.index)){if(currentBeat.start<=tick&&tick<currentBeat.end)(null==beat||beat.start<currentBeat.start)&&(beat=beats[b],index=b);else if(currentBeat.end>tick)break;++b}else++b}if(null==beat)return null;for(var nextBeat=null,b1=index+1;b1<beats.length;){var currentBeat1=beats[b1];if(0==currentBeat1.beat.graceType&&currentBeat1.start>beat.start&&trackLookup.hasOwnProperty(currentBeat1.beat.voice.bar.staff.track.index)){nextBeat=currentBeat1;break}++b1}if(null==nextBeat&&null!=masterBar.nextMasterBar){beats=masterBar.nextMasterBar.beats;for(var b2=0;b2<beats.length;){var currentBeat2=beats[b2];if(0==currentBeat2.beat.graceType&&trackLookup.hasOwnProperty(currentBeat2.beat.voice.bar.staff.track.index)){nextBeat=currentBeat2;break}++b2}}var result=new alphaTab.audio.MidiTickLookupFindBeatResult;return result.currentBeat=beat.beat,result.nextBeat=null==nextBeat?null:nextBeat.beat,result.duration=null==nextBeat?alphaTab.audio.MidiUtils.ticksToMillis(beat.end-beat.start,masterBar.tempo):alphaTab.audio.MidiUtils.ticksToMillis(nextBeat.start-beat.start,masterBar.tempo),result.beatsToHighlight=beat.beatsToHighlight,result},findMasterBar:function(tick){for(var bars=this.masterBars,bottom=0,top=bars.length-1;bottom<=top;){var middle=(top+bottom)/2|0,bar=bars[middle];if(tick>=bar.start&&tick<bar.end)return bar;tick<bar.start?top=middle-1:bottom=1+middle}return null},getMasterBar:function(bar){if(this.masterBarLookup.hasOwnProperty(bar.index))return this.masterBarLookup[bar.index];var _tmp=new alphaTab.audio.MasterBarTickLookup;_tmp.start=0,_tmp.end=0;return _tmp.beats=[],_tmp.masterBar=bar,_tmp},getMasterBarStart:function(bar){return this.masterBarLookup.hasOwnProperty(bar.index)?this.masterBarLookup[bar.index].start:0},addMasterBar:function(masterBar){this.masterBars.push(masterBar),this._currentMasterBar=masterBar,this.masterBarLookup.hasOwnProperty(masterBar.masterBar.index)||(this.masterBarLookup[masterBar.masterBar.index]=masterBar)},addBeat:function(beat){this._currentMasterBar.addBeat(beat)},__class__:alphaTab.audio.MidiTickLookup},alphaTab.audio.MidiTickLookupFindBeatResult=$hx_exports.alphaTab.audio.MidiTickLookupFindBeatResult=function(){this.currentBeat=null,this.nextBeat=null,this.duration=0,this.beatsToHighlight=null},alphaTab.audio.MidiTickLookupFindBeatResult.__name__=["alphaTab","audio","MidiTickLookupFindBeatResult"],alphaTab.audio.MidiTickLookupFindBeatResult.prototype={__class__:alphaTab.audio.MidiTickLookupFindBeatResult},alphaTab.audio.MidiUtils=function(){},alphaTab.audio.MidiUtils.__name__=["alphaTab","audio","MidiUtils"],alphaTab.audio.MidiUtils.ticksToMillis=function(ticks,tempo){return system.Convert.toInt32_Double(ticks*(6e4/(960*tempo)))},alphaTab.audio.MidiUtils.millisToTicks=function(millis,tempo){return system.Convert.toInt32_Double(millis/(6e4/(960*tempo)))},alphaTab.audio.MidiUtils.toTicks=function(duration){return alphaTab.audio.MidiUtils.valueToTicks(duration)},alphaTab.audio.MidiUtils.valueToTicks=function(duration){var denomninator=duration;return denomninator<0&&(denomninator=1/-denomninator),system.Convert.toInt32_Single(4/denomninator*960)},alphaTab.audio.MidiUtils.applyDot=function(ticks,doubleDotted){return doubleDotted?ticks+3*(ticks/4|0):ticks+(ticks/2|0)},alphaTab.audio.MidiUtils.applyTuplet=function(ticks,numerator,denominator){return ticks*denominator/numerator|0},alphaTab.audio.MidiUtils.removeTuplet=function(ticks,numerator,denominator){return ticks*numerator/denominator|0},alphaTab.audio.MidiUtils.dynamicToVelocity=function(dyn){return 15+16*dyn},alphaTab.audio.generator={},alphaTab.audio.generator.IMidiFileHandler=$hx_exports.alphaTab.audio.generator.IMidiFileHandler=function(){},alphaTab.audio.generator.IMidiFileHandler.__name__=["alphaTab","audio","generator","IMidiFileHandler"],alphaTab.audio.generator.IMidiFileHandler.prototype={__class__:alphaTab.audio.generator.IMidiFileHandler},alphaTab.audio.generator.AlphaSynthMidiFileHandler=$hx_exports.alphaTab.audio.generator.AlphaSynthMidiFileHandler=function(midiFile){this._midiFile=null,this._midiFile=midiFile},alphaTab.audio.generator.AlphaSynthMidiFileHandler.__name__=["alphaTab","audio","generator","AlphaSynthMidiFileHandler"],alphaTab.audio.generator.AlphaSynthMidiFileHandler.__interfaces__=[alphaTab.audio.generator.IMidiFileHandler],alphaTab.audio.generator.AlphaSynthMidiFileHandler.fixValue=function(value){return 127<value?127:value<0?0:system.Convert.toUInt8(value)},alphaTab.audio.generator.AlphaSynthMidiFileHandler.prototype={addTimeSignature:function(tick,timeSignatureNumerator,timeSignatureDenominator){for(var denominatorIndex=0;0<(timeSignatureDenominator>>=1);)++denominatorIndex;var message=new alphaTab.audio.synth.midi.event.MetaDataEvent(tick,255,system.Convert.toUInt8(88),new Uint8Array([system.Convert.toUInt8(255&timeSignatureNumerator),system.Convert.toUInt8(255&denominatorIndex),48,8]));this._midiFile.addEvent(message)},addRest:function(track,tick,channel){var message=new alphaTab.audio.synth.midi.event.SystemExclusiveEvent(tick,system.Convert.toUInt8(240),0,new Uint8Array([255]));this._midiFile.addEvent(message)},addNote:function(track,start,length,key,dynamicValue,channel){var velocity=alphaTab.audio.MidiUtils.dynamicToVelocity(dynamicValue),noteOn=this.makeCommand(system.Convert.toUInt8(144),channel),noteOn1=alphaTab.audio.generator.AlphaSynthMidiFileHandler.fixValue(key),this1=system.Convert.toUInt8(velocity),noteOn2=new alphaTab.audio.synth.midi.event.MidiEvent(start,noteOn,noteOn1,alphaTab.audio.generator.AlphaSynthMidiFileHandler.fixValue(this1));this._midiFile.addEvent(noteOn2);var noteOff=this.makeCommand(system.Convert.toUInt8(128),channel),noteOff1=alphaTab.audio.generator.AlphaSynthMidiFileHandler.fixValue(key),this2=system.Convert.toUInt8(velocity),noteOff2=new alphaTab.audio.synth.midi.event.MidiEvent(start+length,noteOff,noteOff1,alphaTab.audio.generator.AlphaSynthMidiFileHandler.fixValue(this2));this._midiFile.addEvent(noteOff2)},makeCommand:function(command,channel){return system.Convert.toUInt8(240&command|15&channel)},addControlChange:function(track,tick,channel,controller,value){var message=new alphaTab.audio.synth.midi.event.MidiEvent(tick,this.makeCommand(system.Convert.toUInt8(176),channel),alphaTab.audio.generator.AlphaSynthMidiFileHandler.fixValue(controller),alphaTab.audio.generator.AlphaSynthMidiFileHandler.fixValue(value));this._midiFile.addEvent(message)},addProgramChange:function(track,tick,channel,program){var message=new alphaTab.audio.synth.midi.event.MidiEvent(tick,this.makeCommand(system.Convert.toUInt8(192),channel),alphaTab.audio.generator.AlphaSynthMidiFileHandler.fixValue(program),0);this._midiFile.addEvent(message)},addTempo:function(tick,tempo){var tempoInUsq=6e7/tempo|0,message=new alphaTab.audio.synth.midi.event.MetaNumberEvent(tick,255,system.Convert.toUInt8(81),tempoInUsq);this._midiFile.addEvent(message)},addBend:function(track,tick,channel,value){var message=new alphaTab.audio.synth.midi.event.MidiEvent(tick,this.makeCommand(system.Convert.toUInt8(224),channel),0,alphaTab.audio.generator.AlphaSynthMidiFileHandler.fixValue(value));this._midiFile.addEvent(message)},finishTrack:function(track,tick){var message=system.Convert.toUInt8(47),this1=new Uint8Array(0),message1=new alphaTab.audio.synth.midi.event.MetaDataEvent(tick,255,message,this1);this._midiFile.addEvent(message1)},__class__:alphaTab.audio.generator.AlphaSynthMidiFileHandler},alphaTab.audio.generator.MidiFileGenerator=$hx_exports.alphaTab.audio.generator.MidiFileGenerator=function(score,settings,handler){this._score=null,this._settings=null,this._handler=null,this._currentTempo=0,this._currentBarRepeatLookup=null,this.tickLookup=null,this._currentTripletFeel=null,this._score=score,this._settings=null==settings?new alphaTab.Settings:settings,this._currentTempo=this._score.tempo,this._handler=handler,this.tickLookup=new alphaTab.audio.MidiTickLookup},alphaTab.audio.generator.MidiFileGenerator.__name__=["alphaTab","audio","generator","MidiFileGenerator"],alphaTab.audio.generator.MidiFileGenerator.toChannelShort=function(data){var value=Math.max(-32768,Math.min(32767,8*data-1));return Math.max(value,-1)+1},alphaTab.audio.generator.MidiFileGenerator.prototype={generate:function(){for(var i=0,j=this._score.tracks.length;i<j;)this.generateTrack(this._score.tracks[i]),++i;alphaTab.util.Logger.info("Midi","Begin midi generation",null);for(var controller=new alphaTab.audio.generator.MidiPlaybackController(this._score),previousMasterBar=null;!controller.get_finished();){var index=controller.index,bar=this._score.masterBars[index],currentTick=controller.currentTick;if(controller.processCurrent(),controller.shouldPlay){this.generateMasterBar(bar,previousMasterBar,currentTick);for(var i1=0,j1=this._score.tracks.length;i1<j1;){for(var track=this._score.tracks[i1],k=0,l=track.staves.length;k<l;){var staff=track.staves[k];index<staff.bars.length&&this.generateBar(staff.bars[index],currentTick),++k}++i1}}controller.moveNext(),previousMasterBar=bar}for(var i2=0,j2=this._score.tracks.length;i2<j2;)this._handler.finishTrack(this._score.tracks[i2].index,controller.currentTick),++i2;this.tickLookup.finish(),alphaTab.util.Logger.info("Midi","Midi generation done",null)},generateTrack:function(track){this.generateChannel(track,system.Convert.toUInt8(track.playbackInfo.primaryChannel),track.playbackInfo),track.playbackInfo.primaryChannel!=track.playbackInfo.secondaryChannel&&this.generateChannel(track,system.Convert.toUInt8(track.playbackInfo.secondaryChannel),track.playbackInfo)},generateChannel:function(track,channel,playbackInfo){var volume=alphaTab.audio.generator.MidiFileGenerator.toChannelShort(playbackInfo.volume),balance=alphaTab.audio.generator.MidiFileGenerator.toChannelShort(playbackInfo.balance);this._handler.addControlChange(track.index,0,channel,system.Convert.toUInt8(7),system.Convert.toUInt8(volume)),this._handler.addControlChange(track.index,0,channel,system.Convert.toUInt8(10),system.Convert.toUInt8(balance)),this._handler.addControlChange(track.index,0,channel,system.Convert.toUInt8(11),127),this._handler.addControlChange(track.index,0,channel,system.Convert.toUInt8(100),0),this._handler.addControlChange(track.index,0,channel,system.Convert.toUInt8(101),0),this._handler.addControlChange(track.index,0,channel,system.Convert.toUInt8(38),0),this._handler.addControlChange(track.index,0,channel,system.Convert.toUInt8(6),12),this._handler.addProgramChange(track.index,0,channel,system.Convert.toUInt8(playbackInfo.program))},generateMasterBar:function(masterBar,previousMasterBar,currentTick){null!=previousMasterBar&&previousMasterBar.timeSignatureDenominator==masterBar.timeSignatureDenominator&&previousMasterBar.timeSignatureNumerator==masterBar.timeSignatureNumerator||this._handler.addTimeSignature(currentTick,masterBar.timeSignatureNumerator,masterBar.timeSignatureDenominator),null==previousMasterBar?(this._handler.addTempo(currentTick,masterBar.score.tempo),this._currentTempo=masterBar.score.tempo):null!=masterBar.tempoAutomation&&(this._handler.addTempo(currentTick,system.Convert.toInt32_Single(masterBar.tempoAutomation.value)),this._currentTempo=system.Convert.toInt32_Single(masterBar.tempoAutomation.value));var masterBarLookup=new alphaTab.audio.MasterBarTickLookup;masterBarLookup.masterBar=masterBar,masterBarLookup.start=currentTick,masterBarLookup.tempo=this._currentTempo,masterBarLookup.end=masterBarLookup.start+masterBar.calculateDuration(),this.tickLookup.addMasterBar(masterBarLookup)},generateBar:function(bar,barStartTick){var playbackBar=this.getPlaybackBar(bar);this._currentBarRepeatLookup=null;for(var i=0,j=playbackBar.voices.length;i<j;)this.generateVoice(playbackBar.voices[i],barStartTick,bar),++i},getPlaybackBar:function(bar){switch(bar.simileMark){case 1:null!=bar.previousBar&&(bar=this.getPlaybackBar(bar.previousBar));break;case 2:case 3:null!=bar.previousBar&&null!=bar.previousBar.previousBar&&(bar=this.getPlaybackBar(bar.previousBar.previousBar))}return bar},generateVoice:function(voice,barStartTick,realBar){if(!voice.isEmpty||voice.bar.get_isEmpty()&&0==voice.index)for(var i=0,j=voice.beats.length;i<j;)this.generateBeat(voice.beats[i],barStartTick,realBar),++i},generateBeat:function(beat,barStartTick,realBar){var beatStart=beat.playbackStart,audioDuration=beat.playbackDuration;beat.voice.bar.get_isEmpty()?audioDuration=beat.voice.bar.get_masterBar().calculateDuration():0!=beat.voice.bar.get_masterBar().tripletFeel&&this._settings.player.playTripletFeel&&(null!=this._currentTripletFeel?(beatStart-=this._currentTripletFeel.secondBeatStartOffset,audioDuration=this._currentTripletFeel.secondBeatDuration,this._currentTripletFeel=null):(this._currentTripletFeel=this.calculateTripletFeelInfo(beatStart,audioDuration,beat),null!=this._currentTripletFeel&&(audioDuration=this._currentTripletFeel.firstBeatDuration)));var beatLookup=new alphaTab.audio.BeatTickLookup;beatLookup.start=barStartTick+beatStart;var realTickOffset=null==beat.nextBeat?audioDuration:beat.nextBeat.get_absolutePlaybackStart()-beat.get_absolutePlaybackStart();beatLookup.end=barStartTick+beatStart,beatLookup.highlightBeat(beat),beatLookup.end=beatLookup.end+(audioDuration<realTickOffset?realTickOffset:audioDuration),realBar==beat.voice.bar?(beatLookup.beat=beat,this.tickLookup.addBeat(beatLookup)):(beatLookup.isEmptyBar=!0,beatLookup.beat=realBar.voices[0].beats[0],null==this._currentBarRepeatLookup?(this._currentBarRepeatLookup=beatLookup,this.tickLookup.addBeat(this._currentBarRepeatLookup)):this._currentBarRepeatLookup.end=beatLookup.end);for(var track=beat.voice.bar.staff.track,i=0,j=beat.automations.length;i<j;)this.generateAutomation(beat,beat.automations[i],barStartTick),++i;if(beat.get_isRest())this._handler.addRest(track.index,barStartTick+beatStart,track.playbackInfo.primaryChannel);else for(var brushInfo=this.getBrushInfo(beat),i1=0,j1=beat.notes.length;i1<j1;){var n=beat.notes[i1];this.generateNote(n,barStartTick+beatStart,audioDuration,brushInfo),++i1}if(0!=beat.vibrato){var phaseLength=240,bendAmplitude=3;switch(beat.vibrato){case 1:phaseLength=this._settings.player.vibrato.beatSlightLength,bendAmplitude=this._settings.player.vibrato.beatSlightAmplitude;break;case 2:phaseLength=this._settings.player.vibrato.beatWideLength,bendAmplitude=this._settings.player.vibrato.beatWideAmplitude}this.generateVibratorWithParams(beat.voice.bar.staff.track,barStartTick+beatStart,beat.playbackDuration,phaseLength,bendAmplitude,track.playbackInfo.secondaryChannel)}},calculateTripletFeelInfo:function(beatStart,audioDuration,beat){var initialDuration;switch(beat.voice.bar.get_masterBar().tripletFeel){case 1:case 3:case 5:initialDuration=16;break;case 2:case 4:case 6:initialDuration=8;break;default:return null}var interval=alphaTab.audio.MidiUtils.toTicks(initialDuration);if(audioDuration!=interval)return null;if(beatStart%interval!=0)return null;if(null==beat.nextBeat||beat.nextBeat.voice!=beat.voice||beat.playbackDuration!=interval)return null;var durations=new alphaTab.audio.generator.MidiFileGenerator_TripletFeelDurations;switch(beat.voice.bar.get_masterBar().tripletFeel){case 1:durations.firstBeatDuration=alphaTab.audio.MidiUtils.applyTuplet(alphaTab.audio.MidiUtils.toTicks(8),3,2),durations.secondBeatDuration=alphaTab.audio.MidiUtils.applyTuplet(alphaTab.audio.MidiUtils.toTicks(16),3,2);break;case 2:durations.firstBeatDuration=alphaTab.audio.MidiUtils.applyTuplet(alphaTab.audio.MidiUtils.toTicks(4),3,2),durations.secondBeatDuration=alphaTab.audio.MidiUtils.applyTuplet(alphaTab.audio.MidiUtils.toTicks(8),3,2);break;case 3:durations.firstBeatDuration=alphaTab.audio.MidiUtils.applyDot(alphaTab.audio.MidiUtils.toTicks(16),!1),durations.secondBeatDuration=alphaTab.audio.MidiUtils.toTicks(32);break;case 4:durations.firstBeatDuration=alphaTab.audio.MidiUtils.applyDot(alphaTab.audio.MidiUtils.toTicks(8),!1),durations.secondBeatDuration=alphaTab.audio.MidiUtils.toTicks(16);break;case 5:durations.firstBeatDuration=alphaTab.audio.MidiUtils.toTicks(32),durations.secondBeatDuration=alphaTab.audio.MidiUtils.applyDot(alphaTab.audio.MidiUtils.toTicks(16),!1);break;case 6:durations.firstBeatDuration=alphaTab.audio.MidiUtils.toTicks(16),durations.secondBeatDuration=alphaTab.audio.MidiUtils.applyDot(alphaTab.audio.MidiUtils.toTicks(8),!1)}return durations.secondBeatStartOffset=audioDuration-durations.firstBeatDuration,durations},generateNote:function(note,beatStart,beatDuration,brushInfo){var track=note.beat.voice.bar.staff.track,staff=note.beat.voice.bar.staff,noteKey=note.get_realValue(),brushOffset=note.get_isStringed()&&note.string<=brushInfo.length?brushInfo[note.string-1]:0,noteStart=beatStart+brushOffset,noteDuration=this.getNoteDuration(note,beatDuration);noteDuration.untilTieEnd=noteDuration.untilTieEnd-brushOffset,noteDuration.noteOnly=noteDuration.noteOnly-brushOffset,noteDuration.letRingEnd=noteDuration.letRingEnd-brushOffset;var dynamicValue=this.getDynamicValue(note),channel=note.get_hasBend()||note.beat.get_hasWhammyBar()||0!=note.beat.vibrato?track.playbackInfo.secondaryChannel:track.playbackInfo.primaryChannel,initialBend=32;if(note.get_hasBend()){var this1=2.75*note.bendPoints[0].value;initialBend+=system.Convert.toInt32_Double(Math.round(this1))}else if(note.beat.get_hasWhammyBar()){var this2=2.75*note.beat.whammyBarPoints[0].value;initialBend+=system.Convert.toInt32_Double(Math.round(this2))}else note.isTieDestination&&(initialBend=0);if(0<initialBend&&this._handler.addBend(track.index,noteStart,system.Convert.toUInt8(channel),initialBend),note.beat.fadeIn&&this.generateFadeIn(note,noteStart,noteDuration),!note.get_isTrill()||staff.isPercussion){if(note.beat.get_isTremolo())this.generateTremoloPicking(note,noteStart,noteDuration,noteKey,dynamicValue,channel);else if(note.get_hasBend()?this.generateBend(note,noteStart,noteDuration,channel):note.beat.get_hasWhammyBar()&&0==note.index?this.generateWhammy(note.beat,noteStart,noteDuration,channel):0==note.slideInType&&0==note.slideOutType&&0!=note.vibrato&&this.generateVibrato(note,noteStart,noteDuration,channel),!note.isTieDestination){var noteSoundDuration=Math.max(noteDuration.untilTieEnd,noteDuration.letRingEnd);this._handler.addNote(track.index,noteStart,noteSoundDuration,system.Convert.toUInt8(noteKey),dynamicValue,system.Convert.toUInt8(channel))}}else this.generateTrill(note,noteStart,noteDuration,noteKey,dynamicValue,channel)},getNoteDuration:function(note,duration){var durationWithEffects=new alphaTab.audio.generator.MidiNoteDuration;if(durationWithEffects.noteOnly=duration,durationWithEffects.untilTieEnd=duration,durationWithEffects.letRingEnd=duration,note.isDead)return durationWithEffects.noteOnly=this.applyStaticDuration(30,duration),durationWithEffects.untilTieEnd=durationWithEffects.noteOnly,durationWithEffects.letRingEnd=durationWithEffects.noteOnly,durationWithEffects;if(note.isPalmMute)return durationWithEffects.noteOnly=this.applyStaticDuration(80,duration),durationWithEffects.untilTieEnd=durationWithEffects.noteOnly,durationWithEffects.letRingEnd=durationWithEffects.noteOnly,durationWithEffects;if(note.isStaccato)return durationWithEffects.noteOnly=duration/2|0,durationWithEffects.untilTieEnd=durationWithEffects.noteOnly,durationWithEffects.letRingEnd=durationWithEffects.noteOnly,durationWithEffects;if(note.get_isTieOrigin()){var endNote=note.tieDestination;if(null!=endNote)if(note.isTieDestination){var tieDestinationDuration1=this.getNoteDuration(endNote,endNote.beat.playbackDuration);durationWithEffects.untilTieEnd=duration+tieDestinationDuration1.untilTieEnd}else{var startTick=note.beat.get_absolutePlaybackStart(),tieDestinationDuration=this.getNoteDuration(endNote,endNote.beat.playbackDuration),endTick=endNote.beat.get_absolutePlaybackStart()+tieDestinationDuration.untilTieEnd;durationWithEffects.untilTieEnd=endTick-startTick}}if(note.isLetRing&&0==this._settings.notation.notationMode){for(var lastLetRingBeat=note.beat,letRingEnd=0,maxDuration=note.beat.voice.bar.get_masterBar().calculateDuration();null!=lastLetRingBeat.nextBeat;){var next=lastLetRingBeat.nextBeat;if(next.get_isRest())break;if(note.get_isStringed()&&next.hasNoteOnString(note.string))break;if(maxDuration<(letRingEnd=(lastLetRingBeat=lastLetRingBeat.nextBeat).get_absolutePlaybackStart()-note.beat.get_absolutePlaybackStart()+lastLetRingBeat.playbackDuration)){letRingEnd=maxDuration;break}}lastLetRingBeat==note.beat?durationWithEffects.letRingEnd=duration:durationWithEffects.letRingEnd=letRingEnd}else durationWithEffects.letRingEnd=durationWithEffects.untilTieEnd;return durationWithEffects},applyStaticDuration:function(duration,maximum){var value=this._currentTempo*duration/60|0;return Math.min(value,maximum)},getDynamicValue:function(note){var dynamicValue=note.dynamics;switch(note.beat.voice.bar.staff.isPercussion||null==note.hammerPullOrigin||--dynamicValue,note.isGhost&&--dynamicValue,note.accentuated){case 1:++dynamicValue;break;case 2:dynamicValue+=2}return dynamicValue},generateFadeIn:function(note,noteStart,noteDuration){for(var track=note.beat.voice.bar.staff.track,endVolume=alphaTab.audio.generator.MidiFileGenerator.toChannelShort(track.playbackInfo.volume),volumeFactor=js.Boot.__cast(endVolume,Float)/noteDuration.noteOnly,steps=noteDuration.noteOnly/120|0,endTick=noteStart+noteDuration.noteOnly,i=steps-1;0<=i;){var tick=endTick-120*i,volume=(tick-noteStart)*volumeFactor;i==steps-1&&(this._handler.addControlChange(track.index,noteStart,system.Convert.toUInt8(track.playbackInfo.primaryChannel),system.Convert.toUInt8(7),system.Convert.toUInt8(system.Convert.toInt32_Single(volume))),this._handler.addControlChange(track.index,noteStart,system.Convert.toUInt8(track.playbackInfo.secondaryChannel),system.Convert.toUInt8(7),system.Convert.toUInt8(system.Convert.toInt32_Single(volume)))),this._handler.addControlChange(track.index,tick,system.Convert.toUInt8(track.playbackInfo.primaryChannel),system.Convert.toUInt8(7),system.Convert.toUInt8(system.Convert.toInt32_Single(volume))),this._handler.addControlChange(track.index,tick,system.Convert.toUInt8(track.playbackInfo.secondaryChannel),system.Convert.toUInt8(7),system.Convert.toUInt8(system.Convert.toInt32_Single(volume))),--i}},generateVibrato:function(note,noteStart,noteDuration,channel){var phaseLength,bendAmplitude;switch(note.vibrato){case 1:phaseLength=this._settings.player.vibrato.noteSlightLength,bendAmplitude=this._settings.player.vibrato.noteSlightAmplitude;break;case 2:phaseLength=this._settings.player.vibrato.noteWideLength,bendAmplitude=this._settings.player.vibrato.noteWideAmplitude;break;default:return}var track=note.beat.voice.bar.staff.track;this.generateVibratorWithParams(track,noteStart,noteDuration.noteOnly,phaseLength,bendAmplitude,channel)},generateVibratorWithParams:function(track,noteStart,noteDuration,phaseLength,bendAmplitude,channel){for(var phaseHalf=phaseLength/2|0,noteEnd=(noteStart+=phaseLength)+noteDuration;noteStart<noteEnd;){for(var phase=0,phaseDuration=noteStart+phaseLength<noteEnd?phaseLength:noteEnd-noteStart;phase<phaseDuration;){var bend=bendAmplitude*Math.sin(3.14159265358979*phase/phaseHalf);this._handler.addBend(track.index,noteStart+phase,system.Convert.toUInt8(channel),system.Convert.toInt32_Double(32+bend)),phase+=16}noteStart+=phaseLength}},generateBend:function(note,noteStart,noteDuration,channel){var duration,bendPoints=note.bendPoints,track=note.beat.voice.bar.staff.track,finalBendValue=null;if(note.get_isTieOrigin()&&this._settings.notation.extendBendArrowsOnTiedNotes){for(var endNote=note;endNote.get_isTieOrigin()&&!endNote.tieDestination.get_hasBend();)endNote=endNote.tieDestination;duration=endNote.beat.get_absolutePlaybackStart()-note.beat.get_absolutePlaybackStart()+this.getNoteDuration(endNote,endNote.beat.playbackDuration).noteOnly}else if(note.get_isTieOrigin()&&0!=note.beat.graceType){switch(note.tieDestination.bendType){case 2:case 4:case 7:finalBendValue=note.tieDestination.bendPoints[1].value;break;case 6:case 8:finalBendValue=note.tieDestination.bendPoints[0].value}duration=Math.max(noteDuration.noteOnly,alphaTab.audio.MidiUtils.millisToTicks(this._settings.player.songBookBendDuration,this._currentTempo))}else{duration=noteDuration.noteOnly}0<bendPoints[0].value&&!note.isContinuedBend&&--noteStart;var this4=alphaTab.audio.MidiUtils.millisToTicks(this._settings.player.songBookBendDuration,this._currentTempo),bendDuration=Math.min(duration,this4),playedBendPoints=[];switch(note.bendType){case 1:playedBendPoints=bendPoints;break;case 2:case 3:switch(note.bendStyle){case 0:playedBendPoints=bendPoints;break;case 1:playedBendPoints.push(new alphaTab.model.BendPoint(0,note.bendPoints[0].value)),(null==finalBendValue||finalBendValue<note.bendPoints[1].value)&&(finalBendValue=note.bendPoints[1].value),playedBendPoints.push(new alphaTab.model.BendPoint(60,finalBendValue));break;case 2:return(null==finalBendValue||finalBendValue<note.bendPoints[1].value)&&(finalBendValue=note.bendPoints[1].value),void(3==note.beat.graceType?this.generateSongBookWhammyOrBend(noteStart,channel,duration,track,!0,new Int32Array([note.bendPoints[0].value,finalBendValue]),bendDuration):this.generateSongBookWhammyOrBend(noteStart,channel,duration,track,!1,new Int32Array([note.bendPoints[0].value,finalBendValue]),bendDuration))}break;case 4:switch(note.bendStyle){case 0:playedBendPoints=bendPoints;break;case 1:playedBendPoints.push(new alphaTab.model.BendPoint(0,note.bendPoints[0].value)),playedBendPoints.push(new alphaTab.model.BendPoint(30,note.bendPoints[1].value)),playedBendPoints.push(new alphaTab.model.BendPoint(60,note.bendPoints[2].value));break;case 2:return void this.generateSongBookWhammyOrBend(noteStart,channel,duration,track,!1,new Int32Array([note.bendPoints[0].value,note.bendPoints[1].value,note.bendPoints[2].value]),bendDuration)}break;case 5:case 6:playedBendPoints=bendPoints;break;case 7:switch(note.bendStyle){case 0:playedBendPoints=bendPoints;break;case 1:playedBendPoints.push(new alphaTab.model.BendPoint(0,note.bendPoints[0].value)),playedBendPoints.push(new alphaTab.model.BendPoint(60,note.bendPoints[1].value));break;case 2:var preBendValue=32+2.75*note.bendPoints[0].value;return this._handler.addBend(track.index,noteStart,system.Convert.toUInt8(channel),system.Convert.toInt32_Single(preBendValue)),(null==finalBendValue||finalBendValue<note.bendPoints[1].value)&&(finalBendValue=note.bendPoints[1].value),void this.generateSongBookWhammyOrBend(noteStart,channel,duration,track,!1,new Int32Array([note.bendPoints[0].value,finalBendValue]),bendDuration)}break;case 8:switch(note.bendStyle){case 0:playedBendPoints=bendPoints;break;case 1:playedBendPoints.push(new alphaTab.model.BendPoint(0,note.bendPoints[0].value)),playedBendPoints.push(new alphaTab.model.BendPoint(60,note.bendPoints[1].value));break;case 2:var preBendValue1=32+2.75*note.bendPoints[0].value;return this._handler.addBend(track.index,noteStart,system.Convert.toUInt8(channel),system.Convert.toInt32_Single(preBendValue1)),void this.generateSongBookWhammyOrBend(noteStart,channel,duration,track,!1,new Int32Array([note.bendPoints[0].value,note.bendPoints[1].value]),bendDuration)}}this.generateWhammyOrBend(noteStart,channel,duration,playedBendPoints,track)},generateSongBookWhammyOrBend:function(noteStart,channel,duration,track,bendAtBeginning,bendValues,bendDuration){var startTick;bendAtBeginning?startTick=noteStart:startTick=noteStart+duration-bendDuration;for(var ticksBetweenPoints=bendDuration/(bendValues.length-1),i=0;i<bendValues.length-1;){var currentBendValue=32+2.75*bendValues[i],nextBendValue=32+2.75*bendValues[i+1],tick=startTick+ticksBetweenPoints*i;this.generateBendValues(tick,channel,track,ticksBetweenPoints,currentBendValue,nextBendValue),++i}},generateWhammy:function(beat,noteStart,noteDuration,channel){var bendPoints=beat.whammyBarPoints,track=beat.voice.bar.staff.track,duration=noteDuration.noteOnly;0<bendPoints[0].value&&!beat.isContinuedWhammy&&--noteStart;var playedBendPoints=[];switch(beat.whammyBarType){case 1:playedBendPoints=bendPoints;break;case 2:switch(beat.whammyStyle){case 0:playedBendPoints=bendPoints;break;case 1:playedBendPoints.push(new alphaTab.model.BendPoint(0,bendPoints[0].value)),playedBendPoints.push(new alphaTab.model.BendPoint(60,bendPoints[1].value));break;case 2:var this3=alphaTab.audio.MidiUtils.millisToTicks(this._settings.player.songBookBendDuration,this._currentTempo),whammyDuration=Math.min(duration,this3);return void this.generateSongBookWhammyOrBend(noteStart,channel,duration,track,!1,new Int32Array([bendPoints[0].value,bendPoints[1].value]),whammyDuration)}break;case 3:switch(beat.whammyStyle){case 0:playedBendPoints=bendPoints;break;case 1:playedBendPoints.push(new alphaTab.model.BendPoint(0,bendPoints[0].value)),playedBendPoints.push(new alphaTab.model.BendPoint(30,bendPoints[1].value)),playedBendPoints.push(new alphaTab.model.BendPoint(60,bendPoints[2].value));break;case 2:var this4=alphaTab.audio.MidiUtils.millisToTicks(this._settings.player.songBookDipDuration,this._currentTempo),whammyDuration1=Math.min(duration,this4);return void this.generateSongBookWhammyOrBend(noteStart,channel,duration,track,!0,new Int32Array([bendPoints[0].value,bendPoints[1].value,bendPoints[2].value]),whammyDuration1)}break;case 4:case 5:playedBendPoints=bendPoints;break;case 6:switch(beat.whammyStyle){case 0:playedBendPoints=bendPoints;break;case 1:playedBendPoints.push(new alphaTab.model.BendPoint(0,bendPoints[0].value)),playedBendPoints.push(new alphaTab.model.BendPoint(30,bendPoints[0].value)),playedBendPoints.push(new alphaTab.model.BendPoint(60,bendPoints[1].value));break;case 2:var preDiveValue=32+2.75*bendPoints[0].value;this._handler.addBend(track.index,noteStart,system.Convert.toUInt8(channel),system.Convert.toInt32_Single(preDiveValue));var this5=alphaTab.audio.MidiUtils.millisToTicks(this._settings.player.songBookBendDuration,this._currentTempo),whammyDuration2=Math.min(duration,this5);return void this.generateSongBookWhammyOrBend(noteStart,channel,duration,track,!1,new Int32Array([bendPoints[0].value,bendPoints[1].value]),whammyDuration2)}}this.generateWhammyOrBend(noteStart,channel,duration,playedBendPoints,track)},generateWhammyOrBend:function(noteStart,channel,duration,playedBendPoints,track){for(var ticksPerPosition=duration/60,i=0;i<playedBendPoints.length-1;){var currentPoint=playedBendPoints[i],nextPoint=playedBendPoints[i+1],currentBendValue=32+2.75*currentPoint.value,nextBendValue=32+2.75*nextPoint.value,ticksBetweenPoints=ticksPerPosition*(nextPoint.offset-currentPoint.offset),tick=noteStart+ticksPerPosition*currentPoint.offset;this.generateBendValues(tick,channel,track,ticksBetweenPoints,currentBendValue,nextBendValue),++i}},generateBendValues:function(currentTick,channel,track,ticksBetweenPoints,currentBendValue,nextBendValue){var ticksPerValue=ticksBetweenPoints/Math.abs(nextBendValue-currentBendValue);if(currentBendValue<nextBendValue)for(;currentBendValue<=nextBendValue;){var this1=currentBendValue;this._handler.addBend(track.index,system.Convert.toInt32_Double(currentTick),system.Convert.toUInt8(channel),system.Convert.toInt32_Double(Math.round(this1))),++currentBendValue,currentTick+=ticksPerValue}else if(nextBendValue<currentBendValue)for(;nextBendValue<=currentBendValue;){var this2=currentBendValue;this._handler.addBend(track.index,system.Convert.toInt32_Double(currentTick),system.Convert.toUInt8(channel),system.Convert.toInt32_Double(Math.round(this2))),--currentBendValue,currentTick+=ticksPerValue}else{var this3=currentBendValue;this._handler.addBend(track.index,system.Convert.toInt32_Double(currentTick),system.Convert.toUInt8(channel),system.Convert.toInt32_Double(Math.round(this3)))}},generateTrill:function(note,noteStart,noteDuration,noteKey,dynamicValue,channel){for(var track=note.beat.voice.bar.staff.track,trillKey=note.get_stringTuning()+note.get_trillFret(),trillLength=alphaTab.audio.MidiUtils.toTicks(note.trillSpeed),realKey=!0,tick=noteStart,end=noteStart+noteDuration.untilTieEnd;tick+10<end;)end<=tick+trillLength&&(trillLength=end-tick),this._handler.addNote(track.index,tick,trillLength,system.Convert.toUInt8(realKey?trillKey:noteKey),dynamicValue,system.Convert.toUInt8(channel)),realKey=!realKey,tick+=trillLength},generateTremoloPicking:function(note,noteStart,noteDuration,noteKey,dynamicValue,channel){for(var track=note.beat.voice.bar.staff.track,tpLength=alphaTab.audio.MidiUtils.toTicks(note.beat.tremoloSpeed),tick=noteStart,end=noteStart+noteDuration.untilTieEnd;tick+10<end;)end<=tick+tpLength&&(tpLength=end-tick),this._handler.addNote(track.index,tick,tpLength,system.Convert.toUInt8(noteKey),dynamicValue,system.Convert.toUInt8(channel)),tick+=tpLength},getBrushInfo:function(beat){var brushInfo=new Int32Array(beat.voice.bar.staff.tuning.length);if(0!=beat.brushType){for(var stringUsed=0,stringCount=0,i=0,j=beat.notes.length;i<j;){var n=beat.notes[i];n.isTieDestination?++i:(stringUsed|=1<<n.string-1,++stringCount,++i)}if(0<beat.notes.length)for(var brushMove=0,brushIncrement=beat.brushDuration/(stringCount-1)|0,i1=0,j1=beat.voice.bar.staff.tuning.length;i1<j1;){var index=4==beat.brushType||2==beat.brushType?i1:brushInfo.length-1-i1;0!=(stringUsed&1<<index)&&(brushInfo[index]=brushMove,brushMove+=brushIncrement),++i1}}return brushInfo},generateAutomation:function(beat,automation,startMove){switch(automation.type){case 1:var volume=alphaTab.audio.generator.MidiFileGenerator.toChannelShort(system.Convert.toInt32_Single(automation.value));this._handler.addControlChange(beat.voice.bar.staff.track.index,beat.playbackStart+startMove,system.Convert.toUInt8(beat.voice.bar.staff.track.playbackInfo.primaryChannel),system.Convert.toUInt8(7),system.Convert.toUInt8(volume)),this._handler.addControlChange(beat.voice.bar.staff.track.index,beat.playbackStart+startMove,system.Convert.toUInt8(beat.voice.bar.staff.track.playbackInfo.secondaryChannel),system.Convert.toUInt8(7),system.Convert.toUInt8(volume));break;case 2:this._handler.addProgramChange(beat.voice.bar.staff.track.index,beat.playbackStart+startMove,system.Convert.toUInt8(beat.voice.bar.staff.track.playbackInfo.primaryChannel),system.Convert.toUInt8(system.Convert.toInt32_Single(automation.value))),this._handler.addProgramChange(beat.voice.bar.staff.track.index,beat.playbackStart+startMove,system.Convert.toUInt8(beat.voice.bar.staff.track.playbackInfo.secondaryChannel),system.Convert.toUInt8(system.Convert.toInt32_Single(automation.value)));break;case 3:var balance=alphaTab.audio.generator.MidiFileGenerator.toChannelShort(system.Convert.toInt32_Single(automation.value));this._handler.addControlChange(beat.voice.bar.staff.track.index,beat.playbackStart+startMove,system.Convert.toUInt8(beat.voice.bar.staff.track.playbackInfo.primaryChannel),system.Convert.toUInt8(10),system.Convert.toUInt8(balance)),this._handler.addControlChange(beat.voice.bar.staff.track.index,beat.playbackStart+startMove,system.Convert.toUInt8(beat.voice.bar.staff.track.playbackInfo.secondaryChannel),system.Convert.toUInt8(10),system.Convert.toUInt8(balance))}},__class__:alphaTab.audio.generator.MidiFileGenerator},alphaTab.audio.generator.MidiFileGenerator_TripletFeelDurations=function(){this.firstBeatDuration=0,this.secondBeatStartOffset=0,this.secondBeatDuration=0},alphaTab.audio.generator.MidiFileGenerator_TripletFeelDurations.__name__=["alphaTab","audio","generator","MidiFileGenerator_TripletFeelDurations"],alphaTab.audio.generator.MidiFileGenerator_TripletFeelDurations.prototype={__class__:alphaTab.audio.generator.MidiFileGenerator_TripletFeelDurations},alphaTab.audio.generator.MidiNoteDuration=function(){this.noteOnly=0,this.untilTieEnd=0,this.letRingEnd=0},alphaTab.audio.generator.MidiNoteDuration.__name__=["alphaTab","audio","generator","MidiNoteDuration"],alphaTab.audio.generator.MidiNoteDuration.prototype={__class__:alphaTab.audio.generator.MidiNoteDuration},alphaTab.audio.generator.MidiPlaybackController=function(score){this._score=null,this._repeatStartIndex=0,this._repeatNumber=0,this._repeatOpen=!1,this.shouldPlay=!1,this.index=0,this.currentTick=0,this._score=score,this.shouldPlay=!0,this.index=0,this.currentTick=0},alphaTab.audio.generator.MidiPlaybackController.__name__=["alphaTab","audio","generator","MidiPlaybackController"],alphaTab.audio.generator.MidiPlaybackController.prototype={get_finished:function(){return this.index>=this._score.masterBars.length},processCurrent:function(){var masterBar=this._score.masterBars[this.index],masterBarAlternateEndings=masterBar.alternateEndings;masterBar.repeatGroup.isClosed||masterBar.repeatGroup.openings[masterBar.repeatGroup.openings.length-1]!=masterBar||(this._repeatNumber=0,this._repeatOpen=!1),!masterBar.isRepeatStart&&0!=masterBar.index||0!=this._repeatNumber?masterBar.isRepeatStart&&(this.shouldPlay=!0):(this._repeatStartIndex=this.index,this._repeatOpen=!0),this._repeatOpen&&0<masterBarAlternateEndings&&(0==(masterBarAlternateEndings&1<<this._repeatNumber)?this.shouldPlay=!1:this.shouldPlay=!0),this.shouldPlay&&(this.currentTick=this.currentTick+masterBar.calculateDuration())},moveNext:function(){var masterBarRepeatCount=this._score.masterBars[this.index].repeatCount-1;this._repeatOpen&&0<masterBarRepeatCount?this._repeatNumber<masterBarRepeatCount?(this.index=this._repeatStartIndex,this._repeatNumber++):(this._repeatNumber=0,this._repeatOpen=!1,this.shouldPlay=!0,this.index++):this.index++},__class__:alphaTab.audio.generator.MidiPlaybackController},alphaTab.audio.synth.MidiFileSequencerTempoChange=function(bpm,ticks,time){this.bpm=0,this.ticks=0,this.time=0,this.bpm=bpm,this.ticks=ticks,this.time=time},alphaTab.audio.synth.MidiFileSequencerTempoChange.__name__=["alphaTab","audio","synth","MidiFileSequencerTempoChange"],alphaTab.audio.synth.MidiFileSequencerTempoChange.prototype={__class__:alphaTab.audio.synth.MidiFileSequencerTempoChange},alphaTab.audio.synth.PlaybackRange=$hx_exports.alphaTab.audio.synth.PlaybackRange=function(){this.startTick=0,this.endTick=0},alphaTab.audio.synth.PlaybackRange.__name__=["alphaTab","audio","synth","PlaybackRange"],alphaTab.audio.synth.PlaybackRange.prototype={__class__:alphaTab.audio.synth.PlaybackRange},alphaTab.audio.synth._PlayerState={},alphaTab.audio.synth._PlayerState.PlayerState_Impl_=$hx_exports.alphaTab.audio.synth._PlayerState.PlayerState_Impl_={},alphaTab.audio.synth._PlayerState.PlayerState_Impl_.__name__=["alphaTab","audio","synth","_PlayerState","PlayerState_Impl_"],alphaTab.audio.synth._PlayerState.PlayerState_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.audio.synth._PlayerState.PlayerState_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.audio.synth._PlayerState.PlayerState_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.audio.synth._PlayerState.PlayerState_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.audio.synth._PlayerState.PlayerState_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.audio.synth._PlayerState.PlayerState_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.audio.synth._PlayerState.PlayerState_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth._PlayerState.PlayerState_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.audio.synth._PlayerState.PlayerState_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth._PlayerState.PlayerState_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.audio.synth._PlayerState.PlayerState_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth._PlayerState.PlayerState_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth._PlayerState.PlayerState_Impl_.toString=function(this1){switch(this1){case 0:return"Paused";case 1:return"Playing"}return""},alphaTab.audio.synth._PlayerState.PlayerState_Impl_.fromString=function(str){switch(str.toLowerCase()){case"paused":return 0;case"playing":return 1}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.audio.synth.PlayerStateChangedEventArgs=$hx_exports.alphaTab.audio.synth.PlayerStateChangedEventArgs=function(state,stopped){this.state=0,this.stopped=!1,this.state=state,this.stopped=stopped},alphaTab.audio.synth.PlayerStateChangedEventArgs.__name__=["alphaTab","audio","synth","PlayerStateChangedEventArgs"],alphaTab.audio.synth.PlayerStateChangedEventArgs.prototype={__class__:alphaTab.audio.synth.PlayerStateChangedEventArgs},alphaTab.audio.synth.PositionChangedEventArgs=$hx_exports.alphaTab.audio.synth.PositionChangedEventArgs=function(currentTime,endTime,currentTick,endTick){this.currentTime=0,this.endTime=0,this.currentTick=0,this.endTick=0,this.currentTime=currentTime,this.endTime=endTime,this.currentTick=currentTick,this.endTick=endTick},alphaTab.audio.synth.PositionChangedEventArgs.__name__=["alphaTab","audio","synth","PositionChangedEventArgs"],alphaTab.audio.synth.PositionChangedEventArgs.prototype={__class__:alphaTab.audio.synth.PositionChangedEventArgs},alphaTab.audio.synth.ds={},alphaTab.audio.synth.ds.CircularSampleBuffer=$hx_exports.alphaTab.audio.synth.ds.CircularSampleBuffer=function(size){this._buffer=null,this._writePosition=0,this._readPosition=0,this.count=0;var this1=new Float32Array(size);this._buffer=this1,this._writePosition=0,this._readPosition=0,this.count=0},alphaTab.audio.synth.ds.CircularSampleBuffer.__name__=["alphaTab","audio","synth","ds","CircularSampleBuffer"],alphaTab.audio.synth.ds.CircularSampleBuffer.prototype={clear:function(){this._readPosition=0,this._writePosition=0,this.count=0;var this1=new Float32Array(this._buffer.length);this._buffer=this1},write:function(data,offset,count){var samplesWritten=0;count>this._buffer.length-this.count&&(count=this._buffer.length-this.count);var writeToEnd=Math.min(this._buffer.length-this._writePosition,count),dst=this._buffer,dstOffset=this._writePosition;if(dst.set(data.subarray(offset,offset+writeToEnd),dstOffset),this._writePosition=this._writePosition+writeToEnd,this._writePosition=this._writePosition%this._buffer.length,(samplesWritten+=writeToEnd)<count){var dst1=this._buffer,dstOffset1=this._writePosition;dst1.set(data.subarray(offset+samplesWritten,offset+samplesWritten+count-samplesWritten),dstOffset1),this._writePosition=this._writePosition+(count-samplesWritten),samplesWritten=count}return this.count=this.count+samplesWritten,samplesWritten},read:function(data,offset,count){count>this.count&&(count=this.count);var samplesRead=0,readToEnd=Math.min(this._buffer.length-this._readPosition,count),src=this._buffer,srcOffset=this._readPosition;if(data.set(src.subarray(srcOffset,srcOffset+readToEnd),offset),samplesRead+=readToEnd,this._readPosition=this._readPosition+readToEnd,this._readPosition=this._readPosition%this._buffer.length,samplesRead<count){var src1=this._buffer,srcOffset1=this._readPosition;data.set(src1.subarray(srcOffset1,srcOffset1+count-samplesRead),offset+samplesRead),this._readPosition=this._readPosition+(count-samplesRead),samplesRead=count}return this.count=this.count-samplesRead,samplesRead},__class__:alphaTab.audio.synth.ds.CircularSampleBuffer},alphaTab.audio.synth.ds.LinkedList=function(){this.first=null,this.length=0,this.length=0},alphaTab.audio.synth.ds.LinkedList.__name__=["alphaTab","audio","synth","ds","LinkedList"],alphaTab.audio.synth.ds.LinkedList.prototype={addFirst:function(value){var node=new alphaTab.audio.synth.ds.LinkedListNode;node.value=value,null==this.first?this.insertNodeToEmptyList(node):(this.insertNodeBefore(this.first,node),this.first=node)},addLast:function(value){var node=new alphaTab.audio.synth.ds.LinkedListNode;node.value=value,null==this.first?this.insertNodeToEmptyList(node):this.insertNodeBefore(this.first,node)},removeFirst:function(){if(null==this.first)return null;var v=this.first.value;return this.remove(this.first),v},removeLast:function(){if(null==this.first)return null;var v=null!=this.first.PrevInternal?this.first.PrevInternal.value:null;return this.remove(this.first.PrevInternal),v},remove:function(n){n.NextInternal==n?this.first=null:(n.NextInternal.PrevInternal=n.PrevInternal,n.PrevInternal.NextInternal=n.NextInternal,this.first==n&&(this.first=n.NextInternal)),n.invalidate(),this.length--},insertNodeBefore:function(node,newNode){newNode.NextInternal=node,newNode.PrevInternal=node.PrevInternal,node.PrevInternal.NextInternal=newNode,((node.PrevInternal=newNode).List=this).length++},insertNodeToEmptyList:function(node){(((node.NextInternal=node).PrevInternal=node).List=this).first=node,this.length++},__class__:alphaTab.audio.synth.ds.LinkedList},alphaTab.audio.synth.ds.LinkedListNode=function(){this.List=null,this.NextInternal=null,this.PrevInternal=null,this.value=null},alphaTab.audio.synth.ds.LinkedListNode.__name__=["alphaTab","audio","synth","ds","LinkedListNode"],alphaTab.audio.synth.ds.LinkedListNode.prototype={get_next:function(){return null==this.NextInternal||this.List.first==this.NextInternal?null:this.NextInternal},get_prev:function(){return null==this.PrevInternal||this==this.List.first?null:this.PrevInternal},invalidate:function(){this.List=null,this.NextInternal=null,this.PrevInternal=null},__class__:alphaTab.audio.synth.ds.LinkedListNode},alphaTab.audio.synth.midi={},alphaTab.audio.synth.midi.MidiFile=$hx_exports.alphaTab.audio.synth.midi.MidiFile=function(){this.division=0,this.events=null,this.division=960;this.events=[]},alphaTab.audio.synth.midi.MidiFile.__name__=["alphaTab","audio","synth","midi","MidiFile"],alphaTab.audio.synth.midi.MidiFile.writeVariableInt=function(s,value){for(var array=new Uint8Array(4),n=0;array[n++]=system.Convert.toUInt8(127&value),0<(value>>=7););for(;0<n;)0<--n?s.writeByte(system.Convert.toUInt8(128|array[n])):s.writeByte(array[n])},alphaTab.audio.synth.midi.MidiFile.prototype={addEvent:function(e){if(0==this.events.length)this.events.push(e);else{for(var insertPos=this.events.length;0<insertPos;){if(!(this.events[insertPos-1].tick>e.tick))break;--insertPos}this.events.splice(insertPos,0,e)}},toBinary:function(){var data=alphaTab.io.ByteBuffer.empty();return this.writeTo(data),data.toArray()},writeTo:function(s){var b=new Uint8Array([77,84,104,100]);s.write(b,0,b.length),b=new Uint8Array([0,0,0,6]),s.write(b,0,b.length),b=new Uint8Array([0,0]),s.write(b,0,b.length);var v=1;b=new Uint8Array([system.Convert.toUInt8(v>>8&255),system.Convert.toUInt8(255&v)]),s.write(b,0,b.length),v=system.Convert.toInt16(960),b=new Uint8Array([system.Convert.toUInt8(v>>8&255),system.Convert.toUInt8(255&v)]),s.write(b,0,b.length);for(var trackData=alphaTab.io.ByteBuffer.empty(),previousTick=0,midiEvent=$iterator(this.events)();midiEvent.hasNext();){var midiEvent1=midiEvent.next(),delta=midiEvent1.tick-previousTick;alphaTab.audio.synth.midi.MidiFile.writeVariableInt(trackData,delta),midiEvent1.writeTo(trackData),previousTick=midiEvent1.tick}b=new Uint8Array([77,84,114,107]),s.write(b,0,b.length);var data=trackData.toArray(),l=data.length;b=new Uint8Array([system.Convert.toUInt8(l>>24&255),system.Convert.toUInt8(l>>16&255),system.Convert.toUInt8(l>>8&255),system.Convert.toUInt8(255&l)]),s.write(b,0,b.length),s.write(data,0,data.length)},__class__:alphaTab.audio.synth.midi.MidiFile},alphaTab.audio.synth.midi.MidiHelper=function(){},alphaTab.audio.synth.midi.MidiHelper.__name__=["alphaTab","audio","synth","midi","MidiHelper"],alphaTab.audio.synth.midi.event={},alphaTab.audio.synth.midi.event._ControllerType={},alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_=$hx_exports.alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_={},alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_.__name__=["alphaTab","audio","synth","midi","event","_ControllerType","ControllerType_Impl_"],alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_.toString=function(this1){switch(this1){case 0:return"BankSelectCoarse";case 1:return"ModulationCoarse";case 6:return"DataEntryCoarse";case 7:return"VolumeCoarse";case 10:return"PanCoarse";case 11:return"ExpressionControllerCoarse";case 33:return"ModulationFine";case 38:return"DataEntryFine";case 39:return"VolumeFine";case 42:return"PanFine";case 43:return"ExpressionControllerFine";case 64:return"HoldPedal";case 68:return"LegatoPedal";case 98:return"NonRegisteredParameterFine";case 99:return"NonRegisteredParameterCourse";case 100:return"RegisteredParameterFine";case 101:return"RegisteredParameterCourse";case 121:return"ResetControllers";case 123:return"AllNotesOff"}return""},alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_.fromString=function(str){switch(str.toLowerCase()){case"allnotesoff":return 123;case"bankselectcoarse":return 0;case"dataentrycoarse":return 6;case"dataentryfine":return 38;case"expressioncontrollercoarse":return 11;case"expressioncontrollerfine":return 43;case"holdpedal":return 64;case"legatopedal":return 68;case"modulationcoarse":return 1;case"modulationfine":return 33;case"nonregisteredparametercourse":return 99;case"nonregisteredparameterfine":return 98;case"pancoarse":return 10;case"panfine":return 42;case"registeredparametercourse":return 101;case"registeredparameterfine":return 100;case"resetcontrollers":return 121;case"volumecoarse":return 7;case"volumefine":return 39}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.audio.synth.midi.event.MidiEvent=$hx_exports.alphaTab.audio.synth.midi.event.MidiEvent=function(tick,status,data1,data2){this.message=0,this.tick=0,this.tick=tick,this.message=status|data1<<8|data2<<16},alphaTab.audio.synth.midi.event.MidiEvent.__name__=["alphaTab","audio","synth","midi","event","MidiEvent"],alphaTab.audio.synth.midi.event.MidiEvent.prototype={get_channel:function(){return 15&this.message},get_command:function(){return js.Boot.__cast(240&this.message,Int)},get_data1:function(){return(65280&this.message)>>8},set_data1:function(value){return this.message=-65281&this.message,this.message=this.message|value<<8,this.get_data1()},get_data2:function(){return(16711680&this.message)>>16},set_data2:function(value){return this.message=-16711681&this.message,this.message=this.message|value<<16,this.get_data2()},writeTo:function(s){var b=new Uint8Array([system.Convert.toUInt8(this.message>>24&255),system.Convert.toUInt8(this.message>>16&255),system.Convert.toUInt8(this.message>>8&255),system.Convert.toUInt8(255&this.message)]);s.write(b,0,b.length)},__class__:alphaTab.audio.synth.midi.event.MidiEvent},alphaTab.audio.synth.midi.event.MetaEvent=function(delta,status,data1,data2){alphaTab.audio.synth.midi.event.MidiEvent.call(this,delta,status,data1,data2)},alphaTab.audio.synth.midi.event.MetaEvent.__name__=["alphaTab","audio","synth","midi","event","MetaEvent"],alphaTab.audio.synth.midi.event.MetaEvent.__super__=alphaTab.audio.synth.midi.event.MidiEvent,alphaTab.audio.synth.midi.event.MetaEvent.prototype=$extend(alphaTab.audio.synth.midi.event.MidiEvent.prototype,{get_channel:function(){return-1},get_command:function(){return js.Boot.__cast(255&this.message,Int)},get_metaStatus:function(){return this.get_data1()},__class__:alphaTab.audio.synth.midi.event.MetaEvent}),alphaTab.audio.synth.midi.event.MetaDataEvent=function(delta,status,metaId,data){alphaTab.audio.synth.midi.event.MetaEvent.call(this,delta,status,metaId,0),this.data=null,this.data=data},alphaTab.audio.synth.midi.event.MetaDataEvent.__name__=["alphaTab","audio","synth","midi","event","MetaDataEvent"],alphaTab.audio.synth.midi.event.MetaDataEvent.__super__=alphaTab.audio.synth.midi.event.MetaEvent,alphaTab.audio.synth.midi.event.MetaDataEvent.prototype=$extend(alphaTab.audio.synth.midi.event.MetaEvent.prototype,{writeTo:function(s){s.writeByte(255),s.writeByte(system.Convert.toUInt8(this.get_metaStatus()));var l=this.data.length;alphaTab.audio.synth.midi.MidiFile.writeVariableInt(s,l),s.write(this.data,0,this.data.length)},__class__:alphaTab.audio.synth.midi.event.MetaDataEvent}),alphaTab.audio.synth.midi.event._MetaEventTypeEnum={},alphaTab.audio.synth.midi.event._MetaEventTypeEnum.MetaEventTypeEnum_Impl_={},alphaTab.audio.synth.midi.event._MetaEventTypeEnum.MetaEventTypeEnum_Impl_.__name__=["alphaTab","audio","synth","midi","event","_MetaEventTypeEnum","MetaEventTypeEnum_Impl_"],alphaTab.audio.synth.midi.event._MetaEventTypeEnum.MetaEventTypeEnum_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.audio.synth.midi.event._MetaEventTypeEnum.MetaEventTypeEnum_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.audio.synth.midi.event._MetaEventTypeEnum.MetaEventTypeEnum_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.audio.synth.midi.event._MetaEventTypeEnum.MetaEventTypeEnum_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.audio.synth.midi.event._MetaEventTypeEnum.MetaEventTypeEnum_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.audio.synth.midi.event._MetaEventTypeEnum.MetaEventTypeEnum_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.audio.synth.midi.event._MetaEventTypeEnum.MetaEventTypeEnum_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth.midi.event._MetaEventTypeEnum.MetaEventTypeEnum_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.audio.synth.midi.event._MetaEventTypeEnum.MetaEventTypeEnum_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth.midi.event._MetaEventTypeEnum.MetaEventTypeEnum_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.audio.synth.midi.event._MetaEventTypeEnum.MetaEventTypeEnum_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth.midi.event._MetaEventTypeEnum.MetaEventTypeEnum_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth.midi.event._MetaEventTypeEnum.MetaEventTypeEnum_Impl_.toString=function(this1){switch(this1){case 0:return"SequenceNumber";case 1:return"TextEvent";case 2:return"CopyrightNotice";case 3:return"SequenceOrTrackName";case 4:return"InstrumentName";case 5:return"LyricText";case 6:return"MarkerText";case 7:return"CuePoint";case 8:return"PatchName";case 9:return"PortName";case 32:return"MidiChannel";case 33:return"MidiPort";case 47:return"EndOfTrack";case 81:return"Tempo";case 84:return"SmpteOffset";case 88:return"TimeSignature";case 89:return"KeySignature";case 127:return"SequencerSpecific"}return""},alphaTab.audio.synth.midi.event._MetaEventTypeEnum.MetaEventTypeEnum_Impl_.fromString=function(str){switch(str.toLowerCase()){case"copyrightnotice":return 2;case"cuepoint":return 7;case"endoftrack":return 47;case"instrumentname":return 4;case"keysignature":return 89;case"lyrictext":return 5;case"markertext":return 6;case"midichannel":return 32;case"midiport":return 33;case"patchname":return 8;case"portname":return 9;case"sequencenumber":return 0;case"sequenceortrackname":return 3;case"sequencerspecific":return 127;case"smpteoffset":return 84;case"tempo":return 81;case"textevent":return 1;case"timesignature":return 88}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.audio.synth.midi.event.MetaNumberEvent=function(delta,status,metaId,number){alphaTab.audio.synth.midi.event.MetaEvent.call(this,delta,status,metaId,0),this.value=0,this.value=number},alphaTab.audio.synth.midi.event.MetaNumberEvent.__name__=["alphaTab","audio","synth","midi","event","MetaNumberEvent"],alphaTab.audio.synth.midi.event.MetaNumberEvent.__super__=alphaTab.audio.synth.midi.event.MetaEvent,alphaTab.audio.synth.midi.event.MetaNumberEvent.prototype=$extend(alphaTab.audio.synth.midi.event.MetaEvent.prototype,{writeTo:function(s){s.writeByte(255),s.writeByte(system.Convert.toUInt8(this.get_metaStatus())),alphaTab.audio.synth.midi.MidiFile.writeVariableInt(s,3);var b=new Uint8Array([system.Convert.toUInt8(this.value>>16&255),system.Convert.toUInt8(this.value>>8&255),system.Convert.toUInt8(255&this.value)]);s.write(b,0,b.length)},__class__:alphaTab.audio.synth.midi.event.MetaNumberEvent}),alphaTab.audio.synth.midi.event._MidiEventType={},alphaTab.audio.synth.midi.event._MidiEventType.MidiEventType_Impl_=$hx_exports.alphaTab.audio.synth.midi.event._MidiEventType.MidiEventType_Impl_={},alphaTab.audio.synth.midi.event._MidiEventType.MidiEventType_Impl_.__name__=["alphaTab","audio","synth","midi","event","_MidiEventType","MidiEventType_Impl_"],alphaTab.audio.synth.midi.event._MidiEventType.MidiEventType_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.audio.synth.midi.event._MidiEventType.MidiEventType_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.audio.synth.midi.event._MidiEventType.MidiEventType_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.audio.synth.midi.event._MidiEventType.MidiEventType_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.audio.synth.midi.event._MidiEventType.MidiEventType_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.audio.synth.midi.event._MidiEventType.MidiEventType_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.audio.synth.midi.event._MidiEventType.MidiEventType_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth.midi.event._MidiEventType.MidiEventType_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.audio.synth.midi.event._MidiEventType.MidiEventType_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth.midi.event._MidiEventType.MidiEventType_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.audio.synth.midi.event._MidiEventType.MidiEventType_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth.midi.event._MidiEventType.MidiEventType_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth.midi.event._MidiEventType.MidiEventType_Impl_.toString=function(this1){switch(this1){case 128:return"NoteOff";case 144:return"NoteOn";case 160:return"NoteAftertouch";case 176:return"Controller";case 192:return"ProgramChange";case 208:return"ChannelAftertouch";case 224:return"PitchBend";case 255:return"Meta"}return""},alphaTab.audio.synth.midi.event._MidiEventType.MidiEventType_Impl_.fromString=function(str){switch(str.toLowerCase()){case"channelaftertouch":return 208;case"controller":return 176;case"meta":return 255;case"noteaftertouch":return 160;case"noteoff":return 128;case"noteon":return 144;case"pitchbend":return 224;case"programchange":return 192}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.audio.synth.midi.event.SystemCommonEvent=function(delta,status,data1,data2){alphaTab.audio.synth.midi.event.MidiEvent.call(this,delta,status,data1,data2)},alphaTab.audio.synth.midi.event.SystemCommonEvent.__name__=["alphaTab","audio","synth","midi","event","SystemCommonEvent"],alphaTab.audio.synth.midi.event.SystemCommonEvent.__super__=alphaTab.audio.synth.midi.event.MidiEvent,alphaTab.audio.synth.midi.event.SystemCommonEvent.prototype=$extend(alphaTab.audio.synth.midi.event.MidiEvent.prototype,{get_channel:function(){return-1},get_command:function(){return js.Boot.__cast(255&this.message,Int)},__class__:alphaTab.audio.synth.midi.event.SystemCommonEvent}),alphaTab.audio.synth.midi.event._SystemCommonTypeEnum={},alphaTab.audio.synth.midi.event._SystemCommonTypeEnum.SystemCommonTypeEnum_Impl_={},alphaTab.audio.synth.midi.event._SystemCommonTypeEnum.SystemCommonTypeEnum_Impl_.__name__=["alphaTab","audio","synth","midi","event","_SystemCommonTypeEnum","SystemCommonTypeEnum_Impl_"],alphaTab.audio.synth.midi.event._SystemCommonTypeEnum.SystemCommonTypeEnum_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.audio.synth.midi.event._SystemCommonTypeEnum.SystemCommonTypeEnum_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.audio.synth.midi.event._SystemCommonTypeEnum.SystemCommonTypeEnum_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.audio.synth.midi.event._SystemCommonTypeEnum.SystemCommonTypeEnum_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.audio.synth.midi.event._SystemCommonTypeEnum.SystemCommonTypeEnum_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.audio.synth.midi.event._SystemCommonTypeEnum.SystemCommonTypeEnum_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.audio.synth.midi.event._SystemCommonTypeEnum.SystemCommonTypeEnum_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth.midi.event._SystemCommonTypeEnum.SystemCommonTypeEnum_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.audio.synth.midi.event._SystemCommonTypeEnum.SystemCommonTypeEnum_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth.midi.event._SystemCommonTypeEnum.SystemCommonTypeEnum_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.audio.synth.midi.event._SystemCommonTypeEnum.SystemCommonTypeEnum_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth.midi.event._SystemCommonTypeEnum.SystemCommonTypeEnum_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth.midi.event._SystemCommonTypeEnum.SystemCommonTypeEnum_Impl_.toString=function(this1){switch(this1){case 240:return"SystemExclusive";case 241:return"MtcQuarterFrame";case 242:return"SongPosition";case 243:return"SongSelect";case 246:return"TuneRequest";case 247:return"SystemExclusive2"}return""},alphaTab.audio.synth.midi.event._SystemCommonTypeEnum.SystemCommonTypeEnum_Impl_.fromString=function(str){switch(str.toLowerCase()){case"mtcquarterframe":return 241;case"songposition":return 242;case"songselect":return 243;case"systemexclusive":return 240;case"systemexclusive2":return 247;case"tunerequest":return 246}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.audio.synth.midi.event.SystemExclusiveEvent=function(delta,status,id,data){alphaTab.audio.synth.midi.event.SystemCommonEvent.call(this,delta,status,system.Convert.toUInt8(255&id),system.Convert.toUInt8(id>>8)),this.data=null,this.data=data},alphaTab.audio.synth.midi.event.SystemExclusiveEvent.__name__=["alphaTab","audio","synth","midi","event","SystemExclusiveEvent"],alphaTab.audio.synth.midi.event.SystemExclusiveEvent.__super__=alphaTab.audio.synth.midi.event.SystemCommonEvent,alphaTab.audio.synth.midi.event.SystemExclusiveEvent.prototype=$extend(alphaTab.audio.synth.midi.event.SystemCommonEvent.prototype,{get_manufacturerId:function(){return this.message>>8},writeTo:function(s){s.writeByte(240);var l=this.data.length+2;s.writeByte(system.Convert.toUInt8(this.get_manufacturerId()));var b=new Uint8Array([system.Convert.toUInt8(l>>24&255),system.Convert.toUInt8(l>>16&255),system.Convert.toUInt8(l>>8&255),system.Convert.toUInt8(255&l)]);s.write(b,0,b.length),s.writeByte(247)},__class__:alphaTab.audio.synth.midi.event.SystemExclusiveEvent}),alphaTab.audio.synth.soundFont={},alphaTab.audio.synth.soundFont.Hydra=function(){this.phdrs=null,this.pbags=null,this.pmods=null,this.pgens=null,this.insts=null,this.ibags=null,this.imods=null,this.igens=null,this.sHdrs=null,this.fontSamples=null;this.phdrs=[];this.pbags=[];this.pmods=[];this.pgens=[];this.insts=[];this.ibags=[];this.imods=[];this.igens=[];this.sHdrs=[]},alphaTab.audio.synth.soundFont.Hydra.__name__=["alphaTab","audio","synth","soundFont","Hydra"],alphaTab.audio.synth.soundFont.Hydra.loadSamples=function(chunk,reader){for(var samplesLeft=system.Convert.toInt32(chunk.size/2|0),samples=new Float32Array(samplesLeft),samplesPos=0,sampleBuffer=new Uint8Array(2048),testBuffer=new Int16Array(sampleBuffer.length/2|0);0<samplesLeft;){var samplesToRead=Math.min(samplesLeft,sampleBuffer.length/2|0);reader.read(sampleBuffer,0,2*samplesToRead);for(var i=0;i<samplesToRead;){var this4=sampleBuffer[2*i];testBuffer[i]=alphaTab.platform.Platform.toInt16(sampleBuffer[2*i+1]<<8|this4);samples[samplesPos+i]=testBuffer[i]/32767,++i}samplesLeft-=samplesToRead,samplesPos+=samplesToRead}return samples},alphaTab.audio.synth.soundFont.Hydra.prototype={load:function(readable){var chunkHead=new alphaTab.audio.synth.soundFont.RiffChunk,chunkFastList=new alphaTab.audio.synth.soundFont.RiffChunk;if(alphaTab.audio.synth.soundFont.RiffChunk.load(null,chunkHead,readable)&&"sfbk"==chunkHead.id)for(;alphaTab.audio.synth.soundFont.RiffChunk.load(chunkHead,chunkFastList,readable);){var chunk=new alphaTab.audio.synth.soundFont.RiffChunk;if("pdta"==chunkFastList.id)for(;alphaTab.audio.synth.soundFont.RiffChunk.load(chunkFastList,chunk,readable);){switch(chunk.id){case"ibag":for(var i=0,count=chunk.size/system.Convert.toUInt32(4)|0;i<count;)this.ibags.push(alphaTab.audio.synth.soundFont.HydraIbag.load(readable)),++i;break;case"igen":for(var i1=0,count1=chunk.size/system.Convert.toUInt32(4)|0;i1<count1;)this.igens.push(alphaTab.audio.synth.soundFont.HydraIgen.load(readable)),++i1;break;case"imod":for(var i2=0,count2=chunk.size/system.Convert.toUInt32(10)|0;i2<count2;)this.imods.push(alphaTab.audio.synth.soundFont.HydraImod.load(readable)),++i2;break;case"inst":for(var i3=0,count3=chunk.size/system.Convert.toUInt32(22)|0;i3<count3;)this.insts.push(alphaTab.audio.synth.soundFont.HydraInst.load(readable)),++i3;break;case"pbag":for(var i4=0,count4=chunk.size/system.Convert.toUInt32(4)|0;i4<count4;)this.pbags.push(alphaTab.audio.synth.soundFont.HydraPbag.load(readable)),++i4;break;case"pgen":for(var i5=0,count5=chunk.size/system.Convert.toUInt32(4)|0;i5<count5;)this.pgens.push(alphaTab.audio.synth.soundFont.HydraPgen.load(readable)),++i5;break;case"phdr":for(var i6=0,count6=chunk.size/system.Convert.toUInt32(38)|0;i6<count6;)this.phdrs.push(alphaTab.audio.synth.soundFont.HydraPhdr.load(readable)),++i6;break;case"pmod":for(var i7=0,count7=chunk.size/system.Convert.toUInt32(10)|0;i7<count7;)this.pmods.push(alphaTab.audio.synth.soundFont.HydraPmod.load(readable)),++i7;break;case"shdr":for(var i8=0,count8=chunk.size/system.Convert.toUInt32(46)|0;i8<count8;)this.sHdrs.push(alphaTab.audio.synth.soundFont.HydraShdr.load(readable)),++i8;break;default:readable.set_position(readable.get_position()+system.Convert.toInt32(chunk.size))}}else if("sdta"==chunkFastList.id)for(;alphaTab.audio.synth.soundFont.RiffChunk.load(chunkFastList,chunk,readable);){"smpl"==chunk.id?this.fontSamples=alphaTab.audio.synth.soundFont.Hydra.loadSamples(chunk,readable):readable.set_position(readable.get_position()+system.Convert.toInt32(chunk.size))}else readable.set_position(readable.get_position()+system.Convert.toInt32(chunkFastList.size))}},__class__:alphaTab.audio.synth.soundFont.Hydra},alphaTab.audio.synth.soundFont.HydraGenAmount=function(){this.wordAmount=0},alphaTab.audio.synth.soundFont.HydraGenAmount.__name__=["alphaTab","audio","synth","soundFont","HydraGenAmount"],alphaTab.audio.synth.soundFont.HydraGenAmount.load=function(reader){var genAmount=new alphaTab.audio.synth.soundFont.HydraGenAmount;return genAmount.wordAmount=alphaTab.io.IOHelper.readUInt16LE(reader),genAmount},alphaTab.audio.synth.soundFont.HydraGenAmount.prototype={get_shortAmount:function(){return system.Convert.toInt16(this.wordAmount)},get_lowByteAmount:function(){return system.Convert.toUInt8(255&this.wordAmount)},set_lowByteAmount:function(value){return this.wordAmount=system.Convert.toUInt16(65280&this.wordAmount|value),this.get_lowByteAmount()},get_highByteAmount:function(){return system.Convert.toUInt8((65280&this.wordAmount)>>8)},set_highByteAmount:function(value){return this.wordAmount=system.Convert.toUInt16(65280&value|255&this.wordAmount),this.get_highByteAmount()},__class__:alphaTab.audio.synth.soundFont.HydraGenAmount},alphaTab.audio.synth.soundFont.HydraIbag=function(){this.instGenNdx=0,this.instModNdx=0},alphaTab.audio.synth.soundFont.HydraIbag.__name__=["alphaTab","audio","synth","soundFont","HydraIbag"],alphaTab.audio.synth.soundFont.HydraIbag.load=function(reader){var ibag=new alphaTab.audio.synth.soundFont.HydraIbag;return ibag.instGenNdx=alphaTab.io.IOHelper.readUInt16LE(reader),ibag.instModNdx=alphaTab.io.IOHelper.readUInt16LE(reader),ibag},alphaTab.audio.synth.soundFont.HydraIbag.prototype={__class__:alphaTab.audio.synth.soundFont.HydraIbag},alphaTab.audio.synth.soundFont.HydraIgen=function(){this.genOper=0,this.genAmount=null},alphaTab.audio.synth.soundFont.HydraIgen.__name__=["alphaTab","audio","synth","soundFont","HydraIgen"],alphaTab.audio.synth.soundFont.HydraIgen.load=function(reader){var igen=new alphaTab.audio.synth.soundFont.HydraIgen;return igen.genOper=alphaTab.io.IOHelper.readUInt16LE(reader),igen.genAmount=alphaTab.audio.synth.soundFont.HydraGenAmount.load(reader),igen},alphaTab.audio.synth.soundFont.HydraIgen.prototype={__class__:alphaTab.audio.synth.soundFont.HydraIgen},alphaTab.audio.synth.soundFont.HydraImod=function(){this.modSrcOper=0,this.modDestOper=0,this.modAmount=0,this.modAmtSrcOper=0,this.modTransOper=0},alphaTab.audio.synth.soundFont.HydraImod.__name__=["alphaTab","audio","synth","soundFont","HydraImod"],alphaTab.audio.synth.soundFont.HydraImod.load=function(reader){var imod=new alphaTab.audio.synth.soundFont.HydraImod;return imod.modSrcOper=alphaTab.io.IOHelper.readUInt16LE(reader),imod.modDestOper=alphaTab.io.IOHelper.readUInt16LE(reader),imod.modAmount=alphaTab.io.IOHelper.readInt16LE(reader),imod.modAmtSrcOper=alphaTab.io.IOHelper.readUInt16LE(reader),imod.modTransOper=alphaTab.io.IOHelper.readUInt16LE(reader),imod},alphaTab.audio.synth.soundFont.HydraImod.prototype={__class__:alphaTab.audio.synth.soundFont.HydraImod},alphaTab.audio.synth.soundFont.HydraInst=function(){this.instName=null,this.instBagNdx=0},alphaTab.audio.synth.soundFont.HydraInst.__name__=["alphaTab","audio","synth","soundFont","HydraInst"],alphaTab.audio.synth.soundFont.HydraInst.load=function(reader){var inst=new alphaTab.audio.synth.soundFont.HydraInst;return inst.instName=alphaTab.io.IOHelper.read8BitStringLength(reader,20),inst.instBagNdx=alphaTab.io.IOHelper.readUInt16LE(reader),inst},alphaTab.audio.synth.soundFont.HydraInst.prototype={__class__:alphaTab.audio.synth.soundFont.HydraInst},alphaTab.audio.synth.soundFont.HydraPbag=function(){this.genNdx=0,this.modNdx=0},alphaTab.audio.synth.soundFont.HydraPbag.__name__=["alphaTab","audio","synth","soundFont","HydraPbag"],alphaTab.audio.synth.soundFont.HydraPbag.load=function(reader){var pbag=new alphaTab.audio.synth.soundFont.HydraPbag;return pbag.genNdx=alphaTab.io.IOHelper.readUInt16LE(reader),pbag.modNdx=alphaTab.io.IOHelper.readUInt16LE(reader),pbag},alphaTab.audio.synth.soundFont.HydraPbag.prototype={__class__:alphaTab.audio.synth.soundFont.HydraPbag},alphaTab.audio.synth.soundFont.HydraPgen=function(){this.genOper=0,this.genAmount=null},alphaTab.audio.synth.soundFont.HydraPgen.__name__=["alphaTab","audio","synth","soundFont","HydraPgen"],alphaTab.audio.synth.soundFont.HydraPgen.load=function(reader){var pgen=new alphaTab.audio.synth.soundFont.HydraPgen;return pgen.genOper=alphaTab.io.IOHelper.readUInt16LE(reader),pgen.genAmount=alphaTab.audio.synth.soundFont.HydraGenAmount.load(reader),pgen},alphaTab.audio.synth.soundFont.HydraPgen.prototype={__class__:alphaTab.audio.synth.soundFont.HydraPgen},alphaTab.audio.synth.soundFont.HydraPhdr=function(){this.presetName=null,this.preset=0,this.bank=0,this.presetBagNdx=0,this.library=0,this.genre=0,this.morphology=0},alphaTab.audio.synth.soundFont.HydraPhdr.__name__=["alphaTab","audio","synth","soundFont","HydraPhdr"],alphaTab.audio.synth.soundFont.HydraPhdr.load=function(reader){var phdr=new alphaTab.audio.synth.soundFont.HydraPhdr;return phdr.presetName=alphaTab.io.IOHelper.read8BitStringLength(reader,20),phdr.preset=alphaTab.io.IOHelper.readUInt16LE(reader),phdr.bank=alphaTab.io.IOHelper.readUInt16LE(reader),phdr.presetBagNdx=alphaTab.io.IOHelper.readUInt16LE(reader),phdr.library=alphaTab.io.IOHelper.readUInt32LE(reader),phdr.genre=alphaTab.io.IOHelper.readUInt32LE(reader),phdr.morphology=alphaTab.io.IOHelper.readUInt32LE(reader),phdr},alphaTab.audio.synth.soundFont.HydraPhdr.prototype={__class__:alphaTab.audio.synth.soundFont.HydraPhdr},alphaTab.audio.synth.soundFont.HydraPmod=function(){this.modSrcOper=0,this.modDestOper=0,this.modAmount=0,this.modAmtSrcOper=0,this.modTransOper=0},alphaTab.audio.synth.soundFont.HydraPmod.__name__=["alphaTab","audio","synth","soundFont","HydraPmod"],alphaTab.audio.synth.soundFont.HydraPmod.load=function(reader){var pmod=new alphaTab.audio.synth.soundFont.HydraPmod;return pmod.modSrcOper=alphaTab.io.IOHelper.readUInt16LE(reader),pmod.modDestOper=alphaTab.io.IOHelper.readUInt16LE(reader),pmod.modAmount=alphaTab.io.IOHelper.readUInt16LE(reader),pmod.modAmtSrcOper=alphaTab.io.IOHelper.readUInt16LE(reader),pmod.modTransOper=alphaTab.io.IOHelper.readUInt16LE(reader),pmod},alphaTab.audio.synth.soundFont.HydraPmod.prototype={__class__:alphaTab.audio.synth.soundFont.HydraPmod},alphaTab.audio.synth.soundFont.HydraShdr=function(){this.sampleName=null,this.start=0,this.end=0,this.startLoop=0,this.endLoop=0,this.sampleRate=0,this.originalPitch=0,this.pitchCorrection=0,this.sampleLink=0,this.sampleType=0},alphaTab.audio.synth.soundFont.HydraShdr.__name__=["alphaTab","audio","synth","soundFont","HydraShdr"],alphaTab.audio.synth.soundFont.HydraShdr.load=function(reader){var shdr=new alphaTab.audio.synth.soundFont.HydraShdr;return shdr.sampleName=alphaTab.io.IOHelper.read8BitStringLength(reader,20),shdr.start=alphaTab.io.IOHelper.readUInt32LE(reader),shdr.end=alphaTab.io.IOHelper.readUInt32LE(reader),shdr.startLoop=alphaTab.io.IOHelper.readUInt32LE(reader),shdr.endLoop=alphaTab.io.IOHelper.readUInt32LE(reader),shdr.sampleRate=alphaTab.io.IOHelper.readUInt32LE(reader),shdr.originalPitch=system.Convert.toUInt8(reader.readByte()),shdr.pitchCorrection=alphaTab.platform.Platform.readSignedByte(reader),shdr.sampleLink=alphaTab.io.IOHelper.readUInt16LE(reader),shdr.sampleType=alphaTab.io.IOHelper.readUInt16LE(reader),shdr},alphaTab.audio.synth.soundFont.HydraShdr.prototype={__class__:alphaTab.audio.synth.soundFont.HydraShdr},alphaTab.audio.synth.soundFont.RiffChunk=function(){this.id=null,this.size=0},alphaTab.audio.synth.soundFont.RiffChunk.__name__=["alphaTab","audio","synth","soundFont","RiffChunk"],alphaTab.audio.synth.soundFont.RiffChunk.load=function(parent,chunk,stream){if(null!=parent&&system.Convert.toUInt32(8)>parent.size)return!1;if(stream.get_position()+8>=stream.get_length())return!1;var tmp;(chunk.id=alphaTab.io.IOHelper.read8BitStringLength(stream,4),system.Convert.toUInt16(HxOverrides.cca(chunk.id,0))<=32)?tmp=!0:tmp=122<=system.Convert.toUInt16(HxOverrides.cca(chunk.id,0));if(tmp)return!1;if(chunk.size=alphaTab.io.IOHelper.readUInt32LE(stream),null!=parent&&system.Convert.toUInt32(8)+chunk.size>parent.size)return!1;null!=parent&&(parent.size=parent.size-(system.Convert.toUInt32(8)+chunk.size));var tmp1,isRiff="RIFF"==chunk.id,isList="LIST"==chunk.id;if(isRiff&&null!=parent)return!1;if(!isRiff&&!isList)return!0;(chunk.id=alphaTab.io.IOHelper.read8BitStringLength(stream,4),system.Convert.toUInt16(HxOverrides.cca(chunk.id,0))<=32)?tmp1=!0:tmp1=122<=system.Convert.toUInt16(HxOverrides.cca(chunk.id,0));return!tmp1&&(chunk.size=chunk.size-4,!0)},alphaTab.audio.synth.soundFont.RiffChunk.prototype={__class__:alphaTab.audio.synth.soundFont.RiffChunk},alphaTab.audio.synth.synthesis.Channel=function(){this.presetIndex=0,this.bank=0,this.pitchWheel=0,this.midiPan=0,this.midiVolume=0,this.midiExpression=0,this.midiRpn=0,this.midiData=0,this.panOffset=0,this.gainDb=0,this.pitchRange=0,this.tuning=0,this.mixVolume=0,this.mute=!1,this.solo=!1},alphaTab.audio.synth.synthesis.Channel.__name__=["alphaTab","audio","synth","synthesis","Channel"],alphaTab.audio.synth.synthesis.Channel.prototype={__class__:alphaTab.audio.synth.synthesis.Channel},alphaTab.audio.synth.synthesis.Channels=function(){this.activeChannel=0,this.channelList=null;this.channelList=[]},alphaTab.audio.synth.synthesis.Channels.__name__=["alphaTab","audio","synth","synthesis","Channels"],alphaTab.audio.synth.synthesis.Channels.prototype={setupVoice:function(tinySoundFont,voice){var tmp,c=this.channelList[this.activeChannel],newpan=voice.region.pan+c.panOffset;if(voice.playingChannel=this.activeChannel,voice.mixVolume=c.mixVolume,voice.noteGainDb=voice.noteGainDb+c.gainDb,8192==c.pitchWheel)tmp=c.tuning;else{tmp=c.pitchWheel/16383*c.pitchRange*2-c.pitchRange+c.tuning}if(voice.calcPitchRatio(tmp,tinySoundFont.outSampleRate),newpan<=-.5)voice.panFactorLeft=1,voice.panFactorRight=0;else{if(.5<=newpan)voice.panFactorLeft=0,voice.panFactorRight=1;else{var this5=.5-newpan;voice.panFactorLeft=js.Boot.__cast(Math.sqrt(this5),Float);var this7=.5+newpan;voice.panFactorRight=js.Boot.__cast(Math.sqrt(this7),Float)}}},__class__:alphaTab.audio.synth.synthesis.Channels},alphaTab.audio.synth.synthesis.Envelope=function(){this.delay=0,this.attack=0,this.hold=0,this.decay=0,this.sustain=0,this.release=0,this.keynumToHold=0,this.keynumToDecay=0},alphaTab.audio.synth.synthesis.Envelope.__name__=["alphaTab","audio","synth","synthesis","Envelope"],alphaTab.audio.synth.synthesis.Envelope.prototype={Envelope:function(){return this.delay=0,this.attack=0,this.hold=0,this.decay=0,this.sustain=0,this.release=0,this.keynumToHold=0,this.keynumToDecay=0,this},Envelope_Envelope:function(other){return this.delay=0,this.attack=0,this.hold=0,this.decay=0,this.sustain=0,this.release=0,this.keynumToHold=0,this.keynumToDecay=0,this.delay=other.delay,this.attack=other.attack,this.hold=other.hold,this.decay=other.decay,this.sustain=other.sustain,this.release=other.release,this.keynumToHold=other.keynumToHold,this.keynumToDecay=other.keynumToDecay,this},clear:function(){this.delay=0,this.attack=0,this.hold=0,this.decay=0,this.sustain=0,this.release=0,this.keynumToHold=0,this.keynumToDecay=0},envToSecs:function(sustainIsGain){this.delay=this.delay<-11950?0:alphaTab.audio.synth.util.SynthHelper.timecents2Secs_Single(this.delay),this.attack=this.attack<-11950?0:alphaTab.audio.synth.util.SynthHelper.timecents2Secs_Single(this.attack),this.release=this.release<-11950?0:alphaTab.audio.synth.util.SynthHelper.timecents2Secs_Single(this.release),0==this.keynumToHold&&(this.hold=this.hold<-11950?0:alphaTab.audio.synth.util.SynthHelper.timecents2Secs_Single(this.hold)),0==this.keynumToDecay&&(this.decay=this.decay<-11950?0:alphaTab.audio.synth.util.SynthHelper.timecents2Secs_Single(this.decay));if(this.sustain<0)this.sustain=0;else if(sustainIsGain){this.sustain=alphaTab.audio.synth.util.SynthHelper.decibelsToGain(-this.sustain/10)}else{this.sustain=1-this.sustain/1e3}},__class__:alphaTab.audio.synth.synthesis.Envelope},alphaTab.audio.synth.synthesis._LoopMode={},alphaTab.audio.synth.synthesis._LoopMode.LoopMode_Impl_={},alphaTab.audio.synth.synthesis._LoopMode.LoopMode_Impl_.__name__=["alphaTab","audio","synth","synthesis","_LoopMode","LoopMode_Impl_"],alphaTab.audio.synth.synthesis._LoopMode.LoopMode_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.audio.synth.synthesis._LoopMode.LoopMode_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.audio.synth.synthesis._LoopMode.LoopMode_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.audio.synth.synthesis._LoopMode.LoopMode_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.audio.synth.synthesis._LoopMode.LoopMode_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.audio.synth.synthesis._LoopMode.LoopMode_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.audio.synth.synthesis._LoopMode.LoopMode_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth.synthesis._LoopMode.LoopMode_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.audio.synth.synthesis._LoopMode.LoopMode_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth.synthesis._LoopMode.LoopMode_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.audio.synth.synthesis._LoopMode.LoopMode_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth.synthesis._LoopMode.LoopMode_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth.synthesis._LoopMode.LoopMode_Impl_.toString=function(this1){switch(this1){case 0:return"None";case 1:return"Continuous";case 2:return"Sustain"}return""},alphaTab.audio.synth.synthesis._LoopMode.LoopMode_Impl_.fromString=function(str){switch(str.toLowerCase()){case"continuous":return 1;case"none":return 0;case"sustain":return 2}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.audio.synth.synthesis._OutputMode={},alphaTab.audio.synth.synthesis._OutputMode.OutputMode_Impl_=$hx_exports.alphaTab.audio.synth.synthesis._OutputMode.OutputMode_Impl_={},alphaTab.audio.synth.synthesis._OutputMode.OutputMode_Impl_.__name__=["alphaTab","audio","synth","synthesis","_OutputMode","OutputMode_Impl_"],alphaTab.audio.synth.synthesis._OutputMode.OutputMode_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.audio.synth.synthesis._OutputMode.OutputMode_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.audio.synth.synthesis._OutputMode.OutputMode_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.audio.synth.synthesis._OutputMode.OutputMode_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.audio.synth.synthesis._OutputMode.OutputMode_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.audio.synth.synthesis._OutputMode.OutputMode_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.audio.synth.synthesis._OutputMode.OutputMode_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth.synthesis._OutputMode.OutputMode_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.audio.synth.synthesis._OutputMode.OutputMode_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth.synthesis._OutputMode.OutputMode_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.audio.synth.synthesis._OutputMode.OutputMode_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth.synthesis._OutputMode.OutputMode_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth.synthesis._OutputMode.OutputMode_Impl_.toString=function(this1){switch(this1){case 0:return"StereoInterleaved";case 1:return"StereoUnweaved";case 2:return"Mono"}return""},alphaTab.audio.synth.synthesis._OutputMode.OutputMode_Impl_.fromString=function(str){switch(str.toLowerCase()){case"mono":return 2;case"stereointerleaved":return 0;case"stereounweaved":return 1}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.audio.synth.synthesis.Preset=function(){this.name=null,this.presetNumber=0,this.bank=0,this.regions=null},alphaTab.audio.synth.synthesis.Preset.__name__=["alphaTab","audio","synth","synthesis","Preset"],alphaTab.audio.synth.synthesis.Preset.prototype={__class__:alphaTab.audio.synth.synthesis.Preset},alphaTab.audio.synth.synthesis.Region=function(){this.loopMode=0,this.sampleRate=0,this.loKey=0,this.hiKey=0,this.loVel=0,this.hiVel=0,this.group=0,this.offset=0,this.end=0,this.loopStart=0,this.loopEnd=0,this.transpose=0,this.tune=0,this.pitchKeyCenter=0,this.pitchKeyTrack=0,this.attenuation=0,this.pan=0,this.ampEnv=null,this.modEnv=null,this.initialFilterQ=0,this.initialFilterFc=0,this.modEnvToPitch=0,this.modEnvToFilterFc=0,this.modLfoToFilterFc=0,this.modLfoToVolume=0,this.delayModLFO=0,this.freqModLFO=0,this.modLfoToPitch=0,this.delayVibLFO=0,this.freqVibLFO=0,this.vibLfoToPitch=0},alphaTab.audio.synth.synthesis.Region.__name__=["alphaTab","audio","synth","synthesis","Region"],alphaTab.audio.synth.synthesis.Region.prototype={Region:function(){return this.loopMode=0,this.sampleRate=0,this.loKey=0,this.hiKey=0,this.loVel=0,this.hiVel=0,this.group=0,this.offset=0,this.end=0,this.loopStart=0,this.loopEnd=0,this.transpose=0,this.tune=0,this.pitchKeyCenter=0,this.pitchKeyTrack=0,this.attenuation=0,this.pan=0,this.ampEnv=null,this.modEnv=null,this.initialFilterQ=0,this.initialFilterFc=0,this.modEnvToPitch=0,this.modEnvToFilterFc=0,this.modLfoToFilterFc=0,this.modLfoToVolume=0,this.delayModLFO=0,this.freqModLFO=0,this.modLfoToPitch=0,this.delayVibLFO=0,this.freqVibLFO=0,this.vibLfoToPitch=0,this.ampEnv=(new alphaTab.audio.synth.synthesis.Envelope).Envelope(),this.modEnv=(new alphaTab.audio.synth.synthesis.Envelope).Envelope(),this},Region_Region:function(other){return this.loopMode=0,this.sampleRate=0,this.loKey=0,this.hiKey=0,this.loVel=0,this.hiVel=0,this.group=0,this.offset=0,this.end=0,this.loopStart=0,this.loopEnd=0,this.transpose=0,this.tune=0,this.pitchKeyCenter=0,this.pitchKeyTrack=0,this.attenuation=0,this.pan=0,this.ampEnv=null,this.modEnv=null,this.initialFilterQ=0,this.initialFilterFc=0,this.modEnvToPitch=0,this.modEnvToFilterFc=0,this.modLfoToFilterFc=0,this.modLfoToVolume=0,this.delayModLFO=0,this.freqModLFO=0,this.modLfoToPitch=0,this.delayVibLFO=0,this.freqVibLFO=0,this.vibLfoToPitch=0,this.loopMode=other.loopMode,this.sampleRate=other.sampleRate,this.loKey=other.loKey,this.hiKey=other.hiKey,this.loVel=other.loVel,this.hiVel=other.hiVel,this.group=other.group,this.offset=other.offset,this.end=other.end,this.loopStart=other.loopStart,this.loopEnd=other.loopEnd,this.transpose=other.transpose,this.tune=other.tune,this.pitchKeyCenter=other.pitchKeyCenter,this.pitchKeyTrack=other.pitchKeyTrack,this.attenuation=other.attenuation,this.pan=other.pan,this.ampEnv=(new alphaTab.audio.synth.synthesis.Envelope).Envelope_Envelope(other.ampEnv),this.modEnv=(new alphaTab.audio.synth.synthesis.Envelope).Envelope_Envelope(other.modEnv),this.initialFilterQ=other.initialFilterQ,this.initialFilterFc=other.initialFilterFc,this.modEnvToPitch=other.modEnvToPitch,this.modEnvToFilterFc=other.modEnvToFilterFc,this.modLfoToFilterFc=other.modLfoToFilterFc,this.modLfoToVolume=other.modLfoToVolume,this.delayModLFO=other.delayModLFO,this.freqModLFO=other.freqModLFO,this.modLfoToPitch=other.modLfoToPitch,this.delayVibLFO=other.delayVibLFO,this.freqVibLFO=other.freqVibLFO,this.vibLfoToPitch=other.vibLfoToPitch,this},clear:function(forRelative){this.loopMode=0,this.sampleRate=0,this.loKey=0,this.hiKey=0,this.loVel=0,this.hiVel=0,this.group=0,this.offset=0,this.end=0,this.loopStart=0,this.loopEnd=0,this.transpose=0,this.tune=0,this.pitchKeyCenter=0,this.pitchKeyTrack=0,this.attenuation=0,this.pan=0,this.ampEnv.clear(),this.modEnv.clear(),this.initialFilterQ=0,this.initialFilterFc=0,this.modEnvToPitch=0,this.modEnvToFilterFc=0,this.modLfoToFilterFc=0,this.modLfoToVolume=0,this.delayModLFO=0,this.freqModLFO=0,this.modLfoToPitch=0,this.delayVibLFO=0,this.freqVibLFO=0,this.vibLfoToPitch=0,this.hiKey=this.hiVel=127,this.pitchKeyCenter=60,forRelative||(this.pitchKeyTrack=100,this.pitchKeyCenter=-1,this.ampEnv.delay=this.ampEnv.attack=this.ampEnv.hold=this.ampEnv.decay=this.ampEnv.release=-12e3,this.modEnv.delay=this.modEnv.attack=this.modEnv.hold=this.modEnv.decay=this.modEnv.release=-12e3,this.initialFilterFc=13500,this.delayModLFO=-12e3,this.delayVibLFO=-12e3)},operator:function(genOper,amount){switch(js.Boot.__cast(genOper,Int)){case 0:this.offset=this.offset+system.Convert.toUInt32(amount.get_shortAmount());break;case 1:this.end=this.end+system.Convert.toUInt32(amount.get_shortAmount());break;case 2:this.loopStart=this.loopStart+system.Convert.toUInt32(amount.get_shortAmount());break;case 3:this.loopEnd=this.loopEnd+system.Convert.toUInt32(amount.get_shortAmount());break;case 4:this.offset=this.offset+32768*system.Convert.toUInt32(amount.get_shortAmount());break;case 5:this.modLfoToPitch=amount.get_shortAmount();break;case 6:this.vibLfoToPitch=amount.get_shortAmount();break;case 7:this.modEnvToPitch=amount.get_shortAmount();break;case 8:this.initialFilterFc=amount.get_shortAmount();break;case 9:this.initialFilterQ=amount.get_shortAmount();break;case 10:this.modLfoToFilterFc=amount.get_shortAmount();break;case 11:this.modEnvToFilterFc=amount.get_shortAmount();break;case 12:this.end=this.end+32768*system.Convert.toUInt32(amount.get_shortAmount());break;case 13:this.modLfoToVolume=amount.get_shortAmount();break;case 17:this.pan=amount.get_shortAmount()/1e3;break;case 21:var this2=amount.get_shortAmount();this.delayModLFO=this2;break;case 22:this.freqModLFO=amount.get_shortAmount();break;case 23:var this3=amount.get_shortAmount();this.delayVibLFO=this3;break;case 24:this.freqVibLFO=amount.get_shortAmount();break;case 25:var this4=amount.get_shortAmount();this.modEnv.delay=this4;break;case 26:var this5=amount.get_shortAmount();this.modEnv.attack=this5;break;case 27:var this6=amount.get_shortAmount();this.modEnv.hold=this6;break;case 28:var this7=amount.get_shortAmount();this.modEnv.decay=this7;break;case 29:var this8=amount.get_shortAmount();this.modEnv.sustain=this8;break;case 30:var this9=amount.get_shortAmount();this.modEnv.release=this9;break;case 31:var this10=amount.get_shortAmount();this.modEnv.keynumToHold=this10;break;case 32:var this11=amount.get_shortAmount();this.modEnv.keynumToDecay=this11;break;case 33:var this12=amount.get_shortAmount();this.ampEnv.delay=this12;break;case 34:var this13=amount.get_shortAmount();this.ampEnv.attack=this13;break;case 35:var this14=amount.get_shortAmount();this.ampEnv.hold=this14;break;case 36:var this15=amount.get_shortAmount();this.ampEnv.decay=this15;break;case 37:var this16=amount.get_shortAmount();this.ampEnv.sustain=this16;break;case 38:var this17=amount.get_shortAmount();this.ampEnv.release=this17;break;case 39:var this18=amount.get_shortAmount();this.ampEnv.keynumToHold=this18;break;case 40:var this19=amount.get_shortAmount();this.ampEnv.keynumToDecay=this19;break;case 43:this.loKey=amount.get_lowByteAmount(),this.hiKey=amount.get_highByteAmount();break;case 44:this.loVel=amount.get_lowByteAmount(),this.hiVel=amount.get_highByteAmount();break;case 45:this.loopStart=this.loopStart+32768*system.Convert.toUInt32(amount.get_shortAmount());break;case 48:this.attenuation=this.attenuation+.1*amount.get_shortAmount();break;case 50:this.loopEnd=this.loopEnd+32768*system.Convert.toUInt32(amount.get_shortAmount());break;case 51:this.transpose=this.transpose+amount.get_shortAmount();break;case 52:this.tune=this.tune+amount.get_shortAmount();break;case 54:this.loopMode=3==(3&amount.wordAmount)?2:1==(3&amount.wordAmount)?1:0;break;case 56:this.pitchKeyTrack=amount.get_shortAmount();break;case 57:this.group=amount.wordAmount;break;case 58:this.pitchKeyCenter=amount.get_shortAmount()}},__class__:alphaTab.audio.synth.synthesis.Region},alphaTab.audio.synth.synthesis._Region_GenOperators={},alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_={},alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.__name__=["alphaTab","audio","synth","synthesis","_Region_GenOperators","Region_GenOperators_Impl_"],alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.toString=function(this1){switch(this1){case 0:return"StartAddrsOffset";case 1:return"EndAddrsOffset";case 2:return"StartloopAddrsOffset";case 3:return"EndloopAddrsOffset";case 4:return"StartAddrsCoarseOffset";case 5:return"ModLfoToPitch";case 6:return"VibLfoToPitch";case 7:return"ModEnvToPitch";case 8:return"InitialFilterFc";case 9:return"InitialFilterQ";case 10:return"ModLfoToFilterFc";case 11:return"ModEnvToFilterFc";case 12:return"EndAddrsCoarseOffset";case 13:return"ModLfoToVolume";case 14:return"Unused1";case 15:return"ChorusEffectsSend";case 16:return"ReverbEffectsSend";case 17:return"Pan";case 18:return"Unused2";case 19:return"Unused3";case 20:return"Unused4";case 21:return"DelayModLFO";case 22:return"FreqModLFO";case 23:return"DelayVibLFO";case 24:return"FreqVibLFO";case 25:return"DelayModEnv";case 26:return"AttackModEnv";case 27:return"HoldModEnv";case 28:return"DecayModEnv";case 29:return"SustainModEnv";case 30:return"ReleaseModEnv";case 31:return"KeynumToModEnvHold";case 32:return"KeynumToModEnvDecay";case 33:return"DelayVolEnv";case 34:return"AttackVolEnv";case 35:return"HoldVolEnv";case 36:return"DecayVolEnv";case 37:return"SustainVolEnv";case 38:return"ReleaseVolEnv";case 39:return"KeynumToVolEnvHold";case 40:return"KeynumToVolEnvDecay";case 41:return"Instrument";case 42:return"Reserved1";case 43:return"KeyRange";case 44:return"VelRange";case 45:return"StartloopAddrsCoarseOffset";case 46:return"Keynum";case 47:return"Velocity";case 48:return"InitialAttenuation";case 49:return"Reserved2";case 50:return"EndloopAddrsCoarseOffset";case 51:return"CoarseTune";case 52:return"FineTune";case 53:return"SampleID";case 54:return"SampleModes";case 55:return"Reserved3";case 56:return"ScaleTuning";case 57:return"ExclusiveClass";case 58:return"OverridingRootKey";case 59:return"Unused5";case 60:return"EndOper"}return""},alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.fromString=function(str){switch(str.toLowerCase()){case"attackmodenv":return 26;case"attackvolenv":return 34;case"choruseffectssend":return 15;case"coarsetune":return 51;case"decaymodenv":return 28;case"decayvolenv":return 36;case"delaymodenv":return 25;case"delaymodlfo":return 21;case"delayviblfo":return 23;case"delayvolenv":return 33;case"endaddrscoarseoffset":return 12;case"endaddrsoffset":return 1;case"endloopaddrscoarseoffset":return 50;case"endloopaddrsoffset":return 3;case"endoper":return 60;case"exclusiveclass":return 57;case"finetune":return 52;case"freqmodlfo":return 22;case"freqviblfo":return 24;case"holdmodenv":return 27;case"holdvolenv":return 35;case"initialattenuation":return 48;case"initialfilterfc":return 8;case"initialfilterq":return 9;case"instrument":return 41;case"keynum":return 46;case"keynumtomodenvdecay":return 32;case"keynumtomodenvhold":return 31;case"keynumtovolenvdecay":return 40;case"keynumtovolenvhold":return 39;case"keyrange":return 43;case"modenvtofilterfc":return 11;case"modenvtopitch":return 7;case"modlfotofilterfc":return 10;case"modlfotopitch":return 5;case"modlfotovolume":return 13;case"overridingrootkey":return 58;case"pan":return 17;case"releasemodenv":return 30;case"releasevolenv":return 38;case"reserved1":return 42;case"reserved2":return 49;case"reserved3":return 55;case"reverbeffectssend":return 16;case"sampleid":return 53;case"samplemodes":return 54;case"scaletuning":return 56;case"startaddrscoarseoffset":return 4;case"startaddrsoffset":return 0;case"startloopaddrscoarseoffset":return 45;case"startloopaddrsoffset":return 2;case"sustainmodenv":return 29;case"sustainvolenv":return 37;case"unused1":return 14;case"unused2":return 18;case"unused3":return 19;case"unused4":return 20;case"unused5":return 59;case"velocity":return 47;case"velrange":return 44;case"viblfotopitch":return 6}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.audio.synth.synthesis.SynthEvent=function(eventIndex,e){this.eventIndex=0,this.event=null,this.isMetronome=!1,this.time=0,this.eventIndex=eventIndex,this.event=e},alphaTab.audio.synth.synthesis.SynthEvent.__name__=["alphaTab","audio","synth","synthesis","SynthEvent"],alphaTab.audio.synth.synthesis.SynthEvent.newMetronomeEvent=function(eventIndex,metronomeLength){var x=new alphaTab.audio.synth.synthesis.SynthEvent(eventIndex,null);return x.isMetronome=!0,x},alphaTab.audio.synth.synthesis.SynthEvent.prototype={__class__:alphaTab.audio.synth.synthesis.SynthEvent},alphaTab.audio.synth.synthesis.Voice=function(){this.playingPreset=0,this.playingKey=0,this.playingChannel=0,this.region=null,this.pitchInputTimecents=0,this.pitchOutputFactor=0,this.sourceSamplePosition=0,this.noteGainDb=0,this.panFactorLeft=0,this.panFactorRight=0,this.playIndex=0,this.loopStart=0,this.loopEnd=0,this.ampEnv=null,this.modEnv=null,this.lowPass=null,this.modLfo=null,this.vibLfo=null,this.mixVolume=0,this.mute=!1,this.ampEnv=new alphaTab.audio.synth.synthesis.VoiceEnvelope,this.modEnv=new alphaTab.audio.synth.synthesis.VoiceEnvelope,this.lowPass=(new alphaTab.audio.synth.synthesis.VoiceLowPass).VoiceLowPass(),this.modLfo=new alphaTab.audio.synth.synthesis.VoiceLfo,this.vibLfo=new alphaTab.audio.synth.synthesis.VoiceLfo},alphaTab.audio.synth.synthesis.Voice.__name__=["alphaTab","audio","synth","synthesis","Voice"],alphaTab.audio.synth.synthesis.Voice.prototype={calcPitchRatio:function(pitchShift,outSampleRate){var note=this.playingKey+this.region.transpose+this.region.tune/100,adjustedPitch=this.region.pitchKeyCenter+(note-this.region.pitchKeyCenter)*(this.region.pitchKeyTrack/100);0!=pitchShift&&(adjustedPitch+=pitchShift),this.pitchInputTimecents=100*adjustedPitch,this.pitchOutputFactor=this.region.sampleRate/(alphaTab.audio.synth.util.SynthHelper.timecents2Secs_Double(100*this.region.pitchKeyCenter)*outSampleRate)},end:function(outSampleRate){this.ampEnv.nextSegment(5,outSampleRate),this.modEnv.nextSegment(5,outSampleRate),2==this.region.loopMode&&(this.loopEnd=this.loopStart)},endQuick:function(outSampleRate){this.ampEnv.parameters.release=0,this.ampEnv.nextSegment(5,outSampleRate),this.modEnv.parameters.release=0,this.modEnv.nextSegment(5,outSampleRate)},render:function(f,outputBuffer,offset,numSamples,isMuted){var tmpSampleRate,tmpInitialFilterFc,tmpModLfoToFilterFc,tmpModEnvToFilterFc,pitchRatio,tmpModLfoToPitch,tmpVibLfoToPitch,tmpModEnvToPitch,tmpModLfoToVolume,region=this.region,input=f.fontSamples,outL=0,outR=1==f.outputMode?numSamples:-1,updateModEnv=0!=region.modEnvToPitch||0!=region.modEnvToFilterFc,updateModLFO=0<this.modLfo.delta&&(0!=region.modLfoToPitch||0!=region.modLfoToFilterFc||0!=region.modLfoToVolume),updateVibLFO=0<this.vibLfo.delta&&0!=region.vibLfoToPitch,isLooping=this.loopStart<this.loopEnd,tmpLoopStart=system.Convert.toInt32(this.loopStart),tmpLoopEnd=system.Convert.toInt32(this.loopEnd),tmpSampleEndDbl=js.Boot.__cast(region.end,Float),tmpLoopEndDbl=js.Boot.__cast(tmpLoopEnd,Float)+1,tmpSourceSamplePosition=this.sourceSamplePosition,tmpLowpass=(new alphaTab.audio.synth.synthesis.VoiceLowPass).VoiceLowPass_VoiceLowPass(this.lowPass),dynamicLowpass=0!=region.modLfoToFilterFc||0!=region.modEnvToFilterFc,dynamicPitchRatio=0!=region.modLfoToPitch||0!=region.modEnvToPitch||0!=region.vibLfoToPitch,dynamicGain=0!=region.modLfoToVolume,noteGain=0;if(tmpModEnvToFilterFc=dynamicLowpass?(tmpSampleRate=f.outSampleRate,tmpInitialFilterFc=js.Boot.__cast(region.initialFilterFc,Float),tmpModLfoToFilterFc=js.Boot.__cast(region.modLfoToFilterFc,Float),js.Boot.__cast(region.modEnvToFilterFc,Float)):tmpModLfoToFilterFc=tmpInitialFilterFc=tmpSampleRate=0,tmpModEnvToPitch=dynamicPitchRatio?(pitchRatio=0,tmpModLfoToPitch=js.Boot.__cast(region.modLfoToPitch,Float),tmpVibLfoToPitch=js.Boot.__cast(region.vibLfoToPitch,Float),js.Boot.__cast(region.modEnvToPitch,Float)):(pitchRatio=alphaTab.audio.synth.util.SynthHelper.timecents2Secs_Double(this.pitchInputTimecents)*this.pitchOutputFactor,tmpVibLfoToPitch=tmpModLfoToPitch=0),dynamicGain){tmpModLfoToVolume=.1*js.Boot.__cast(region.modLfoToVolume,Float)}else noteGain=alphaTab.audio.synth.util.SynthHelper.decibelsToGain(this.noteGainDb),tmpModLfoToVolume=0;for(;0<numSamples;){var gainMono,gainLeft,gainRight,blockSamples=64<numSamples?64:numSamples;if(numSamples-=blockSamples,dynamicLowpass){var fres=tmpInitialFilterFc+this.modLfo.level*tmpModLfoToFilterFc+this.modEnv.level*tmpModEnvToFilterFc;tmpLowpass.active=fres<=13500,tmpLowpass.active&&tmpLowpass.setup(alphaTab.audio.synth.util.SynthHelper.cents2Hertz(fres)/tmpSampleRate)}switch(dynamicPitchRatio&&(pitchRatio=alphaTab.audio.synth.util.SynthHelper.timecents2Secs_Double(this.pitchInputTimecents+(this.modLfo.level*tmpModLfoToPitch+this.vibLfo.level*tmpVibLfoToPitch+this.modEnv.level*tmpModEnvToPitch))*this.pitchOutputFactor),dynamicGain&&(noteGain=alphaTab.audio.synth.util.SynthHelper.decibelsToGain(this.noteGainDb+this.modLfo.level*tmpModLfoToVolume)),gainMono=noteGain*this.ampEnv.level,isMuted?gainMono=0:gainMono*=this.mixVolume,this.ampEnv.process(blockSamples,f.outSampleRate),updateModEnv&&this.modEnv.process(blockSamples,f.outSampleRate),updateModLFO&&this.modLfo.process(blockSamples),updateVibLFO&&this.vibLfo.process(blockSamples),f.outputMode){case 0:for(gainLeft=gainMono*this.panFactorLeft,gainRight=gainMono*this.panFactorRight;0<blockSamples--&&tmpSourceSamplePosition<tmpSampleEndDbl;){var pos=system.Convert.toInt32_Double(tmpSourceSamplePosition),nextPos=tmpLoopEnd<=pos&&isLooping?tmpLoopStart:pos+1,alpha=js.Boot.__cast(tmpSourceSamplePosition-pos,Float),val=input[pos]*(1-alpha)+input[nextPos]*alpha;tmpLowpass.active&&(val=tmpLowpass.process(val)),outputBuffer[offset+outL]=outputBuffer[offset+outL]+val*gainLeft,outputBuffer[offset+ ++outL]=outputBuffer[offset+outL]+val*gainRight,++outL,tmpLoopEndDbl<=(tmpSourceSamplePosition+=pitchRatio)&&isLooping&&(tmpSourceSamplePosition-=tmpLoopEnd-tmpLoopStart+1)}break;case 1:for(gainLeft=gainMono*this.panFactorLeft,gainRight=gainMono*this.panFactorRight;0<blockSamples--&&tmpSourceSamplePosition<tmpSampleEndDbl;){var pos1=system.Convert.toInt32_Double(tmpSourceSamplePosition),nextPos1=tmpLoopEnd<=pos1&&isLooping?tmpLoopStart:pos1+1,alpha1=js.Boot.__cast(tmpSourceSamplePosition-pos1,Float),val1=input[pos1]*(1-alpha1)+input[nextPos1]*alpha1;tmpLowpass.active&&(val1=tmpLowpass.process(val1)),outputBuffer[offset+outL]=outputBuffer[offset+outL]+val1*gainLeft,++outL,outputBuffer[offset+outR]=outputBuffer[offset+outR]+val1*gainRight,++outR,tmpLoopEndDbl<=(tmpSourceSamplePosition+=pitchRatio)&&isLooping&&(tmpSourceSamplePosition-=tmpLoopEnd-tmpLoopStart+1)}break;case 2:for(;0<blockSamples--&&tmpSourceSamplePosition<tmpSampleEndDbl;){var pos2=system.Convert.toInt32_Double(tmpSourceSamplePosition),nextPos2=tmpLoopEnd<=pos2&&isLooping?tmpLoopStart:pos2+1,alpha2=js.Boot.__cast(tmpSourceSamplePosition-pos2,Float),val2=input[pos2]*(1-alpha2)+input[nextPos2]*alpha2;tmpLowpass.active&&(val2=tmpLowpass.process(val2)),outputBuffer[offset+outL]=val2*gainMono,++outL,tmpLoopEndDbl<=(tmpSourceSamplePosition+=pitchRatio)&&isLooping&&(tmpSourceSamplePosition-=tmpLoopEnd-tmpLoopStart+1)}}if(tmpSampleEndDbl<=tmpSourceSamplePosition||7==this.ampEnv.segment)return void this.kill()}this.sourceSamplePosition=tmpSourceSamplePosition,(tmpLowpass.active||dynamicLowpass)&&(this.lowPass=tmpLowpass)},kill:function(){this.playingPreset=-1},__class__:alphaTab.audio.synth.synthesis.Voice},alphaTab.audio.synth.synthesis.VoiceEnvelope=function(){this.level=0,this.slope=0,this.samplesUntilNextSegment=0,this.segment=0,this.midiVelocity=0,this.parameters=null,this.segmentIsExponential=!1,this.isAmpEnv=!1},alphaTab.audio.synth.synthesis.VoiceEnvelope.__name__=["alphaTab","audio","synth","synthesis","VoiceEnvelope"],alphaTab.audio.synth.synthesis.VoiceEnvelope.prototype={nextSegment:function(activeSegment,outSampleRate){for(;;)switch(activeSegment){case 0:if(this.samplesUntilNextSegment=system.Convert.toInt32_Single(this.parameters.delay*outSampleRate),0<this.samplesUntilNextSegment)return this.segment=1,this.segmentIsExponential=!1,this.level=0,void(this.slope=0);activeSegment=1;break;case 1:if(this.samplesUntilNextSegment=system.Convert.toInt32_Single(this.parameters.attack*outSampleRate),0<this.samplesUntilNextSegment){if(!this.isAmpEnv){this.samplesUntilNextSegment=system.Convert.toInt32_Single(this.parameters.attack*((145-this.midiVelocity)/144)*outSampleRate)}this.segment=2,this.segmentIsExponential=!1,this.level=0;return void(this.slope=1/this.samplesUntilNextSegment)}activeSegment=2;break;case 2:if(this.samplesUntilNextSegment=system.Convert.toInt32_Single(this.parameters.hold*outSampleRate),0<this.samplesUntilNextSegment)return this.segment=3,this.segmentIsExponential=!1,this.level=1,void(this.slope=0);activeSegment=3;break;case 3:if(this.samplesUntilNextSegment=system.Convert.toInt32_Single(this.parameters.decay*outSampleRate),0<this.samplesUntilNextSegment){if(this.segment=4,this.level=1,this.isAmpEnv){var mysterySlope=js.Boot.__cast(-9.226/this.samplesUntilNextSegment,Float),this3=mysterySlope;this.slope=js.Boot.__cast(Math.exp(this3),Float),this.segmentIsExponential=!0;if(0<this.parameters.sustain){var this5=this.parameters.sustain;this.samplesUntilNextSegment=system.Convert.toInt32_Double(Math.log(this5)/mysterySlope)}}else{this.slope=js.Boot.__cast(-1/this.samplesUntilNextSegment,Float);this.samplesUntilNextSegment=system.Convert.toInt32_Single(this.parameters.decay*(1-this.parameters.sustain)*outSampleRate),this.segmentIsExponential=!1}return}activeSegment=4;break;case 4:return this.segment=5,this.level=this.parameters.sustain,this.slope=0,this.samplesUntilNextSegment=2147483647,void(this.segmentIsExponential=!1);case 5:if(this.segment=6,this.samplesUntilNextSegment=system.Convert.toInt32_Single((this.parameters.release<=0?.01:this.parameters.release)*outSampleRate),this.isAmpEnv){var this7=js.Boot.__cast(-9.226/this.samplesUntilNextSegment,Float);this.slope=js.Boot.__cast(Math.exp(this7),Float),this.segmentIsExponential=!0}else this.slope=-this.level/this.samplesUntilNextSegment,this.segmentIsExponential=!1;return;default:return this.segment=7,this.segmentIsExponential=!1,this.level=this.slope=0,void(this.samplesUntilNextSegment=134217727)}},setup:function(newParameters,midiNoteNumber,midiVelocity,isAmpEnv,outSampleRate){if(this.parameters=(new alphaTab.audio.synth.synthesis.Envelope).Envelope_Envelope(newParameters),0<this.parameters.keynumToHold){this.parameters.hold=this.parameters.hold+this.parameters.keynumToHold*(60-midiNoteNumber);var tmp=this.parameters.hold<-1e4?0:alphaTab.audio.synth.util.SynthHelper.timecents2Secs_Single(this.parameters.hold);this.parameters.hold=tmp}if(0<this.parameters.keynumToDecay){this.parameters.decay=this.parameters.decay+this.parameters.keynumToDecay*(60-midiNoteNumber);var tmp1=this.parameters.decay<-1e4?0:alphaTab.audio.synth.util.SynthHelper.timecents2Secs_Single(this.parameters.decay);this.parameters.decay=tmp1}this.midiVelocity=system.Convert.toInt16(midiVelocity),this.isAmpEnv=isAmpEnv,this.nextSegment(0,outSampleRate)},process:function(numSamples,outSampleRate){if(0<this.slope)if(this.segmentIsExponential){var this1=this.slope,this2=numSamples;this.level=this.level*js.Boot.__cast(Math.pow(this1,this2),Float)}else this.level=this.level+this.slope*numSamples;(this.samplesUntilNextSegment=this.samplesUntilNextSegment-numSamples)<=0&&this.nextSegment(this.segment,outSampleRate)},__class__:alphaTab.audio.synth.synthesis.VoiceEnvelope},alphaTab.audio.synth.synthesis._VoiceEnvelopeSegment={},alphaTab.audio.synth.synthesis._VoiceEnvelopeSegment.VoiceEnvelopeSegment_Impl_={},alphaTab.audio.synth.synthesis._VoiceEnvelopeSegment.VoiceEnvelopeSegment_Impl_.__name__=["alphaTab","audio","synth","synthesis","_VoiceEnvelopeSegment","VoiceEnvelopeSegment_Impl_"],alphaTab.audio.synth.synthesis._VoiceEnvelopeSegment.VoiceEnvelopeSegment_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.audio.synth.synthesis._VoiceEnvelopeSegment.VoiceEnvelopeSegment_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.audio.synth.synthesis._VoiceEnvelopeSegment.VoiceEnvelopeSegment_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.audio.synth.synthesis._VoiceEnvelopeSegment.VoiceEnvelopeSegment_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.audio.synth.synthesis._VoiceEnvelopeSegment.VoiceEnvelopeSegment_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.audio.synth.synthesis._VoiceEnvelopeSegment.VoiceEnvelopeSegment_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.audio.synth.synthesis._VoiceEnvelopeSegment.VoiceEnvelopeSegment_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth.synthesis._VoiceEnvelopeSegment.VoiceEnvelopeSegment_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.audio.synth.synthesis._VoiceEnvelopeSegment.VoiceEnvelopeSegment_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth.synthesis._VoiceEnvelopeSegment.VoiceEnvelopeSegment_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.audio.synth.synthesis._VoiceEnvelopeSegment.VoiceEnvelopeSegment_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth.synthesis._VoiceEnvelopeSegment.VoiceEnvelopeSegment_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.audio.synth.synthesis._VoiceEnvelopeSegment.VoiceEnvelopeSegment_Impl_.toString=function(this1){switch(this1){case 0:return"None";case 1:return"Delay";case 2:return"Attack";case 3:return"Hold";case 4:return"Decay";case 5:return"Sustain";case 6:return"Release";case 7:return"Done"}return""},alphaTab.audio.synth.synthesis._VoiceEnvelopeSegment.VoiceEnvelopeSegment_Impl_.fromString=function(str){switch(str.toLowerCase()){case"attack":return 2;case"decay":return 4;case"delay":return 1;case"done":return 7;case"hold":return 3;case"none":return 0;case"release":return 6;case"sustain":return 5}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.audio.synth.synthesis.VoiceLfo=function(){this.samplesUntil=0,this.level=0,this.delta=0},alphaTab.audio.synth.synthesis.VoiceLfo.__name__=["alphaTab","audio","synth","synthesis","VoiceLfo"],alphaTab.audio.synth.synthesis.VoiceLfo.prototype={setup:function(delay,freqCents,outSampleRate){this.samplesUntil=system.Convert.toInt32_Single(delay*outSampleRate);var this2=freqCents;this.delta=4*alphaTab.audio.synth.util.SynthHelper.cents2Hertz(this2)/outSampleRate,this.level=0},process:function(blockSamples){if(this.samplesUntil>blockSamples)this.samplesUntil=this.samplesUntil-blockSamples;else{this.level=this.level+this.delta*blockSamples;if(1<this.level){this.delta=-this.delta;this.level=2-this.level}else this.level<-1&&(this.delta=-this.delta,this.level=-2-this.level)}},__class__:alphaTab.audio.synth.synthesis.VoiceLfo},alphaTab.audio.synth.synthesis.VoiceLowPass=function(){this.qInv=0,this.a0=0,this.a1=0,this.b1=0,this.b2=0,this.z1=0,this.z2=0,this.active=!1},alphaTab.audio.synth.synthesis.VoiceLowPass.__name__=["alphaTab","audio","synth","synthesis","VoiceLowPass"],alphaTab.audio.synth.synthesis.VoiceLowPass.prototype={VoiceLowPass:function(){return this.qInv=0,this.a0=0,this.a1=0,this.b1=0,this.b2=0,this.z1=0,this.z2=0,this.active=!1,this},VoiceLowPass_VoiceLowPass:function(other){return this.qInv=0,this.a0=0,this.a1=0,this.b1=0,this.b2=0,this.z1=0,this.z2=0,this.active=!1,this.qInv=other.qInv,this.a0=other.a0,this.a1=other.a1,this.b1=other.b1,this.b2=other.b2,this.z1=other.z1,this.z2=other.z2,this.active=other.active,this},setup:function(fc){var this1=3.14159265358979*fc,k=Math.tan(this1),KK=k*k,norm=1/(1+k*this.qInv+KK);this.a0=KK*norm,this.a1=2*this.a0,this.b1=2*(KK-1)*norm,this.b2=(1-k*this.qInv+KK)*norm},process:function(input){var output=input*this.a0+this.z1,this2=input*this.a1+this.z2-this.b1*output;this.z1=this2;var this3=input*this.a0-this.b2*output;return this.z2=this3,js.Boot.__cast(output,Float)},__class__:alphaTab.audio.synth.synthesis.VoiceLowPass},alphaTab.audio.synth.util={},alphaTab.audio.synth.util.SynthConstants=function(){},alphaTab.audio.synth.util.SynthConstants.__name__=["alphaTab","audio","synth","util","SynthConstants"],alphaTab.audio.synth.util.SynthHelper=function(){},alphaTab.audio.synth.util.SynthHelper.__name__=["alphaTab","audio","synth","util","SynthHelper"],alphaTab.audio.synth.util.SynthHelper.timecents2Secs_Single=function(timecents){var this2=timecents/1200;return js.Boot.__cast(Math.pow(2,this2),Float)},alphaTab.audio.synth.util.SynthHelper.timecents2Secs_Double=function(timecents){return Math.pow(2,timecents/1200)},alphaTab.audio.synth.util.SynthHelper.decibelsToGain=function(db){if(-100<db){var this2=.05*db;return js.Boot.__cast(Math.pow(10,this2),Float)}return 0},alphaTab.audio.synth.util.SynthHelper.gainToDecibels=function(gain){if(gain<=1e-5)return-100;var this2=gain;return js.Boot.__cast(Math.log(this2)/Math.log(10)*20,Float)},alphaTab.audio.synth.util.SynthHelper.cents2Hertz=function(cents){var this3=cents/1200;return 8.176*js.Boot.__cast(Math.pow(2,this3),Float)},alphaTab.audio.synth.util.SynthHelper.clampB=function(value,min,max){return value<=min?min:max<=value?max:value},alphaTab.audio.synth.util.SynthHelper.clampD=function(value,min,max){return value<=min?min:max<=value?max:value},alphaTab.audio.synth.util.SynthHelper.clampF=function(value,min,max){return value<=min?min:max<=value?max:value},alphaTab.collections={},alphaTab.collections._FastDictionary={},alphaTab.collections._FastDictionary.FastDictionary_Impl_=$hx_exports.alphaTab.collections._FastDictionary.FastDictionary_Impl_={},alphaTab.collections._FastDictionary.FastDictionary_Impl_.__name__=["alphaTab","collections","_FastDictionary","FastDictionary_Impl_"],alphaTab.collections._FastDictionary.FastDictionary_Impl_._new=function(){return{}},alphaTab.collections._FastDictionary.FastDictionary_Impl_.get=function(this1,index){return this1[index]},alphaTab.collections._FastDictionary.FastDictionary_Impl_.set=function(this1,index,value){return this1[index]=value},alphaTab.collections._FastDictionary.FastDictionary_Impl_.get_count=function(this1){return Object.keys(this1).length},alphaTab.collections._FastDictionary.FastDictionary_Impl_.getEnumerator=function(this1){return Object.keys(this1)},alphaTab.collections._FastDictionary.FastDictionary_Impl_.remove=function(this1,key){delete this1[key]},alphaTab.collections._FastDictionary.FastDictionary_Impl_.containsKey=function(this1,key){return this1.hasOwnProperty(key)},alphaTab.collections._FastList={},alphaTab.collections._FastList.FastList_Impl_=$hx_exports.alphaTab.collections._FastList.FastList_Impl_={},alphaTab.collections._FastList.FastList_Impl_.__name__=["alphaTab","collections","_FastList","FastList_Impl_"],alphaTab.collections._FastList.FastList_Impl_._new=function(){return[]},alphaTab.collections._FastList.FastList_Impl_.get_count=function(this1){return this1.length},alphaTab.collections._FastList.FastList_Impl_.get=function(this1,index){return this1[index]},alphaTab.collections._FastList.FastList_Impl_.set=function(this1,index,value){return this1[index]=value},alphaTab.collections._FastList.FastList_Impl_.add=function(this1,item){this1.push(item)},alphaTab.collections._FastList.FastList_Impl_.sort=function(this1,comparison){this1.sort(function(a,b){return comparison(a,b)})},alphaTab.collections._FastList.FastList_Impl_.clone=function(this1){return this1.slice(0)},alphaTab.collections._FastList.FastList_Impl_.removeAt=function(this1,index){-1!=index&&this1.splice(index,1)},alphaTab.collections._FastList.FastList_Impl_.toArray=function(this1){return this1},alphaTab.collections._FastList.FastList_Impl_.getEnumerator=function(this1){return this1},alphaTab.collections._FastList.FastList_Impl_.indexOf=function(this1,item){return this1.indexOf(item)},alphaTab.collections._FastList.FastList_Impl_.reverse=function(this1){this1.reverse()},alphaTab.collections._FastList.FastList_Impl_.toEnumerable=function(this1){return new system.collections.generic.IterableEnumerable(this1)},alphaTab.collections._FastList.FastList_Impl_.insertAt=function(this1,insertPos,item){this1.splice(insertPos,0,item)},alphaTab.collections._StringBuilder={},alphaTab.collections._StringBuilder.StringBuilder_Impl_={},alphaTab.collections._StringBuilder.StringBuilder_Impl_.__name__=["alphaTab","collections","_StringBuilder","StringBuilder_Impl_"],alphaTab.collections._StringBuilder.StringBuilder_Impl_._new=function(){return""},alphaTab.collections._StringBuilder.StringBuilder_Impl_.append=function(this1,s){Std.string(s)},alphaTab.collections._StringBuilder.StringBuilder_Impl_.appendChar=function(this1,i){String.fromCharCode(i)},alphaTab.collections._StringBuilder.StringBuilder_Impl_.appendLine=function(this1,s){null==s&&(s="")},alphaTab.collections._StringBuilder.StringBuilder_Impl_.toString=function(this1){return this1},alphaTab.exporter={},alphaTab.exporter.AlphaTexExporter=$hx_exports.alphaTab.exporter.AlphaTexExporter=function(){this._builder=null;this._builder=""},alphaTab.exporter.AlphaTexExporter.__name__=["alphaTab","exporter","AlphaTexExporter"],alphaTab.exporter.AlphaTexExporter.prototype={export:function(track){this.score(track)},score:function(track){this.metaData(track),this.bars(track)},toTex:function(){return this._builder},metaData:function(track){var score=track.score;this.stringMetaData("title",score.title),this.stringMetaData("subtitle",score.subTitle),this.stringMetaData("artist",score.artist),this.stringMetaData("album",score.album),this.stringMetaData("words",score.words),this.stringMetaData("music",score.music),this.stringMetaData("copyright",score.copyright),this._builder+=Std.string("\\tempo "),this._builder+=Std.string(score.tempo),this._builder=this._builder+"\r\n";var staff=track.staves[0];0<staff.capo&&(this._builder+=Std.string("\\capo "),this._builder+=Std.string(staff.capo),this._builder=this._builder+"\r\n"),this._builder+=Std.string("\\tuning");for(var i=0;i<staff.tuning.length;){this._builder+=Std.string(" ");var s=alphaTab.model.Tuning.getTextForTuning(staff.tuning[i],!0);this._builder+=Std.string(s),++i}this._builder+=Std.string("\\instrument "),this._builder+=Std.string(track.playbackInfo.program),this._builder=this._builder+"\r\n",this._builder+=Std.string("."),this._builder=this._builder+"\r\n"},stringMetaData:function(key,value){if(null!=value&&0!=StringTools.trim(value).length){this._builder+=Std.string("\\"),this._builder+=Std.string(key),this._builder+=Std.string(' "');var s=StringTools.replace(value,'"','\\"');this._builder+=Std.string(s),this._builder+=Std.string('"'),this._builder=this._builder+"\r\n"}},bars:function(track){for(var i=0;i<1;){for(var j=0;j<track.staves[i].bars.length;)0<i&&(this._builder+=Std.string(" |"),this._builder=this._builder+"\r\n"),this.bar(track.staves[i].bars[j]),++j;++i}},bar:function(bar){this.barMeta(bar),this.voice(bar.voices[0])},voice:function(voice){for(var i=0;i<voice.beats.length;)this.beat(voice.beats[i]),++i},beat:function(beat){if(beat.get_isRest())this._builder+=Std.string("r");else{1<beat.notes.length&&(this._builder+=Std.string("("));for(var i=0;i<beat.notes.length;)this.note(beat.notes[i]),++i;1<beat.notes.length&&(this._builder+=Std.string(")"))}this._builder+=Std.string("."),this._builder+=Std.string(beat.duration),this._builder+=Std.string(" "),this.beatEffects(beat)},note:function(note){note.isDead?this._builder+=Std.string("x"):note.isTieDestination?this._builder+=Std.string("-"):this._builder+=Std.string(note.fret),this._builder+=Std.string("."),this._builder+=Std.string(note.beat.voice.bar.staff.tuning.length-note.string+1),this._builder+=Std.string(" "),this.noteEffects(note)},noteEffects:function(note){var hasEffectOpen=!1;if(note.get_hasBend()){hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("be (");for(var i=0;i<note.bendPoints.length;)this._builder+=Std.string(note.bendPoints[i].offset),this._builder+=Std.string(" "),this._builder+=Std.string(note.bendPoints[i].value),this._builder+=Std.string(" "),++i;this._builder+=Std.string(")")}switch(note.harmonicType){case 1:hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("nh ");break;case 2:hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("ah ");break;case 3:hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("ph ");break;case 4:hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("th ");break;case 5:hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("sh ")}if(note.get_isTrill()){hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("tr ");var s=note.get_trillFret();switch(this._builder+=Std.string(s),this._builder+=Std.string(" "),note.trillSpeed){case 16:this._builder+=Std.string("16 ");break;case 32:this._builder+=Std.string("32 ");break;case 64:this._builder+=Std.string("64 ")}}switch(0!=note.vibrato&&(hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("v ")),2==note.slideOutType&&(hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("sl ")),1==note.slideOutType&&(hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("ss ")),note.isHammerPullOrigin&&(hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("h ")),note.isGhost&&(hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("g ")),1==note.accentuated?(hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("ac ")):2==note.accentuated&&(hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("hac ")),note.isPalmMute&&(hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("pm ")),note.isStaccato&&(hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("st ")),note.isLetRing&&(hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("lr ")),note.leftHandFinger){case 0:hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("1 ");break;case 1:hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("2 ");break;case 2:hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("3 ");break;case 3:hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("4 ");break;case 4:hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("5 ")}switch(note.rightHandFinger){case 0:hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("1 ");break;case 1:hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("2 ");break;case 2:hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("3 ");break;case 3:hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("4 ");break;case 4:hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("5 ")}this.effectClose(hasEffectOpen)},effectOpen:function(hasBeatEffectOpen){return hasBeatEffectOpen||(this._builder+=Std.string("{")),!0},effectClose:function(hasBeatEffectOpen){hasBeatEffectOpen&&(this._builder+=Std.string("}"))},beatEffects:function(beat){var hasEffectOpen=!1;switch(beat.fadeIn&&(hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("f ")),beat.graceType){case 1:this._builder+=Std.string("gr ob ");break;case 2:this._builder+=Std.string("gr ");break;case 3:this._builder+=Std.string("gr b ")}if(0!=beat.vibrato&&(hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("v ")),beat.slap&&(hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("s ")),beat.pop&&(hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("p ")),2==beat.dots?(hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("dd ")):1==beat.dots&&(hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("d ")),1==beat.pickStroke?(hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("su ")):2==beat.pickStroke&&(hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("sd ")),beat.get_hasTuplet()){var tupletValue=0;3==beat.tupletDenominator&&2==beat.tupletNumerator?tupletValue=3:5==beat.tupletDenominator&&4==beat.tupletNumerator?tupletValue=5:6==beat.tupletDenominator&&4==beat.tupletNumerator?tupletValue=6:7==beat.tupletDenominator&&4==beat.tupletNumerator?tupletValue=7:9==beat.tupletDenominator&&8==beat.tupletNumerator?tupletValue=9:10==beat.tupletDenominator&&8==beat.tupletNumerator?tupletValue=10:11==beat.tupletDenominator&&8==beat.tupletNumerator?tupletValue=11:12==beat.tupletDenominator&&8==beat.tupletNumerator&&(tupletValue=12),0!=tupletValue&&(hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("tu "),this._builder+=Std.string(tupletValue),this._builder+=Std.string(" "))}if(beat.get_hasWhammyBar()){hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("tbe (");for(var i=0;i<beat.whammyBarPoints.length;)this._builder+=Std.string(beat.whammyBarPoints[i].offset),this._builder+=Std.string(" "),this._builder+=Std.string(beat.whammyBarPoints[i].value),this._builder+=Std.string(" "),++i;this._builder+=Std.string(")")}beat.get_isTremolo()&&(hasEffectOpen=this.effectOpen(hasEffectOpen),this._builder+=Std.string("tp "),8==beat.tremoloSpeed?this._builder+=Std.string("8 "):16==beat.tremoloSpeed?this._builder+=Std.string("16 "):32==beat.tremoloSpeed?this._builder+=Std.string("32 "):this._builder+=Std.string("8 ")),this.effectClose(hasEffectOpen)},barMeta:function(bar){var masterBar=bar.get_masterBar();if(0<masterBar.index){var previousMasterBar=masterBar.previousMasterBar,previousBar=bar.previousBar;if(previousMasterBar.timeSignatureDenominator==masterBar.timeSignatureDenominator&&previousMasterBar.timeSignatureNumerator==masterBar.timeSignatureNumerator||(this._builder+=Std.string("\\ts "),this._builder+=Std.string(masterBar.timeSignatureNumerator),this._builder+=Std.string(" "),this._builder+=Std.string(masterBar.timeSignatureDenominator),this._builder=this._builder+"\r\n"),previousMasterBar.keySignature!=masterBar.keySignature){switch(this._builder+=Std.string("\\ks "),masterBar.keySignature){case-7:this._builder+=Std.string("cb");break;case-6:this._builder+=Std.string("gb");break;case-5:this._builder+=Std.string("db");break;case-4:this._builder+=Std.string("ab");break;case-3:this._builder+=Std.string("eb");break;case-2:this._builder+=Std.string("bb");break;case-1:this._builder+=Std.string("f");break;case 0:this._builder+=Std.string("c");break;case 1:this._builder+=Std.string("g");break;case 2:this._builder+=Std.string("d");break;case 3:this._builder+=Std.string("a");break;case 4:this._builder+=Std.string("e");break;case 5:this._builder+=Std.string("b");break;case 6:this._builder+=Std.string("f#");break;case 7:this._builder+=Std.string("c#")}this._builder=this._builder+"\r\n"}if(bar.clef!=previousBar.clef){switch(this._builder+=Std.string("\\clef "),bar.clef){case 0:this._builder+=Std.string("n");break;case 1:this._builder+=Std.string("c3");break;case 2:this._builder+=Std.string("c4");break;case 3:this._builder+=Std.string("f4");break;case 4:this._builder+=Std.string("g2")}this._builder=this._builder+"\r\n"}null!=masterBar.tempoAutomation&&(this._builder+=Std.string("\\tempo "),this._builder+=Std.string(masterBar.tempoAutomation.value),this._builder=this._builder+"\r\n")}masterBar.isRepeatStart&&(this._builder+=Std.string("\\ro "),this._builder=this._builder+"\r\n"),masterBar.get_isRepeatEnd()&&(this._builder+=Std.string("\\rc "),this._builder+=Std.string(masterBar.repeatCount+1),this._builder=this._builder+"\r\n")},__class__:alphaTab.exporter.AlphaTexExporter},alphaTab.importer={},alphaTab.importer.AlphaTexException=function(){alphaTab.AlphaTabException.call(this),this.position=0,this.nonTerm=null,this.expected=0,this.symbol=0,this.symbolData=null},alphaTab.importer.AlphaTexException.__name__=["alphaTab","importer","AlphaTexException"],alphaTab.importer.AlphaTexException.symbolError=function(position,nonTerm,expected,symbol,symbolData){var message;message=null==symbolData?"MalFormed AlphaTex: @"+Std.string(position)+": Error on block "+nonTerm+", expected a "+alphaTab.importer._AlphaTexSymbols.AlphaTexSymbols_Impl_.toString(expected)+" found a "+alphaTab.importer._AlphaTexSymbols.AlphaTexSymbols_Impl_.toString(symbol):"MalFormed AlphaTex: @"+Std.string(position)+": Error on block "+nonTerm+", invalid value: "+symbolData;var exception=(new alphaTab.importer.AlphaTexException).AlphaTexException(message);return exception.position=position,exception.nonTerm=nonTerm,exception.expected=expected,exception.symbol=symbol,exception.symbolData=symbolData,exception},alphaTab.importer.AlphaTexException.errorMessage=function(position,message){message="MalFormed AlphaTex: @"+Std.string(position)+": "+message;var exception=(new alphaTab.importer.AlphaTexException).AlphaTexException(message);return exception.position=position,exception},alphaTab.importer.AlphaTexException.__super__=alphaTab.AlphaTabException,alphaTab.importer.AlphaTexException.prototype=$extend(alphaTab.AlphaTabException.prototype,{AlphaTexException:function(message){return this.AlphaTabException(message),this.position=0,this.nonTerm=null,this.expected=0,this.symbol=0,this.symbolData=null,this},__class__:alphaTab.importer.AlphaTexException}),alphaTab.importer.ScoreImporter=$hx_exports.alphaTab.importer.ScoreImporter=function(){this.Data=null,this.Settings=null},alphaTab.importer.ScoreImporter.__name__=["alphaTab","importer","ScoreImporter"],alphaTab.importer.ScoreImporter.buildImporters=function(){return[new alphaTab.importer.Gp3To5Importer,new alphaTab.importer.GpxImporter,new alphaTab.importer.Gp7Importer,new alphaTab.importer.AlphaTexImporter,new alphaTab.importer.MusicXmlImporter]},alphaTab.importer.ScoreImporter.prototype={init:function(data,settings){this.Data=data,this.Settings=settings},get_name:function(){throw new js._Boot.HaxeError("abstract")},readScore:function(){throw new js._Boot.HaxeError("abstract")},__class__:alphaTab.importer.ScoreImporter},alphaTab.importer.AlphaTexImporter=function(){alphaTab.importer.ScoreImporter.call(this),this._trackChannel=0,this._score=null,this._currentTrack=null,this._currentStaff=null,this._ch=0,this._curChPos=0,this._sy=0,this._syData=null,this._allowNegatives=!1,this._allowTuning=!1,this._currentDuration=-4,this._currentDynamics=0,this._currentTuplet=0,this._lyrics=null,this._trackChannel=0},alphaTab.importer.AlphaTexImporter.__name__=["alphaTab","importer","AlphaTexImporter"],alphaTab.importer.AlphaTexImporter.isLetter=function(code){return!alphaTab.importer.AlphaTexImporter.isTerminal(code)&&(33<=code&&code<=47||58<=code&&code<=126||128<code)},alphaTab.importer.AlphaTexImporter.isTerminal=function(ch){return 46==ch||123==ch||125==ch||91==ch||93==ch||40==ch||41==ch||124==ch||39==ch||34==ch||92==ch},alphaTab.importer.AlphaTexImporter.__super__=alphaTab.importer.ScoreImporter,alphaTab.importer.AlphaTexImporter.prototype=$extend(alphaTab.importer.ScoreImporter.prototype,{get_name:function(){return"AlphaTex"},readScore:function(){try{this._allowTuning=!0;if(this._lyrics={},this.createDefaultScore(),this._curChPos=0,this._currentDuration=4,this._currentDynamics=5,this._currentTuplet=1,this.nextChar(),this.newSy(),14==this._sy)throw new js._Boot.HaxeError((new alphaTab.importer.UnsupportedFormatException).UnsupportedFormatException("Unknown start sign <"));this.score(),this.consolidate(),this._score.finish(this.Settings),this._score.rebuildRepeatGroups();for(var this2=this._lyrics,track=$iterator(Object.keys(this2))();track.hasNext();){var track1=track.next();this._score.tracks[track1].applyLyrics(this._lyrics[track1])}return this._score}catch(e){throw e instanceof js._Boot.HaxeError&&(e=e.val),js.Boot.__instanceof(e,alphaTab.importer.AlphaTexException)?new js._Boot.HaxeError((new alphaTab.importer.UnsupportedFormatException).UnsupportedFormatException(e.message)):e}},consolidate:function(){for(var track=$iterator(this._score.tracks)();track.hasNext();)for(var staff=$iterator(track.next().staves)();staff.hasNext();)for(var staff1=staff.next();staff1.bars.length<this._score.masterBars.length;){var bar=this.newBar(staff1),emptyBeat=new alphaTab.model.Beat;emptyBeat.isEmpty=!0,bar.voices[0].addBeat(emptyBeat)}},error:function(nonterm,expected,symbolError){var e;throw null==symbolError&&(symbolError=!0),e=symbolError?alphaTab.importer.AlphaTexException.symbolError(this._curChPos,nonterm,expected,this._sy,null):alphaTab.importer.AlphaTexException.symbolError(this._curChPos,nonterm,expected,expected,this._syData),alphaTab.util.Logger.error(this.get_name(),e.message,null),new js._Boot.HaxeError(e)},errorMessage:function(message){var e=alphaTab.importer.AlphaTexException.errorMessage(this._curChPos,message);throw alphaTab.util.Logger.error(this.get_name(),e.message,null),new js._Boot.HaxeError(e)},createDefaultScore:function(){this._score=new alphaTab.model.Score,this._score.tempo=120,this._score.tempoLabel="",this.newTrack()},newTrack:function(){this._currentTrack=new alphaTab.model.Track(1),this._currentTrack.playbackInfo.program=25,this._currentTrack.playbackInfo.primaryChannel=this._trackChannel++,this._currentTrack.playbackInfo.secondaryChannel=this._trackChannel++,this._currentStaff=this._currentTrack.staves[0],this._currentStaff.displayTranspositionPitch=-12,this._currentStaff.tuning=alphaTab.model.Tuning.getDefaultTuningFor(6).tunings,this._score.addTrack(this._currentTrack);this._lyrics[this._currentTrack.index]=[],this._currentDynamics=5},parseClefFromString:function(str){switch(str.toLowerCase()){case"c3":case"tenor":return 1;case"alto":case"c4":return 2;case"bass":case"f4":return 3;case"n":case"neutral":return 0;case"g2":case"treble":default:return 4}},parseClefFromInt:function(i){switch(i){case 43:return 4;case 48:return 1;case 60:return 2;case 65:return 3;default:return 4}},parseTripletFeelFromString:function(str){switch(str.toLowerCase()){case"d16":case"dotted-16th":return 3;case"d8":case"dotted-8th":return 4;case"no":case"none":return 0;case"s8":case"scottish-8th":return 6;case"s16":case"scottish-16th":return 5;case"t8":case"triplet-8th":return 2;case"t16":case"triplet-16th":return 1;default:return 0}},parseTripletFeelFromInt:function(i){switch(i){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return 3;case 4:return 4;case 5:return 5;case 6:return 6;default:return 0}},parseKeySignature:function(str){switch(str.toLowerCase()){case"a":return 3;case"ab":return-4;case"b":return 5;case"bb":return-2;case"c":return 0;case"c#":return 7;case"cb":return-7;case"d":return 2;case"db":return-5;case"e":return 4;case"eb":return-3;case"f":return-1;case"f#":return 6;case"g":return 1;case"gb":return-6;default:return 0}},nextChar:function(){var b=this.Data.readByte();-1==b?this._ch=0:(this._ch=b,this._curChPos++)},newSy:function(){for(this._sy=0;;){if(0==this._ch)this._sy=1;else if(alphaTab.platform.Platform.isWhiteSpace(this._ch))this.nextChar();else if(47==this._ch)if(this.nextChar(),47==this._ch)for(;13!=this._ch&&10!=this._ch&&0!=this._ch;)this.nextChar();else if(42==this._ch)for(;0!=this._ch;)if(42==this._ch){if(this.nextChar(),47==this._ch){this.nextChar();break}}else this.nextChar();else this.error("symbol",5,!1);else if(34==this._ch||39==this._ch){var startChar=this._ch;this.nextChar();var s="";for(this._sy=5;this._ch!=startChar&&0!=this._ch;)s+=String.fromCharCode(this._ch),this.nextChar();this._syData=s,this.nextChar()}else if(45==this._ch)if(this._allowNegatives&&this.isDigit(this._ch)){var number=this.readNumber();this._sy=2,this._syData=number}else this._sy=5,this._syData=this.readName();else if(46==this._ch)this._sy=4,this.nextChar();else if(58==this._ch)this._sy=3,this.nextChar();else if(40==this._ch)this._sy=7,this.nextChar();else if(92==this._ch){this.nextChar();var name=this.readName();this._sy=12,this._syData=name}else if(41==this._ch)this._sy=8,this.nextChar();else if(123==this._ch)this._sy=9,this.nextChar();else if(125==this._ch)this._sy=10,this.nextChar();else if(124==this._ch)this._sy=11,this.nextChar();else if(42==this._ch)this._sy=13,this.nextChar();else if(60==this._ch)this._sy=14,this.nextChar();else if(this.isDigit(this._ch)){var number1=this.readNumber();this._sy=2,this._syData=number1}else if(alphaTab.importer.AlphaTexImporter.isLetter(this._ch)){var name1=this.readName(),tuning=this._allowTuning?alphaTab.model.TuningParser.parse(name1):null;null!=tuning?(this._sy=6,this._syData=tuning):(this._sy=5,this._syData=name1)}else this.error("symbol",5,!1);if(0!=this._sy)break}},isDigit:function(code){return 48<=code&&code<=57||45==code&&this._allowNegatives},readName:function(){for(var str="";str+=String.fromCharCode(this._ch),this.nextChar(),alphaTab.importer.AlphaTexImporter.isLetter(this._ch)||this.isDigit(this._ch)||35==this._ch;);return str},readNumber:function(){for(var str="";str+=String.fromCharCode(this._ch),this.nextChar(),this.isDigit(this._ch););return alphaTab.platform.Platform.parseIntMinValue(str)},score:function(){this.metaData(),this.bars()},metaData:function(){for(var anyMeta=!1,continueReading=!0;12==this._sy&&continueReading;){switch(Std.string(this._syData).toLowerCase()){case"album":this.newSy(),5==this._sy?this._score.album=Std.string(this._syData):this.error("album",5,!0),this.newSy(),anyMeta=!0;break;case"artist":this.newSy(),5==this._sy?this._score.artist=Std.string(this._syData):this.error("artist",5,!0),this.newSy(),anyMeta=!0;break;case"copyright":this.newSy(),5==this._sy?this._score.copyright=Std.string(this._syData):this.error("copyright",5,!0),this.newSy(),anyMeta=!0;break;case"music":this.newSy(),5==this._sy?this._score.music=Std.string(this._syData):this.error("music",5,!0),this.newSy(),anyMeta=!0;break;case"subtitle":this.newSy(),5==this._sy?this._score.subTitle=Std.string(this._syData):this.error("subtitle",5,!0),this.newSy(),anyMeta=!0;break;case"tempo":this.newSy(),2==this._sy?this._score.tempo=this._syData:this.error("tempo",2,!0),this.newSy(),anyMeta=!0;break;case"title":this.newSy(),5==this._sy?this._score.title=Std.string(this._syData):this.error("title",5,!0),this.newSy(),anyMeta=!0;break;case"words":this.newSy(),5==this._sy?this._score.words=Std.string(this._syData):this.error("words",5,!0),this.newSy(),anyMeta=!0;break;default:this.handleStaffMeta()?anyMeta=!0:anyMeta?this.error("metaDataTags",5,!1):continueReading=!1}}anyMeta?(4!=this._sy&&this.error("song",4,!0),this.newSy()):4==this._sy&&this.newSy()},handleStaffMeta:function(){switch(Std.string(this._syData).toLowerCase()){case"capo":return this.newSy(),2==this._sy?this._currentStaff.capo=this._syData:this.error("capo",2,!0),this.newSy(),!0;case"chord":this.newSy();var chord=new alphaTab.model.Chord;this.chordProperties(chord),5==this._sy?(chord.name=this._syData,this.newSy()):this.error("chord-name",2,!0);for(var i=0;i<this._currentStaff.tuning.length;)2==this._sy?chord.strings.push(this._syData):5==this._sy&&"x"==Std.string(this._syData).toLowerCase()&&chord.strings.push(-1),this.newSy(),++i;return this._currentStaff.addChord(chord.name.toLowerCase(),chord),!0;case"instrument":if(this.newSy(),2==this._sy){var instrument=this._syData;0<=instrument&&instrument<=128?this._currentTrack.playbackInfo.program=this._syData:this.error("instrument",2,!1)}else if(5==this._sy){var instrumentName=Std.string(this._syData).toLowerCase();this._currentTrack.playbackInfo.program=alphaTab.audio.GeneralMidi.getValue(instrumentName)}else this.error("instrument",2,!0);var tmp=alphaTab.audio.GeneralMidi.isGuitar(this._currentTrack.playbackInfo.program)?-12:0;return this._currentStaff.displayTranspositionPitch=tmp,this.newSy(),!0;case"lyrics":this.newSy();var lyrics=new alphaTab.model.Lyrics;return lyrics.startBar=0,lyrics.text="",2==this._sy&&(lyrics.startBar=this._syData,this.newSy()),5==this._sy?(lyrics.text=this._syData,this.newSy()):this.error("lyrics",5,!0),this._lyrics[this._currentTrack.index].push(lyrics),!0;case"tuning":this.newSy();var tmp1,strings=this._currentStaff.tuning.length;switch(this._sy){case 5:var text=Std.string(this._syData).toLowerCase();if("piano"==text||"none"==text||"voice"==text){var this1=new Int32Array(0);this._currentStaff.tuning=this1}else this.error("tuning",6,!0);this.newSy();break;case 6:for(var tuning=[];;){var t=this._syData;if(tuning.push(t.get_realValue()),this.newSy(),6!=this._sy)break}this._currentStaff.tuning=new Int32Array(tuning);break;default:this.error("tuning",6,!0)}if(strings!=this._currentStaff.tuning.length){var this3=this._currentStaff.chords;tmp1=0<Object.keys(this3).length}else tmp1=!1;return tmp1&&this.errorMessage("Tuning must be defined before any chord"),!0;default:return!1}},chordProperties:function(chord){if(9==this._sy){for(this.newSy();5==this._sy;){switch(Std.string(this._syData).toLowerCase()){case"barre":for(this.newSy();2==this._sy;)chord.barreFrets.push(this._syData),this.newSy();break;case"firstfret":this.newSy(),2==this._sy?chord.firstFret=this._syData:this.error("chord-firstfret",2,!0),this.newSy();break;case"showdiagram":switch(this.newSy(),this._sy){case 2:chord.showDiagram=0!=this._syData;break;case 5:chord.showDiagram="false"!=Std.string(this._syData).toLowerCase();break;default:this.error("chord-showdiagram",5,!0)}this.newSy();break;case"showfingering":switch(this.newSy(),this._sy){case 2:chord.showFingering=0!=this._syData;break;case 5:chord.showDiagram="false"!=Std.string(this._syData).toLowerCase();break;default:this.error("chord-showfingering",5,!0)}this.newSy();break;case"showname":switch(this.newSy(),this._sy){case 2:chord.showName=0!=this._syData;break;case 5:chord.showName="false"!=Std.string(this._syData).toLowerCase();break;default:this.error("chord-showname",5,!0)}this.newSy();break;default:this.error("chord-properties",5,!1)}}10!=this._sy&&this.error("chord-properties",10,!0),this.newSy()}},bars:function(){for(this.bar();1!=this._sy;)if(11==this._sy)this.newSy(),this.bar();else{if(12!=this._sy)break;this.bar()}},trackStaffMeta:function(){if(12==this._sy){var syData=Std.string(this._syData).toLowerCase();"track"==syData&&(this.newSy(),0<this._score.masterBars.length&&this.newTrack(),5==this._sy&&(this._currentTrack.name=Std.string(this._syData),this.newSy()),5==this._sy&&(this._currentTrack.shortName=Std.string(this._syData),this.newSy())),"staff"==(syData=Std.string(this._syData).toLowerCase())&&(this.newSy(),0<this._currentTrack.staves[0].bars.length&&(this._currentTrack.ensureStaveCount(this._currentTrack.staves.length+1),this._currentStaff=this._currentTrack.staves[this._currentTrack.staves.length-1],this._currentDynamics=5),this.staffProperties())}},staffProperties:function(){if(9==this._sy){this.newSy();for(var showStandardNotation=!1,showTabs=!1;5==this._sy;){switch(Std.string(this._syData).toLowerCase()){case"score":showStandardNotation=!0,this.newSy();break;case"tabs":showTabs=!0,this.newSy();break;default:this.error("staff-properties",5,!1)}}(showStandardNotation||showTabs)&&(this._currentStaff.showStandardNotation=showStandardNotation,this._currentStaff.showTablature=showTabs),10!=this._sy&&this.error("staff-properties",10,!0),this.newSy()}},bar:function(){this.trackStaffMeta();var bar=this.newBar(this._currentStaff);if(this._currentStaff.bars.length>this._score.masterBars.length){var master=new alphaTab.model.MasterBar;this._score.addMasterBar(master),0<master.index&&(master.keySignature=master.previousMasterBar.keySignature,master.keySignatureType=master.previousMasterBar.keySignatureType,master.timeSignatureDenominator=master.previousMasterBar.timeSignatureDenominator,master.timeSignatureNumerator=master.previousMasterBar.timeSignatureNumerator,master.tripletFeel=master.previousMasterBar.tripletFeel)}this.barMeta(bar);for(var voice=bar.voices[0];11!=this._sy&&1!=this._sy&&this.beat(voice););if(0==voice.beats.length){var emptyBeat=new alphaTab.model.Beat;emptyBeat.isEmpty=!0,voice.addBeat(emptyBeat)}},newBar:function(staff){var bar=new alphaTab.model.Bar;staff.addBar(bar),0<bar.index&&(bar.clef=bar.previousBar.clef);var voice=new alphaTab.model.Voice;return bar.addVoice(voice),bar},beat:function(voice){this.beatDuration();var beat=new alphaTab.model.Beat;if(voice.addBeat(beat),null!=voice.bar.get_masterBar().tempoAutomation&&1==voice.beats.length&&beat.automations.push(voice.bar.get_masterBar().tempoAutomation),7==this._sy){for(this.newSy(),this.note(beat);8!=this._sy&&1!=this._sy&&this.note(beat););8!=this._sy&&this.error("note-list",8,!0),this.newSy()}else if(5==this._sy&&"r"==Std.string(this._syData).toLowerCase())this.newSy();else if(!this.note(beat)){var index=voice.beats.length-1;return-1!=index&&voice.beats.splice(index,1),!1}4==this._sy&&(this._allowNegatives=!0,this.newSy(),this._allowNegatives=!1,2!=this._sy&&this.error("duration",2,!0),this._currentDuration=this.parseDuration(this._syData),this.newSy()),beat.duration=this._currentDuration,beat.dynamics=this._currentDynamics,1==this._currentTuplet||beat.get_hasTuplet()||this.applyTuplet(beat,this._currentTuplet);var beatRepeat=1;13==this._sy&&(this.newSy(),2!=this._sy?this.error("multiplier",2,!0):beatRepeat=this._syData,this.newSy()),this.beatEffects(beat);for(var i=0;i<beatRepeat-1;)voice.addBeat(beat.clone()),++i;return!0},beatDuration:function(){if(3==this._sy&&(this._allowNegatives=!0,this.newSy(),this._allowNegatives=!1,2!=this._sy&&this.error("duration",2,!0),this._currentDuration=this.parseDuration(this._syData),this._currentTuplet=1,this.newSy(),9==this._sy)){for(this.newSy();5==this._sy;){"tu"==Std.string(this._syData).toLowerCase()?(this.newSy(),2!=this._sy&&this.error("duration-tuplet",2,!0),this._currentTuplet=this._syData,this.newSy()):this.error("beat-duration",5,!1)}10!=this._sy&&this.error("beat-duration",10,!0),this.newSy()}},beatEffects:function(beat){if(9==this._sy){for(this.newSy();5==this._sy;)this._syData=Std.string(this._syData).toLowerCase(),this.applyBeatEffect(beat)||this.error("beat-effects",5,!1);10!=this._sy&&this.error("beat-effects",10,!0),this.newSy()}},applyBeatEffect:function(beat){var syData=Std.string(this._syData).toLowerCase();if("f"==syData)return beat.fadeIn=!0,this.newSy(),!0;if("v"==syData)return beat.vibrato=1,this.newSy(),!0;if("s"==syData)return beat.slap=!0,this.newSy(),!0;if("p"==syData)return beat.pop=!0,this.newSy(),!0;if("tt"==syData)return beat.tap=!0,this.newSy(),!0;if("dd"==syData)return beat.dots=2,this.newSy(),!0;if("d"==syData)return beat.dots=1,this.newSy(),!0;if("su"==syData)return beat.pickStroke=1,this.newSy(),!0;if("sd"==syData)return beat.pickStroke=2,this.newSy(),!0;if("tu"==syData)return this.newSy(),2!=this._sy?(this.error("tuplet",2,!0),!1):(this.applyTuplet(beat,this._syData),this.newSy(),!0);if("tb"==syData||"tbe"==syData){var exact="tbe"==syData;if(this.newSy(),7!=this._sy)return this.error("tremolobar-effect",7,!0),!1;for(this._allowNegatives=!0,this.newSy();8!=this._sy&&1!=this._sy;){var offset,value;if(exact){if(2!=this._sy)return this.error("tremolobar-effect",2,!0),!1;if(offset=this._syData,this.newSy(),2!=this._sy)return this.error("tremolobar-effect",2,!0),!1;value=this._syData}else{if(2!=this._sy)return this.error("tremolobar-effect",2,!0),!1;offset=0,value=this._syData}beat.addWhammyBarPoint(new alphaTab.model.BendPoint(offset,value)),this.newSy()}for(;60<beat.whammyBarPoints.length;)beat.removeWhammyBarPoint(beat.whammyBarPoints.length-1);if(exact){beat.whammyBarPoints.sort(function(a1,b1){return b=b1,a1.offset-b.offset;var b})}else for(var count=beat.whammyBarPoints.length,step=60/count|0,i=0;i<count;)beat.whammyBarPoints[i].offset=Math.min(60,i*step),++i;return(this._allowNegatives=!1,8!=this._sy)?(this.error("tremolobar-effect",8,!0),!1):(this.newSy(),!0)}if("ch"==syData){this.newSy();var chordName=Std.string(this._syData),chordId=chordName.toLowerCase();if(!this._currentStaff.chords.hasOwnProperty(chordId)){var chord=new alphaTab.model.Chord;chord.showDiagram=!1,chord.name=chordName,this._currentStaff.addChord(chordId,chord)}return beat.chordId=chordId,this.newSy(),!0}if("gr"==syData)return this.newSy(),"ob"==Std.string(this._syData).toLowerCase()?(beat.graceType=1,this.newSy()):"b"==Std.string(this._syData).toLowerCase()?(beat.graceType=3,this.newSy()):beat.graceType=2,!0;if("dy"==syData){switch(this.newSy(),Std.string(this._syData).toLowerCase()){case"f":beat.dynamics=5;break;case"ff":beat.dynamics=6;break;case"fff":beat.dynamics=7;break;case"mf":beat.dynamics=4;break;case"mp":beat.dynamics=3;break;case"p":beat.dynamics=2;break;case"pp":beat.dynamics=1;break;case"ppp":beat.dynamics=0}return this._currentDynamics=beat.dynamics,this.newSy(),!0}if("cre"==syData)return beat.crescendo=1,this.newSy(),!0;if("dec"==syData)return beat.crescendo=2,this.newSy(),!0;if("tp"!=syData)return!1;this.newSy();var duration=8;if(2==this._sy){switch(this._syData){case 8:duration=8;break;case 16:duration=16;break;case 32:duration=32;break;default:duration=8}this.newSy()}return beat.tremoloSpeed=duration,!0},applyTuplet:function(beat,tuplet){switch(tuplet){case 3:beat.tupletNumerator=3,beat.tupletDenominator=2;break;case 5:beat.tupletNumerator=5,beat.tupletDenominator=4;break;case 6:beat.tupletNumerator=6,beat.tupletDenominator=4;break;case 7:beat.tupletNumerator=7,beat.tupletDenominator=4;break;case 9:beat.tupletNumerator=9,beat.tupletDenominator=8;break;case 10:beat.tupletNumerator=10,beat.tupletDenominator=8;break;case 11:beat.tupletNumerator=11,beat.tupletDenominator=8;break;case 12:beat.tupletNumerator=12,beat.tupletDenominator=8;break;default:beat.tupletNumerator=1,beat.tupletDenominator=1}},note:function(beat){var isDead="x"==Std.string(this._syData),isTie="-"==Std.string(this._syData),fret=-1,octave=-1,tone=-1;switch(this._sy){case 2:fret=this._syData;break;case 5:isTie||isDead?fret=0:this.error("note-fret",2,!0);break;case 6:var tuning=this._syData;octave=tuning.octave,tone=tuning.noteValue;break;default:return!1}this.newSy();var isFretted=-1==octave&&0<this._currentStaff.tuning.length,string=-1;isFretted&&(4!=this._sy&&this.error("note",4,!0),this.newSy(),2!=this._sy&&this.error("note-string",2,!0),((string=this._syData)<1||string>this._currentStaff.tuning.length)&&this.error("note-string",2,!1),this.newSy());var note=new alphaTab.model.Note;return isFretted?(note.string=this._currentStaff.tuning.length-(string-1),note.isDead=isDead,(note.isTieDestination=isTie)||(note.fret=fret)):(note.octave=octave,note.tone=tone,note.isTieDestination=isTie),beat.addNote(note),this.noteEffects(note),!0},noteEffects:function(note){if(9==this._sy){for(this.newSy();5==this._sy;){var syData=Std.string(this._syData).toLowerCase();if("b"==(this._syData=syData)||"be"==syData){var exact="be"==this._syData;for(this.newSy(),7!=this._sy&&this.error("bend-effect",7,!0),this.newSy();8!=this._sy&&1!=this._sy;){var offset=0,value=0;value=(exact&&(2!=this._sy&&this.error("bend-effect-value",2,!0),offset=this._syData,this.newSy()),2!=this._sy&&this.error("bend-effect-value",2,!0),this._syData),note.addBendPoint(new alphaTab.model.BendPoint(offset,value)),this.newSy()}for(;60<note.bendPoints.length;){var index=note.bendPoints.length-1;-1!=index&&note.bendPoints.splice(index,1)}if(exact)note.bendPoints.sort(function(comparison){return function(a,b){return comparison[0](a,b)}}([function(a1,b1){return a1.offset-b1.offset}]));else for(var count=note.bendPoints.length,step=60/(count-1)|0,i=0;i<count;)note.bendPoints[i].offset=Math.min(60,i*step),++i;8!=this._sy&&this.error("bend-effect",8,!0),this.newSy()}else if("nh"==syData)note.harmonicType=1,this.newSy();else if("ah"==syData)note.harmonicType=2,this.newSy();else if("th"==syData)note.harmonicType=4,this.newSy();else if("ph"==syData)note.harmonicType=3,this.newSy();else if("sh"==syData)note.harmonicType=5,this.newSy();else if("tr"==syData){this.newSy(),2!=this._sy&&this.error("trill-effect",2,!0);var fret=this._syData;this.newSy();var duration=16;if(2==this._sy){switch(this._syData){case 16:duration=16;break;case 32:duration=32;break;case 64:duration=64;break;default:duration=16}this.newSy()}note.trillValue=fret+note.get_stringTuning(),note.trillSpeed=duration}else if("v"==syData)this.newSy(),note.vibrato=1;else if("sl"==syData)this.newSy(),note.slideOutType=2;else if("ss"==syData)this.newSy(),note.slideOutType=1;else if("sib"==syData)this.newSy(),note.slideInType=1;else if("sia"==syData)this.newSy(),note.slideInType=2;else if("sou"==syData)this.newSy(),note.slideOutType=3;else if("sod"==syData)this.newSy(),note.slideOutType=4;else if("psd"==syData)this.newSy(),note.slideOutType=5;else if("psu"==syData)this.newSy(),note.slideOutType=6;else if("h"==syData)this.newSy(),note.isHammerPullOrigin=!0;else if("g"==syData)this.newSy(),note.isGhost=!0;else if("ac"==syData)this.newSy(),note.accentuated=1;else if("hac"==syData)this.newSy(),note.accentuated=2;else if("pm"==syData)this.newSy(),note.isPalmMute=!0;else if("st"==syData)this.newSy(),note.isStaccato=!0;else if("lr"==syData)this.newSy(),note.isLetRing=!0;else if("x"==syData)this.newSy(),note.fret=0,note.isDead=!0;else if("-"==syData||"t"==syData)this.newSy(),note.isTieDestination=!0;else if("lf"==syData){this.newSy();var finger=0;2==this._sy&&(finger=this.toFinger(this._syData),this.newSy()),note.leftHandFinger=finger}else if("rf"==syData){this.newSy();var finger1=0;2==this._sy&&(finger1=this.toFinger(this._syData),this.newSy()),note.rightHandFinger=finger1}else this.applyBeatEffect(note.beat)||this.error(syData,5,!1)}10!=this._sy&&this.error("note-effect",10,!1),this.newSy()}},toFinger:function(syData){switch(syData){case 1:return 0;case 2:return 1;case 3:return 2;case 4:return 3;case 5:return 4}return 0},parseDuration:function(duration){switch(duration){case-4:return-4;case-2:return-2;case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;default:return 4}},barMeta:function(bar){for(var master=bar.get_masterBar();12==this._sy;){var syData=Std.string(this._syData).toLowerCase();if("ts"==syData)this.newSy(),2!=this._sy&&this.error("timesignature-numerator",2,!0),master.timeSignatureNumerator=this._syData,this.newSy(),2!=this._sy&&this.error("timesignature-denominator",2,!0),master.timeSignatureDenominator=this._syData,this.newSy();else if("ro"==syData)master.isRepeatStart=!0,this.newSy();else if("rc"==syData)this.newSy(),2!=this._sy&&this.error("repeatclose",2,!0),master.repeatCount=this._syData,this.newSy();else if("ks"==syData)this.newSy(),5!=this._sy&&this.error("keysignature",5,!0),master.keySignature=js.Boot.__cast(this.parseKeySignature(Std.string(this._syData).toLowerCase()),Int),this.newSy();else if("clef"==syData){switch(this.newSy(),this._sy){case 2:bar.clef=this.parseClefFromInt(this._syData);break;case 5:bar.clef=this.parseClefFromString(Std.string(this._syData).toLowerCase());break;case 6:var parseResult=this._syData;bar.clef=this.parseClefFromInt(parseResult.get_realValue());break;default:this.error("clef",5,!0)}this.newSy()}else if("tempo"==syData){this.newSy(),2!=this._sy&&this.error("tempo",2,!0);var tempoAutomation=new alphaTab.model.Automation;tempoAutomation.isLinear=!0,tempoAutomation.type=0,tempoAutomation.value=this._syData,master.tempoAutomation=tempoAutomation,this.newSy()}else if("section"==syData){this.newSy(),5!=this._sy&&this.error("section",5,!0);var text=this._syData;this.newSy();var marker="";5==this._sy&&(marker=text,text=this._syData,this.newSy());var section=new alphaTab.model.Section;section.marker=marker,section.text=text,master.section=section}else if("tf"==syData){switch(this._allowTuning=!1,this.newSy(),this._allowTuning=!0,this._sy){case 2:master.tripletFeel=this.parseTripletFeelFromInt(this._syData);break;case 5:master.tripletFeel=this.parseTripletFeelFromString(Std.string(this._syData).toLowerCase());break;default:this.error("triplet-feel",5,!0)}this.newSy()}else"ac"==syData?(master.isAnacrusis=!0,this.newSy()):0!=bar.index||this.handleStaffMeta()||this.error("measure-effects",5,!1)}},__class__:alphaTab.importer.AlphaTexImporter}),alphaTab.importer._AlphaTexSymbols={},alphaTab.importer._AlphaTexSymbols.AlphaTexSymbols_Impl_={},alphaTab.importer._AlphaTexSymbols.AlphaTexSymbols_Impl_.__name__=["alphaTab","importer","_AlphaTexSymbols","AlphaTexSymbols_Impl_"],alphaTab.importer._AlphaTexSymbols.AlphaTexSymbols_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.importer._AlphaTexSymbols.AlphaTexSymbols_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.importer._AlphaTexSymbols.AlphaTexSymbols_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.importer._AlphaTexSymbols.AlphaTexSymbols_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.importer._AlphaTexSymbols.AlphaTexSymbols_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.importer._AlphaTexSymbols.AlphaTexSymbols_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.importer._AlphaTexSymbols.AlphaTexSymbols_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.importer._AlphaTexSymbols.AlphaTexSymbols_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.importer._AlphaTexSymbols.AlphaTexSymbols_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.importer._AlphaTexSymbols.AlphaTexSymbols_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.importer._AlphaTexSymbols.AlphaTexSymbols_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.importer._AlphaTexSymbols.AlphaTexSymbols_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.importer._AlphaTexSymbols.AlphaTexSymbols_Impl_.toString=function(this1){switch(this1){case 0:return"No";case 1:return"Eof";case 2:return"Number";case 3:return"DoubleDot";case 4:return"Dot";case 5:return"String";case 6:return"Tuning";case 7:return"LParensis";case 8:return"RParensis";case 9:return"LBrace";case 10:return"RBrace";case 11:return"Pipe";case 12:return"MetaCommand";case 13:return"Multiply";case 14:return"LowerThan";case 15:return"Property"}return""},alphaTab.importer._AlphaTexSymbols.AlphaTexSymbols_Impl_.fromString=function(str){switch(str.toLowerCase()){case"dot":return 4;case"doubledot":return 3;case"eof":return 1;case"lbrace":return 9;case"lowerthan":return 14;case"lparensis":return 7;case"metacommand":return 12;case"multiply":return 13;case"no":return 0;case"number":return 2;case"pipe":return 11;case"property":return 15;case"rbrace":return 10;case"rparensis":return 8;case"string":return 5;case"tuning":return 6}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.importer.BinaryStylesheet=function(){this.raw=null;this.raw={}},alphaTab.importer.BinaryStylesheet.__name__=["alphaTab","importer","BinaryStylesheet"],alphaTab.importer.BinaryStylesheet.prototype={apply:function(score){for(var this1=this.raw,key=$iterator(Object.keys(this1))();key.hasNext();){var key1=key.next();"StandardNotation/hideDynamics"==key1&&(score.stylesheet.hideDynamics=this.raw[key1])}},addValue:function(key,value){this.raw[key]=value},__class__:alphaTab.importer.BinaryStylesheet},alphaTab.importer.BinaryStylesheetParser=function(){this.stylesheet=null},alphaTab.importer.BinaryStylesheetParser.__name__=["alphaTab","importer","BinaryStylesheetParser"],alphaTab.importer.BinaryStylesheetParser.prototype={parse:function(data){this.stylesheet=new alphaTab.importer.BinaryStylesheet;for(var readable=alphaTab.io.ByteBuffer.fromBuffer(data),entryCount=alphaTab.io.IOHelper.readInt32BE(readable),i=0;i<entryCount;){var key=alphaTab.importer.GpBinaryHelpers.gpReadString(readable,readable.readByte(),"utf-8");switch(js.Boot.__cast(readable.readByte(),Int)){case 0:var flag=1==readable.readByte();this.stylesheet.addValue(key,flag);break;case 1:var ivalue=alphaTab.io.IOHelper.readInt32BE(readable);this.stylesheet.addValue(key,ivalue);break;case 2:var fvalue=alphaTab.importer.GpBinaryHelpers.gpReadFloat(readable);this.stylesheet.addValue(key,fvalue);break;case 3:var s=alphaTab.importer.GpBinaryHelpers.gpReadString(readable,alphaTab.io.IOHelper.readInt16BE(readable),"utf-8");this.stylesheet.addValue(key,s);break;case 4:var x=alphaTab.io.IOHelper.readInt32BE(readable),y=alphaTab.io.IOHelper.readInt32BE(readable);this.stylesheet.addValue(key,new alphaTab.model.BendPoint(x,y));break;case 5:var width=alphaTab.io.IOHelper.readInt32BE(readable),height=alphaTab.io.IOHelper.readInt32BE(readable);this.stylesheet.addValue(key,new alphaTab.model.BendPoint(width,height));break;case 6:var rectX=alphaTab.io.IOHelper.readInt32BE(readable),rectY=alphaTab.io.IOHelper.readInt32BE(readable),rectW=alphaTab.io.IOHelper.readInt32BE(readable),rectH=alphaTab.io.IOHelper.readInt32BE(readable),tmp=this.stylesheet,_tmp=new alphaTab.rendering.utils.Bounds,this1=rectX;_tmp.x=this1;var this2=rectY;_tmp.y=this2;var this3=rectW;_tmp.w=this3;var this4=rectH;_tmp.h=this4,tmp.addValue(key,_tmp);break;case 7:var color=alphaTab.importer.GpBinaryHelpers.gpReadColor(readable,!0);this.stylesheet.addValue(key,color)}++i}},__class__:alphaTab.importer.BinaryStylesheetParser},alphaTab.importer._BinaryStylesheetParser_DataType={},alphaTab.importer._BinaryStylesheetParser_DataType.BinaryStylesheetParser_DataType_Impl_={},alphaTab.importer._BinaryStylesheetParser_DataType.BinaryStylesheetParser_DataType_Impl_.__name__=["alphaTab","importer","_BinaryStylesheetParser_DataType","BinaryStylesheetParser_DataType_Impl_"],alphaTab.importer._BinaryStylesheetParser_DataType.BinaryStylesheetParser_DataType_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.importer._BinaryStylesheetParser_DataType.BinaryStylesheetParser_DataType_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.importer._BinaryStylesheetParser_DataType.BinaryStylesheetParser_DataType_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.importer._BinaryStylesheetParser_DataType.BinaryStylesheetParser_DataType_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.importer._BinaryStylesheetParser_DataType.BinaryStylesheetParser_DataType_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.importer._BinaryStylesheetParser_DataType.BinaryStylesheetParser_DataType_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.importer._BinaryStylesheetParser_DataType.BinaryStylesheetParser_DataType_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.importer._BinaryStylesheetParser_DataType.BinaryStylesheetParser_DataType_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.importer._BinaryStylesheetParser_DataType.BinaryStylesheetParser_DataType_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.importer._BinaryStylesheetParser_DataType.BinaryStylesheetParser_DataType_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.importer._BinaryStylesheetParser_DataType.BinaryStylesheetParser_DataType_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.importer._BinaryStylesheetParser_DataType.BinaryStylesheetParser_DataType_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.importer._BinaryStylesheetParser_DataType.BinaryStylesheetParser_DataType_Impl_.toString=function(this1){switch(this1){case 0:return"Boolean";case 1:return"Integer";case 2:return"Float";case 3:return"String";case 4:return"Point";case 5:return"Size";case 6:return"Rectangle";case 7:return"Color"}return""},alphaTab.importer._BinaryStylesheetParser_DataType.BinaryStylesheetParser_DataType_Impl_.fromString=function(str){switch(str.toLowerCase()){case"boolean":return 0;case"color":return 7;case"float":return 2;case"integer":return 1;case"point":return 4;case"rectangle":return 6;case"size":return 5;case"string":return 3}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.importer.FileLoadException=$hx_exports.alphaTab.importer.FileLoadException=function(){alphaTab.AlphaTabException.call(this),this.xhr=null},alphaTab.importer.FileLoadException.__name__=["alphaTab","importer","FileLoadException"],alphaTab.importer.FileLoadException.__super__=alphaTab.AlphaTabException,alphaTab.importer.FileLoadException.prototype=$extend(alphaTab.AlphaTabException.prototype,{FileLoadException:function(message,xhr){return this.AlphaTabException(message),this.xhr=null,this.xhr=xhr,this},__class__:alphaTab.importer.FileLoadException}),alphaTab.importer.Gp3To5Importer=function(){alphaTab.importer.ScoreImporter.call(this)},alphaTab.importer.Gp3To5Importer.__name__=["alphaTab","importer","Gp3To5Importer"],alphaTab.importer.Gp3To5Importer.toStrokeValue=function(value){switch(value){case 1:case 2:return 30;case 3:return 60;case 4:return 120;case 5:return 240;case 6:return 480;default:return 0}},alphaTab.importer.Gp3To5Importer.__super__=alphaTab.importer.ScoreImporter,alphaTab.importer.Gp3To5Importer.prototype=$extend(alphaTab.importer.ScoreImporter.prototype,{get_name:function(){return"Guitar Pro 3-5"},readScore:function(){return this._encoding=this.Settings.importer.encoding,this.readVersion(),this._score=new alphaTab.model.Score,this.readScoreInformation(),this._versionNumber<500&&(this._globalTripletFeel=alphaTab.importer.GpBinaryHelpers.gpReadBool(this.Data)?2:0),400<=this._versionNumber&&this.readLyrics(),510<=this._versionNumber&&this.Data.skip(19),500<=this._versionNumber&&(this.readPageSetup(),this._score.tempoLabel=alphaTab.importer.GpBinaryHelpers.gpReadStringIntByte(this.Data,this._encoding)),this._score.tempo=alphaTab.io.IOHelper.readInt32LE(this.Data),510<=this._versionNumber&&alphaTab.importer.GpBinaryHelpers.gpReadBool(this.Data),alphaTab.io.IOHelper.readInt32LE(this.Data),400<=this._versionNumber&&this.Data.readByte(),this.readPlaybackInfos(),500<=this._versionNumber&&(this.Data.skip(38),this.Data.skip(4)),this._barCount=alphaTab.io.IOHelper.readInt32LE(this.Data),this._trackCount=alphaTab.io.IOHelper.readInt32LE(this.Data),this.readMasterBars(),this.readTracks(),this.readBars(),this._score.finish(this.Settings),null!=this._lyrics&&0<=this._lyricsTrack&&this._score.tracks[this._lyricsTrack].applyLyrics(this._lyrics),this._score},readVersion:function(){var version=alphaTab.importer.GpBinaryHelpers.gpReadStringByteLength(this.Data,30,this._encoding);if(!StringTools.startsWith(version,"FICHIER GUITAR PRO "))throw new js._Boot.HaxeError((new alphaTab.importer.UnsupportedFormatException).UnsupportedFormatException("Unsupported format"));version=HxOverrides.substr(version,"FICHIER GUITAR PRO ".length+1,null);var this1=system.Convert.toUInt16(46),dot=version.indexOf(String.fromCharCode(this1));this._versionNumber=100*alphaTab.platform.Platform.parseIntMinValue(HxOverrides.substr(version,0,dot))+alphaTab.platform.Platform.parseIntMinValue(HxOverrides.substr(version,dot+1,null)),alphaTab.util.Logger.info(this.get_name(),"Guitar Pro version "+version+" detected",null)},readScoreInformation:function(){this._score.title=alphaTab.importer.GpBinaryHelpers.gpReadStringIntUnused(this.Data,this._encoding),this._score.subTitle=alphaTab.importer.GpBinaryHelpers.gpReadStringIntUnused(this.Data,this._encoding),this._score.artist=alphaTab.importer.GpBinaryHelpers.gpReadStringIntUnused(this.Data,this._encoding),this._score.album=alphaTab.importer.GpBinaryHelpers.gpReadStringIntUnused(this.Data,this._encoding),this._score.words=alphaTab.importer.GpBinaryHelpers.gpReadStringIntUnused(this.Data,this._encoding);var tmp=500<=this._versionNumber?alphaTab.importer.GpBinaryHelpers.gpReadStringIntUnused(this.Data,this._encoding):this._score.words;this._score.music=tmp,this._score.copyright=alphaTab.importer.GpBinaryHelpers.gpReadStringIntUnused(this.Data,this._encoding),this._score.tab=alphaTab.importer.GpBinaryHelpers.gpReadStringIntUnused(this.Data,this._encoding),this._score.instructions=alphaTab.importer.GpBinaryHelpers.gpReadStringIntUnused(this.Data,this._encoding);for(var noticeLines=alphaTab.io.IOHelper.readInt32LE(this.Data),notice="",i=0;i<noticeLines;)0<i&&(notice+="\r\n"),notice+=Std.string(alphaTab.importer.GpBinaryHelpers.gpReadStringIntUnused(this.Data,this._encoding)),++i;this._score.notices=notice},readLyrics:function(){this._lyrics=[],this._lyricsTrack=alphaTab.io.IOHelper.readInt32LE(this.Data)-1;for(var i=0;i<5;){var lyrics=new alphaTab.model.Lyrics;lyrics.startBar=alphaTab.io.IOHelper.readInt32LE(this.Data)-1,lyrics.text=alphaTab.importer.GpBinaryHelpers.gpReadStringInt(this.Data,this._encoding),this._lyrics.push(lyrics),++i}},readPageSetup:function(){this.Data.skip(30);for(var i=0;i<10;)alphaTab.importer.GpBinaryHelpers.gpReadStringIntByte(this.Data,this._encoding),++i},readPlaybackInfos:function(){this._playbackInfos=[];for(var i=0;i<64;){var info=new alphaTab.model.PlaybackInformation;info.primaryChannel=i,info.secondaryChannel=i,info.program=alphaTab.io.IOHelper.readInt32LE(this.Data),info.volume=this.Data.readByte(),info.balance=this.Data.readByte(),this.Data.skip(6),this._playbackInfos.push(info),++i}},readMasterBars:function(){for(var i=0;i<this._barCount;)this.readMasterBar(),++i},readMasterBar:function(){var previousMasterBar=null;0<this._score.masterBars.length&&(previousMasterBar=this._score.masterBars[this._score.masterBars.length-1]);var newMasterBar=new alphaTab.model.MasterBar,flags=this.Data.readByte();if(0!=(1&flags)?newMasterBar.timeSignatureNumerator=this.Data.readByte():null!=previousMasterBar&&(newMasterBar.timeSignatureNumerator=previousMasterBar.timeSignatureNumerator),0!=(2&flags)?newMasterBar.timeSignatureDenominator=this.Data.readByte():null!=previousMasterBar&&(newMasterBar.timeSignatureDenominator=previousMasterBar.timeSignatureDenominator),newMasterBar.isRepeatStart=0!=(4&flags),0!=(8&flags)&&(newMasterBar.repeatCount=this.Data.readByte()+(500<=this._versionNumber?0:1)),0!=(16&flags))if(this._versionNumber<500){for(var currentMasterBar=previousMasterBar,existentAlternatives=0;!(null==currentMasterBar||currentMasterBar.get_isRepeatEnd()&&currentMasterBar!=previousMasterBar||currentMasterBar.isRepeatStart);)existentAlternatives|=currentMasterBar.alternateEndings,currentMasterBar=currentMasterBar.previousMasterBar;for(var repeatAlternative=0,repeatMask=this.Data.readByte(),i=0;i<8;){var repeating=1<<i;i<repeatMask&&0==(existentAlternatives&repeating)&&(repeatAlternative|=repeating),++i}newMasterBar.alternateEndings=system.Convert.toUInt8(repeatAlternative)}else newMasterBar.alternateEndings=system.Convert.toUInt8(this.Data.readByte());if(0!=(32&flags)){var section=new alphaTab.model.Section;section.text=alphaTab.importer.GpBinaryHelpers.gpReadStringIntByte(this.Data,this._encoding),section.marker="",alphaTab.importer.GpBinaryHelpers.gpReadColor(this.Data,!1),newMasterBar.section=section}if(0!=(64&flags)?(newMasterBar.keySignature=js.Boot.__cast(alphaTab.platform.Platform.readSignedByte(this.Data),Int),newMasterBar.keySignatureType=js.Boot.__cast(this.Data.readByte(),Int)):null!=previousMasterBar&&(newMasterBar.keySignature=previousMasterBar.keySignature,newMasterBar.keySignatureType=previousMasterBar.keySignatureType),500<=this._versionNumber&&0!=(3&flags)&&this.Data.skip(4),500<=this._versionNumber&&0==(16&flags)&&(newMasterBar.alternateEndings=system.Convert.toUInt8(this.Data.readByte())),500<=this._versionNumber){switch(this.Data.readByte()){case 1:newMasterBar.tripletFeel=2;break;case 2:newMasterBar.tripletFeel=1}this.Data.readByte()}else newMasterBar.tripletFeel=this._globalTripletFeel;newMasterBar.isDoubleBar=0!=(128&flags),this._score.addMasterBar(newMasterBar)},readTracks:function(){for(var i=0;i<this._trackCount;)this.readTrack(),++i},readTrack:function(){var newTrack=new alphaTab.model.Track(1);this._score.addTrack(newTrack);var mainStaff=newTrack.staves[0],flags=this.Data.readByte();newTrack.name=alphaTab.importer.GpBinaryHelpers.gpReadStringByteLength(this.Data,40,this._encoding),0!=(1&flags)&&(mainStaff.isPercussion=!0);for(var stringCount=alphaTab.io.IOHelper.readInt32LE(this.Data),tuning=[],i=0;i<7;){var stringTuning=alphaTab.io.IOHelper.readInt32LE(this.Data);i<stringCount&&tuning.push(stringTuning),++i}mainStaff.tuning=new Int32Array(tuning);var port=alphaTab.io.IOHelper.readInt32LE(this.Data),index=alphaTab.io.IOHelper.readInt32LE(this.Data)-1,effectChannel=alphaTab.io.IOHelper.readInt32LE(this.Data)-1;if(this.Data.skip(4),0<=index&&index<this._playbackInfos.length){var info=this._playbackInfos[index];info.port=port,info.isSolo=0!=(16&flags),info.isMute=0!=(32&flags),info.secondaryChannel=effectChannel,alphaTab.audio.GeneralMidi.isGuitar(info.program)&&(mainStaff.displayTranspositionPitch=-12),newTrack.playbackInfo=info}mainStaff.capo=alphaTab.io.IOHelper.readInt32LE(this.Data),newTrack.color=alphaTab.importer.GpBinaryHelpers.gpReadColor(this.Data,!1),500<=this._versionNumber&&(this.Data.readByte(),this.Data.readByte(),this.Data.skip(43)),510<=this._versionNumber&&(this.Data.skip(4),alphaTab.importer.GpBinaryHelpers.gpReadStringIntByte(this.Data,this._encoding),alphaTab.importer.GpBinaryHelpers.gpReadStringIntByte(this.Data,this._encoding))},readBars:function(){for(var i=0;i<this._barCount;){for(var t=0;t<this._trackCount;)this.readBar(this._score.tracks[t]),++t;++i}},readBar:function(track){var newBar=new alphaTab.model.Bar,mainStaff=track.staves[0];mainStaff.isPercussion&&(newBar.clef=0),mainStaff.addBar(newBar);var voiceCount=1;500<=this._versionNumber&&(this.Data.readByte(),voiceCount=2);for(var v=0;v<voiceCount;)this.readVoice(track,newBar),++v},readVoice:function(track,bar){var beatCount=alphaTab.io.IOHelper.readInt32LE(this.Data);if(0!=beatCount){var newVoice=new alphaTab.model.Voice;bar.addVoice(newVoice);for(var i=0;i<beatCount;)this.readBeat(track,bar,newVoice),++i}},readBeat:function(track,bar,voice){var newBeat=new alphaTab.model.Beat,flags=this.Data.readByte();if(0!=(1&flags)&&(newBeat.dots=1),0!=(64&flags)){var type=this.Data.readByte();newBeat.isEmpty=0==(2&type)}switch(voice.addBeat(newBeat),alphaTab.platform.Platform.readSignedByte(this.Data)){case-2:newBeat.duration=1;break;case-1:newBeat.duration=2;break;case 0:newBeat.duration=4;break;case 1:newBeat.duration=8;break;case 2:newBeat.duration=16;break;case 3:newBeat.duration=32;break;case 4:newBeat.duration=64;break;default:newBeat.duration=4}if(0!=(32&flags))switch(newBeat.tupletNumerator=alphaTab.io.IOHelper.readInt32LE(this.Data),newBeat.tupletNumerator){case 1:newBeat.tupletDenominator=1;break;case 3:newBeat.tupletDenominator=2;break;case 5:case 6:case 7:newBeat.tupletDenominator=4;break;case 2:case 4:case 8:break;case 9:case 10:case 11:case 12:case 13:newBeat.tupletDenominator=8;break;default:newBeat.tupletNumerator=1,newBeat.tupletDenominator=1}0!=(2&flags)&&this.readChord(newBeat),0!=(4&flags)&&(newBeat.text=alphaTab.importer.GpBinaryHelpers.gpReadStringIntUnused(this.Data,this._encoding)),0!=(8&flags)&&this.readBeatEffects(newBeat),0!=(16&flags)&&this.readMixTableChange(newBeat);for(var stringFlags=this.Data.readByte(),i=6;0<=i;)0!=(stringFlags&1<<i)&&6-i<bar.staff.tuning.length&&this.readNote(track,bar,voice,newBeat,6-i),--i;500<=this._versionNumber&&(this.Data.readByte(),0!=(8&this.Data.readByte())&&this.Data.readByte())},readChord:function(beat){var chord=new alphaTab.model.Chord,chordId=alphaTab.platform.Platform.newGuid();if(500<=this._versionNumber){this.Data.skip(17),chord.name=alphaTab.importer.GpBinaryHelpers.gpReadStringByteLength(this.Data,21,this._encoding),this.Data.skip(4),chord.firstFret=alphaTab.io.IOHelper.readInt32LE(this.Data);for(var i=0;i<7;){var fret=alphaTab.io.IOHelper.readInt32LE(this.Data);i<beat.voice.bar.staff.tuning.length&&chord.strings.push(fret),++i}var numberOfBarres=this.Data.readByte(),barreFrets=new Uint8Array(5);this.Data.read(barreFrets,0,barreFrets.length);for(var i1=0;i1<numberOfBarres;){var this2=barreFrets[i1];chord.barreFrets.push(this2),++i1}this.Data.skip(26)}else if(0!=this.Data.readByte())if(400<=this._versionNumber){this.Data.skip(16),chord.name=alphaTab.importer.GpBinaryHelpers.gpReadStringByteLength(this.Data,21,this._encoding),this.Data.skip(4),chord.firstFret=alphaTab.io.IOHelper.readInt32LE(this.Data);for(var i2=0;i2<7;){var fret1=alphaTab.io.IOHelper.readInt32LE(this.Data);i2<beat.voice.bar.staff.tuning.length&&chord.strings.push(fret1),++i2}var numberOfBarres1=this.Data.readByte(),barreFrets1=new Uint8Array(5);this.Data.read(barreFrets1,0,barreFrets1.length);for(var i3=0;i3<numberOfBarres1;){var this4=barreFrets1[i3];chord.barreFrets.push(this4),++i3}this.Data.skip(26)}else{this.Data.skip(25),chord.name=alphaTab.importer.GpBinaryHelpers.gpReadStringByteLength(this.Data,34,this._encoding),chord.firstFret=alphaTab.io.IOHelper.readInt32LE(this.Data);for(var i4=0;i4<6;){var fret2=alphaTab.io.IOHelper.readInt32LE(this.Data);i4<beat.voice.bar.staff.tuning.length&&chord.strings.push(fret2),++i4}this.Data.skip(36)}else{var strings=406<=this._versionNumber?7:6;if(chord.name=alphaTab.importer.GpBinaryHelpers.gpReadStringIntByte(this.Data,this._encoding),chord.firstFret=alphaTab.io.IOHelper.readInt32LE(this.Data),0<chord.firstFret)for(var i5=0;i5<strings;){var fret3=alphaTab.io.IOHelper.readInt32LE(this.Data);i5<beat.voice.bar.staff.tuning.length&&chord.strings.push(fret3),++i5}}var s=chord.name;null!=s&&0!=s.length&&(beat.chordId=chordId,beat.voice.bar.staff.addChord(beat.chordId,chord))},readBeatEffects:function(beat){var strokeUp,strokeDown,flags=this.Data.readByte(),flags2=0;if(400<=this._versionNumber&&(flags2=this.Data.readByte()),beat.fadeIn=0!=(16&flags),(this._versionNumber<400&&0!=(1&flags)||0!=(2&flags))&&(beat.vibrato=1),beat.hasRasgueado=0!=(1&flags2),0!=(32&flags)&&400<=this._versionNumber)switch(alphaTab.platform.Platform.readSignedByte(this.Data)){case 1:beat.tap=!0;break;case 2:beat.slap=!0;break;case 3:beat.pop=!0}else if(0!=(32&flags)){switch(alphaTab.platform.Platform.readSignedByte(this.Data)){case 1:beat.tap=!0;break;case 2:beat.slap=!0;break;case 3:beat.pop=!0}this.Data.skip(4)}0!=(4&flags2)&&this.readTremoloBarEffect(beat),0!=(64&flags)&&(this._versionNumber<500?(strokeDown=this.Data.readByte(),strokeUp=this.Data.readByte()):(strokeUp=this.Data.readByte(),strokeDown=this.Data.readByte()),0<strokeUp?(beat.brushType=1,beat.brushDuration=alphaTab.importer.Gp3To5Importer.toStrokeValue(strokeUp)):0<strokeDown&&(beat.brushType=2,beat.brushDuration=alphaTab.importer.Gp3To5Importer.toStrokeValue(strokeDown)));if(0!=(2&flags2))switch(alphaTab.platform.Platform.readSignedByte(this.Data)){case 0:beat.pickStroke=0;break;case 1:beat.pickStroke=1;break;case 2:beat.pickStroke=2}},readTremoloBarEffect:function(beat){this.Data.readByte(),alphaTab.io.IOHelper.readInt32LE(this.Data);var pointCount=alphaTab.io.IOHelper.readInt32LE(this.Data);if(0<pointCount)for(var i=0;i<pointCount;){var point=new alphaTab.model.BendPoint(0,0);point.offset=alphaTab.io.IOHelper.readInt32LE(this.Data),point.value=alphaTab.io.IOHelper.readInt32LE(this.Data)/25|0,alphaTab.importer.GpBinaryHelpers.gpReadBool(this.Data),beat.addWhammyBarPoint(point),++i}},readMixTableChange:function(beat){var tableChange=new alphaTab.importer.MixTableChange;tableChange.instrument=alphaTab.platform.Platform.readSignedByte(this.Data),500<=this._versionNumber&&this.Data.skip(16),tableChange.volume=alphaTab.platform.Platform.readSignedByte(this.Data),tableChange.balance=alphaTab.platform.Platform.readSignedByte(this.Data);var chorus=alphaTab.platform.Platform.readSignedByte(this.Data),reverb=alphaTab.platform.Platform.readSignedByte(this.Data),phaser=alphaTab.platform.Platform.readSignedByte(this.Data),tremolo=alphaTab.platform.Platform.readSignedByte(this.Data);if(500<=this._versionNumber&&(tableChange.tempoName=alphaTab.importer.GpBinaryHelpers.gpReadStringIntByte(this.Data,this._encoding)),tableChange.tempo=alphaTab.io.IOHelper.readInt32LE(this.Data),0<=tableChange.volume&&this.Data.readByte(),0<=tableChange.balance&&this.Data.readByte(),0<=chorus&&this.Data.readByte(),0<=reverb&&this.Data.readByte(),0<=phaser&&this.Data.readByte(),0<=tremolo&&this.Data.readByte(),0<=tableChange.tempo&&(tableChange.duration=alphaTab.platform.Platform.readSignedByte(this.Data),510<=this._versionNumber&&this.Data.readByte()),400<=this._versionNumber&&this.Data.readByte(),500<=this._versionNumber&&this.Data.readByte(),510<=this._versionNumber&&(alphaTab.importer.GpBinaryHelpers.gpReadStringIntByte(this.Data,this._encoding),alphaTab.importer.GpBinaryHelpers.gpReadStringIntByte(this.Data,this._encoding)),0<=tableChange.volume){var volumeAutomation=new alphaTab.model.Automation;volumeAutomation.isLinear=!0,volumeAutomation.type=1;var this1=tableChange.volume;volumeAutomation.value=this1,beat.automations.push(volumeAutomation)}if(0<=tableChange.balance){var balanceAutomation=new alphaTab.model.Automation;balanceAutomation.isLinear=!0,balanceAutomation.type=3;var this2=tableChange.balance;balanceAutomation.value=this2,beat.automations.push(balanceAutomation)}if(0<=tableChange.instrument){var instrumentAutomation=new alphaTab.model.Automation;instrumentAutomation.isLinear=!0,instrumentAutomation.type=2;var this3=tableChange.instrument;instrumentAutomation.value=this3,beat.automations.push(instrumentAutomation)}if(0<=tableChange.tempo){var tempoAutomation=new alphaTab.model.Automation;tempoAutomation.isLinear=!0,tempoAutomation.type=0;var this4=tableChange.tempo;tempoAutomation.value=this4,beat.automations.push(tempoAutomation),beat.voice.bar.get_masterBar().tempoAutomation=tempoAutomation}},readNote:function(track,bar,voice,beat,stringIndex){var newNote=new alphaTab.model.Note;newNote.string=bar.staff.tuning.length-stringIndex;var flags=this.Data.readByte();if(0!=(2&flags)?newNote.accentuated=2:0!=(64&flags)&&(newNote.accentuated=1),newNote.isGhost=0!=(4&flags),0!=(32&flags)){var noteType=this.Data.readByte();3==noteType?newNote.isDead=!0:2==noteType&&(newNote.isTieDestination=!0)}if(0!=(1&flags)&&this._versionNumber<500&&(this.Data.readByte(),this.Data.readByte()),0!=(16&flags)){var dynamicNumber=alphaTab.platform.Platform.readSignedByte(this.Data);newNote.dynamics=this.toDynamicValue(dynamicNumber),beat.dynamics=newNote.dynamics}if(0!=(32&flags)&&(newNote.fret=alphaTab.platform.Platform.readSignedByte(this.Data)),0!=(128&flags)&&(newNote.leftHandFinger=js.Boot.__cast(alphaTab.platform.Platform.readSignedByte(this.Data),Int),newNote.rightHandFinger=js.Boot.__cast(alphaTab.platform.Platform.readSignedByte(this.Data),Int),newNote.isFingering=!0),500<=this._versionNumber){0!=(1&flags)&&(newNote.durationPercent=alphaTab.importer.GpBinaryHelpers.gpReadDouble(this.Data));var flags2=this.Data.readByte();newNote.accidentalMode=0!=(2&flags2)?1:0}beat.addNote(newNote),0!=(8&flags)&&this.readNoteEffects(track,voice,beat,newNote)},toDynamicValue:function(value){switch(value){case 1:return 0;case 2:return 1;case 3:return 2;case 4:return 3;case 5:return 4;case 6:return 5;case 7:return 6;case 8:return 7;default:return 5}},readNoteEffects:function(track,voice,beat,note){var flags=this.Data.readByte(),flags2=0;400<=this._versionNumber&&(flags2=this.Data.readByte()),0!=(1&flags)&&this.readBend(note),0!=(16&flags)&&this.readGrace(voice,note),0!=(4&flags2)&&this.readTremoloPicking(beat),0!=(8&flags2)?this.readSlide(note):this._versionNumber<400&&0!=(4&flags)&&(note.slideOutType=1),0!=(16&flags2)?this.readArtificialHarmonic(note):this._versionNumber<400&&(0!=(4&flags)&&(note.harmonicType=1,note.harmonicValue=this.deltaFretToHarmonicValue(note.fret)),0!=(8&flags)&&(note.harmonicType=2)),0!=(32&flags2)&&this.readTrill(note),note.isLetRing=0!=(8&flags),note.isHammerPullOrigin=0!=(2&flags),0!=(64&flags2)&&(note.vibrato=1),note.isPalmMute=0!=(2&flags2),note.isStaccato=0!=(1&flags2)},readBend:function(note){this.Data.readByte(),alphaTab.io.IOHelper.readInt32LE(this.Data);var pointCount=alphaTab.io.IOHelper.readInt32LE(this.Data);if(0<pointCount)for(var i=0;i<pointCount;){var point=new alphaTab.model.BendPoint(0,0);point.offset=alphaTab.io.IOHelper.readInt32LE(this.Data),point.value=alphaTab.io.IOHelper.readInt32LE(this.Data)/25|0,alphaTab.importer.GpBinaryHelpers.gpReadBool(this.Data),note.addBendPoint(point),++i}},readGrace:function(voice,note){var graceBeat=new alphaTab.model.Beat,graceNote=new alphaTab.model.Note;switch(graceNote.string=note.string,graceNote.fret=alphaTab.platform.Platform.readSignedByte(this.Data),graceBeat.duration=32,graceBeat.dynamics=this.toDynamicValue(alphaTab.platform.Platform.readSignedByte(this.Data)),alphaTab.platform.Platform.readSignedByte(this.Data)){case 0:break;case 1:graceNote.slideOutType=2,graceNote.slideTarget=note;break;case 2:break;case 3:graceNote.isHammerPullOrigin=!0}if(graceNote.dynamics=graceBeat.dynamics,this.Data.skip(1),this._versionNumber<500)graceBeat.graceType=2;else{var flags=this.Data.readByte();graceNote.isDead=0!=(1&flags),graceBeat.graceType=0!=(2&flags)?1:2}voice.addGraceBeat(graceBeat),graceBeat.addNote(graceNote)},readTremoloPicking:function(beat){switch(this.Data.readByte()){case 1:beat.tremoloSpeed=8;break;case 2:beat.tremoloSpeed=16;break;case 3:beat.tremoloSpeed=32}},readSlide:function(note){if(500<=this._versionNumber){var type=alphaTab.platform.Platform.readSignedByte(this.Data);0!=(1&type)?note.slideOutType=1:0!=(2&type)?note.slideOutType=2:0!=(4&type)?note.slideOutType=4:0!=(8&type)&&(note.slideOutType=3),0!=(16&type)?note.slideInType=1:0!=(32&type)&&(note.slideInType=2)}else{switch(alphaTab.platform.Platform.readSignedByte(this.Data)){case-2:note.slideInType=2;break;case-1:note.slideInType=1;break;case 1:note.slideOutType=1;break;case 2:note.slideOutType=2;break;case 3:note.slideOutType=4;break;case 4:note.slideOutType=3}}},readArtificialHarmonic:function(note){var type=this.Data.readByte();if(500<=this._versionNumber)switch(type){case 1:note.harmonicType=1,note.harmonicValue=this.deltaFretToHarmonicValue(note.fret);break;case 2:this.Data.readByte(),this.Data.readByte(),this.Data.readByte();note.harmonicType=2;break;case 3:note.harmonicType=4,note.harmonicValue=this.deltaFretToHarmonicValue(this.Data.readByte());break;case 4:note.harmonicType=3,note.harmonicValue=12;break;case 5:note.harmonicType=5,note.harmonicValue=12}else if(400<=this._versionNumber)switch(type){case 1:note.harmonicType=1;break;case 3:note.harmonicType=4;break;case 4:note.harmonicType=3;break;case 5:note.harmonicType=5;break;case 15:case 17:case 22:note.harmonicType=2}},deltaFretToHarmonicValue:function(deltaFret){switch(deltaFret){case 2:return 2.4;case 3:return 3.2;case 8:return 8.2;case 10:return 9.6;case 14:case 15:return 14.7;case 21:case 22:return 21.7;case 4:case 5:case 7:case 9:case 12:case 16:case 17:case 19:case 24:return deltaFret;default:return 12}},readTrill:function(note){switch(note.trillValue=this.Data.readByte()+note.get_stringTuning(),this.Data.readByte()){case 1:note.trillSpeed=16;break;case 2:note.trillSpeed=32;break;case 3:note.trillSpeed=64}},__class__:alphaTab.importer.Gp3To5Importer}),alphaTab.importer.Gp7Importer=function(){alphaTab.importer.ScoreImporter.call(this)},alphaTab.importer.Gp7Importer.__name__=["alphaTab","importer","Gp7Importer"],alphaTab.importer.Gp7Importer.__super__=alphaTab.importer.ScoreImporter,alphaTab.importer.Gp7Importer.prototype=$extend(alphaTab.importer.ScoreImporter.prototype,{get_name:function(){return"Guitar Pro 7"},readScore:function(){alphaTab.util.Logger.info(this.get_name(),"Loading ZIP entries",null);var fileSystem=new alphaTab.io.ZipFile;fileSystem.fileFilter=function(s){return!(!StringTools.endsWith(s,"score.gpif")&&!StringTools.endsWith(s,"BinaryStylesheet"))||StringTools.endsWith(s,"PartConfiguration")};try{fileSystem.load(this.Data)}catch(e){throw e instanceof js._Boot.HaxeError&&(e=e.val),js.Boot.__instanceof(e,system.Exception)?new js._Boot.HaxeError((new alphaTab.importer.UnsupportedFormatException).UnsupportedFormatException(e.message)):e}alphaTab.util.Logger.info(this.get_name(),"Zip entries loaded",null);for(var xml=null,binaryStylesheet=null,partConfiguration=null,entry=$iterator(fileSystem.entries)();entry.hasNext();){var entry1=entry.next();switch(entry1.fileName){case"BinaryStylesheet":binaryStylesheet=entry1.data;break;case"PartConfiguration":partConfiguration=entry1.data;break;case"score.gpif":xml=alphaTab.platform.Platform.toString(entry1.data,this.Settings.importer.encoding)}}fileSystem.entries=null,fileSystem=null,alphaTab.util.Logger.info(this.get_name(),"Start Parsing score.gpif",null);var gpifParser=new alphaTab.importer.GpifParser;gpifParser.parseXml(xml,this.Settings),alphaTab.util.Logger.info(this.get_name(),"score.gpif parsed",null);var score=gpifParser.score;if(null!=binaryStylesheet){alphaTab.util.Logger.info(this.get_name(),"Start Parsing BinaryStylesheet",null);var stylesheetParser=new alphaTab.importer.BinaryStylesheetParser;stylesheetParser.parse(binaryStylesheet),null!=stylesheetParser.stylesheet&&stylesheetParser.stylesheet.apply(score),alphaTab.util.Logger.info(this.get_name(),"BinaryStylesheet parsed",null)}if(null!=partConfiguration){alphaTab.util.Logger.info(this.get_name(),"Start Parsing Part Configuration",null);var partConfigurationParser=new alphaTab.importer.PartConfigurationParser;partConfigurationParser.parse(partConfiguration),null!=partConfigurationParser.configuration&&partConfigurationParser.configuration.apply(score),alphaTab.util.Logger.info(this.get_name(),"Part Configuration parsed",null)}return score},__class__:alphaTab.importer.Gp7Importer}),alphaTab.importer.GpBinaryHelpers=function(){},alphaTab.importer.GpBinaryHelpers.__name__=["alphaTab","importer","GpBinaryHelpers"],alphaTab.importer.GpBinaryHelpers.gpReadDouble=function(data){var bytes=new Uint8Array(8);return data.read(bytes,0,bytes.length),alphaTab.platform.Platform.toDouble(bytes)},alphaTab.importer.GpBinaryHelpers.gpReadFloat=function(data){var bytes=new Uint8Array(4);return bytes[3]=system.Convert.toUInt8(data.readByte()),bytes[2]=system.Convert.toUInt8(data.readByte()),bytes[2]=system.Convert.toUInt8(data.readByte()),bytes[1]=system.Convert.toUInt8(data.readByte()),alphaTab.platform.Platform.toFloat(bytes)},alphaTab.importer.GpBinaryHelpers.gpReadColor=function(data,readAlpha){null==readAlpha&&(readAlpha=!1);var r=system.Convert.toUInt8(data.readByte()),g=system.Convert.toUInt8(data.readByte()),b=system.Convert.toUInt8(data.readByte()),a=255;return readAlpha?a=system.Convert.toUInt8(data.readByte()):data.skip(1),new alphaTab.platform.model.Color(r,g,b,a)},alphaTab.importer.GpBinaryHelpers.gpReadBool=function(data){return 0!=data.readByte()},alphaTab.importer.GpBinaryHelpers.gpReadStringIntUnused=function(data,encoding){return data.skip(4),alphaTab.importer.GpBinaryHelpers.gpReadString(data,data.readByte(),encoding)},alphaTab.importer.GpBinaryHelpers.gpReadStringInt=function(data,encoding){return alphaTab.importer.GpBinaryHelpers.gpReadString(data,alphaTab.io.IOHelper.readInt32LE(data),encoding)},alphaTab.importer.GpBinaryHelpers.gpReadStringIntByte=function(data,encoding){var length=alphaTab.io.IOHelper.readInt32LE(data)-1;return data.readByte(),alphaTab.importer.GpBinaryHelpers.gpReadString(data,length,encoding)},alphaTab.importer.GpBinaryHelpers.gpReadString=function(data,length,encoding){var b=new Uint8Array(length);return data.read(b,0,b.length),alphaTab.platform.Platform.toString(b,encoding)},alphaTab.importer.GpBinaryHelpers.gpReadStringByteLength=function(data,length,encoding){var stringLength=data.readByte(),s=alphaTab.importer.GpBinaryHelpers.gpReadString(data,stringLength,encoding);return stringLength<length&&data.skip(length-stringLength),s},alphaTab.importer.GpifParser=function(){this.score=null,this._masterTrackAutomations=null,this._tracksMapping=null,this._tracksById=null,this._masterBars=null,this._barsOfMasterBar=null,this._barsById=null,this._voicesOfBar=null,this._voiceById=null,this._beatsOfVoice=null,this._rhythmOfBeat=null,this._beatById=null,this._rhythmById=null,this._noteById=null,this._notesOfBeat=null,this._tappedNotes=null,this._lyricsByTrack=null,this._hasAnacrusis=!1},alphaTab.importer.GpifParser.__name__=["alphaTab","importer","GpifParser"],alphaTab.importer.GpifParser.prototype={parseXml:function(xml,settings){this._masterTrackAutomations={};var this2=new Array(0);this._tracksMapping=this2;this._tracksById={};this._masterBars=[];this._barsOfMasterBar=[];this._voicesOfBar={};this._barsById={};this._voiceById={};this._beatsOfVoice={};this._beatById={};this._rhythmOfBeat={};this._rhythmById={};this._notesOfBeat={};this._noteById={};this._tappedNotes={};var dom;this._lyricsByTrack={};try{dom=new alphaTab.xml.XmlDocument(xml)}catch(__e){throw __e instanceof js._Boot.HaxeError&&(__e=__e.val),js.Boot.__instanceof(__e,system.Exception)?new js._Boot.HaxeError((new alphaTab.importer.UnsupportedFormatException).UnsupportedFormatException("Unsupported format")):__e}this.parseDom(dom),this.buildModel(),this.score.finish(settings);var this17=this._lyricsByTrack;if(0<Object.keys(this17).length)for(var this18=this._lyricsByTrack,trackId=$iterator(Object.keys(this18))();trackId.hasNext();){var trackId1=trackId.next();this._tracksById[trackId1].applyLyrics(this._lyricsByTrack[trackId1])}},parseDom:function(dom){var root=dom.documentElement;if(null!=root){if("GPIF"!=root.localName)throw new js._Boot.HaxeError((new alphaTab.importer.UnsupportedFormatException).UnsupportedFormatException("Unsupported format"));this.score=new alphaTab.model.Score;for(var n=$iterator(root.childNodes)();n.hasNext();){var n1=n.next();if(1==n1.nodeType)switch(n1.localName){case"Bars":this.parseBars(n1);break;case"Beats":this.parseBeats(n1);break;case"MasterBars":this.parseMasterBarsNode(n1);break;case"MasterTrack":this.parseMasterTrackNode(n1);break;case"Notes":this.parseNotes(n1);break;case"Rhythms":this.parseRhythms(n1);break;case"Score":this.parseScoreNode(n1);break;case"Tracks":this.parseTracksNode(n1);break;case"Voices":this.parseVoices(n1)}}}},parseScoreNode:function(element){for(var c=$iterator(element.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"Album":this.score.album=c1.firstChild.get_innerText();break;case"Artist":this.score.artist=c1.firstChild.get_innerText();break;case"Copyright":this.score.copyright=c1.firstChild.get_innerText();break;case"Instructions":this.score.instructions=c1.firstChild.get_innerText();break;case"Music":this.score.music=c1.firstChild.get_innerText();break;case"Notices":this.score.notices=c1.firstChild.get_innerText();break;case"SubTitle":this.score.subTitle=c1.firstChild.get_innerText();break;case"Tabber":this.score.tab=c1.firstChild.get_innerText();break;case"Title":this.score.title=c1.firstChild.get_innerText();break;case"Words":this.score.words=c1.firstChild.get_innerText();break;case"WordsAndMusic":if(null!=c1.firstChild&&""!=c1.firstChild.get_innerText()){var tmp,tmp1,wordsAndMusic=c1.firstChild.get_innerText();if(null!=wordsAndMusic&&0!=wordsAndMusic.length){var s=this.score.words;tmp=null==s||0==s.length}else tmp=!1;if(tmp&&(this.score.words=wordsAndMusic),null!=wordsAndMusic&&0!=wordsAndMusic.length){var s1=this.score.music;tmp1=null==s1||0==s1.length}else tmp1=!1;tmp1&&(this.score.music=wordsAndMusic)}}}},parseMasterTrackNode:function(node){for(var c=$iterator(node.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"Anacrusis":this._hasAnacrusis=!0;break;case"Automations":this.parseAutomations(c1,this._masterTrackAutomations);break;case"Tracks":var a=c1.get_innerText(),this2=system.Convert.toUInt16(32);this._tracksMapping=system._CsString.CsString_Impl_.split_CharArray(a,[this2])}}},parseAutomations:function(node,automations){for(var c=$iterator(node.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)"Automation"==c1.localName&&this.parseAutomation(c1,automations)}},parseAutomation:function(node,automations){for(var type=null,isLinear=!1,barId=null,ratioPosition=0,value=0,reference=0,text=null,c=$iterator(node.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"Bar":barId=c1.get_innerText();break;case"Linear":isLinear="true"==c1.get_innerText().toLowerCase();break;case"Position":var s=c1.get_innerText();ratioPosition=parseFloat(s);break;case"Text":text=c1.get_innerText();break;case"Type":type=c1.get_innerText();break;case"Value":var a=c1.get_innerText(),this2=system.Convert.toUInt16(32),parts=system._CsString.CsString_Impl_.split_CharArray(a,[this2]);value=parseFloat(parts[0]),reference=alphaTab.platform.Platform.parseIntMinValue(parts[1])}}if(null!=type){var automation=null;if("Tempo"==type&&(automation=alphaTab.model.Automation.buildTempoAutomation(isLinear,ratioPosition,value,reference)),null!=automation&&(automation.text=text),null!=barId){if(!automations.hasOwnProperty(barId)){automations[barId]=[]}automations[barId].push(automation)}}},parseTracksNode:function(node){for(var c=$iterator(node.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)"Track"==c1.localName&&this.parseTrack(c1)}},parseTrack:function(node){var track=new alphaTab.model.Track(1);track.staves[0].showStandardNotation=!0;for(var trackId=node.getAttribute("id"),c=$iterator(node.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"Color":var a=c1.get_innerText(),this2=system.Convert.toUInt16(32),parts=system._CsString.CsString_Impl_.split_CharArray(a,[this2]);if(3<=parts.length){var r=alphaTab.platform.Platform.parseIntMinValue(parts[0]),g=alphaTab.platform.Platform.parseIntMinValue(parts[1]),b=alphaTab.platform.Platform.parseIntMinValue(parts[2]);track.color=new alphaTab.platform.model.Color(system.Convert.toUInt8(r),system.Convert.toUInt8(g),system.Convert.toUInt8(b),255)}break;case"Instrument":var instrumentName=c1.getAttribute("ref");(StringTools.endsWith(instrumentName,"-gs")||StringTools.endsWith(instrumentName,"GrandStaff"))&&(track.ensureStaveCount(2),track.staves[1].showStandardNotation=!0);break;case"InstrumentSet":this.parseInstrumentSet(track,c1);break;case"Lyrics":this.parseLyrics(trackId,c1);break;case"GeneralMidi":case"MIDISettings":case"MidiConnection":this.parseGeneralMidi(track,c1);break;case"Name":track.name=c1.get_innerText();break;case"PartSounding":this.parsePartSounding(track,c1);break;case"PlaybackState":var state=c1.get_innerText();track.playbackInfo.isSolo="Solo"==state,track.playbackInfo.isMute="Mute"==state;break;case"Properties":this.parseTrackProperties(track,c1);break;case"ShortName":track.shortName=c1.get_innerText();break;case"Sounds":this.parseSounds(track,c1);break;case"Staves":this.parseStaves(track,c1);break;case"Transpose":this.parseTranspose(track,c1)}}this._tracksById[trackId]=track},parseInstrumentSet:function(track,node){for(var c=$iterator(node.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)if("Type"==c1.localName){if("drumKit"==c1.get_innerText())for(var staff=$iterator(track.staves)();staff.hasNext();){staff.next().isPercussion=!0}if("drumKit"==c1.get_innerText())for(var staff2=$iterator(track.staves)();staff2.hasNext();){staff2.next().isPercussion=!0}}}},parseStaves:function(track,node){for(var staffIndex=0,c=$iterator(node.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)if("Staff"==c1.localName){track.ensureStaveCount(staffIndex+1);var staff=track.staves[staffIndex];this.parseStaff(staff,c1),++staffIndex}}},parseStaff:function(staff,node){for(var c=$iterator(node.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)"Properties"==c1.localName&&this.parseStaffProperties(staff,c1)}},parseStaffProperties:function(staff,node){for(var c=$iterator(node.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)"Property"==c1.localName&&this.parseStaffProperty(staff,c1)}},parseStaffProperty:function(staff,node){switch(node.getAttribute("name")){case"CapoFret":var capo=alphaTab.platform.Platform.parseIntMinValue(node.findChildElement("Fret").get_innerText());staff.capo=capo;break;case"ChordCollection":case"DiagramCollection":this.parseDiagramCollection_Staff_XmlNode(staff,node);break;case"Tuning":for(var a=node.findChildElement("Pitches").get_innerText(),this2=system.Convert.toUInt16(32),tuningParts=system._CsString.CsString_Impl_.split_CharArray(a,[this2]),tuning=new Int32Array(tuningParts.length),i=0;i<tuning.length;)tuning[tuning.length-1-i]=alphaTab.platform.Platform.parseIntMinValue(tuningParts[i]),++i;staff.tuning=tuning,staff.isPercussion||(staff.showTablature=!0)}},parseLyrics:function(trackId,node){for(var tracks=[],c=$iterator(node.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)"Line"==c1.localName&&tracks.push(this.parseLyricsLine(c1))}this._lyricsByTrack[trackId]=tracks},parseLyricsLine:function(node){for(var lyrics=new alphaTab.model.Lyrics,c=$iterator(node.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"Offset":lyrics.startBar=alphaTab.platform.Platform.parseIntMinValue(c1.get_innerText());break;case"Text":lyrics.text=c1.get_innerText()}}return lyrics},parseDiagramCollection_Track_XmlNode:function(track,node){for(var c=$iterator(node.findChildElement("Items").childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)"Item"==c1.localName&&this.parseDiagramItem_Track_XmlNode(track,c1)}},parseDiagramCollection_Staff_XmlNode:function(staff,node){for(var c=$iterator(node.findChildElement("Items").childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)"Item"==c1.localName&&this.parseDiagramItem_Staff_XmlNode(staff,c1)}},parseDiagramItem_Track_XmlNode:function(track,node){for(var chord=new alphaTab.model.Chord,chordId=node.getAttribute("id"),staff=$iterator(track.staves)();staff.hasNext();){staff.next().addChord(chordId,chord)}this.parseDiagramItem_Chord_XmlNode(chord,node)},parseDiagramItem_Staff_XmlNode:function(staff,node){var chord=new alphaTab.model.Chord,chordId=node.getAttribute("id");staff.addChord(chordId,chord),this.parseDiagramItem_Chord_XmlNode(chord,node)},parseDiagramItem_Chord_XmlNode:function(chord,node){chord.name=node.getAttribute("name");var diagram=node.findChildElement("Diagram"),stringCount=alphaTab.platform.Platform.parseIntMinValue(diagram.getAttribute("stringCount")),baseFret=alphaTab.platform.Platform.parseIntMinValue(diagram.getAttribute("baseFret"));chord.firstFret=baseFret+1;for(var i=0;i<stringCount;)chord.strings.push(-1),++i;for(var c=$iterator(diagram.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"Fingering":for(var existingFingers={},p=$iterator(c1.childNodes)();p.hasNext();){var p1=p.next();if(1==p1.nodeType)if("Position"==p1.localName){var finger=-2,fret=baseFret+alphaTab.platform.Platform.parseIntMinValue(p1.getAttribute("fret"));switch(p1.getAttribute("finger")){case"Index":finger=1;break;case"Middle":finger=2;break;case"None":break;case"Pinky":finger=4;break;case"Rank":finger=3;break;case"Thumb":finger=0}-2!=finger&&(existingFingers.hasOwnProperty(finger)?chord.barreFrets.push(fret):existingFingers[finger]=!0)}}break;case"Fret":var guitarString=alphaTab.platform.Platform.parseIntMinValue(c1.getAttribute("string"));chord.strings[stringCount-guitarString-1]=baseFret+alphaTab.platform.Platform.parseIntMinValue(c1.getAttribute("fret"));break;case"Property":switch(c1.getAttribute("name")){case"ShowDiagram":chord.showDiagram="true"==c1.getAttribute("value");break;case"ShowFingering":chord.showFingering="true"==c1.getAttribute("value");break;case"ShowName":chord.showName="true"==c1.getAttribute("value")}}}},parseTrackProperties:function(track,node){for(var c=$iterator(node.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)"Property"==c1.localName&&this.parseTrackProperty(track,c1)}},parseTrackProperty:function(track,node){switch(node.getAttribute("name")){case"CapoFret":for(var capo=alphaTab.platform.Platform.parseIntMinValue(node.findChildElement("Fret").get_innerText()),staff=$iterator(track.staves)();staff.hasNext();){staff.next().capo=capo}break;case"ChordCollection":case"DiagramCollection":this.parseDiagramCollection_Track_XmlNode(track,node);break;case"Tuning":for(var a=node.findChildElement("Pitches").get_innerText(),this2=system.Convert.toUInt16(32),tuningParts=system._CsString.CsString_Impl_.split_CharArray(a,[this2]),tuning=new Int32Array(tuningParts.length),i=0;i<tuning.length;)tuning[tuning.length-1-i]=alphaTab.platform.Platform.parseIntMinValue(tuningParts[i]),++i;for(var staff2=$iterator(track.staves)();staff2.hasNext();){var staff3=staff2.next();staff3.tuning=tuning,staff3.showStandardNotation=!0,staff3.showTablature=!0}}},parseGeneralMidi:function(track,node){for(var c=$iterator(node.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"Port":var tmp=c1.get_innerText();track.playbackInfo.port=alphaTab.platform.Platform.parseIntMinValue(tmp);break;case"PrimaryChannel":var tmp1=c1.get_innerText();track.playbackInfo.primaryChannel=alphaTab.platform.Platform.parseIntMinValue(tmp1);break;case"Program":var tmp2=c1.get_innerText();track.playbackInfo.program=alphaTab.platform.Platform.parseIntMinValue(tmp2);break;case"SecondaryChannel":var tmp3=c1.get_innerText();track.playbackInfo.secondaryChannel=alphaTab.platform.Platform.parseIntMinValue(tmp3)}}if("Percussion"==node.getAttribute("table"))for(var staff=$iterator(track.staves)();staff.hasNext();){staff.next().isPercussion=!0}},parseSounds:function(track,node){for(var c=$iterator(node.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)"Sound"==c1.localName&&this.parseSound(track,c1)}},parseSound:function(track,node){for(var c=$iterator(node.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)"MIDI"==c1.localName&&this.parseSoundMidi(track,c1)}},parseSoundMidi:function(track,node){for(var c=$iterator(node.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)if("Program"==c1.localName){var tmp=c1.get_innerText();track.playbackInfo.program=alphaTab.platform.Platform.parseIntMinValue(tmp)}}},parsePartSounding:function(track,node){for(var c=$iterator(node.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)if("TranspositionPitch"==c1.localName)for(var staff=$iterator(track.staves)();staff.hasNext();){staff.next().displayTranspositionPitch=alphaTab.platform.Platform.parseIntMinValue(c1.get_innerText())}}},parseTranspose:function(track,node){for(var octave=0,chromatic=0,c=$iterator(node.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"Chromatic":chromatic=alphaTab.platform.Platform.parseIntMinValue(c1.get_innerText());break;case"Octave":octave=alphaTab.platform.Platform.parseIntMinValue(c1.get_innerText())}}for(var staff=$iterator(track.staves)();staff.hasNext();){staff.next().displayTranspositionPitch=12*octave+chromatic}},parseMasterBarsNode:function(node){for(var c=$iterator(node.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)"MasterBar"==c1.localName&&this.parseMasterBar(c1)}},parseMasterBar:function(node){var masterBar=new alphaTab.model.MasterBar;0==this._masterBars.length&&this._hasAnacrusis&&(masterBar.isAnacrusis=!0);for(var c=$iterator(node.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"AlternateEndings":for(var a=c1.get_innerText(),this2=system.Convert.toUInt16(32),alternateEndings=system._CsString.CsString_Impl_.split_CharArray(a,[this2]),i=0,k=0;k<alternateEndings.length;)i|=1<<-1+alphaTab.platform.Platform.parseIntMinValue(alternateEndings[k]),++k;masterBar.alternateEndings=system.Convert.toUInt8(i);break;case"Bars":var this3=this._barsOfMasterBar,a1=c1.get_innerText(),this5=system.Convert.toUInt16(32);this3.push(system._CsString.CsString_Impl_.split_CharArray(a1,[this5]));break;case"DoubleBar":masterBar.isDoubleBar=!0;break;case"Fermatas":this.parseFermatas(masterBar,c1);break;case"Key":masterBar.keySignature=js.Boot.__cast(alphaTab.platform.Platform.parseIntMinValue(c1.findChildElement("AccidentalCount").get_innerText()),Int);var mode=c1.findChildElement("Mode");if(null!=mode)switch(mode.get_innerText().toLowerCase()){case"major":masterBar.keySignatureType=0;break;case"minor":masterBar.keySignatureType=1}break;case"Repeat":"true"==c1.getAttribute("start").toLowerCase()&&(masterBar.isRepeatStart=!0),"true"==c1.getAttribute("end").toLowerCase()&&null!=c1.getAttribute("count")&&(masterBar.repeatCount=alphaTab.platform.Platform.parseIntMinValue(c1.getAttribute("count")));break;case"Section":masterBar.section=new alphaTab.model.Section,masterBar.section.marker=c1.findChildElement("Letter").get_innerText(),masterBar.section.text=c1.findChildElement("Text").get_innerText();break;case"Time":var a2=c1.get_innerText(),this7=system.Convert.toUInt16(47),timeParts=system._CsString.CsString_Impl_.split_CharArray(a2,[this7]);masterBar.timeSignatureNumerator=alphaTab.platform.Platform.parseIntMinValue(timeParts[0]),masterBar.timeSignatureDenominator=alphaTab.platform.Platform.parseIntMinValue(timeParts[1]);break;case"TripletFeel":switch(c1.get_innerText()){case"Dotted16th":masterBar.tripletFeel=3;break;case"Dotted8th":masterBar.tripletFeel=4;break;case"NoTripletFeel":masterBar.tripletFeel=0;break;case"Scottish16th":masterBar.tripletFeel=5;break;case"Scottish8th":masterBar.tripletFeel=6;break;case"Triplet16th":masterBar.tripletFeel=1;break;case"Triplet8th":masterBar.tripletFeel=2}}}this._masterBars.push(masterBar)},parseFermatas:function(masterBar,node){for(var c=$iterator(node.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)"Fermata"==c1.localName&&this.parseFermata(masterBar,c1)}},parseFermata:function(masterBar,node){for(var offset=0,fermata=new alphaTab.model.Fermata,c=$iterator(node.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"Length":var s=c1.get_innerText();fermata.length=parseFloat(s);break;case"Offset":var a=c1.get_innerText(),this2=system.Convert.toUInt16(47),parts=system._CsString.CsString_Impl_.split_CharArray(a,[this2]);if(2==parts.length){var numerator=alphaTab.platform.Platform.parseIntMinValue(parts[0]),denominator=alphaTab.platform.Platform.parseIntMinValue(parts[1]);offset=system.Convert.toInt32_Single(numerator/denominator*960)}break;case"Type":switch(c1.get_innerText()){case"Long":fermata.type=2;break;case"Medium":fermata.type=1;break;case"Short":fermata.type=0}}}masterBar.addFermata(offset,fermata)},parseBars:function(node){for(var c=$iterator(node.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)"Bar"==c1.localName&&this.parseBar(c1)}},parseBar:function(node){for(var bar=new alphaTab.model.Bar,barId=node.getAttribute("id"),c=$iterator(node.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"Clef":switch(c1.get_innerText()){case"C3":bar.clef=1;break;case"C4":bar.clef=2;break;case"F4":bar.clef=3;break;case"G2":bar.clef=4;break;case"Neutral":bar.clef=0}break;case"Ottavia":switch(c1.get_innerText()){case"15ma":bar.clefOttava=0;break;case"15mb":bar.clefOttava=4;break;case"8va":bar.clefOttava=1;break;case"8vb":bar.clefOttava=3}break;case"SimileMark":switch(c1.get_innerText()){case"FirstOfDouble":bar.simileMark=2;break;case"SecondOfDouble":bar.simileMark=3;break;case"Simple":bar.simileMark=1}break;case"Voices":var this1=this._voicesOfBar,a=c1.get_innerText(),this3=system.Convert.toUInt16(32);this1[barId]=system._CsString.CsString_Impl_.split_CharArray(a,[this3])}}this._barsById[barId]=bar},parseVoices:function(node){for(var c=$iterator(node.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)"Voice"==c1.localName&&this.parseVoice(c1)}},parseVoice:function(node){for(var voice=new alphaTab.model.Voice,voiceId=node.getAttribute("id"),c=$iterator(node.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)if("Beats"==c1.localName){var this1=this._beatsOfVoice,a=c1.get_innerText(),this3=system.Convert.toUInt16(32);this1[voiceId]=system._CsString.CsString_Impl_.split_CharArray(a,[this3])}}this._voiceById[voiceId]=voice},parseBeats:function(node){for(var c=$iterator(node.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)"Beat"==c1.localName&&this.parseBeat(c1)}},parseBeat:function(node){for(var beat=new alphaTab.model.Beat,beatId=node.getAttribute("id"),c=$iterator(node.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"Arpeggio":"Up"==c1.get_innerText()?beat.brushType=3:beat.brushType=4;break;case"Chord":beat.chordId=c1.get_innerText();break;case"Dynamic":switch(c1.get_innerText()){case"F":beat.dynamics=5;break;case"FF":beat.dynamics=6;break;case"FFF":beat.dynamics=7;break;case"MF":beat.dynamics=4;break;case"MP":beat.dynamics=3;break;case"P":beat.dynamics=2;break;case"PP":beat.dynamics=1;break;case"PPP":beat.dynamics=0}break;case"Fadding":"FadeIn"==c1.get_innerText()&&(beat.fadeIn=!0);break;case"FreeText":beat.text=c1.get_innerText();break;case"GraceNotes":switch(c1.get_innerText()){case"BeforeBeat":beat.graceType=2;break;case"OnBeat":beat.graceType=1}break;case"Hairpin":switch(c1.get_innerText()){case"Crescendo":beat.crescendo=1;break;case"Decrescendo":beat.crescendo=2}break;case"Legato":"true"==c1.getAttribute("origin")&&(beat.isLegatoOrigin=!0);break;case"Notes":var this1=this._notesOfBeat,a=c1.get_innerText(),this3=system.Convert.toUInt16(32);this1[beatId]=system._CsString.CsString_Impl_.split_CharArray(a,[this3]);break;case"Ottavia":switch(c1.get_innerText()){case"15ma":beat.ottava=0;break;case"15mb":beat.ottava=4;break;case"8va":beat.ottava=1;break;case"8vb":beat.ottava=3}break;case"Properties":this.parseBeatProperties(c1,beat);break;case"Rhythm":this._rhythmOfBeat[beatId]=c1.getAttribute("ref");break;case"Tremolo":switch(c1.get_innerText()){case"1/2":beat.tremoloSpeed=8;break;case"1/4":beat.tremoloSpeed=16;break;case"1/8":beat.tremoloSpeed=32}break;case"Whammy":var whammyOrigin=new alphaTab.model.BendPoint(0,0),s=c1.getAttribute("originValue"),this4=parseFloat(s);whammyOrigin.value=this.toBendValue(this4);var s1=c1.getAttribute("originOffset");whammyOrigin.offset=this.toBendOffset(parseFloat(s1)),beat.addWhammyBarPoint(whammyOrigin);var whammyMiddle1=new alphaTab.model.BendPoint(0,0),s2=c1.getAttribute("middleValue"),this5=parseFloat(s2);whammyMiddle1.value=this.toBendValue(this5);var s3=c1.getAttribute("middleOffset1");whammyMiddle1.offset=this.toBendOffset(parseFloat(s3)),beat.addWhammyBarPoint(whammyMiddle1);var whammyMiddle2=new alphaTab.model.BendPoint(0,0),s4=c1.getAttribute("middleValue"),this6=parseFloat(s4);whammyMiddle2.value=this.toBendValue(this6);var s5=c1.getAttribute("middleOffset2");whammyMiddle2.offset=this.toBendOffset(parseFloat(s5)),beat.addWhammyBarPoint(whammyMiddle2);var whammyDestination=new alphaTab.model.BendPoint(0,0),s6=c1.getAttribute("destinationValue"),this7=parseFloat(s6);whammyDestination.value=this.toBendValue(this7);var s7=c1.getAttribute("destinationOffset");whammyDestination.offset=this.toBendOffset(parseFloat(s7)),beat.addWhammyBarPoint(whammyDestination);break;case"XProperties":this.parseBeatXProperties(c1,beat)}}this._beatById[beatId]=beat},parseBeatXProperties:function(node,beat){for(var c=$iterator(node.childNodes)();c.hasNext();){var val,c1=c.next();if(1==c1.nodeType)if("XProperty"==c1.localName)switch(c1.getAttribute("id")){case"1124204545":val=alphaTab.platform.Platform.parseIntMinValue(c1.findChildElement("Int").get_innerText()),beat.invertBeamDirection=1==val;break;case"687935489":val=alphaTab.platform.Platform.parseIntMinValue(c1.findChildElement("Int").get_innerText()),beat.brushDuration=val}}},parseBeatProperties:function(node,beat){for(var isWhammy=!1,whammyOrigin=null,whammyMiddleValue=null,whammyMiddleOffset1=null,whammyMiddleOffset2=null,whammyDestination=null,c=$iterator(node.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)if("Property"==c1.localName)switch(c1.getAttribute("name")){case"Brush":"Up"==c1.findChildElement("Direction").get_innerText()?beat.brushType=1:beat.brushType=2;break;case"PickStroke":"Up"==c1.findChildElement("Direction").get_innerText()?beat.pickStroke=1:beat.pickStroke=2;break;case"Popped":null!=c1.findChildElement("Enable")&&(beat.pop=!0);break;case"Slapped":null!=c1.findChildElement("Enable")&&(beat.slap=!0);break;case"VibratoWTremBar":switch(c1.findChildElement("Strength").get_innerText()){case"Slight":beat.vibrato=1;break;case"Wide":beat.vibrato=2}break;case"WhammyBar":isWhammy=!0;break;case"WhammyBarDestinationOffset":null==whammyDestination&&(whammyDestination=new alphaTab.model.BendPoint(0,0));var s=c1.findChildElement("Float").get_innerText();whammyDestination.offset=this.toBendOffset(parseFloat(s));break;case"WhammyBarDestinationValue":null==whammyDestination&&(whammyDestination=new alphaTab.model.BendPoint(60,0));var s1=c1.findChildElement("Float").get_innerText(),this1=parseFloat(s1);whammyDestination.value=this.toBendValue(this1);break;case"WhammyBarExtend":break;case"WhammyBarMiddleOffset1":var s2=c1.findChildElement("Float").get_innerText();whammyMiddleOffset1=this.toBendOffset(parseFloat(s2));break;case"WhammyBarMiddleOffset2":var s3=c1.findChildElement("Float").get_innerText();whammyMiddleOffset2=this.toBendOffset(parseFloat(s3));break;case"WhammyBarMiddleValue":var s4=c1.findChildElement("Float").get_innerText(),this2=parseFloat(s4);whammyMiddleValue=this.toBendValue(this2);break;case"WhammyBarOriginOffset":null==whammyOrigin&&(whammyOrigin=new alphaTab.model.BendPoint(0,0));var s5=c1.findChildElement("Float").get_innerText();whammyOrigin.offset=this.toBendOffset(parseFloat(s5));break;case"WhammyBarOriginValue":null==whammyOrigin&&(whammyOrigin=new alphaTab.model.BendPoint(0,0));var s6=c1.findChildElement("Float").get_innerText(),this3=parseFloat(s6);whammyOrigin.value=this.toBendValue(this3)}}isWhammy&&(null==whammyOrigin&&(whammyOrigin=new alphaTab.model.BendPoint(0,0)),null==whammyDestination&&(whammyDestination=new alphaTab.model.BendPoint(60,0)),beat.addWhammyBarPoint(whammyOrigin),null!=whammyMiddleOffset1&&null!=whammyMiddleValue&&beat.addWhammyBarPoint(new alphaTab.model.BendPoint(whammyMiddleOffset1,whammyMiddleValue)),null!=whammyMiddleOffset2&&null!=whammyMiddleValue&&beat.addWhammyBarPoint(new alphaTab.model.BendPoint(whammyMiddleOffset2,whammyMiddleValue)),null==whammyMiddleOffset1&&null==whammyMiddleOffset2&&null!=whammyMiddleValue&&beat.addWhammyBarPoint(new alphaTab.model.BendPoint(30,whammyMiddleValue)),beat.addWhammyBarPoint(whammyDestination))},parseNotes:function(node){for(var c=$iterator(node.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)"Note"==c1.localName&&this.parseNote(c1)}},parseNote:function(node){for(var note=new alphaTab.model.Note,noteId=node.getAttribute("id"),c=$iterator(node.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"Accent":var accentFlags=alphaTab.platform.Platform.parseIntMinValue(c1.get_innerText());0!=(1&accentFlags)&&(note.isStaccato=!0),0!=(4&accentFlags)&&(note.accentuated=2),0!=(8&accentFlags)&&(note.accentuated=1);break;case"AntiAccent":"normal"==c1.get_innerText().toLowerCase()&&(note.isGhost=!0);break;case"LeftFingering":switch(note.isFingering=!0,c1.get_innerText()){case"A":note.leftHandFinger=3;break;case"C":note.leftHandFinger=4;break;case"I":note.leftHandFinger=1;break;case"M":note.leftHandFinger=2;break;case"P":note.leftHandFinger=0}break;case"LetRing":note.isLetRing=!0;break;case"Properties":this.parseNoteProperties(c1,note,noteId);break;case"RightFingering":switch(note.isFingering=!0,c1.get_innerText()){case"A":note.rightHandFinger=3;break;case"C":note.rightHandFinger=4;break;case"I":note.rightHandFinger=1;break;case"M":note.rightHandFinger=2;break;case"P":note.rightHandFinger=0}break;case"Tie":"true"==c1.getAttribute("destination").toLowerCase()&&(note.isTieDestination=!0);break;case"Trill":note.trillValue=alphaTab.platform.Platform.parseIntMinValue(c1.get_innerText()),note.trillSpeed=16;break;case"Vibrato":switch(c1.get_innerText()){case"Slight":note.vibrato=1;break;case"Wide":note.vibrato=2}}}this._noteById[noteId]=note},parseNoteProperties:function(node,note,noteId){for(var isBended=!1,bendOrigin=null,bendMiddleValue=null,bendMiddleOffset1=null,bendMiddleOffset2=null,bendDestination=null,c=$iterator(node.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)if("Property"==c1.localName)switch(c1.getAttribute("name")){case"BendDestinationOffset":null==bendDestination&&(bendDestination=new alphaTab.model.BendPoint(0,0));var s=c1.findChildElement("Float").get_innerText();bendDestination.offset=this.toBendOffset(parseFloat(s));break;case"BendDestinationValue":null==bendDestination&&(bendDestination=new alphaTab.model.BendPoint(60,0));var s1=c1.findChildElement("Float").get_innerText(),this1=parseFloat(s1);bendDestination.value=this.toBendValue(this1);break;case"BendMiddleOffset1":var s2=c1.findChildElement("Float").get_innerText();bendMiddleOffset1=this.toBendOffset(parseFloat(s2));break;case"BendMiddleOffset2":var s3=c1.findChildElement("Float").get_innerText();bendMiddleOffset2=this.toBendOffset(parseFloat(s3));break;case"BendMiddleValue":var s4=c1.findChildElement("Float").get_innerText(),this2=parseFloat(s4);bendMiddleValue=this.toBendValue(this2);break;case"BendOriginOffset":null==bendOrigin&&(bendOrigin=new alphaTab.model.BendPoint(0,0));var s5=c1.findChildElement("Float").get_innerText();bendOrigin.offset=this.toBendOffset(parseFloat(s5));break;case"BendOriginValue":null==bendOrigin&&(bendOrigin=new alphaTab.model.BendPoint(0,0));var s6=c1.findChildElement("Float").get_innerText(),this3=parseFloat(s6);bendOrigin.value=this.toBendValue(this3);break;case"Bended":isBended=!0;break;case"Element":note.element=alphaTab.platform.Platform.parseIntMinValue(c1.findChildElement("Element").get_innerText());break;case"Fret":note.fret=alphaTab.platform.Platform.parseIntMinValue(c1.findChildElement("Fret").get_innerText());break;case"HarmonicFret":var hfret=c1.findChildElement("HFret");if(null!=hfret){var s7=hfret.get_innerText();note.harmonicValue=parseFloat(s7)}break;case"HarmonicType":var htype=c1.findChildElement("HType");if(null!=htype)switch(htype.get_innerText()){case"Artificial":note.harmonicType=2;break;case"Feedback":note.harmonicType=6;break;case"Natural":note.harmonicType=1;break;case"NoHarmonic":note.harmonicType=0;break;case"Pinch":note.harmonicType=3;break;case"Semi":note.harmonicType=5;break;case"Tap":note.harmonicType=4}break;case"HopoDestination":break;case"HopoOrigin":null!=c1.findChildElement("Enable")&&(note.isHammerPullOrigin=!0);break;case"Muted":null!=c1.findChildElement("Enable")&&(note.isDead=!0);break;case"Octave":note.octave=alphaTab.platform.Platform.parseIntMinValue(c1.findChildElement("Number").get_innerText());break;case"PalmMuted":null!=c1.findChildElement("Enable")&&(note.isPalmMute=!0);break;case"Slide":var slideFlags=alphaTab.platform.Platform.parseIntMinValue(c1.findChildElement("Flags").get_innerText());0!=(1&slideFlags)?note.slideOutType=1:0!=(2&slideFlags)?note.slideOutType=2:0!=(4&slideFlags)?note.slideOutType=4:0!=(8&slideFlags)&&(note.slideOutType=3),0!=(16&slideFlags)?note.slideInType=1:0!=(32&slideFlags)&&(note.slideInType=2),0!=(64&slideFlags)?note.slideOutType=5:0!=(128&slideFlags)&&(note.slideOutType=6);break;case"String":note.string=alphaTab.platform.Platform.parseIntMinValue(c1.findChildElement("String").get_innerText())+1;break;case"Tapped":this._tappedNotes[noteId]=!0;break;case"Tone":note.tone=alphaTab.platform.Platform.parseIntMinValue(c1.findChildElement("Step").get_innerText());break;case"Variation":note.variation=alphaTab.platform.Platform.parseIntMinValue(c1.findChildElement("Variation").get_innerText())}}isBended&&(null==bendOrigin&&(bendOrigin=new alphaTab.model.BendPoint(0,0)),null==bendDestination&&(bendDestination=new alphaTab.model.BendPoint(60,0)),note.addBendPoint(bendOrigin),null!=bendMiddleOffset1&&null!=bendMiddleValue&&note.addBendPoint(new alphaTab.model.BendPoint(bendMiddleOffset1,bendMiddleValue)),null!=bendMiddleOffset2&&null!=bendMiddleValue&&note.addBendPoint(new alphaTab.model.BendPoint(bendMiddleOffset2,bendMiddleValue)),null==bendMiddleOffset1&&null==bendMiddleOffset2&&null!=bendMiddleValue&&note.addBendPoint(new alphaTab.model.BendPoint(30,bendMiddleValue)),note.addBendPoint(bendDestination))},toBendValue:function(gpxValue){return system.Convert.toInt32_Double(.04*gpxValue)},toBendOffset:function(gpxOffset){var converted=.6*gpxOffset;return system.Convert.toInt32_Single(converted)},parseRhythms:function(node){for(var c=$iterator(node.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)"Rhythm"==c1.localName&&this.parseRhythm(c1)}},parseRhythm:function(node){for(var rhythm=new alphaTab.importer.GpifRhythm,rhythmId=node.getAttribute("id"),c=$iterator(node.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"AugmentationDot":rhythm.dots=alphaTab.platform.Platform.parseIntMinValue(c1.getAttribute("count"));break;case"NoteValue":switch(c1.get_innerText()){case"128th":rhythm.value=128;break;case"16th":rhythm.value=16;break;case"256th":rhythm.value=256;break;case"32nd":rhythm.value=32;break;case"64th":rhythm.value=64;break;case"DoubleWhole":rhythm.value=-2;break;case"Eighth":rhythm.value=8;break;case"Half":rhythm.value=2;break;case"Long":rhythm.value=-4;break;case"Quarter":rhythm.value=4;break;case"Whole":rhythm.value=1}break;case"PrimaryTuplet":rhythm.tupletNumerator=alphaTab.platform.Platform.parseIntMinValue(c1.getAttribute("num")),rhythm.tupletDenominator=alphaTab.platform.Platform.parseIntMinValue(c1.getAttribute("den"))}}this._rhythmById[rhythmId]=rhythm},buildModel:function(){for(var i=0,j=this._masterBars.length;i<j;){var masterBar=this._masterBars[i];this.score.addMasterBar(masterBar),++i}for(var trackId=HxOverrides.iter(this._tracksMapping);trackId.hasNext();){var trackId1=trackId.next();if(null!=trackId1&&0!=trackId1.length){var track=this._tracksById[trackId1];this.score.addTrack(track)}}for(var barIds=$iterator(this._barsOfMasterBar)();barIds.hasNext();)for(var barIds1=barIds.next(),staffIndex=0,barIndex=0,trackIndex=0;barIndex<barIds1.length&&trackIndex<this.score.tracks.length;){var barId=barIds1[barIndex];if("-1"!=barId){var bar=this._barsById[barId],track1=this.score.tracks[trackIndex];if(track1.staves[staffIndex].addBar(bar),this._voicesOfBar.hasOwnProperty(barId))for(var voiceId=HxOverrides.iter(this._voicesOfBar[barId]);voiceId.hasNext();){var voiceId1=voiceId.next();if("-1"!=voiceId1){var voice=this._voiceById[voiceId1];if(bar.addVoice(voice),this._beatsOfVoice.hasOwnProperty(voiceId1))for(var beatId=HxOverrides.iter(this._beatsOfVoice[voiceId1]);beatId.hasNext();){var beatId1=beatId.next();if("-1"!=beatId1){var beat=this._beatById[beatId1].clone();voice.addBeat(beat);var rhythmId=this._rhythmOfBeat[beatId1],rhythm=this._rhythmById[rhythmId];if(beat.duration=rhythm.value,beat.dots=rhythm.dots,beat.tupletNumerator=rhythm.tupletNumerator,beat.tupletDenominator=rhythm.tupletDenominator,this._notesOfBeat.hasOwnProperty(beatId1))for(var noteId=HxOverrides.iter(this._notesOfBeat[beatId1]);noteId.hasNext();){var noteId1=noteId.next();"-1"!=noteId1&&(beat.addNote(this._noteById[noteId1].clone()),this._tappedNotes.hasOwnProperty(noteId1)&&(beat.tap=!0))}}}}else{var voice1=new alphaTab.model.Voice;bar.addVoice(voice1);var beat1=new alphaTab.model.Beat;beat1.isEmpty=!0,beat1.duration=4,voice1.addBeat(beat1)}}staffIndex==track1.staves.length-1?(++trackIndex,staffIndex=0):++staffIndex}else++trackIndex;++barIndex}for(var this1=this._masterTrackAutomations,barIndex1=$iterator(Object.keys(this1))();barIndex1.hasNext();)for(var barIndex2=barIndex1.next(),automations=this._masterTrackAutomations[barIndex2],masterBar1=this.score.masterBars[alphaTab.platform.Platform.parseIntMinValue(barIndex2)],i1=0,j1=automations.length;i1<j1;){var automation=automations[i1];if(0==automation.type){if("0"==barIndex2){var tmp=system.Convert.toInt32_Single(automation.value);this.score.tempo=tmp,null!=automation.text&&(this.score.tempoLabel=automation.text)}masterBar1.tempoAutomation=automation}++i1}},__class__:alphaTab.importer.GpifParser},alphaTab.importer.GpifRhythm=function(){this.dots=0,this.tupletDenominator=0,this.tupletNumerator=0,this.value=-4,this.tupletDenominator=-1,this.tupletNumerator=-1,this.value=4},alphaTab.importer.GpifRhythm.__name__=["alphaTab","importer","GpifRhythm"],alphaTab.importer.GpifRhythm.prototype={__class__:alphaTab.importer.GpifRhythm},alphaTab.importer.GpxFile=function(){this.fileName=null,this.fileSize=0,this.data=null},alphaTab.importer.GpxFile.__name__=["alphaTab","importer","GpxFile"],alphaTab.importer.GpxFile.prototype={__class__:alphaTab.importer.GpxFile},alphaTab.importer.GpxFileSystem=function(){this.fileFilter=null,this.files=null;this.files=[],this.fileFilter=function(s){return!0}},alphaTab.importer.GpxFileSystem.__name__=["alphaTab","importer","GpxFileSystem"],alphaTab.importer.GpxFileSystem.prototype={load:function(s){var src=new alphaTab.io.BitReader(s);this.readBlock(src)},readHeader:function(src){return this.getString(src.readBytes(4),0,4)},decompress:function(src,skipHeader){null==skipHeader&&(skipHeader=!1);var buffer,uncompressed=alphaTab.io.ByteBuffer.empty(),expectedLength=this.getInteger(src.readBytes(4),0);try{for(;uncompressed.get_length()<expectedLength;){if(1==src.readBits(1)){var wordSize=src.readBits(4),offset=src.readBitsReversed(wordSize),size=src.readBitsReversed(wordSize),sourcePosition=uncompressed.get_length()-offset,toRead=Math.min(offset,size);buffer=uncompressed.getBuffer(),uncompressed.write(buffer,sourcePosition,toRead)}else for(var size1=src.readBitsReversed(2),i=0;i<size1;)uncompressed.writeByte(system.Convert.toUInt8(src.readByte())),++i}}catch(__e){if(__e instanceof js._Boot.HaxeError&&(__e=__e.val),!js.Boot.__instanceof(__e,alphaTab.io.EndOfReaderException))throw __e}buffer=uncompressed.getBuffer();var resultOffset=skipHeader?4:0,resultSize=uncompressed.get_length()-resultOffset,result=new Uint8Array(resultSize);return result.set(buffer.subarray(resultOffset,resultOffset+resultSize),0),result},readBlock:function(data){var header=this.readHeader(data);if("BCFZ"==header)this.readUncompressedBlock(this.decompress(data,!0));else{if("BCFS"!=header)throw new js._Boot.HaxeError((new alphaTab.importer.UnsupportedFormatException).UnsupportedFormatException("Unsupported format"));this.readUncompressedBlock(data.readAll())}},readUncompressedBlock:function(data){for(var offset=4096;offset+3<data.length;){if(2==this.getInteger(data,offset)){var file=new alphaTab.importer.GpxFile;file.fileName=this.getString(data,offset+4,127),file.fileSize=this.getInteger(data,offset+140);var storeFile=null==this.fileFilter||this.fileFilter(file.fileName);storeFile&&this.files.push(file);for(var dataPointerOffset=offset+148,sector=0,sectorCount=0,fileData=storeFile?alphaTab.io.ByteBuffer.withCapactiy(file.fileSize):null;0!=(sector=this.getInteger(data,dataPointerOffset+4*sectorCount++));)offset=4096*sector,storeFile&&fileData.write(data,offset,4096);if(storeFile){var this1=new Uint8Array(Math.min(file.fileSize,fileData.get_length()));file.data=this1;var raw=fileData.toArray(),dst=file.data,count=file.data.length;dst.set(raw.subarray(0,0+count),0)}}offset+=4096}},getString:function(data,offset,length){for(var buf="",i=0;i<length;){var code=255&data[offset+i];if(0==code)break;buf+=String.fromCharCode(code),++i}return buf},getInteger:function(data,offset){var this1=data[offset];return data[offset+3]<<24|data[offset+2]<<16|data[offset+1]<<8|this1},__class__:alphaTab.importer.GpxFileSystem},alphaTab.importer.GpxImporter=function(){alphaTab.importer.ScoreImporter.call(this)},alphaTab.importer.GpxImporter.__name__=["alphaTab","importer","GpxImporter"],alphaTab.importer.GpxImporter.__super__=alphaTab.importer.ScoreImporter,alphaTab.importer.GpxImporter.prototype=$extend(alphaTab.importer.ScoreImporter.prototype,{get_name:function(){return"Guitar Pro 6"},readScore:function(){alphaTab.util.Logger.info(this.get_name(),"Loading GPX filesystem",null);var fileSystem=new alphaTab.importer.GpxFileSystem;fileSystem.fileFilter=function(s){return!(!StringTools.endsWith(s,"score.gpif")&&!StringTools.endsWith(s,"BinaryStylesheet"))||StringTools.endsWith(s,"PartConfiguration")},fileSystem.load(this.Data),alphaTab.util.Logger.info(this.get_name(),"GPX filesystem loaded",null);for(var xml=null,binaryStylesheet=null,partConfiguration=null,entry=$iterator(fileSystem.files)();entry.hasNext();){var entry1=entry.next();switch(entry1.fileName){case"BinaryStylesheet":binaryStylesheet=entry1.data;break;case"PartConfiguration":partConfiguration=entry1.data;break;case"score.gpif":xml=alphaTab.platform.Platform.toString(entry1.data,this.Settings.importer.encoding)}}fileSystem.files=null,fileSystem=null,alphaTab.util.Logger.info(this.get_name(),"Start Parsing score.gpif",null);var gpifParser=new alphaTab.importer.GpifParser;gpifParser.parseXml(xml,this.Settings),alphaTab.util.Logger.info(this.get_name(),"score.gpif parsed",null);var score=gpifParser.score;if(null!=binaryStylesheet){alphaTab.util.Logger.info(this.get_name(),"Start Parsing BinaryStylesheet",null);var stylesheetParser=new alphaTab.importer.BinaryStylesheetParser;stylesheetParser.parse(binaryStylesheet),null!=stylesheetParser.stylesheet&&stylesheetParser.stylesheet.apply(score),alphaTab.util.Logger.info(this.get_name(),"BinaryStylesheet parsed",null)}if(null!=partConfiguration){alphaTab.util.Logger.info(this.get_name(),"Start Parsing Part Configuration",null);var partConfigurationParser=new alphaTab.importer.PartConfigurationParser;partConfigurationParser.parse(partConfiguration),null!=partConfigurationParser.configuration&&partConfigurationParser.configuration.apply(score),alphaTab.util.Logger.info(this.get_name(),"Part Configuration parsed",null)}return score},__class__:alphaTab.importer.GpxImporter}),alphaTab.importer.MixTableChange=function(){this.volume=0,this.balance=0,this.instrument=0,this.tempoName=null,this.tempo=0,this.duration=0,this.volume=-1,this.balance=-1,this.instrument=-1,this.tempoName=null,this.tempo=-1,this.duration=0},alphaTab.importer.MixTableChange.__name__=["alphaTab","importer","MixTableChange"],alphaTab.importer.MixTableChange.prototype={__class__:alphaTab.importer.MixTableChange},alphaTab.importer.MusicXmlImporter=function(){this._voiceOfStaff={},alphaTab.importer.ScoreImporter.call(this)},alphaTab.importer.MusicXmlImporter.__name__=["alphaTab","importer","MusicXmlImporter"],alphaTab.importer.MusicXmlImporter.__super__=alphaTab.importer.ScoreImporter,alphaTab.importer.MusicXmlImporter.prototype=$extend(alphaTab.importer.ScoreImporter.prototype,{get_name:function(){return"MusicXML"},readScore:function(){this._trackById={};this._partGroups={};this._tieStarts=[];this._tieStartIds={};this._slurStarts={};var dom,xml=alphaTab.platform.Platform.toString(this.Data.readAll(),this.Settings.importer.encoding);try{dom=new alphaTab.xml.XmlDocument(xml)}catch(__e){throw __e instanceof js._Boot.HaxeError&&(__e=__e.val),js.Boot.__instanceof(__e,system.Exception)?new js._Boot.HaxeError((new alphaTab.importer.UnsupportedFormatException).UnsupportedFormatException("Unsupported format")):__e}return this._score=new alphaTab.model.Score,this._score.tempo=120,this.parseDom(dom),this.Settings.importer.mergePartGroupsInMusicXml&&this.mergePartGroups(),this._score.finish(this.Settings),this._score.rebuildRepeatGroups(),this._score},mergePartGroups:function(){for(var anyMerged=!1,this1=this._partGroups,groupId=$iterator(Object.keys(this1))();groupId.hasNext();){var groupId1=groupId.next(),tracks=this._partGroups[groupId1];1<tracks.length&&(this.mergeGroup(tracks),anyMerged=!0)}if(anyMerged)for(var i=0;i<this._score.tracks.length;)this._score.tracks[i].index=i,++i},mergeGroup:function(partGroup){for(var primaryTrack=partGroup[0],i=1;i<partGroup.length;){for(var secondaryTrack=partGroup[i],staff=$iterator(secondaryTrack.staves)();staff.hasNext();){var staff1=staff.next();primaryTrack.addStaff(staff1)}var trackIndex=this._score.tracks.indexOf(secondaryTrack);-1!=trackIndex&&this._score.tracks.splice(trackIndex,1),++i}},parseDom:function(dom){var root=dom.documentElement;if(null==root)throw new js._Boot.HaxeError((new alphaTab.importer.UnsupportedFormatException).UnsupportedFormatException("Unsupported format"));switch(root.localName){case"score-partwise":this.parsePartwise(root);break;case"score-timewise":break;default:throw new js._Boot.HaxeError((new alphaTab.importer.UnsupportedFormatException).UnsupportedFormatException("Unsupported format"))}},parsePartwise:function(element){for(var c=$iterator(element.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"identification":this.parseIdentification(c1);break;case"movement-title":this._score.title=c1.get_innerText();break;case"part":this.parsePart(c1);break;case"part-list":this.parsePartList(c1);break;case"work":this.parseWork(c1)}}},parseWork:function(element){for(var c=$iterator(element.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)"work-title"==c1.localName&&(this._score.title=c1.get_innerText())}},parsePart:function(element){var id=element.getAttribute("id");if(!this._trackById.hasOwnProperty(id)){var this1=this._trackById;if(1!=Object.keys(this1).length)return;for(var this2=this._trackById,key=$iterator(Object.keys(this2))();key.hasNext();){var key1=key.next(),t=this._trackById[key1];0!=t.staves.length&&0!=t.staves[0].bars.length||(id=key1)}if(!this._trackById.hasOwnProperty(id))return}var track=this._trackById[id],isFirstMeasure=!0;this._maxVoices=0;for(var c=$iterator(element.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)"measure"==c1.localName&&this.parseMeasure(c1,track,isFirstMeasure)&&(isFirstMeasure=!1)}for(var staff=$iterator(track.staves)();staff.hasNext();)for(var bar=$iterator(staff.next().bars)();bar.hasNext();){var bar1=bar.next();this.ensureVoices(bar1)}},parseMeasure:function(element,track,isFirstMeasure){if("yes"==element.getAttribute("implicit")&&0==element.getElementsByTagName("note",!1).length)return!1;var barIndex=0,barWidth=alphaTab.platform.Platform.parseIntMinValue(element.getAttribute("width"));if(-2147483648==barWidth&&(barWidth=0),isFirstMeasure)this._divisionsPerQuarterNote=0,this._trackFirstMeasureNumber=alphaTab.platform.Platform.parseIntMinValue(element.getAttribute("number")),-2147483648==this._trackFirstMeasureNumber&&(this._trackFirstMeasureNumber=0),barIndex=0;else{if(-2147483648==(barIndex=alphaTab.platform.Platform.parseIntMinValue(element.getAttribute("number"))))return!1;barIndex-=this._trackFirstMeasureNumber}if(isFirstMeasure){var attributes=element.getElementsByTagName("attributes",!1);if(0<attributes.length){var stavesElements=attributes[0].getElementsByTagName("staves",!1);if(0<stavesElements.length){var staves=alphaTab.platform.Platform.parseIntMinValue(stavesElements[0].get_innerText());track.ensureStaveCount(staves)}}}for(var size=track.staves.length,bars=new Array(size),masterBar=null,b=track.staves[0].bars.length;b<=barIndex;){for(var s=0;s<track.staves.length;){var bar=bars[s]=new alphaTab.model.Bar;if(0<track.staves[s].bars.length){var previousBar=track.staves[s].bars[track.staves[s].bars.length-1];bar.clef=previousBar.clef}masterBar=this.getOrCreateMasterBar(barIndex),track.staves[s].addBar(bar),this.ensureVoices(bar),++s}++b}for(var attributesParsed=!1,c=$iterator(element.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"attributes":attributesParsed||(this.parseAttributes(c1,bars,masterBar,track),attributesParsed=!0);break;case"barline":this.parseBarline(c1,masterBar);break;case"direction":this.parseDirection(c1,masterBar);break;case"forward":this.parseForward(c1,bars);break;case"harmony":this.parseHarmony(c1,track);break;case"note":this.parseNoteBeat(c1,bars)}}return!0},ensureVoices:function(bar){for(;bar.voices.length<this._maxVoices;){var emptyVoice=new alphaTab.model.Voice;bar.addVoice(emptyVoice);var _tmp=new alphaTab.model.Beat;_tmp.isEmpty=!0;var emptyBeat=_tmp;emptyBeat.chordId=this._currentChord,emptyVoice.addBeat(emptyBeat)}},getOrCreateBeat:function(element,bars,chord){var voiceIndex=0,voiceNodes=element.getElementsByTagName("voice",!1);0<voiceNodes.length&&(voiceIndex=alphaTab.platform.Platform.parseIntMinValue(voiceNodes[0].get_innerText())-1);var previousBeatWasPulled=this._previousBeatWasPulled;this._previousBeatWasPulled=!1;var bar,beat,staffElement=element.getElementsByTagName("staff",!1),staff=1;if(0<staffElement.length){staff=alphaTab.platform.Platform.parseIntMinValue(staffElement[0].get_innerText()),(this._isBeamContinue||previousBeatWasPulled)&&this._previousBeat.voice.bar.staff.index!=staff-1&&(staff=this._previousBeat.voice.bar.staff.index+1,this._previousBeatWasPulled=!0);var staffId=Std.string(bars[0].staff.track.index)+"-"+Std.string(staff);this._voiceOfStaff.hasOwnProperty(staffId)||(this._voiceOfStaff[staffId]=voiceIndex)}bar=--staff<0?bars[0]:staff>=bars.length?bars[bars.length-1]:bars[staff];var voice=this.getOrCreateVoice(bar,voiceIndex);return chord&&0<voice.beats.length||1==voice.beats.length&&voice.isEmpty?beat=voice.beats[voice.beats.length-1]:((beat=new alphaTab.model.Beat).isEmpty=!1,voice.addBeat(beat)),this._isBeamContinue=!1,this._previousBeat=beat},parseForward:function(element,bars){for(var beat=this.getOrCreateBeat(element,bars,!1),duration=4*alphaTab.platform.Platform.parseIntMinValue(element.findChildElement("duration").get_innerText())/js.Boot.__cast(this._divisionsPerQuarterNote,Float),durations=new Int32Array([64,32,16,8,4,2,1]),d=new system.Int32ArrayIterator(durations);d.hasNext();){var d1=d.next();if(d1<=duration){beat.duration=js.Boot.__cast(d1,Int),duration-=d1;break}}beat.isEmpty=!1},parseStaffDetails:function(element,track){for(var c=$iterator(element.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"staff-lines":for(var staff=$iterator(track.staves)();staff.hasNext();){var staff1=staff.next(),this1=new Int32Array(alphaTab.platform.Platform.parseIntMinValue(c1.get_innerText()));staff1.tuning=this1}break;case"staff-tuning":this.parseStaffTuning(c1,track)}}for(var staff2=$iterator(track.staves)();staff2.hasNext();){var staff3=staff2.next();if(this.isEmptyTuning(staff3.tuning)){var this2=new Int32Array(0);staff3.tuning=this2}}},parseStaffTuning:function(element,track){for(var line=alphaTab.platform.Platform.parseIntMinValue(element.getAttribute("line")),tuningStep="C",tuningOctave="",tuningAlter=0,c=$iterator(element.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"tuning-alter":tuningAlter=alphaTab.platform.Platform.parseIntMinValue(c1.get_innerText());break;case"tuning-octave":tuningOctave=c1.get_innerText();break;case"tuning-step":tuningStep=c1.get_innerText()}}for(var tuning=alphaTab.model.TuningParser.getTuningForText(tuningStep+tuningOctave)+tuningAlter,staff=$iterator(track.staves)();staff.hasNext();){var staff1=staff.next();staff1.tuning[staff1.tuning.length-line]=tuning}},parseHarmony:function(element,track){for(var rootStep=null,rootAlter="",c=$iterator(element.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"kind":c1.getAttribute("text"),c1.get_innerText();break;case"root":for(var rootChild=$iterator(c1.childNodes)();rootChild.hasNext();){var rootChild1=rootChild.next();if(1==rootChild1.nodeType)switch(rootChild1.localName){case"root-alter":switch(alphaTab.platform.Platform.parseIntMinValue(c1.get_innerText())){case-2:rootAlter=" bb";break;case-1:rootAlter=" b";break;case 0:rootAlter="";break;case 1:rootAlter=" #";break;case 2:rootAlter=" ##"}break;case"root-step":rootStep=rootChild1.get_innerText()}}}}var chord=new alphaTab.model.Chord;chord.name=rootStep+rootAlter,this._currentChord=alphaTab.platform.Platform.newGuid();for(var staff=$iterator(track.staves)();staff.hasNext();){staff.next().addChord(this._currentChord,chord)}},parseBarline:function(element,masterBar){for(var c=$iterator(element.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"ending":this.parseEnding(c1,masterBar);break;case"repeat":this.parseRepeat(c1,masterBar)}}},parseEnding:function(element,masterBar){var number=alphaTab.platform.Platform.parseIntMinValue(element.getAttribute("number"));0<number&&(--number,masterBar.alternateEndings=system.Convert.toUInt8(masterBar.alternateEndings|system.Convert.toUInt8(1<<number)))},parseRepeat:function(element,masterBar){var direction=element.getAttribute("direction"),times=alphaTab.platform.Platform.parseIntMinValue(element.getAttribute("times"));times<0&&(times=2),"backward"==direction?masterBar.repeatCount=times:"forward"==direction&&(masterBar.isRepeatStart=!0)},parseNoteBeat:function(element,bars){var chord=0<element.getElementsByTagName("chord",!1).length,beat=this.getOrCreateBeat(element,bars,chord);null==beat.chordId&&null!=this._currentChord&&(beat.chordId=this._currentChord,this._currentChord=null),null!=this._currentDirection&&(beat.text=this._currentDirection,this._currentDirection=null);var note=new alphaTab.model.Note;beat.voice.isEmpty=!1,beat.isEmpty=!1,beat.addNote(note),beat.dots=0;for(var c=$iterator(element.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"accidental":this.parseAccidental(c1,note);break;case"beam":"continue"==c1.get_innerText()&&(this._isBeamContinue=!0);break;case"cue":break;case"dot":beat.dots++;break;case"duration":if(beat.get_isRest())switch(alphaTab.platform.Platform.parseIntMinValue(c1.get_innerText())){case 1:beat.duration=1;break;case 2:beat.duration=2;break;case 4:beat.duration=4;break;case 8:beat.duration=8;break;case 16:beat.duration=16;break;case 32:beat.duration=32;break;case 64:beat.duration=64;break;default:beat.duration=4}break;case"grace":beat.graceType=2,beat.duration=32;break;case"instrument":break;case"lyric":this.parseLyric(c1,beat);break;case"notations":this.parseNotations(c1,beat,note);break;case"notehead":"yes"==c1.getAttribute("parentheses")&&(note.isGhost=!0);break;case"pitch":this.parsePitch(c1,note);break;case"rest":beat.isEmpty=!1;beat.notes=[];break;case"stem":break;case"tie":this.parseTied(c1,note);break;case"time-modification":this.parseTimeModification(c1,beat);break;case"type":beat.duration=this.getDuration(c1.get_innerText()),0!=beat.graceType&&beat.duration<16&&(beat.duration=8);break;case"unpitched":this.parseUnpitched(c1,note)}}if(note.get_isStringed())for(var i=0;i<beat.notes.length;){if(beat.notes[i].string==note.string&&beat.notes[i]!=note){beat.removeNote(note);break}++i}},getDuration:function(text){switch(text){case"128th":case"256th":case"64th":return 64;case"16th":return 16;case"32nd":return 32;case"breve":case"long":case"whole":return 1;case"eighth":return 8;case"half":return 2;case"quarter":return 4}return 4},parseLyric:function(element,beat){for(var c=$iterator(element.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)if("text"==c1.localName){var s=beat.text;null!=s&&0!=s.length?beat.text=beat.text+(" "+c1.get_innerText()):beat.text=c1.get_innerText()}}},parseAccidental:function(element,note){switch(element.get_innerText()){case"double-sharp":break;case"flat":note.accidentalMode=4;break;case"flat-flat":break;case"natural":note.accidentalMode=2;break;case"natural-flat":case"natural-sharp":case"quarter-flat":case"quarter-sharp":break;case"sharp":note.accidentalMode=3}},parseTied:function(element,note){if("start"==element.getAttribute("type"))this._tieStartIds.hasOwnProperty(note.id)||(this._tieStartIds[note.id]=!0,this._tieStarts.push(note));else if("stop"==element.getAttribute("type")&&0<this._tieStarts.length&&!note.isTieDestination){note.isTieDestination=!0,note.tieOrigin=this._tieStarts[0],this._tieStarts.splice(0,1),delete this._tieStartIds[note.id]}},parseNotations:function(element,beat,note){for(var c=$iterator(element.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"articulations":this.parseArticulations(c1,note);break;case"dynamics":this.parseDynamics(c1,beat);break;case"glissando":case"slide":"start"==c1.getAttribute("type")&&(note.slideOutType=1);break;case"ornaments":this.parseOrnaments(c1,note);break;case"slur":var slurNumber=c1.getAttribute("number");switch(null!=slurNumber&&0!=slurNumber.length||(slurNumber="1"),c1.getAttribute("type")){case"start":this._slurStarts[slurNumber]=note;break;case"stop":if(this._slurStarts.hasOwnProperty(slurNumber))note.isSlurDestination=!0,(this._slurStarts[slurNumber].slurDestination=note).slurOrigin=note}break;case"technical":this.parseTechnical(c1,note);break;case"tied":this.parseTied(c1,note)}}},parseOrnaments:function(element,note){for(var c=$iterator(element.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)if("tremolo"==c1.localName)switch(alphaTab.platform.Platform.parseIntMinValue(c1.get_innerText())){case 1:note.beat.tremoloSpeed=8;break;case 2:note.beat.tremoloSpeed=16;break;case 3:note.beat.tremoloSpeed=32}}},parseTechnical:function(element,note){for(var c=$iterator(element.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"down-bow":note.beat.pickStroke=2;break;case"fret":note.fret=alphaTab.platform.Platform.parseIntMinValue(c1.get_innerText());break;case"string":note.string=alphaTab.platform.Platform.parseIntMinValue(c1.get_innerText()),-2147483648!=note.string&&(note.string=note.beat.voice.bar.staff.tuning.length-note.string+1);break;case"up-bow":note.beat.pickStroke=1}}-2147483648!=note.string&&-2147483648!=note.fret||(note.string=-1,note.fret=-1)},parseArticulations:function(element,note){for(var c=$iterator(element.childNodes)();c.hasNext();){switch(c.next().localName){case"accent":note.accentuated=1;break;case"detached-legato":case"staccato":note.isStaccato=!0;break;case"strong-accent":note.accentuated=2}}},parseDynamics:function(element,beat){for(var c=$iterator(element.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"f":beat.dynamics=5;break;case"ff":beat.dynamics=6;break;case"fff":beat.dynamics=7;break;case"mf":beat.dynamics=4;break;case"mp":beat.dynamics=3;break;case"p":beat.dynamics=2;break;case"pp":beat.dynamics=1;break;case"ppp":beat.dynamics=0}}},parseTimeModification:function(element,beat){for(var c=$iterator(element.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"actual-notes":beat.tupletNumerator=alphaTab.platform.Platform.parseIntMinValue(c1.get_innerText());break;case"normal-notes":beat.tupletDenominator=alphaTab.platform.Platform.parseIntMinValue(c1.get_innerText())}}},parseUnpitched:function(element,note){for(var step=null,semitones=0,octave=0,c=$iterator(element.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"display-alter":semitones=alphaTab.platform.Platform.parseIntMinValue(c1.get_innerText());break;case"display-octave":octave=alphaTab.platform.Platform.parseIntMinValue(c1.get_innerText());break;case"display-step":step=c1.get_innerText()}}var value=12*octave+alphaTab.model.TuningParser.getToneForText(step)+semitones;note.octave=value/12|0,note.tone=value-12*note.octave},parsePitch:function(element,note){for(var step=null,semitones=0,octave=0,c=$iterator(element.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"alter":var s=c1.get_innerText();semitones=parseFloat(s),isNaN(semitones)&&(semitones=0);break;case"octave":octave=alphaTab.platform.Platform.parseIntMinValue(c1.get_innerText())+1;break;case"step":step=c1.get_innerText()}}var value=12*octave+alphaTab.model.TuningParser.getToneForText(step)+system.Convert.toInt32_Single(semitones);note.octave=value/12|0,note.tone=value-12*note.octave},getOrCreateVoice:function(bar,index){if(index<bar.voices.length)return bar.voices[index];for(var i=bar.voices.length;i<=index;)bar.addVoice(new alphaTab.model.Voice),++i;return this._maxVoices=Math.max(this._maxVoices,bar.voices.length),bar.voices[index]},parseDirection:function(element,masterBar){for(var c=$iterator(element.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"direction-type":var directionType=c1.firstElement;switch(directionType.localName){case"metronome":this.parseMetronome(c1.firstElement,masterBar);break;case"words":this._currentDirection=directionType.get_innerText()}break;case"sound":var tempo=c1.getAttribute("tempo");if(null!=tempo&&0!=tempo.length){var tempoAutomation=new alphaTab.model.Automation;tempoAutomation.isLinear=!0,tempoAutomation.type=0;var this1=alphaTab.platform.Platform.parseIntMinValue(tempo);tempoAutomation.value=this1,masterBar.tempoAutomation=tempoAutomation}}}},parseMetronome:function(element,masterBar){for(var unit=4,perMinute=120,c=$iterator(element.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"beat-unit":unit=this.getDuration(c1.get_innerText());break;case"per-minute":perMinute=alphaTab.platform.Platform.parseIntMinValue(c1.get_innerText())}}var tempoAutomation=masterBar.tempoAutomation=new alphaTab.model.Automation,this1=perMinute*(unit/4|(tempoAutomation.type=0));tempoAutomation.value=this1},parseAttributes:function(element,bars,masterBar,track){for(var number,hasTime=!1,c=$iterator(element.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"clef":-2147483648==(number=alphaTab.platform.Platform.parseIntMinValue(c1.getAttribute("number")))&&(number=1),this.parseClef(c1,bars[number-1]);break;case"divisions":this._divisionsPerQuarterNote=alphaTab.platform.Platform.parseIntMinValue(c1.get_innerText());break;case"key":this.parseKey(c1,masterBar);break;case"staff-details":this.parseStaffDetails(c1,track);break;case"time":this.parseTime(c1,masterBar),hasTime=!0;break;case"transpose":this.parseTranspose(c1,track)}}hasTime||(masterBar.timeSignatureCommon=!0)},parseTranspose:function(element,track){for(var semitones=0,c=$iterator(element.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"chromatic":semitones+=alphaTab.platform.Platform.parseIntMinValue(c1.get_innerText());break;case"octave-change":semitones+=12*alphaTab.platform.Platform.parseIntMinValue(c1.get_innerText())}}for(var staff=$iterator(track.staves)();staff.hasNext();){staff.next().transpositionPitch=semitones}},parseClef:function(element,bar){for(var sign=null,line=0,c=$iterator(element.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"clef-octave-change":switch(alphaTab.platform.Platform.parseIntMinValue(c1.get_innerText())){case-2:bar.clefOttava=4;break;case-1:bar.clefOttava=3;break;case 1:bar.clefOttava=1;break;case 2:bar.clefOttava=4}break;case"line":line=alphaTab.platform.Platform.parseIntMinValue(c1.get_innerText());break;case"sign":sign=c1.get_innerText().toLowerCase()}}switch(sign){case"c":bar.clef=3==line?1:2;break;case"f":bar.clef=3;break;case"g":bar.clef=4;break;case"percussion":bar.clef=0,bar.staff.isPercussion=!0;break;case"tab":bar.clef=4,bar.staff.showTablature=!0;break;default:bar.clef=4}},parseTime:function(element,masterBar){"common"==element.getAttribute("symbol")&&(masterBar.timeSignatureCommon=!0);for(var beatsParsed=!1,beatTypeParsed=!1,c=$iterator(element.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType){var v=c1.get_innerText();switch(c1.localName){case"beat-type":beatTypeParsed||(-1==v.indexOf("+")?masterBar.timeSignatureDenominator=alphaTab.platform.Platform.parseIntMinValue(v):masterBar.timeSignatureDenominator=4,beatTypeParsed=!0);break;case"beats":beatsParsed||(-1==v.indexOf("+")?masterBar.timeSignatureNumerator=alphaTab.platform.Platform.parseIntMinValue(v):masterBar.timeSignatureNumerator=4,beatsParsed=!0)}}}},parseKey:function(element,masterBar){for(var fifths=-2147483648,mode=null,c=$iterator(element.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"fifths":fifths=alphaTab.platform.Platform.parseIntMinValue(c1.get_innerText());break;case"key-alter":alphaTab.platform.Platform.parseIntMinValue(c1.get_innerText());break;case"key-step":alphaTab.platform.Platform.parseIntMinValue(c1.get_innerText());break;case"mode":mode=c1.get_innerText()}}masterBar.keySignature=-7<=fifths&&fifths<=7?js.Boot.__cast(fifths,Int):0,masterBar.keySignatureType="minor"==mode?1:0},getOrCreateMasterBar:function(index){if(index<this._score.masterBars.length)return this._score.masterBars[index];for(var i=this._score.masterBars.length;i<=index;){var mb=new alphaTab.model.MasterBar;if(0<this._score.masterBars.length){var prev=this._score.masterBars[this._score.masterBars.length-1];mb.timeSignatureDenominator=prev.timeSignatureDenominator,mb.timeSignatureNumerator=prev.timeSignatureNumerator,mb.keySignature=prev.keySignature,mb.keySignatureType=prev.keySignatureType}this._score.addMasterBar(mb),++i}return this._score.masterBars[index]},parseIdentification:function(element){for(var c=$iterator(element.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"creator":"composer"==c1.getAttribute("type")&&(this._score.music=c1.get_innerText());break;case"rights":var s=this._score.copyright;null!=s&&0!=s.length&&(this._score.copyright=this._score.copyright+"\n");var tmp=this._score.copyright+c1.get_innerText();this._score.copyright=tmp}}},parsePartList:function(element){for(var c=$iterator(element.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"part-group":this.parsePartGroup(c1);break;case"score-part":this.parseScorePart(c1)}}},parsePartGroup:function(element){switch(element.getAttribute("type")){case"start":this._currentPartGroup=element.getAttribute("number");this._partGroups[this._currentPartGroup]=[];break;case"stop":this._currentPartGroup=null}},parseScorePart:function(element){var id=element.getAttribute("id"),track=new alphaTab.model.Track(1);track.staves[0].showStandardNotation=!0,this._trackById[id]=track,this._score.addTrack(track),null!=this._currentPartGroup&&this._partGroups[this._currentPartGroup].push(track);for(var c=$iterator(element.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"midi-instrument":this.parseMidiInstrument(c1,track);break;case"part-abbreviation":track.shortName=c1.get_innerText();break;case"part-name":track.name=c1.get_innerText()}}if(this.isEmptyTuning(track.staves[0].tuning)){var tmp=track.staves[0],this1=new Int32Array(0);tmp.tuning=this1}},isEmptyTuning:function(tuning){if(null==tuning)return!0;for(var i=0;i<tuning.length;){if(0!=tuning[i])return!1;++i}return!0},parseMidiInstrument:function(element,track){for(var c=$iterator(element.childNodes)();c.hasNext();){var c1=c.next();if(1==c1.nodeType)switch(c1.localName){case"midi-channel":var tmp=c1.get_innerText();track.playbackInfo.primaryChannel=alphaTab.platform.Platform.parseIntMinValue(tmp);break;case"midi-program":var tmp1=c1.get_innerText();track.playbackInfo.program=alphaTab.platform.Platform.parseIntMinValue(tmp1);break;case"midi-volume":var tmp2=c1.get_innerText();track.playbackInfo.volume=alphaTab.platform.Platform.parseIntMinValue(tmp2)}}},__class__:alphaTab.importer.MusicXmlImporter}),alphaTab.importer.NoCompatibleReaderFoundException=$hx_exports.alphaTab.importer.NoCompatibleReaderFoundException=function(){alphaTab.AlphaTabException.call(this)},alphaTab.importer.NoCompatibleReaderFoundException.__name__=["alphaTab","importer","NoCompatibleReaderFoundException"],alphaTab.importer.NoCompatibleReaderFoundException.__super__=alphaTab.AlphaTabException,alphaTab.importer.NoCompatibleReaderFoundException.prototype=$extend(alphaTab.AlphaTabException.prototype,{NoCompatibleReaderFoundException:function(){return this.AlphaTabException("No compatible reader found"),this},__class__:alphaTab.importer.NoCompatibleReaderFoundException}),alphaTab.importer.PartConfiguration=function(){this.parts=null,this.zoomLevel=0,this.layout=0;this.parts=[]},alphaTab.importer.PartConfiguration.__name__=["alphaTab","importer","PartConfiguration"],alphaTab.importer.PartConfiguration.prototype={apply:function(score){for(var staffIndex=0,trackIndex=0,part=$iterator(this.parts)();part.hasNext();)for(var trackConfig=$iterator(part.next().tracks)();trackConfig.hasNext();){var trackConfig1=trackConfig.next();if(trackIndex<score.tracks.length){var track=score.tracks[trackIndex];if(staffIndex<track.staves.length){var staff=track.staves[staffIndex];staff.showTablature=trackConfig1.showTablature,staff.showStandardNotation=trackConfig1.showStandardNotation}}++trackIndex>=score.tracks.length&&(++staffIndex,trackIndex=0)}},__class__:alphaTab.importer.PartConfiguration},alphaTab.importer.PartConfigurationParser=function(){this.configuration=null},alphaTab.importer.PartConfigurationParser.__name__=["alphaTab","importer","PartConfigurationParser"],alphaTab.importer.PartConfigurationParser.prototype={parse:function(partConfigurationData){this.configuration=new alphaTab.importer.PartConfiguration,this.parsePartConfiguration(partConfigurationData)},parsePartConfiguration:function(partConfigurationData){for(var readable=alphaTab.io.ByteBuffer.fromBuffer(partConfigurationData),entryCount=alphaTab.io.IOHelper.readInt32BE(readable),i=0;i<entryCount;){var part=new alphaTab.importer.PartConfiguration_Part;this.configuration.parts.push(part),part.isMultiRest=alphaTab.importer.GpBinaryHelpers.gpReadBool(readable);for(var groupCount=alphaTab.io.IOHelper.readInt32BE(readable),j=0;j<groupCount;){var flags=readable.readByte();0==flags&&(flags=1);var this1=part.tracks,_tmp=new alphaTab.importer.PartConfiguration_TrackConfiguration;_tmp.showStandardNotation=0!=(1&flags),_tmp.showTablature=0!=(2&flags),_tmp.showSlash=0!=(4&flags),this1.push(_tmp),++j}++i}},__class__:alphaTab.importer.PartConfigurationParser},alphaTab.importer.PartConfiguration_Part=$hx_exports.alphaTab.importer.PartConfiguration_Part=function(){this.isMultiRest=!1,this.tracks=null;this.tracks=[]},alphaTab.importer.PartConfiguration_Part.__name__=["alphaTab","importer","PartConfiguration_Part"],alphaTab.importer.PartConfiguration_Part.prototype={__class__:alphaTab.importer.PartConfiguration_Part},alphaTab.importer.PartConfiguration_TrackConfiguration=$hx_exports.alphaTab.importer.PartConfiguration_TrackConfiguration=function(){this.isVisible=!1,this.showSlash=!1,this.showStandardNotation=!1,this.showTablature=!1},alphaTab.importer.PartConfiguration_TrackConfiguration.__name__=["alphaTab","importer","PartConfiguration_TrackConfiguration"],alphaTab.importer.PartConfiguration_TrackConfiguration.prototype={__class__:alphaTab.importer.PartConfiguration_TrackConfiguration},alphaTab.importer.ScoreLoader=$hx_exports.alphaTab.importer.ScoreLoader=function(){},alphaTab.importer.ScoreLoader.__name__=["alphaTab","importer","ScoreLoader"],alphaTab.importer.ScoreLoader.loadScoreAsync=function(path,success,error,settings){null==settings&&(settings=new alphaTab.Settings);var xhr=new XMLHttpRequest;if(xhr.open("GET",path,!0,null,null),xhr.responseType="arraybuffer",xhr.onreadystatechange=function(){if(4==xhr.readyState){var response=xhr.response;if(200==xhr.status||0==xhr.status&&response)try{var buffer=xhr.response,reader=new Uint8Array(buffer),score=alphaTab.importer.ScoreLoader.loadScoreFromBytes(reader,settings);success(score)}catch(exception){if(exception instanceof js._Boot.HaxeError&&(exception=exception.val),!js.Boot.__instanceof(exception,system.Exception))throw exception;error(exception)}else if(0==xhr.status){var tmp=(new alphaTab.importer.FileLoadException).FileLoadException("You are offline!!\n Please Check Your Network.",xhr);error(tmp)}else if(404==xhr.status){var tmp1=(new alphaTab.importer.FileLoadException).FileLoadException("Requested URL not found.",xhr);error(tmp1)}else if(500==xhr.status){var tmp2=(new alphaTab.importer.FileLoadException).FileLoadException("Internel Server Error.",xhr);error(tmp2)}else if("parsererror"==xhr.statusText){var tmp3=(new alphaTab.importer.FileLoadException).FileLoadException("Error.\nParsing JSON Request failed.",xhr);error(tmp3)}else if("timeout"==xhr.statusText){var tmp4=(new alphaTab.importer.FileLoadException).FileLoadException("Request Time out.",xhr);error(tmp4)}else{var tmp5=(new alphaTab.importer.FileLoadException).FileLoadException("Unknow Error: "+xhr.responseText,xhr);error(tmp5)}}},"arraybuffer"!=xhr.responseType){for(var fileContents=VbAjaxLoader("GET",path).toArray(),data="",i=0;i<fileContents.length-1;)data+=Std.string(fileContents[i]),++i;var reader1=alphaTab.importer.ScoreLoader.getBytesFromString(data),score1=alphaTab.importer.ScoreLoader.loadScoreFromBytes(reader1,settings);success(score1)}xhr.send()},alphaTab.importer.ScoreLoader.getBytesFromString=function(s){for(var b=new Uint8Array(s.length),i=0;i<s.length;){var this2=system.Convert.toUInt16(HxOverrides.cca(s,i));b[i]=system.Convert.toUInt8(this2),++i}return b},alphaTab.importer.ScoreLoader.loadScoreFromBytes=function(data,settings){var importers=alphaTab.importer.ScoreImporter.buildImporters();alphaTab.util.Logger.info("ScoreLoader","Loading score from "+Std.string(data.length)+" bytes using "+Std.string(importers.length)+" importers",null);for(var score=null,bb=alphaTab.io.ByteBuffer.fromBuffer(data),importer=HxOverrides.iter(importers);importer.hasNext();){var importer1=importer.next();bb.reset();try{alphaTab.util.Logger.info("ScoreLoader","Importing using importer "+importer1.get_name(),null),importer1.init(bb,settings),score=importer1.readScore(),alphaTab.util.Logger.info("ScoreLoader","Score imported using "+importer1.get_name(),null);break}catch($e0){if($e0 instanceof js._Boot.HaxeError&&($e0=$e0.val),!js.Boot.__instanceof($e0,alphaTab.importer.UnsupportedFormatException)){if(js.Boot.__instanceof($e0,system.Exception)){var e=$e0;throw alphaTab.util.Logger.info("ScoreLoader","Score import failed due to unexpected error: "+Std.string(e),null),new js._Boot.HaxeError(e)}throw $e0}alphaTab.util.Logger.info("ScoreLoader",importer1.get_name()+" does not support the file",null)}}if(null!=score)return score;throw alphaTab.util.Logger.error("ScoreLoader","No compatible importer found for file",null),new js._Boot.HaxeError((new alphaTab.importer.NoCompatibleReaderFoundException).NoCompatibleReaderFoundException())},alphaTab.importer.ScoreLoader.prototype={__class__:alphaTab.importer.ScoreLoader},alphaTab.importer.UnsupportedFormatException=$hx_exports.alphaTab.importer.UnsupportedFormatException=function(){alphaTab.AlphaTabException.call(this)},alphaTab.importer.UnsupportedFormatException.__name__=["alphaTab","importer","UnsupportedFormatException"],alphaTab.importer.UnsupportedFormatException.__super__=alphaTab.AlphaTabException,alphaTab.importer.UnsupportedFormatException.prototype=$extend(alphaTab.AlphaTabException.prototype,{UnsupportedFormatException:function(message){return null==message&&(message="Unsupported format"),this.AlphaTabException(message),this},__class__:alphaTab.importer.UnsupportedFormatException}),alphaTab.io={},alphaTab.io.BitReader=function(source){this._currentByte=0,this._position=0,this._source=null,this._source=source,this._position=8},alphaTab.io.BitReader.__name__=["alphaTab","io","BitReader"],alphaTab.io.BitReader.prototype={readByte:function(){return this.readBits(8)},readBytes:function(count){for(var bytes=new Uint8Array(count),i=0;i<count;)bytes[i]=system.Convert.toUInt8(this.readByte()),++i;return bytes},readBits:function(count){for(var bits=0,i=count-1;0<=i;)bits|=this.readBit()<<i,--i;return bits},readBitsReversed:function(count){for(var bits=0,i=0;i<count;)bits|=this.readBit()<<i,++i;return bits},readBit:function(){if(8<=this._position){if(this._currentByte=this._source.readByte(),-1==this._currentByte)throw new js._Boot.HaxeError((new alphaTab.io.EndOfReaderException).EndOfReaderException());this._position=0}var value=this._currentByte>>8-this._position-1&1;return this._position++,value},readAll:function(){var all=alphaTab.io.ByteBuffer.empty();try{for(;;)all.writeByte(system.Convert.toUInt8(this.readByte()))}catch(__e){if(__e instanceof js._Boot.HaxeError&&(__e=__e.val),!js.Boot.__instanceof(__e,alphaTab.io.EndOfReaderException))throw __e}return all.toArray()},__class__:alphaTab.io.BitReader},alphaTab.io.IReadable=$hx_exports.alphaTab.io.IReadable=function(){},alphaTab.io.IReadable.__name__=["alphaTab","io","IReadable"],alphaTab.io.IReadable.prototype={__class__:alphaTab.io.IReadable},alphaTab.io.IWriteable=$hx_exports.alphaTab.io.IWriteable=function(){},alphaTab.io.IWriteable.__name__=["alphaTab","io","IWriteable"],alphaTab.io.IWriteable.prototype={__class__:alphaTab.io.IWriteable},alphaTab.io.ByteBuffer=function(){this._buffer=null,this._capacity=0,this.set_length(0),this.set_position(0)},alphaTab.io.ByteBuffer.__name__=["alphaTab","io","ByteBuffer"],alphaTab.io.ByteBuffer.__interfaces__=[alphaTab.io.IReadable,alphaTab.io.IWriteable],alphaTab.io.ByteBuffer.empty=function(){return alphaTab.io.ByteBuffer.withCapactiy(0)},alphaTab.io.ByteBuffer.withCapactiy=function(capacity){var buffer=new alphaTab.io.ByteBuffer,this1=new Uint8Array(capacity);return buffer._buffer=this1,buffer._capacity=capacity,buffer},alphaTab.io.ByteBuffer.fromBuffer=function(data){var buffer=new alphaTab.io.ByteBuffer;return buffer._buffer=data,buffer._capacity=buffer.set_length(data.length),buffer},alphaTab.io.ByteBuffer.prototype={get_length:function(){return this.__Length},set_length:function(value){return this.__Length=value},get_position:function(){return this.__Position},set_position:function(value){return this.__Position=value},getBuffer:function(){return this._buffer},reset:function(){this.set_position(0)},skip:function(offset){this.set_position(this.get_position()+offset)},setCapacity:function(value){if(value!=this._capacity){if(0<value){var newBuffer=new Uint8Array(value);if(0<this.get_length()){var src=this._buffer,count=this.get_length();newBuffer.set(src.subarray(0,0+count),0)}this._buffer=newBuffer}else this._buffer=null;this._capacity=value}},readByte:function(){if(this.get_length()-this.get_position()<=0)return-1;var this1=this._buffer,_g1=this.get_position();return this.set_position(_g1+1),this1[_g1]},read:function(buffer,offset,count){var n=this.get_length()-this.get_position();if(count<n&&(n=count),n<=0)return 0;if(n<=8)for(var byteCount=n;0<=--byteCount;)buffer[offset+byteCount]=this._buffer[this.get_position()+byteCount];else{var src=this._buffer,srcOffset=this.get_position();buffer.set(src.subarray(srcOffset,srcOffset+n),offset)}return this.set_position(this.get_position()+n),n},writeByte:function(value){var buffer=new Uint8Array(1);buffer[0]=value,this.write(buffer,0,1)},write:function(buffer,offset,count){var i=this.get_position()+count;if(i>this.get_length()&&(i>this._capacity&&this.ensureCapacity(i),this.set_length(i)),count<=8&&buffer!=this._buffer)for(var byteCount=count;0<=--byteCount;)this._buffer[this.get_position()+byteCount]=buffer[offset+byteCount];else{var dst=this._buffer,dstOffset=this.get_position(),count1=Math.min(count,buffer.length-offset);dst.set(buffer.subarray(offset,offset+count1),dstOffset)}this.set_position(i)},ensureCapacity:function(value){if(value>this._capacity){var newCapacity=value;newCapacity<256&&(newCapacity=256),newCapacity<2*this._capacity&&(newCapacity=2*this._capacity),this.setCapacity(newCapacity)}},readAll:function(){return this.toArray()},toArray:function(){var copy=new Uint8Array(this.get_length()),src=this._buffer,count=this.get_length();return copy.set(src.subarray(0,0+count),0),copy},__class__:alphaTab.io.ByteBuffer},alphaTab.io.EndOfReaderException=function(){alphaTab.AlphaTabException.call(this)},alphaTab.io.EndOfReaderException.__name__=["alphaTab","io","EndOfReaderException"],alphaTab.io.EndOfReaderException.__super__=alphaTab.AlphaTabException,alphaTab.io.EndOfReaderException.prototype=$extend(alphaTab.AlphaTabException.prototype,{EndOfReaderException:function(){return this.AlphaTabException(""),this},__class__:alphaTab.io.EndOfReaderException}),alphaTab.io.IOHelper=function(){},alphaTab.io.IOHelper.__name__=["alphaTab","io","IOHelper"],alphaTab.io.IOHelper.readInt32BE=function(input){return input.readByte()<<24|input.readByte()<<16|input.readByte()<<8|input.readByte()},alphaTab.io.IOHelper.readInt32LE=function(input){var ch1=input.readByte(),ch2=input.readByte(),ch3=input.readByte();return input.readByte()<<24|ch3<<16|ch2<<8|ch1},alphaTab.io.IOHelper.readUInt32LE=function(input){var ch1=input.readByte(),ch2=input.readByte(),ch3=input.readByte(),ch4=input.readByte();return alphaTab.platform.Platform.toUInt32(ch4<<24|ch3<<16|ch2<<8|ch1)},alphaTab.io.IOHelper.readUInt16LE=function(input){var ch1=input.readByte(),ch2=input.readByte();return alphaTab.platform.Platform.toUInt16(ch2<<8|ch1)},alphaTab.io.IOHelper.readInt16LE=function(input){var ch1=input.readByte(),ch2=input.readByte();return alphaTab.platform.Platform.toInt16(ch2<<8|ch1)},alphaTab.io.IOHelper.readUInt32BE=function(input){var ch1=input.readByte(),ch2=input.readByte(),ch3=input.readByte(),ch4=input.readByte();return alphaTab.platform.Platform.toUInt32(ch1<<24|ch2<<16|ch3<<8|ch4)},alphaTab.io.IOHelper.readUInt16BE=function(input){var ch1=input.readByte(),ch2=input.readByte();return alphaTab.platform.Platform.toUInt16(ch1<<8|ch2)},alphaTab.io.IOHelper.readInt16BE=function(input){var ch1=input.readByte(),ch2=input.readByte();return alphaTab.platform.Platform.toInt16(ch1<<8|ch2)},alphaTab.io.IOHelper.readByteArray=function(input,length){var v=new Uint8Array(length);return input.read(v,0,length),v},alphaTab.io.IOHelper.read8BitChars=function(input,length){var b=new Uint8Array(length);return input.read(b,0,b.length),alphaTab.platform.Platform.toString(b,"utf-8")},alphaTab.io.IOHelper.read8BitString=function(input){for(var s="",c=input.readByte();0!=c;)s+=String.fromCharCode(c),c=input.readByte();return s},alphaTab.io.IOHelper.read8BitStringLength=function(input,length){for(var s="",z=-1,i=0;i<length;){var c=input.readByte();0==c&&-1==z&&(z=i),s+=String.fromCharCode(c),++i}var t=s;return 0<=z?HxOverrides.substr(t,0,z):t},alphaTab.io.IOHelper.readSInt8=function(input){var v=input.readByte();return-256*((255&v)>>7)+(255&v)},alphaTab.io.IOHelper.readInt24=function(input,index){var i=input[index]|input[index+1]<<8|input[index+2]<<16;return 8388608==(8388608&i)&&(i|=-16777216),i},alphaTab.io.IOHelper.readInt16=function(input,index){return alphaTab.platform.Platform.toInt16(input[index]|input[index+1]<<8)},haxe.io={},haxe.io.Input=function(){},haxe.io.Input.__name__=["haxe","io","Input"],haxe.io.Input.prototype={readByte:function(){throw new js._Boot.HaxeError("Not implemented")},readBytes:function(s,pos,len){var k=len,b=s.b;if(pos<0||len<0||pos+len>s.length)throw new js._Boot.HaxeError(haxe.io.Error.OutsideBounds);try{for(;0<k;)b[pos]=this.readByte(),++pos,--k}catch(eof){if(eof instanceof js._Boot.HaxeError&&(eof=eof.val),!js.Boot.__instanceof(eof,haxe.io.Eof))throw eof}return len-k},readFullBytes:function(s,pos,len){for(;0<len;){var k=this.readBytes(s,pos,len);if(0==k)throw new js._Boot.HaxeError(haxe.io.Error.Blocked);pos+=k,len-=k}},read:function(nbytes){for(var s=new haxe.io.Bytes(new ArrayBuffer(nbytes)),p=0;0<nbytes;){var k=this.readBytes(s,p,nbytes);if(0==k)throw new js._Boot.HaxeError(haxe.io.Error.Blocked);p+=k,nbytes-=k}return s},readInt16:function(){var ch1=this.readByte(),ch2=this.readByte(),n=this.bigEndian?ch2|ch1<<8:ch1|ch2<<8;return 0!=(32768&n)?n-65536:n},readUInt16:function(){var ch1=this.readByte(),ch2=this.readByte();return this.bigEndian?ch2|ch1<<8:ch1|ch2<<8},readInt32:function(){var ch1=this.readByte(),ch2=this.readByte(),ch3=this.readByte(),ch4=this.readByte();return this.bigEndian?ch4|ch3<<8|ch2<<16|ch1<<24:ch1|ch2<<8|ch3<<16|ch4<<24},readString:function(len){var b=new haxe.io.Bytes(new ArrayBuffer(len));return this.readFullBytes(b,0,len),b.toString()},__class__:haxe.io.Input},alphaTab.io.ReadableInput=function(readable){this._readable=null,this._readable=readable},alphaTab.io.ReadableInput.__name__=["alphaTab","io","ReadableInput"],alphaTab.io.ReadableInput.__super__=haxe.io.Input,alphaTab.io.ReadableInput.prototype=$extend(haxe.io.Input.prototype,{readByte:function(){return this._readable.readByte()},readBytes:function(s,pos,len){var data=new Uint8Array(s.b.bufferValue);return this._readable.read(data,pos,len)},__class__:alphaTab.io.ReadableInput}),alphaTab.io.ZipEntry=function(){this.fullName=null,this.fileName=null,this.data=null},alphaTab.io.ZipEntry.__name__=["alphaTab","io","ZipEntry"],alphaTab.io.ZipEntry.prototype={__class__:alphaTab.io.ZipEntry},alphaTab.io.ZipFile=function(){this.fileFilter=null,this.entries=null;this.entries=[],this.fileFilter=function(s){return!0}},alphaTab.io.ZipFile.__name__=["alphaTab","io","ZipFile"],alphaTab.io.ZipFile.prototype={load:function(s){try{for(var haxeInput=new alphaTab.io.ReadableInput(s),_g_head=new haxe.zip.Reader(haxeInput).read().h;null!=_g_head;){var val=_g_head.item;_g_head=_g_head.next;var entry=val,fullName=entry.fileName;if(null==this.fileFilter||this.fileFilter(fullName)){var i=fullName.lastIndexOf("/"),name=0<=i?HxOverrides.substr(fullName,i+1,null):fullName,data=entry.data.b.bufferValue,this1=this.entries,_tmp=new alphaTab.io.ZipEntry;_tmp.fullName=fullName,_tmp.fileName=name,_tmp.data=new Uint8Array(data),this1.push(_tmp)}}}catch(__e){throw new js._Boot.HaxeError((new alphaTab.importer.UnsupportedFormatException).UnsupportedFormatException("Not a valid zip file"))}},__class__:alphaTab.io.ZipFile},alphaTab.model={},alphaTab.model._AccentuationType={},alphaTab.model._AccentuationType.AccentuationType_Impl_=$hx_exports.alphaTab.model._AccentuationType.AccentuationType_Impl_={},alphaTab.model._AccentuationType.AccentuationType_Impl_.__name__=["alphaTab","model","_AccentuationType","AccentuationType_Impl_"],alphaTab.model._AccentuationType.AccentuationType_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.model._AccentuationType.AccentuationType_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._AccentuationType.AccentuationType_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.model._AccentuationType.AccentuationType_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.model._AccentuationType.AccentuationType_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.model._AccentuationType.AccentuationType_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._AccentuationType.AccentuationType_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.model._AccentuationType.AccentuationType_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._AccentuationType.AccentuationType_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.model._AccentuationType.AccentuationType_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._AccentuationType.AccentuationType_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.model._AccentuationType.AccentuationType_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.model._AccentuationType.AccentuationType_Impl_.toString=function(this1){switch(this1){case 0:return"None";case 1:return"Normal";case 2:return"Heavy"}return""},alphaTab.model._AccentuationType.AccentuationType_Impl_.fromString=function(str){switch(str.toLowerCase()){case"heavy":return 2;case"none":return 0;case"normal":return 1}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.model._AccidentalType={},alphaTab.model._AccidentalType.AccidentalType_Impl_=$hx_exports.alphaTab.model._AccidentalType.AccidentalType_Impl_={},alphaTab.model._AccidentalType.AccidentalType_Impl_.__name__=["alphaTab","model","_AccidentalType","AccidentalType_Impl_"],alphaTab.model._AccidentalType.AccidentalType_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.model._AccidentalType.AccidentalType_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._AccidentalType.AccidentalType_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.model._AccidentalType.AccidentalType_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.model._AccidentalType.AccidentalType_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.model._AccidentalType.AccidentalType_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._AccidentalType.AccidentalType_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.model._AccidentalType.AccidentalType_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._AccidentalType.AccidentalType_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.model._AccidentalType.AccidentalType_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._AccidentalType.AccidentalType_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.model._AccidentalType.AccidentalType_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.model._AccidentalType.AccidentalType_Impl_.toString=function(this1){switch(this1){case 0:return"None";case 1:return"Natural";case 2:return"Sharp";case 3:return"Flat";case 4:return"NaturalQuarterNoteUp";case 5:return"SharpQuarterNoteUp";case 6:return"FlatQuarterNoteUp"}return""},alphaTab.model._AccidentalType.AccidentalType_Impl_.fromString=function(str){switch(str.toLowerCase()){case"flat":return 3;case"flatquarternoteup":return 6;case"natural":return 1;case"naturalquarternoteup":return 4;case"none":return 0;case"sharp":return 2;case"sharpquarternoteup":return 5}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.model.Automation=$hx_exports.alphaTab.model.Automation=function(){this.isLinear=!1,this.type=0,this.value=0,this.ratioPosition=0,this.text=null},alphaTab.model.Automation.__name__=["alphaTab","model","Automation"],alphaTab.model.Automation.buildTempoAutomation=function(isLinear,ratioPosition,value,reference){(reference<1||5<reference)&&(reference=2);var references=new Float32Array([1,.5,1,1.5,2,3]),automation=new alphaTab.model.Automation;return automation.type=0,automation.isLinear=isLinear,automation.ratioPosition=ratioPosition,automation.value=value*references[reference],automation},alphaTab.model.Automation.copyTo=function(src,dst){dst.isLinear=src.isLinear,dst.ratioPosition=src.ratioPosition,dst.text=src.text,dst.type=src.type,dst.value=src.value},alphaTab.model.Automation.prototype={clone:function(){var a=new alphaTab.model.Automation;return alphaTab.model.Automation.copyTo(this,a),a},__class__:alphaTab.model.Automation},alphaTab.model._AutomationType={},alphaTab.model._AutomationType.AutomationType_Impl_=$hx_exports.alphaTab.model._AutomationType.AutomationType_Impl_={},alphaTab.model._AutomationType.AutomationType_Impl_.__name__=["alphaTab","model","_AutomationType","AutomationType_Impl_"],alphaTab.model._AutomationType.AutomationType_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.model._AutomationType.AutomationType_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._AutomationType.AutomationType_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.model._AutomationType.AutomationType_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.model._AutomationType.AutomationType_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.model._AutomationType.AutomationType_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._AutomationType.AutomationType_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.model._AutomationType.AutomationType_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._AutomationType.AutomationType_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.model._AutomationType.AutomationType_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._AutomationType.AutomationType_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.model._AutomationType.AutomationType_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.model._AutomationType.AutomationType_Impl_.toString=function(this1){switch(this1){case 0:return"Tempo";case 1:return"Volume";case 2:return"Instrument";case 3:return"Balance"}return""},alphaTab.model._AutomationType.AutomationType_Impl_.fromString=function(str){switch(str.toLowerCase()){case"balance":return 3;case"instrument":return 2;case"tempo":return 0;case"volume":return 1}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.model.Bar=$hx_exports.alphaTab.model.Bar=function(){this.id=0,this.index=0,this.nextBar=null,this.previousBar=null,this.clef=0,this.clefOttava=0,this.staff=null,this.voices=null,this.simileMark=0,this.id=alphaTab.model.Bar._globalBarId++;this.voices=[],this.clef=4,this.clefOttava=2,this.simileMark=0},alphaTab.model.Bar.__name__=["alphaTab","model","Bar"],alphaTab.model.Bar.copyTo=function(src,dst){dst.id=src.id,dst.index=src.index,dst.clef=src.clef,dst.clefOttava=src.clefOttava,dst.simileMark=src.simileMark},alphaTab.model.Bar.prototype={get_masterBar:function(){return this.staff.track.score.masterBars[this.index]},get_isEmpty:function(){for(var i=0,j=this.voices.length;i<j;){if(!this.voices[i].isEmpty)return!1;++i}return!0},addVoice:function(voice){voice.bar=this,voice.index=this.voices.length,this.voices.push(voice)},finish:function(settings){for(var i=0,j=this.voices.length;i<j;){this.voices[i].finish(settings),++i}},calculateDuration:function(){for(var duration=0,voice=$iterator(this.voices)();voice.hasNext();){var voiceDuration=voice.next().calculateDuration();duration<voiceDuration&&(duration=voiceDuration)}return duration},__class__:alphaTab.model.Bar},alphaTab.model.Beat=$hx_exports.alphaTab.model.Beat=function(){this.id=0,this.index=0,this.previousBeat=null,this.nextBeat=null,this.voice=null,this.notes=null,this.noteStringLookup=null,this.noteValueLookup=null,this.isEmpty=!1,this.whammyStyle=0,this.ottava=0,this.fermata=null,this.isLegatoOrigin=!1,this.minNote=null,this.maxNote=null,this.maxStringNote=null,this.minStringNote=null,this.duration=-4,this.isLetRing=!1,this.isPalmMute=!1,this.automations=null,this.dots=0,this.fadeIn=!1,this.lyrics=null,this.hasRasgueado=!1,this.pop=!1,this.slap=!1,this.tap=!1,this.text=null,this.brushType=0,this.brushDuration=0,this.tupletDenominator=0,this.tupletNumerator=0,this.tupletGroup=null,this.isContinuedWhammy=!1,this.whammyBarType=0,this.whammyBarPoints=null,this.maxWhammyPoint=null,this.minWhammyPoint=null,this.vibrato=0,this.chordId=null,this.graceType=0,this.pickStroke=0,this.tremoloSpeed=null,this.crescendo=0,this.displayStart=0,this.playbackStart=0,this.displayDuration=0,this.playbackDuration=0,this.dynamics=0,this.invertBeamDirection=!1,this.isEffectSlurOrigin=!1,this.effectSlurOrigin=null,this.effectSlurDestination=null,this.id=alphaTab.model.Beat._globalBeatId++,this.whammyBarType=0;this.whammyBarPoints=[];this.notes=[],this.brushType=0,this.vibrato=0,this.graceType=0,this.pickStroke=0,this.duration=4,this.tremoloSpeed=null;this.automations=[],this.dots=0,this.displayStart=0,this.displayDuration=0,this.playbackStart=0,this.playbackDuration=0,this.tupletDenominator=-1,this.tupletNumerator=-1,this.dynamics=5,this.crescendo=0,this.invertBeamDirection=!1,this.ottava=2;this.noteStringLookup={};this.noteValueLookup={},this.whammyStyle=0},alphaTab.model.Beat.__name__=["alphaTab","model","Beat"],alphaTab.model.Beat.copyTo=function(src,dst){if(dst.id=src.id,dst.index=src.index,dst.isEmpty=src.isEmpty,dst.duration=src.duration,dst.dots=src.dots,dst.fadeIn=src.fadeIn,null!=src.lyrics){var size=src.lyrics.length,this1=new Array(size);dst.lyrics=this1;for(var i=0;i<src.lyrics.length;)dst.lyrics[i]=src.lyrics[i],++i}dst.pop=src.pop,dst.hasRasgueado=src.hasRasgueado,dst.slap=src.slap,dst.tap=src.tap,dst.text=src.text,dst.brushType=src.brushType,dst.brushDuration=src.brushDuration,dst.tupletDenominator=src.tupletDenominator,dst.tupletNumerator=src.tupletNumerator,dst.vibrato=src.vibrato,dst.chordId=src.chordId,dst.graceType=src.graceType,dst.pickStroke=src.pickStroke,dst.tremoloSpeed=src.tremoloSpeed,dst.crescendo=src.crescendo,dst.displayStart=src.displayStart,dst.displayDuration=src.displayDuration,dst.playbackStart=src.playbackStart,dst.playbackDuration=src.playbackDuration,dst.dynamics=src.dynamics,dst.isLegatoOrigin=src.isLegatoOrigin,dst.invertBeamDirection=src.invertBeamDirection,dst.whammyBarType=src.whammyBarType,dst.isContinuedWhammy=src.isContinuedWhammy,dst.ottava=src.ottava,dst.whammyStyle=src.whammyStyle},alphaTab.model.Beat.prototype={get_isLastOfVoice:function(){return this.index==this.voice.beats.length-1},get_isLegatoDestination:function(){return null!=this.previousBeat&&this.previousBeat.isLegatoOrigin},get_isRest:function(){return!!this.isEmpty||0==this.notes.length},get_hasTuplet:function(){return(-1!=this.tupletDenominator||-1!=this.tupletNumerator)&&!(1==this.tupletDenominator&&1==this.tupletNumerator)},get_hasWhammyBar:function(){return 0!=this.whammyBarType},get_hasChord:function(){return null!=this.chordId},get_chord:function(){return this.voice.bar.staff.chords[this.chordId]},get_isTremolo:function(){return null!=this.tremoloSpeed},get_absoluteDisplayStart:function(){return this.voice.bar.get_masterBar().start+this.displayStart},get_absolutePlaybackStart:function(){return this.voice.bar.get_masterBar().start+this.playbackStart},get_isEffectSlurDestination:function(){return null!=this.effectSlurOrigin},clone:function(){for(var beat=new alphaTab.model.Beat,id=beat.id,i=0,j=this.whammyBarPoints.length;i<j;)beat.addWhammyBarPoint(this.whammyBarPoints[i].clone()),++i;for(var i1=0,j1=this.notes.length;i1<j1;)beat.addNoteInternal(this.notes[i1].clone(),this.notes[i1].get_realValue()),++i1;alphaTab.model.Beat.copyTo(this,beat);for(var i2=0,j2=this.automations.length;i2<j2;)beat.automations.push(this.automations[i2].clone()),++i2;return beat.id=id,beat},addWhammyBarPoint:function(point){this.whammyBarPoints.push(point),(null==this.maxWhammyPoint||point.value>this.maxWhammyPoint.value)&&(this.maxWhammyPoint=point),(null==this.minWhammyPoint||point.value<this.minWhammyPoint.value)&&(this.minWhammyPoint=point),0==this.whammyBarType&&(this.whammyBarType=1)},removeWhammyBarPoint:function(index){if(!(index<0||index>=this.whammyBarPoints.length)){-1!=index&&this.whammyBarPoints.splice(index,1);var point=this.whammyBarPoints[index];if(point==this.maxWhammyPoint){this.maxWhammyPoint=null;for(var currentPoint=$iterator(this.whammyBarPoints)();currentPoint.hasNext();){var currentPoint1=currentPoint.next();(null==this.maxWhammyPoint||currentPoint1.value>this.maxWhammyPoint.value)&&(this.maxWhammyPoint=currentPoint1)}}if(point==this.minWhammyPoint){this.minWhammyPoint=null;for(var currentPoint2=$iterator(this.whammyBarPoints)();currentPoint2.hasNext();){var currentPoint3=currentPoint2.next();(null==this.minWhammyPoint||currentPoint3.value<this.minWhammyPoint.value)&&(this.minWhammyPoint=currentPoint3)}}}},addNote:function(note){this.addNoteInternal(note,-1)},addNoteInternal:function(note,realValue){null==realValue&&(realValue=-1),note.beat=this,note.index=this.notes.length,this.notes.push(note),note.get_isStringed()&&(this.noteStringLookup[note.string]=note),-1==realValue&&(realValue=note.get_realValue()),this.noteValueLookup[realValue]=note},removeNote:function(note){var index=this.notes.indexOf(note);0<=index&&-1!=index&&this.notes.splice(index,1)},getAutomation:function(type){for(var i=0,j=this.automations.length;i<j;){var automation=this.automations[i];if(automation.type==type)return automation;++i}return null},getNoteOnString:function(string){return this.noteStringLookup.hasOwnProperty(string)?this.noteStringLookup[string]:null},calculateDuration:function(){var ticks=alphaTab.audio.MidiUtils.toTicks(this.duration);return 2==this.dots?ticks=alphaTab.audio.MidiUtils.applyDot(ticks,!0):1==this.dots&&(ticks=alphaTab.audio.MidiUtils.applyDot(ticks,!1)),0<this.tupletDenominator&&0<=this.tupletNumerator&&(ticks=alphaTab.audio.MidiUtils.applyTuplet(ticks,this.tupletNumerator,this.tupletDenominator)),ticks},updateDurations:function(){var ticks=this.calculateDuration();switch(this.playbackDuration=ticks,this.displayDuration=ticks,this.graceType){case 1:case 2:switch(this.duration){case 16:this.playbackDuration=alphaTab.audio.MidiUtils.toTicks(64);break;case 32:this.playbackDuration=alphaTab.audio.MidiUtils.toTicks(128);break;default:this.playbackDuration=alphaTab.audio.MidiUtils.toTicks(32)}break;case 3:this.playbackDuration=this.playbackDuration/2|0;break;default:var previous=this.previousBeat;if(null!=previous&&3==previous.graceType)this.playbackDuration=previous.playbackDuration;else for(;null!=previous&&1==previous.graceType;)this.playbackDuration=this.playbackDuration-previous.playbackDuration,previous=previous.previousBeat}},finishTuplet:function(){var previousBeat=this.previousBeat,currentTupletGroup=null!=previousBeat?previousBeat.tupletGroup:null;(this.get_hasTuplet()||0!=this.graceType&&null!=currentTupletGroup)&&(null!=previousBeat&&null!=currentTupletGroup&&currentTupletGroup.check(this)||(currentTupletGroup=new alphaTab.model.TupletGroup(this.voice)).check(this),this.tupletGroup=currentTupletGroup)},finish:function(settings){var displayMode=null==settings?0:settings.notation.notationMode,isGradual="grad"==this.text||"grad."==this.text;isGradual&&1==displayMode&&(this.text="");var needCopyBeatForBend=!1;this.minNote=null,this.maxNote=null,this.minStringNote=null,this.maxStringNote=null;for(var visibleNotes=0,isEffectSlurBeat=!1,i=0,j=this.notes.length;i<j;){var note=this.notes[i];if(note.finish(settings),note.isLetRing&&(this.isLetRing=!0),note.isPalmMute&&(this.isPalmMute=!0),1==displayMode&&note.get_hasBend()&&3!=this.graceType){if(!note.get_isTieOrigin())switch(note.bendType){case 2:case 7:case 8:needCopyBeatForBend=!0}isGradual||1==note.bendStyle?(isGradual=!0,needCopyBeatForBend=!(note.bendStyle=1)):note.bendStyle=2}note.isVisible&&(++visibleNotes,(null==this.minNote||note.get_realValue()<this.minNote.get_realValue())&&(this.minNote=note),(null==this.maxNote||note.get_realValue()>this.maxNote.get_realValue())&&(this.maxNote=note),(null==this.minStringNote||note.string<this.minStringNote.string)&&(this.minStringNote=note),(null==this.maxStringNote||note.string>this.maxStringNote.string)&&(this.maxStringNote=note),note.hasEffectSlur&&(isEffectSlurBeat=!0)),++i}if(isEffectSlurBeat&&(null!=this.effectSlurOrigin?(this.effectSlurOrigin.effectSlurDestination=this.nextBeat,this.effectSlurOrigin.effectSlurDestination.effectSlurOrigin=this.effectSlurOrigin,this.effectSlurOrigin=null):(this.isEffectSlurOrigin=!0,this.effectSlurDestination=this.nextBeat,this.effectSlurDestination.effectSlurOrigin=this)),0<this.notes.length&&0==visibleNotes&&(this.isEmpty=!0),this.get_isRest()||this.isLetRing&&this.isPalmMute)this.get_isRest()&&null!=this.previousBeat&&null!=settings&&0==settings.notation.notationMode&&(this.previousBeat.isLetRing&&(this.isLetRing=!0),this.previousBeat.isPalmMute&&(this.isPalmMute=!0));else for(var currentBeat=this.previousBeat;null!=currentBeat&&currentBeat.get_isRest();)this.isLetRing||(currentBeat.isLetRing=!1),this.isPalmMute||(currentBeat.isPalmMute=!1),currentBeat=currentBeat.previousBeat;if(0<this.whammyBarPoints.length&&1==this.whammyBarType){1==displayMode&&(this.whammyStyle=isGradual?1:2);var isContinuedWhammy=this.isContinuedWhammy=null!=this.previousBeat&&this.previousBeat.get_hasWhammyBar();if(4==this.whammyBarPoints.length){var origin=this.whammyBarPoints[0],middle1=this.whammyBarPoints[1],middle2=this.whammyBarPoints[2],destination=this.whammyBarPoints[3];middle1.value==middle2.value?origin.value<middle1.value&&middle1.value<destination.value||origin.value>middle1.value&&middle1.value>destination.value?(0==origin.value||isContinuedWhammy?this.whammyBarType=2:this.whammyBarType=6,this.whammyBarPoints.splice(2,1),this.whammyBarPoints.splice(1,1)):origin.value>middle1.value&&middle1.value<destination.value||origin.value<middle1.value&&middle1.value>destination.value?(this.whammyBarType=3,middle1.offset!=middle2.offset&&1!=displayMode||this.whammyBarPoints.splice(2,1)):origin.value==middle1.value&&middle1.value==destination.value?(0==origin.value||isContinuedWhammy?this.whammyBarType=4:this.whammyBarType=5,this.whammyBarPoints.splice(2,1),this.whammyBarPoints.splice(1,1)):alphaTab.util.Logger.warning("Model","Unsupported whammy type detected, fallback to custom",null):alphaTab.util.Logger.warning("Model","Unsupported whammy type detected, fallback to custom",null)}}if(this.updateDurations(),needCopyBeatForBend){var cloneBeat=this.clone();cloneBeat.id=alphaTab.model.Beat._globalBeatId++;for(var i1=0,j1=cloneBeat.notes.length;i1<j1;){var cloneNote=cloneBeat.notes[i1];cloneNote.bendType=0,cloneNote.maxBendPoint=null;cloneNote.bendPoints=[],cloneNote.bendStyle=0,cloneNote.id=alphaTab.model.Note.GlobalNoteId++;var note1=this.notes[i1];if(note1.get_hasBend()&&note1.get_isTieOrigin()){var tieDestination=alphaTab.model.Note.nextNoteOnSameLine(note1);if(null!=tieDestination&&tieDestination.get_hasBend()){cloneNote.bendType=5;var lastPoint=note1.bendPoints[note1.bendPoints.length-1];cloneNote.addBendPoint(new alphaTab.model.BendPoint(0,lastPoint.value)),cloneNote.addBendPoint(new alphaTab.model.BendPoint(60,lastPoint.value))}}cloneNote.isTieDestination=!0,++i1}this.graceType=3,this.updateDurations(),this.voice.insertBeat(this,cloneBeat)}this.fermata=this.voice.bar.get_masterBar().getFermata(this)},isBefore:function(beat){return this.voice.bar.index<beat.voice.bar.index||beat.voice.bar.index==this.voice.bar.index&&this.index<beat.index},isAfter:function(beat){return this.voice.bar.index>beat.voice.bar.index||beat.voice.bar.index==this.voice.bar.index&&this.index>beat.index},hasNoteOnString:function(noteString){return this.noteStringLookup.hasOwnProperty(noteString)},getNoteWithRealValue:function(noteRealValue){return this.noteValueLookup.hasOwnProperty(noteRealValue)?this.noteValueLookup[noteRealValue]:null},__class__:alphaTab.model.Beat},alphaTab.model.BendPoint=$hx_exports.alphaTab.model.BendPoint=function(offset,value){null==value&&(value=0),null==offset&&(offset=0),this.offset=0,this.value=0,this.offset=offset,this.value=value},alphaTab.model.BendPoint.__name__=["alphaTab","model","BendPoint"],alphaTab.model.BendPoint.copyTo=function(src,dst){dst.offset=src.offset,dst.value=src.value},alphaTab.model.BendPoint.prototype={clone:function(){var point=new alphaTab.model.BendPoint(0,0);return alphaTab.model.BendPoint.copyTo(this,point),point},__class__:alphaTab.model.BendPoint},alphaTab.model._BendStyle={},alphaTab.model._BendStyle.BendStyle_Impl_=$hx_exports.alphaTab.model._BendStyle.BendStyle_Impl_={},alphaTab.model._BendStyle.BendStyle_Impl_.__name__=["alphaTab","model","_BendStyle","BendStyle_Impl_"],alphaTab.model._BendStyle.BendStyle_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.model._BendStyle.BendStyle_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._BendStyle.BendStyle_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.model._BendStyle.BendStyle_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.model._BendStyle.BendStyle_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.model._BendStyle.BendStyle_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._BendStyle.BendStyle_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.model._BendStyle.BendStyle_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._BendStyle.BendStyle_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.model._BendStyle.BendStyle_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._BendStyle.BendStyle_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.model._BendStyle.BendStyle_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.model._BendStyle.BendStyle_Impl_.toString=function(this1){switch(this1){case 0:return"Default";case 1:return"Gradual";case 2:return"Fast"}return""},alphaTab.model._BendStyle.BendStyle_Impl_.fromString=function(str){switch(str.toLowerCase()){case"default":return 0;case"fast":return 2;case"gradual":return 1}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.model._BendType={},alphaTab.model._BendType.BendType_Impl_=$hx_exports.alphaTab.model._BendType.BendType_Impl_={},alphaTab.model._BendType.BendType_Impl_.__name__=["alphaTab","model","_BendType","BendType_Impl_"],alphaTab.model._BendType.BendType_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.model._BendType.BendType_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._BendType.BendType_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.model._BendType.BendType_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.model._BendType.BendType_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.model._BendType.BendType_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._BendType.BendType_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.model._BendType.BendType_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._BendType.BendType_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.model._BendType.BendType_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._BendType.BendType_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.model._BendType.BendType_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.model._BendType.BendType_Impl_.toString=function(this1){switch(this1){case 0:return"None";case 1:return"Custom";case 2:return"Bend";case 3:return"Release";case 4:return"BendRelease";case 5:return"Hold";case 6:return"Prebend";case 7:return"PrebendBend";case 8:return"PrebendRelease"}return""},alphaTab.model._BendType.BendType_Impl_.fromString=function(str){switch(str.toLowerCase()){case"bend":return 2;case"bendrelease":return 4;case"custom":return 1;case"hold":return 5;case"none":return 0;case"prebend":return 6;case"prebendbend":return 7;case"prebendrelease":return 8;case"release":return 3}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.model._BrushType={},alphaTab.model._BrushType.BrushType_Impl_=$hx_exports.alphaTab.model._BrushType.BrushType_Impl_={},alphaTab.model._BrushType.BrushType_Impl_.__name__=["alphaTab","model","_BrushType","BrushType_Impl_"],alphaTab.model._BrushType.BrushType_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.model._BrushType.BrushType_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._BrushType.BrushType_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.model._BrushType.BrushType_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.model._BrushType.BrushType_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.model._BrushType.BrushType_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._BrushType.BrushType_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.model._BrushType.BrushType_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._BrushType.BrushType_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.model._BrushType.BrushType_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._BrushType.BrushType_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.model._BrushType.BrushType_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.model._BrushType.BrushType_Impl_.toString=function(this1){switch(this1){case 0:return"None";case 1:return"BrushUp";case 2:return"BrushDown";case 3:return"ArpeggioUp";case 4:return"ArpeggioDown"}return""},alphaTab.model._BrushType.BrushType_Impl_.fromString=function(str){switch(str.toLowerCase()){case"arpeggiodown":return 4;case"arpeggioup":return 3;case"brushdown":return 2;case"brushup":return 1;case"none":return 0}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.model.Chord=$hx_exports.alphaTab.model.Chord=function(){this.name=null,this.firstFret=0,this.strings=null,this.barreFrets=null,this.staff=null,this.showName=!1,this.showDiagram=!1,this.showFingering=!1;this.strings=[];this.barreFrets=[],this.showDiagram=!0,this.showName=!0,this.showFingering=!0,this.firstFret=1},alphaTab.model.Chord.__name__=["alphaTab","model","Chord"],alphaTab.model.Chord.copyTo=function(src,dst){dst.firstFret=src.firstFret,dst.name=src.name,dst.strings=src.strings.slice(0),dst.barreFrets=src.barreFrets.slice(0),dst.showName=src.showName,dst.showDiagram=src.showDiagram,dst.showFingering=src.showFingering},alphaTab.model.Chord.prototype={__class__:alphaTab.model.Chord},alphaTab.model._Clef={},alphaTab.model._Clef.Clef_Impl_=$hx_exports.alphaTab.model._Clef.Clef_Impl_={},alphaTab.model._Clef.Clef_Impl_.__name__=["alphaTab","model","_Clef","Clef_Impl_"],alphaTab.model._Clef.Clef_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.model._Clef.Clef_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._Clef.Clef_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.model._Clef.Clef_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.model._Clef.Clef_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.model._Clef.Clef_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._Clef.Clef_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.model._Clef.Clef_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._Clef.Clef_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.model._Clef.Clef_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._Clef.Clef_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.model._Clef.Clef_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.model._Clef.Clef_Impl_.toString=function(this1){switch(this1){case 0:return"Neutral";case 1:return"C3";case 2:return"C4";case 3:return"F4";case 4:return"G2"}return""},alphaTab.model._Clef.Clef_Impl_.fromString=function(str){switch(str.toLowerCase()){case"c3":return 1;case"c4":return 2;case"f4":return 3;case"g2":return 4;case"neutral":return 0}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.model._CrescendoType={},alphaTab.model._CrescendoType.CrescendoType_Impl_=$hx_exports.alphaTab.model._CrescendoType.CrescendoType_Impl_={},alphaTab.model._CrescendoType.CrescendoType_Impl_.__name__=["alphaTab","model","_CrescendoType","CrescendoType_Impl_"],alphaTab.model._CrescendoType.CrescendoType_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.model._CrescendoType.CrescendoType_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._CrescendoType.CrescendoType_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.model._CrescendoType.CrescendoType_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.model._CrescendoType.CrescendoType_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.model._CrescendoType.CrescendoType_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._CrescendoType.CrescendoType_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.model._CrescendoType.CrescendoType_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._CrescendoType.CrescendoType_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.model._CrescendoType.CrescendoType_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._CrescendoType.CrescendoType_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.model._CrescendoType.CrescendoType_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.model._CrescendoType.CrescendoType_Impl_.toString=function(this1){switch(this1){case 0:return"None";case 1:return"Crescendo";case 2:return"Decrescendo"}return""},alphaTab.model._CrescendoType.CrescendoType_Impl_.fromString=function(str){switch(str.toLowerCase()){case"crescendo":return 1;case"decrescendo":return 2;case"none":return 0}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.model._Duration={},alphaTab.model._Duration.Duration_Impl_=$hx_exports.alphaTab.model._Duration.Duration_Impl_={},alphaTab.model._Duration.Duration_Impl_.__name__=["alphaTab","model","_Duration","Duration_Impl_"],alphaTab.model._Duration.Duration_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.model._Duration.Duration_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._Duration.Duration_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.model._Duration.Duration_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.model._Duration.Duration_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.model._Duration.Duration_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._Duration.Duration_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.model._Duration.Duration_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._Duration.Duration_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.model._Duration.Duration_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._Duration.Duration_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.model._Duration.Duration_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.model._Duration.Duration_Impl_.toString=function(this1){switch(this1){case-4:return"QuadrupleWhole";case-2:return"DoubleWhole";case 1:return"Whole";case 2:return"Half";case 4:return"Quarter";case 8:return"Eighth";case 16:return"Sixteenth";case 32:return"ThirtySecond";case 64:return"SixtyFourth";case 128:return"OneHundredTwentyEighth";case 256:return"TwoHundredFiftySixth"}return""},alphaTab.model._Duration.Duration_Impl_.fromString=function(str){switch(str.toLowerCase()){case"doublewhole":return-2;case"eighth":return 8;case"half":return 2;case"onehundredtwentyeighth":return 128;case"quadruplewhole":return-4;case"quarter":return 4;case"sixteenth":return 16;case"sixtyfourth":return 64;case"thirtysecond":return 32;case"twohundredfiftysixth":return 256;case"whole":return 1}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.model._DynamicValue={},alphaTab.model._DynamicValue.DynamicValue_Impl_=$hx_exports.alphaTab.model._DynamicValue.DynamicValue_Impl_={},alphaTab.model._DynamicValue.DynamicValue_Impl_.__name__=["alphaTab","model","_DynamicValue","DynamicValue_Impl_"],alphaTab.model._DynamicValue.DynamicValue_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.model._DynamicValue.DynamicValue_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._DynamicValue.DynamicValue_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.model._DynamicValue.DynamicValue_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.model._DynamicValue.DynamicValue_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.model._DynamicValue.DynamicValue_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._DynamicValue.DynamicValue_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.model._DynamicValue.DynamicValue_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._DynamicValue.DynamicValue_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.model._DynamicValue.DynamicValue_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._DynamicValue.DynamicValue_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.model._DynamicValue.DynamicValue_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.model._DynamicValue.DynamicValue_Impl_.toString=function(this1){switch(this1){case 0:return"PPP";case 1:return"PP";case 2:return"P";case 3:return"MP";case 4:return"MF";case 5:return"F";case 6:return"FF";case 7:return"FFF"}return""},alphaTab.model._DynamicValue.DynamicValue_Impl_.fromString=function(str){switch(str.toLowerCase()){case"f":return 5;case"ff":return 6;case"fff":return 7;case"mf":return 4;case"mp":return 3;case"p":return 2;case"pp":return 1;case"ppp":return 0}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.model.Fermata=$hx_exports.alphaTab.model.Fermata=function(){this.type=0,this.length=0},alphaTab.model.Fermata.__name__=["alphaTab","model","Fermata"],alphaTab.model.Fermata.copyTo=function(src,dst){dst.type=src.type,dst.length=src.length},alphaTab.model.Fermata.prototype={__class__:alphaTab.model.Fermata},alphaTab.model._FermataType={},alphaTab.model._FermataType.FermataType_Impl_=$hx_exports.alphaTab.model._FermataType.FermataType_Impl_={},alphaTab.model._FermataType.FermataType_Impl_.__name__=["alphaTab","model","_FermataType","FermataType_Impl_"],alphaTab.model._FermataType.FermataType_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.model._FermataType.FermataType_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._FermataType.FermataType_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.model._FermataType.FermataType_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.model._FermataType.FermataType_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.model._FermataType.FermataType_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._FermataType.FermataType_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.model._FermataType.FermataType_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._FermataType.FermataType_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.model._FermataType.FermataType_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._FermataType.FermataType_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.model._FermataType.FermataType_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.model._FermataType.FermataType_Impl_.toString=function(this1){switch(this1){case 0:return"Short";case 1:return"Medium";case 2:return"Long"}return""},alphaTab.model._FermataType.FermataType_Impl_.fromString=function(str){switch(str.toLowerCase()){case"long":return 2;case"medium":return 1;case"short":return 0}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.model._Fingers={},alphaTab.model._Fingers.Fingers_Impl_=$hx_exports.alphaTab.model._Fingers.Fingers_Impl_={},alphaTab.model._Fingers.Fingers_Impl_.__name__=["alphaTab","model","_Fingers","Fingers_Impl_"],alphaTab.model._Fingers.Fingers_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.model._Fingers.Fingers_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._Fingers.Fingers_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.model._Fingers.Fingers_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.model._Fingers.Fingers_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.model._Fingers.Fingers_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._Fingers.Fingers_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.model._Fingers.Fingers_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._Fingers.Fingers_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.model._Fingers.Fingers_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._Fingers.Fingers_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.model._Fingers.Fingers_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.model._Fingers.Fingers_Impl_.toString=function(this1){switch(this1){case-2:return"Unknown";case-1:return"NoOrDead";case 0:return"Thumb";case 1:return"IndexFinger";case 2:return"MiddleFinger";case 3:return"AnnularFinger";case 4:return"LittleFinger"}return""},alphaTab.model._Fingers.Fingers_Impl_.fromString=function(str){switch(str.toLowerCase()){case"annularfinger":return 3;case"indexfinger":return 1;case"littlefinger":return 4;case"middlefinger":return 2;case"noordead":return-1;case"thumb":return 0;case"unknown":return-2}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.model._GraceType={},alphaTab.model._GraceType.GraceType_Impl_=$hx_exports.alphaTab.model._GraceType.GraceType_Impl_={},alphaTab.model._GraceType.GraceType_Impl_.__name__=["alphaTab","model","_GraceType","GraceType_Impl_"],alphaTab.model._GraceType.GraceType_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.model._GraceType.GraceType_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._GraceType.GraceType_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.model._GraceType.GraceType_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.model._GraceType.GraceType_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.model._GraceType.GraceType_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._GraceType.GraceType_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.model._GraceType.GraceType_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._GraceType.GraceType_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.model._GraceType.GraceType_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._GraceType.GraceType_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.model._GraceType.GraceType_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.model._GraceType.GraceType_Impl_.toString=function(this1){switch(this1){case 0:return"None";case 1:return"OnBeat";case 2:return"BeforeBeat";case 3:return"BendGrace"}return""},alphaTab.model._GraceType.GraceType_Impl_.fromString=function(str){switch(str.toLowerCase()){case"beforebeat":return 2;case"bendgrace":return 3;case"none":return 0;case"onbeat":return 1}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.model._HarmonicType={},alphaTab.model._HarmonicType.HarmonicType_Impl_=$hx_exports.alphaTab.model._HarmonicType.HarmonicType_Impl_={},alphaTab.model._HarmonicType.HarmonicType_Impl_.__name__=["alphaTab","model","_HarmonicType","HarmonicType_Impl_"],alphaTab.model._HarmonicType.HarmonicType_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.model._HarmonicType.HarmonicType_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._HarmonicType.HarmonicType_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.model._HarmonicType.HarmonicType_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.model._HarmonicType.HarmonicType_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.model._HarmonicType.HarmonicType_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._HarmonicType.HarmonicType_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.model._HarmonicType.HarmonicType_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._HarmonicType.HarmonicType_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.model._HarmonicType.HarmonicType_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._HarmonicType.HarmonicType_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.model._HarmonicType.HarmonicType_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.model._HarmonicType.HarmonicType_Impl_.toString=function(this1){switch(this1){case 0:return"None";case 1:return"Natural";case 2:return"Artificial";case 3:return"Pinch";case 4:return"Tap";case 5:return"Semi";case 6:return"Feedback"}return""},alphaTab.model._HarmonicType.HarmonicType_Impl_.fromString=function(str){switch(str.toLowerCase()){case"artificial":return 2;case"feedback":return 6;case"natural":return 1;case"none":return 0;case"pinch":return 3;case"semi":return 5;case"tap":return 4}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.model.JsonConverter=function(){},alphaTab.model.JsonConverter.__name__=["alphaTab","model","JsonConverter"],alphaTab.model.JsonConverter.scoreToJson=function(score){var obj=alphaTab.model.JsonConverter.scoreToJsObject(score);return JSON.stringify(obj,function(k,v){return ArrayBuffer.isView(v)?Array.apply([],v):v})},alphaTab.model.JsonConverter.jsonToScore=function(json,settings){return alphaTab.model.JsonConverter.jsObjectToScore(alphaTab.model.JsonConverter.jsObjectToScore(JSON.parse(json),settings),null)},alphaTab.model.JsonConverter.scoreToJsObject=function(score){var score2={};alphaTab.model.Score.copyTo(score,score2);score2.masterBars=[];score2.tracks=[],score2.stylesheet={},alphaTab.model.RenderStylesheet.copyTo(score.stylesheet,score2.stylesheet);for(var i=0;i<score.masterBars.length;){var masterBar=score.masterBars[i],masterBar2={};alphaTab.model.MasterBar.copyTo(masterBar,masterBar2),null!=masterBar.tempoAutomation&&(masterBar2.tempoAutomation={},alphaTab.model.Automation.copyTo(masterBar.tempoAutomation,masterBar2.tempoAutomation)),null!=masterBar.section&&(masterBar2.section={},alphaTab.model.Section.copyTo(masterBar.section,masterBar2.section)),masterBar2.fermata={};for(var this3=masterBar.fermata,offset=$iterator(Object.keys(this3))();offset.hasNext();){var offset1=offset.next(),fermata=masterBar.fermata[offset1],fermata2=masterBar2.fermata[offset1]={};alphaTab.model.Fermata.copyTo(fermata,fermata2)}score2.masterBars.push(masterBar2),++i}for(var t=0;t<score.tracks.length;){var track=score.tracks[t],track2={color:{}};alphaTab.model.Track.copyTo(track,track2),track2.playbackInfo={},alphaTab.model.PlaybackInformation.copyTo(track.playbackInfo,track2.playbackInfo);track2.staves=[];for(var s=0;s<track.staves.length;){var staff=track.staves[s],staff2={};alphaTab.model.Staff.copyTo(staff,staff2);staff2.chords={};for(var this6=staff.chords,key=$iterator(Object.keys(this6))();key.hasNext();){var key1=key.next(),chord=staff.chords[key1],chord2={};alphaTab.model.Chord.copyTo(chord,chord2),staff2.chords[key1]=chord2}staff2.bars=[];for(var b=0;b<staff.bars.length;){var bar=staff.bars[b],bar2={};alphaTab.model.Bar.copyTo(bar,bar2);bar2.voices=[];for(var v=0;v<bar.voices.length;){var voice=bar.voices[v],voice2={};alphaTab.model.Voice.copyTo(voice,voice2);voice2.beats=[];for(var bb=0;bb<voice.beats.length;){var beat=voice.beats[bb],beat2={};alphaTab.model.Beat.copyTo(beat,beat2);beat2.automations=[];for(var a=0;a<beat.automations.length;){var automation={};alphaTab.model.Automation.copyTo(beat.automations[a],automation),beat2.automations.push(automation),++a}beat2.whammyBarPoints=[];for(var i1=0;i1<beat.whammyBarPoints.length;){var point={};alphaTab.model.BendPoint.copyTo(beat.whammyBarPoints[i1],point),beat2.whammyBarPoints.push(point),++i1}beat2.notes=[];for(var n=0;n<beat.notes.length;){var note=beat.notes[n],dynamicNote2={},note2=dynamicNote2;alphaTab.model.Note.copyTo(note,note2),note.isTieDestination&&(dynamicNote2.tieOriginId=note.tieOrigin.id),note.get_isTieOrigin()&&(dynamicNote2.tieDestinationId=note.tieDestination.id),note.isSlurDestination&&(dynamicNote2.slurOriginId=note.slurOrigin.id),note.get_isSlurOrigin()&&(dynamicNote2.slurDestinationId=note.slurDestination.id),note.get_isHammerPullDestination()&&(dynamicNote2.hammerPullOriginId=note.hammerPullOrigin.id),note.isHammerPullOrigin&&(dynamicNote2.hammerPullDestinationId=note.hammerPullDestination.id);note2.bendPoints=[];for(var i2=0;i2<note.bendPoints.length;){var point1={};alphaTab.model.BendPoint.copyTo(note.bendPoints[i2],point1),note2.bendPoints.push(point1),++i2}beat2.notes.push(note2),++n}voice2.beats.push(beat2),++bb}bar2.voices.push(voice2),++v}staff2.bars.push(bar2),++b}track2.staves.push(staff2),++s}score2.tracks.push(track2),++t}return score2},alphaTab.model.JsonConverter.jsObjectToScore=function(jsObject,settings){var score=jsObject,score2=new alphaTab.model.Score;alphaTab.model.Score.copyTo(score,score2),alphaTab.model.RenderStylesheet.copyTo(score.stylesheet,score2.stylesheet);for(var allNotes={},notesToLink=[],i=0;i<score.masterBars.length;){var masterBar=score.masterBars[i],masterBar2=new alphaTab.model.MasterBar;alphaTab.model.MasterBar.copyTo(masterBar,masterBar2),null!=masterBar.tempoAutomation&&(masterBar2.tempoAutomation=new alphaTab.model.Automation,alphaTab.model.Automation.copyTo(masterBar.tempoAutomation,masterBar2.tempoAutomation)),null!=masterBar.section&&(masterBar2.section=new alphaTab.model.Section,alphaTab.model.Section.copyTo(masterBar.section,masterBar2.section));for(var this3=masterBar.fermata,offset=$iterator(Object.keys(this3))();offset.hasNext();){var offset1=offset.next(),fermata=masterBar.fermata[offset1],fermata2=new alphaTab.model.Fermata;alphaTab.model.Fermata.copyTo(fermata,fermata2),masterBar2.addFermata(offset1,fermata2)}score2.addMasterBar(masterBar2),++i}for(var t=0;t<score.tracks.length;){var track=score.tracks[t],track2=new alphaTab.model.Track(track.staves.length);alphaTab.model.Track.copyTo(track,track2),score2.addTrack(track2),alphaTab.model.PlaybackInformation.copyTo(track.playbackInfo,track2.playbackInfo);for(var s=0;s<track.staves.length;){var staff=track.staves[s],staff2=track2.staves[s];alphaTab.model.Staff.copyTo(staff,staff2);for(var this4=staff.chords,key=$iterator(Object.keys(this4))();key.hasNext();){var key1=key.next(),chord=staff.chords[key1],chord2=new alphaTab.model.Chord;alphaTab.model.Chord.copyTo(chord,chord2),staff2.addChord(key1,chord2)}for(var b=0;b<staff.bars.length;){var bar=staff.bars[b],bar2=new alphaTab.model.Bar;alphaTab.model.Bar.copyTo(bar,bar2),staff2.addBar(bar2);for(var v=0;v<bar.voices.length;){var voice=bar.voices[v],voice2=new alphaTab.model.Voice;alphaTab.model.Voice.copyTo(voice,voice2),bar2.addVoice(voice2);for(var bb=0;bb<voice.beats.length;){var beat=voice.beats[bb],beat2=new alphaTab.model.Beat;alphaTab.model.Beat.copyTo(beat,beat2),voice2.addBeat(beat2);for(var a=0;a<beat.automations.length;){var automation=new alphaTab.model.Automation;alphaTab.model.Automation.copyTo(beat.automations[a],automation),beat2.automations.push(automation),++a}for(var i1=0;i1<beat.whammyBarPoints.length;){var point=new alphaTab.model.BendPoint(0,0);alphaTab.model.BendPoint.copyTo(beat.whammyBarPoints[i1],point),beat2.addWhammyBarPoint(point),++i1}for(var n=0;n<beat.notes.length;){var note=beat.notes[n],note2=new alphaTab.model.Note;alphaTab.model.Note.copyTo(note,note2),beat2.addNote(note2),allNotes[note2.id]=note2,"TieOriginId"in note&&(note2.TieOriginId=note.TieOriginId,notesToLink.push(note2)),"TieDestinationId"in note&&(note2.TieDestinationId=note.TieDestinationId,notesToLink.push(note2)),"SlurOriginId"in note&&(note2.SlurOriginId=note.SlurOriginId,notesToLink.push(note2)),"SlurDestinationId"in note&&(note2.SlurDestinationId=note.SlurDestinationId,notesToLink.push(note2)),"HammerPullDestinationId"in note&&(note2.HammerPullDestinationId=note.HammerPullDestinationId,notesToLink.push(note2)),"HammerPullDestinationId"in note&&(note2.HammerPullDestinationId=note.HammerPullDestinationId,notesToLink.push(note2));for(var i2=0;i2<note.bendPoints.length;){var point1=new alphaTab.model.BendPoint(0,0);alphaTab.model.BendPoint.copyTo(note.bendPoints[i2],point1),note2.addBendPoint(point1),++i2}++n}++bb}++v}++b}++s}++t}for(var note1=$iterator(notesToLink)();note1.hasNext();){var note3=note1.next();if("TieOriginId"in note3){var originId=note3.TieOriginId;note3.tieOrigin=allNotes[originId]}if("TieDestinationId"in note3){var destinationId=note3.TieDestinationId;note3.tieDestination=allNotes[destinationId]}if("SlurOriginId"in note3){var originId1=note3.SlurOriginId;note3.slurOrigin=allNotes[originId1]}if("SlurDestinationId"in note3){var destinationId1=note3.SlurDestinationId;note3.slurDestination=allNotes[destinationId1]}if("HammerPullOriginId"in note3){var originId2=note3.HammerPullOriginId;note3.hammerPullOrigin=allNotes[originId2]}if("HammerPullDestinationId"in note3){var destinationId2=note3.HammerPullDestinationId;note3.hammerPullDestination=allNotes[destinationId2]}}return score2.finish(settings),score2},alphaTab.model.JsonConverter.jsObjectToMidiFile=function(midi){var midi2=new alphaTab.audio.synth.midi.MidiFile;midi2.division=midi.division;for(var midiEvent=$iterator(midi.events)();midiEvent.hasNext();){var midiEvent2,midiEvent1=midiEvent.next(),tick=midiEvent1.tick,message=midiEvent1.message;switch(midiEvent1.type){case"alphaTab.audio.synth.midi.event.MetaDataEvent":(midiEvent2=new alphaTab.audio.synth.midi.event.MetaDataEvent(tick,0,0,midiEvent1.data)).message=message;break;case"alphaTab.audio.synth.midi.event.MetaNumberEvent":(midiEvent2=new alphaTab.audio.synth.midi.event.MetaNumberEvent(tick,0,0,midiEvent1.value)).message=message;break;case"alphaTab.audio.synth.midi.event.SystemExclusiveEvent":(midiEvent2=new alphaTab.audio.synth.midi.event.SystemExclusiveEvent(tick,0,0,midiEvent1.data)).message=message;break;default:(midiEvent2=new alphaTab.audio.synth.midi.event.MidiEvent(tick,0,0,0)).message=message}midi2.events.push(midiEvent2)}return midi2},alphaTab.model.JsonConverter.midiFileToJsObject=function(midi){var midi2={};midi2.division=midi.division;var midiEvents=[];midi2.events=midiEvents;for(var midiEvent=$iterator(midi.events)();midiEvent.hasNext();){var midiEvent1=midiEvent.next(),midiEvent2={};switch(midiEvents.push(midiEvent2),midiEvent2.type=Type.getClassName(null==midiEvent1?null:js.Boot.getClass(midiEvent1)),midiEvent2.tick=midiEvent1.tick,midiEvent2.message=midiEvent1.message,midiEvent2.type){case"alphaTab.audio.synth.midi.event.MetaDataEvent":var metadata=js.Boot.__cast(midiEvent1,alphaTab.audio.synth.midi.event.MetaDataEvent);midiEvent2.data=metadata.data;break;case"alphaTab.audio.synth.midi.event.MetaNumberEvent":var metanumber=js.Boot.__cast(midiEvent1,alphaTab.audio.synth.midi.event.MetaNumberEvent);midiEvent2.value=metanumber.value;break;case"alphaTab.audio.synth.midi.event.SystemExclusiveEvent":var sysex=js.Boot.__cast(midiEvent1,alphaTab.audio.synth.midi.event.SystemExclusiveEvent);midiEvent2.data=sysex.data}}return midi2},alphaTab.model.JsonConverter.prototype={__class__:alphaTab.model.JsonConverter},alphaTab.model._KeySignature={},alphaTab.model._KeySignature.KeySignature_Impl_=$hx_exports.alphaTab.model._KeySignature.KeySignature_Impl_={},alphaTab.model._KeySignature.KeySignature_Impl_.__name__=["alphaTab","model","_KeySignature","KeySignature_Impl_"],alphaTab.model._KeySignature.KeySignature_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.model._KeySignature.KeySignature_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._KeySignature.KeySignature_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.model._KeySignature.KeySignature_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.model._KeySignature.KeySignature_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.model._KeySignature.KeySignature_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._KeySignature.KeySignature_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.model._KeySignature.KeySignature_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._KeySignature.KeySignature_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.model._KeySignature.KeySignature_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._KeySignature.KeySignature_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.model._KeySignature.KeySignature_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.model._KeySignature.KeySignature_Impl_.toString=function(this1){switch(this1){case-7:return"Cb";case-6:return"Gb";case-5:return"Db";case-4:return"Ab";case-3:return"Eb";case-2:return"Bb";case-1:return"F";case 0:return"C";case 1:return"G";case 2:return"D";case 3:return"A";case 4:return"E";case 5:return"B";case 6:return"FSharp";case 7:return"CSharp"}return""},alphaTab.model._KeySignature.KeySignature_Impl_.fromString=function(str){switch(str.toLowerCase()){case"a":return 3;case"ab":return-4;case"b":return 5;case"bb":return-2;case"c":return 0;case"cb":return-7;case"csharp":return 7;case"d":return 2;case"db":return-5;case"e":return 4;case"eb":return-3;case"f":return-1;case"fsharp":return 6;case"g":return 1;case"gb":return-6}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.model._KeySignatureType={},alphaTab.model._KeySignatureType.KeySignatureType_Impl_=$hx_exports.alphaTab.model._KeySignatureType.KeySignatureType_Impl_={},alphaTab.model._KeySignatureType.KeySignatureType_Impl_.__name__=["alphaTab","model","_KeySignatureType","KeySignatureType_Impl_"],alphaTab.model._KeySignatureType.KeySignatureType_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.model._KeySignatureType.KeySignatureType_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._KeySignatureType.KeySignatureType_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.model._KeySignatureType.KeySignatureType_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.model._KeySignatureType.KeySignatureType_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.model._KeySignatureType.KeySignatureType_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._KeySignatureType.KeySignatureType_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.model._KeySignatureType.KeySignatureType_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._KeySignatureType.KeySignatureType_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.model._KeySignatureType.KeySignatureType_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._KeySignatureType.KeySignatureType_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.model._KeySignatureType.KeySignatureType_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.model._KeySignatureType.KeySignatureType_Impl_.toString=function(this1){switch(this1){case 0:return"Major";case 1:return"Minor"}return""},alphaTab.model._KeySignatureType.KeySignatureType_Impl_.fromString=function(str){switch(str.toLowerCase()){case"major":return 0;case"minor":return 1}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.model.Lyrics=$hx_exports.alphaTab.model.Lyrics=function(){this.startBar=0,this.text=null,this.chunks=null},alphaTab.model.Lyrics.__name__=["alphaTab","model","Lyrics"],alphaTab.model.Lyrics.prototype={finish:function(){var chunks=[];this.parse(this.text,0,chunks),this.chunks=chunks},parse:function(str,p,chunks){if(null!=str&&0!=str.length){for(var state=1,next=1,skipSpace=!1,start=0;p<str.length;){var c=system.Convert.toUInt16(HxOverrides.cca(str,p));switch(state){case 0:switch(c){case 9:case 10:case 13:break;case 32:if(skipSpace)break;state=next;continue;default:skipSpace=!1,state=next;continue}break;case 1:if(91!=c){start=p,state=2;continue}state=3;break;case 2:switch(c){case 10:case 13:case 32:var txt=HxOverrides.substr(str,start,p-start);chunks.push(this.prepareChunk(txt)),state=0,next=1;break;case 45:state=4}break;case 3:93==c&&(state=1);break;case 4:if(45==c)break;var txt1=HxOverrides.substr(str,start,p-start);chunks.push(this.prepareChunk(txt1)),skipSpace=!0,state=0,next=1;continue}++p}2==state&&p!=start&&chunks.push(HxOverrides.substr(str,start,p-start))}},prepareChunk:function(txt){return StringTools.replace(txt,"+"," ")},__class__:alphaTab.model.Lyrics},alphaTab.model._Lyrics_LyricsState={},alphaTab.model._Lyrics_LyricsState.Lyrics_LyricsState_Impl_={},alphaTab.model._Lyrics_LyricsState.Lyrics_LyricsState_Impl_.__name__=["alphaTab","model","_Lyrics_LyricsState","Lyrics_LyricsState_Impl_"],alphaTab.model._Lyrics_LyricsState.Lyrics_LyricsState_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.model._Lyrics_LyricsState.Lyrics_LyricsState_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._Lyrics_LyricsState.Lyrics_LyricsState_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.model._Lyrics_LyricsState.Lyrics_LyricsState_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.model._Lyrics_LyricsState.Lyrics_LyricsState_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.model._Lyrics_LyricsState.Lyrics_LyricsState_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._Lyrics_LyricsState.Lyrics_LyricsState_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.model._Lyrics_LyricsState.Lyrics_LyricsState_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._Lyrics_LyricsState.Lyrics_LyricsState_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.model._Lyrics_LyricsState.Lyrics_LyricsState_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._Lyrics_LyricsState.Lyrics_LyricsState_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.model._Lyrics_LyricsState.Lyrics_LyricsState_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.model._Lyrics_LyricsState.Lyrics_LyricsState_Impl_.toString=function(this1){switch(this1){case 0:return"IgnoreSpaces";case 1:return"Begin";case 2:return"Text";case 3:return"Comment";case 4:return"Dash"}return""},alphaTab.model._Lyrics_LyricsState.Lyrics_LyricsState_Impl_.fromString=function(str){switch(str.toLowerCase()){case"begin":return 1;case"comment":return 3;case"dash":return 4;case"ignorespaces":return 0;case"text":return 2}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.model.MasterBar=$hx_exports.alphaTab.model.MasterBar=function(){this.alternateEndings=0,this.nextMasterBar=null,this.previousMasterBar=null,this.index=0,this.keySignature=0,this.keySignatureType=0,this.isDoubleBar=!1,this.isRepeatStart=!1,this.repeatCount=0,this.repeatGroup=null,this.timeSignatureNumerator=0,this.timeSignatureDenominator=0,this.timeSignatureCommon=!1,this.tripletFeel=0,this.section=null,this.tempoAutomation=null,this.score=null,this.fermata=null,this.start=0,this.isAnacrusis=!1,this.timeSignatureDenominator=4,this.timeSignatureNumerator=4,this.tripletFeel=0,this.keySignatureType=0,this.timeSignatureCommon=!1;this.fermata={}},alphaTab.model.MasterBar.__name__=["alphaTab","model","MasterBar"],alphaTab.model.MasterBar.copyTo=function(src,dst){dst.isAnacrusis=src.isAnacrusis,dst.alternateEndings=src.alternateEndings,dst.index=src.index,dst.keySignature=src.keySignature,dst.keySignatureType=src.keySignatureType,dst.isDoubleBar=src.isDoubleBar,dst.isRepeatStart=src.isRepeatStart,dst.repeatCount=src.repeatCount,dst.timeSignatureNumerator=src.timeSignatureNumerator,dst.timeSignatureDenominator=src.timeSignatureDenominator,dst.timeSignatureCommon=src.timeSignatureCommon,dst.tripletFeel=src.tripletFeel,dst.start=src.start},alphaTab.model.MasterBar.prototype={get_isRepeatEnd:function(){return 0<this.repeatCount},get_isSectionStart:function(){return null!=this.section},calculateDuration:function(){if(this.isAnacrusis){for(var duration=0,track=$iterator(this.score.tracks)();track.hasNext();)for(var staff=$iterator(track.next().staves)();staff.hasNext();){var barDuration=staff.next().bars[0].calculateDuration();duration<barDuration&&(duration=barDuration)}return duration}return this.timeSignatureNumerator*alphaTab.audio.MidiUtils.valueToTicks(this.timeSignatureDenominator)},addFermata:function(offset,fermata){this.fermata[offset]=fermata},getFermata:function(beat){return this.fermata.hasOwnProperty(beat.playbackStart)?this.fermata[beat.playbackStart]:null},__class__:alphaTab.model.MasterBar},alphaTab.model.ModelUtils=function(){},alphaTab.model.ModelUtils.__name__=["alphaTab","model","ModelUtils"],alphaTab.model.ModelUtils.getIndex=function(duration){if(duration<0)return 0;var this1=duration;return system.Convert.toInt32_Single(Math.log2(this1))},alphaTab.model.ModelUtils.keySignatureIsFlat=function(ks){return ks<0},alphaTab.model.ModelUtils.keySignatureIsNatural=function(ks){return 0==ks},alphaTab.model.ModelUtils.keySignatureIsSharp=function(ks){return 0<ks},alphaTab.model.ModelUtils.applyPitchOffsets=function(settings,score){for(var i=0;i<score.tracks.length;){if(i<settings.notation.displayTranspositionPitches.length)for(var staff=$iterator(score.tracks[i].staves)();staff.hasNext();){staff.next().displayTranspositionPitch=-settings.notation.displayTranspositionPitches[i]}if(i<settings.notation.transpositionPitches.length)for(var staff2=$iterator(score.tracks[i].staves)();staff2.hasNext();){staff2.next().transpositionPitch=-settings.notation.transpositionPitches[i]}++i}},alphaTab.model.ModelUtils.fingerToString=function(settings,beat,finger,leftHand){if(1==settings.notation.fingeringMode||3==settings.notation.fingeringMode||alphaTab.audio.GeneralMidi.isPiano(beat.voice.bar.staff.track.playbackInfo.program))switch(finger){case-2:case-1:return null;case 0:return"1";case 1:return"2";case 2:return"3";case 3:return"4";case 4:return"5";default:return null}if(leftHand)switch(finger){case-2:case-1:return"0";case 0:return"T";case 1:return"1";case 2:return"2";case 3:return"3";case 4:return"4";default:return null}switch(finger){case-2:case-1:return null;case 0:return"p";case 1:return"i";case 2:return"m";case 3:return"a";case 4:return"c";default:return null}},alphaTab.model.Note=$hx_exports.alphaTab.model.Note=function(){this.id=0,this.index=0,this.accentuated=0,this.bendType=0,this.bendStyle=0,this.bendOrigin=null,this.isContinuedBend=!1,this.bendPoints=null,this.maxBendPoint=null,this.fret=0,this.string=0,this.octave=0,this.tone=0,this.element=0,this.variation=0,this.isVisible=!1,this.isHammerPullOrigin=!1,this.hammerPullOrigin=null,this.hammerPullDestination=null,this.isSlurDestination=!1,this.slurOrigin=null,this.slurDestination=null,this.harmonicType=0,this.harmonicValue=0,this.isGhost=!1,this.isLetRing=!1,this.letRingDestination=null,this.isPalmMute=!1,this.palmMuteDestination=null,this.isDead=!1,this.isStaccato=!1,this.slideInType=0,this.slideOutType=0,this.slideTarget=null,this.vibrato=0,this.tieOrigin=null,this.tieDestination=null,this.isTieDestination=!1,this.leftHandFinger=0,this.rightHandFinger=0,this.isFingering=!1,this.trillValue=0,this.trillSpeed=-4,this.durationPercent=0,this.accidentalMode=0,this.beat=null,this.dynamics=0,this.isEffectSlurOrigin=!1,this.hasEffectSlur=!1,this.effectSlurOrigin=null,this.effectSlurDestination=null,this.id=alphaTab.model.Note.GlobalNoteId++,this.bendType=0,this.bendStyle=0;this.bendPoints=[],this.dynamics=5,this.accentuated=0,this.fret=-2147483648,this.harmonicType=0,this.slideInType=0,this.slideOutType=0,this.vibrato=0,this.leftHandFinger=-2,this.rightHandFinger=-2,this.trillValue=-1,this.trillSpeed=32,this.durationPercent=1,this.octave=-1,this.tone=-1,this.fret=-1,this.string=-1,this.element=-1,this.variation=-1,this.isVisible=!0},alphaTab.model.Note.__name__=["alphaTab","model","Note"],alphaTab.model.Note.getStringTuning=function(staff,noteString){return 0<staff.tuning.length?staff.tuning[staff.tuning.length-(noteString-1)-1]:0},alphaTab.model.Note.copyTo=function(src,dst){dst.id=src.id,dst.accentuated=src.accentuated,dst.fret=src.fret,dst.string=src.string,dst.harmonicValue=src.harmonicValue,dst.harmonicType=src.harmonicType,dst.isGhost=src.isGhost,dst.isLetRing=src.isLetRing,dst.isPalmMute=src.isPalmMute,dst.isDead=src.isDead,dst.isStaccato=src.isStaccato,dst.slideInType=src.slideInType,dst.slideOutType=src.slideOutType,dst.vibrato=src.vibrato,dst.isTieDestination=src.isTieDestination,dst.isSlurDestination=src.isSlurDestination,dst.isHammerPullOrigin=src.isHammerPullOrigin,dst.leftHandFinger=src.leftHandFinger,dst.rightHandFinger=src.rightHandFinger,dst.isFingering=src.isFingering,dst.trillValue=src.trillValue,dst.trillSpeed=src.trillSpeed,dst.durationPercent=src.durationPercent,dst.accidentalMode=src.accidentalMode,dst.dynamics=src.dynamics,dst.octave=src.octave,dst.tone=src.tone,dst.element=src.element,dst.variation=src.variation,dst.bendType=src.bendType,dst.bendStyle=src.bendStyle,dst.isContinuedBend=src.isContinuedBend,dst.isVisible=src.isVisible},alphaTab.model.Note.nextNoteOnSameLine=function(note){for(var nextBeat=note.beat.nextBeat;null!=nextBeat&&nextBeat.voice.bar.index<=note.beat.voice.bar.index+3;){var noteOnString=nextBeat.getNoteOnString(note.string);if(null!=noteOnString)return noteOnString;nextBeat=nextBeat.nextBeat}return null},alphaTab.model.Note.findTieOrigin=function(note){for(var previousBeat=note.beat.previousBeat;null!=previousBeat&&previousBeat.voice.bar.index>=note.beat.voice.bar.index-3;){if(note.get_isStringed()){var noteOnString=previousBeat.getNoteOnString(note.string);if(null!=noteOnString)return noteOnString}else if(-1==note.octave&&-1==note.tone){if(note.index<previousBeat.notes.length)return previousBeat.notes[note.index]}else{var noteWithValue=previousBeat.getNoteWithRealValue(note.get_realValue());if(null!=noteWithValue)return noteWithValue}previousBeat=previousBeat.previousBeat}return null},alphaTab.model.Note.prototype={get_hasBend:function(){return 0!=this.bendType},get_isStringed:function(){return 0<=this.string},get_isPiano:function(){return!this.get_isStringed()&&0<=this.octave&&0<=this.tone},get_isPercussion:function(){return!this.get_isStringed()&&0<=this.element&&0<=this.variation},get_isHammerPullDestination:function(){return null!=this.hammerPullOrigin},get_isSlurOrigin:function(){return null!=this.slurDestination},get_isHarmonic:function(){return 0!=this.harmonicType},get_isTieOrigin:function(){return null!=this.tieDestination},get_trillFret:function(){return this.trillValue-this.get_stringTuning()},get_isTrill:function(){return 0<=this.trillValue},get_isEffectSlurDestination:function(){return null!=this.effectSlurOrigin},get_stringTuning:function(){return this.beat.voice.bar.staff.capo+alphaTab.model.Note.getStringTuning(this.beat.voice.bar.staff,this.string)},get_realValue:function(){return this.get_isPercussion()?alphaTab.rendering.utils.PercussionMapper.midiFromElementVariation(this):this.get_isStringed()?1==this.harmonicType?this.get_harmonicPitch()+this.get_stringTuning()-this.beat.voice.bar.staff.transpositionPitch:this.fret+this.get_stringTuning()-this.beat.voice.bar.staff.transpositionPitch+this.get_harmonicPitch():this.get_isPiano()?12*this.octave+this.tone-this.beat.voice.bar.staff.transpositionPitch:0},get_harmonicPitch:function(){if(0==this.harmonicType||!this.get_isStringed())return 0;var value=this.harmonicValue;return alphaTab.platform.Platform.isAlmostEqualTo(value,2.4)?36:alphaTab.platform.Platform.isAlmostEqualTo(value,2.7)?34:value<3?0:value<=3.5?31:value<=4?28:value<=5?24:value<=6?34:value<=7?19:value<=8.5?36:value<=9?28:value<=10?34:value<=11?0:value<=12?12:value<14?0:value<=15?34:value<=16?28:value<=17?36:value<=18?0:value<=19?19:value<=21?0:value<=22?36:value<=24?24:0},get_displayValue:function(){var noteValue=this.get_displayValueWithoutBend();return this.get_hasBend()?noteValue+=this.bendPoints[0].value/2|0:null!=this.bendOrigin?noteValue+=this.bendOrigin.bendPoints[this.bendOrigin.bendPoints.length-1].value/2|0:this.isTieDestination&&null!=this.tieOrigin.bendOrigin?noteValue+=this.tieOrigin.bendOrigin.bendPoints[this.tieOrigin.bendOrigin.bendPoints.length-1].value/2|0:this.beat.get_hasWhammyBar()?noteValue+=this.beat.whammyBarPoints[0].value/2|0:this.beat.isContinuedWhammy&&(noteValue+=this.beat.previousBeat.whammyBarPoints[this.beat.previousBeat.whammyBarPoints.length-1].value/2|0),noteValue},get_displayValueWithoutBend:function(){var noteValue=this.get_realValue();switch(1!=this.harmonicType&&0!=this.harmonicType&&(noteValue-=this.get_harmonicPitch()),this.beat.ottava){case 0:noteValue-=24;break;case 1:noteValue-=12;break;case 2:break;case 3:noteValue+=12;break;case 4:noteValue+=24}switch(this.beat.voice.bar.clefOttava){case 0:noteValue-=24;break;case 1:noteValue-=12;break;case 2:break;case 3:noteValue+=12;break;case 4:noteValue+=24}return noteValue-this.beat.voice.bar.staff.displayTranspositionPitch},get_hasQuarterToneOffset:function(){return this.get_hasBend()?this.bendPoints[0].value%2!=0:null!=this.bendOrigin?this.bendOrigin.bendPoints[this.bendOrigin.bendPoints.length-1].value%2!=0:this.beat.get_hasWhammyBar()?this.beat.whammyBarPoints[0].value%2!=0:!!this.beat.isContinuedWhammy&&this.beat.previousBeat.whammyBarPoints[this.beat.previousBeat.whammyBarPoints.length-1].value%2!=0},clone:function(){var n=new alphaTab.model.Note,id=n.id;alphaTab.model.Note.copyTo(this,n);for(var i=0,j=this.bendPoints.length;i<j;)n.addBendPoint(this.bendPoints[i].clone()),++i;return n.id=id,n},addBendPoint:function(point){this.bendPoints.push(point),(null==this.maxBendPoint||point.value>this.maxBendPoint.value)&&(this.maxBendPoint=point),0==this.bendType&&(this.bendType=1)},finish:function(settings){var _gthis=this,nextNoteOnLine=new alphaTab.util.Lazy(function(){return alphaTab.model.Note.nextNoteOnSameLine(_gthis)}),isSongBook=null!=settings&&1==settings.notation.notationMode;if(this.isTieDestination){if(null!=this.tieOrigin)this.tieOrigin.tieDestination=this;else{var tieOrigin=alphaTab.model.Note.findTieOrigin(this);null==tieOrigin?this.isTieDestination=!1:(this.tieOrigin=tieOrigin,(this.tieOrigin.tieDestination=this).fret=this.tieOrigin.fret,this.octave=this.tieOrigin.octave,this.tone=this.tieOrigin.tone,this.tieOrigin.get_hasBend()&&(this.bendOrigin=this.tieOrigin))}isSongBook&&this.tieOrigin.isLetRing&&(this.isLetRing=!0)}switch(this.isLetRing&&(null!=nextNoteOnLine.get_value()&&nextNoteOnLine.get_value().isLetRing?this.letRingDestination=nextNoteOnLine.get_value():this.letRingDestination=this,isSongBook&&this.isTieDestination&&!this.tieOrigin.get_hasBend()&&(this.isVisible=!1)),this.isPalmMute&&(null!=nextNoteOnLine.get_value()&&nextNoteOnLine.get_value().isPalmMute?this.palmMuteDestination=nextNoteOnLine.get_value():this.palmMuteDestination=this),this.isHammerPullOrigin&&(null==nextNoteOnLine.get_value()?this.isHammerPullOrigin=!1:(this.hammerPullDestination=nextNoteOnLine.get_value(),this.hammerPullDestination.hammerPullOrigin=this)),this.slideOutType){case 1:case 2:this.slideTarget=nextNoteOnLine.get_value(),null==this.slideTarget&&(this.slideOutType=0)}var effectSlurDestination=null;if(this.isHammerPullOrigin?effectSlurDestination=this.hammerPullDestination:2==this.slideOutType&&null!=this.slideTarget&&(effectSlurDestination=this.slideTarget),null!=effectSlurDestination&&(this.hasEffectSlur=!0,null!=this.effectSlurOrigin?(this.effectSlurOrigin.effectSlurDestination=effectSlurDestination,this.effectSlurOrigin.effectSlurDestination.effectSlurOrigin=this.effectSlurOrigin,this.effectSlurOrigin=null):(this.isEffectSlurOrigin=!0,this.effectSlurDestination=effectSlurDestination,this.effectSlurDestination.effectSlurOrigin=this)),0<this.bendPoints.length&&1==this.bendType){var isContinuedBend=this.isContinuedBend=null!=this.tieOrigin&&this.tieOrigin.get_hasBend();if(4==this.bendPoints.length){var origin=this.bendPoints[0],middle1=this.bendPoints[1],middle2=this.bendPoints[2],destination=this.bendPoints[3];middle1.value==middle2.value?destination.value>origin.value?middle1.value>destination.value?this.bendType=4:(!isContinuedBend&&0<origin.value?this.bendType=7:this.bendType=2,this.bendPoints.splice(2,1),this.bendPoints.splice(1,1)):destination.value<origin.value?(this.bendType=isContinuedBend?3:8,this.bendPoints.splice(2,1),this.bendPoints.splice(1,1)):middle1.value>origin.value?this.bendType=4:(0<origin.value&&!isContinuedBend?this.bendType=6:this.bendType=5,this.bendPoints.splice(2,1),this.bendPoints.splice(1,1)):alphaTab.util.Logger.warning("Model","Unsupported bend type detected, fallback to custom",null)}else if(2==this.bendPoints.length){var origin1=this.bendPoints[0],destination1=this.bendPoints[1];destination1.value>origin1.value?!isContinuedBend&&0<origin1.value?this.bendType=7:this.bendType=2:destination1.value<origin1.value?this.bendType=isContinuedBend?3:8:this.bendType=5}}else 0==this.bendPoints.length&&(this.bendType=0)},__class__:alphaTab.model.Note},alphaTab.model._NoteAccidentalMode={},alphaTab.model._NoteAccidentalMode.NoteAccidentalMode_Impl_=$hx_exports.alphaTab.model._NoteAccidentalMode.NoteAccidentalMode_Impl_={},alphaTab.model._NoteAccidentalMode.NoteAccidentalMode_Impl_.__name__=["alphaTab","model","_NoteAccidentalMode","NoteAccidentalMode_Impl_"],alphaTab.model._NoteAccidentalMode.NoteAccidentalMode_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.model._NoteAccidentalMode.NoteAccidentalMode_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._NoteAccidentalMode.NoteAccidentalMode_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.model._NoteAccidentalMode.NoteAccidentalMode_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.model._NoteAccidentalMode.NoteAccidentalMode_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.model._NoteAccidentalMode.NoteAccidentalMode_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._NoteAccidentalMode.NoteAccidentalMode_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.model._NoteAccidentalMode.NoteAccidentalMode_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._NoteAccidentalMode.NoteAccidentalMode_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.model._NoteAccidentalMode.NoteAccidentalMode_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._NoteAccidentalMode.NoteAccidentalMode_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.model._NoteAccidentalMode.NoteAccidentalMode_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.model._NoteAccidentalMode.NoteAccidentalMode_Impl_.toString=function(this1){switch(this1){case 0:return"Default";case 1:return"SwapAccidentals";case 2:return"ForceNatural";case 3:return"ForceSharp";case 4:return"ForceFlat"}return""},alphaTab.model._NoteAccidentalMode.NoteAccidentalMode_Impl_.fromString=function(str){switch(str.toLowerCase()){case"default":return 0;case"forceflat":return 4;case"forcenatural":return 2;case"forcesharp":return 3;case"swapaccidentals":return 1}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.model._Ottavia={},alphaTab.model._Ottavia.Ottavia_Impl_=$hx_exports.alphaTab.model._Ottavia.Ottavia_Impl_={},alphaTab.model._Ottavia.Ottavia_Impl_.__name__=["alphaTab","model","_Ottavia","Ottavia_Impl_"],alphaTab.model._Ottavia.Ottavia_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.model._Ottavia.Ottavia_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._Ottavia.Ottavia_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.model._Ottavia.Ottavia_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.model._Ottavia.Ottavia_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.model._Ottavia.Ottavia_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._Ottavia.Ottavia_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.model._Ottavia.Ottavia_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._Ottavia.Ottavia_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.model._Ottavia.Ottavia_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._Ottavia.Ottavia_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.model._Ottavia.Ottavia_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.model._Ottavia.Ottavia_Impl_.toString=function(this1){switch(this1){case 0:return"_15ma";case 1:return"_8va";case 2:return"Regular";case 3:return"_8vb";case 4:return"_15mb"}return""},alphaTab.model._Ottavia.Ottavia_Impl_.fromString=function(str){switch(str.toLowerCase()){case"_15ma":return 0;case"_15mb":return 4;case"_8va":return 1;case"_8vb":return 3;case"regular":return 2}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.model._PickStroke={},alphaTab.model._PickStroke.PickStroke_Impl_=$hx_exports.alphaTab.model._PickStroke.PickStroke_Impl_={},alphaTab.model._PickStroke.PickStroke_Impl_.__name__=["alphaTab","model","_PickStroke","PickStroke_Impl_"],alphaTab.model._PickStroke.PickStroke_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.model._PickStroke.PickStroke_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._PickStroke.PickStroke_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.model._PickStroke.PickStroke_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.model._PickStroke.PickStroke_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.model._PickStroke.PickStroke_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._PickStroke.PickStroke_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.model._PickStroke.PickStroke_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._PickStroke.PickStroke_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.model._PickStroke.PickStroke_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._PickStroke.PickStroke_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.model._PickStroke.PickStroke_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.model._PickStroke.PickStroke_Impl_.toString=function(this1){switch(this1){case 0:return"None";case 1:return"Up";case 2:return"Down"}return""},alphaTab.model._PickStroke.PickStroke_Impl_.fromString=function(str){switch(str.toLowerCase()){case"down":return 2;case"none":return 0;case"up":return 1}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.model.PlaybackInformation=$hx_exports.alphaTab.model.PlaybackInformation=function(){this.volume=0,this.balance=0,this.port=0,this.program=0,this.primaryChannel=0,this.secondaryChannel=0,this.isMute=!1,this.isSolo=!1,this.volume=15,this.balance=8,this.port=1},alphaTab.model.PlaybackInformation.__name__=["alphaTab","model","PlaybackInformation"],alphaTab.model.PlaybackInformation.copyTo=function(src,dst){dst.volume=src.volume,dst.balance=src.balance,dst.port=src.port,dst.program=src.program,dst.primaryChannel=src.primaryChannel,dst.secondaryChannel=src.secondaryChannel,dst.isMute=src.isMute,dst.isSolo=src.isSolo},alphaTab.model.PlaybackInformation.prototype={__class__:alphaTab.model.PlaybackInformation},alphaTab.model.RenderStylesheet=$hx_exports.alphaTab.model.RenderStylesheet=function(){this.hideDynamics=!1,this.hideDynamics=!1},alphaTab.model.RenderStylesheet.__name__=["alphaTab","model","RenderStylesheet"],alphaTab.model.RenderStylesheet.copyTo=function(src,dst){dst.hideDynamics=src.hideDynamics},alphaTab.model.RenderStylesheet.prototype={__class__:alphaTab.model.RenderStylesheet},alphaTab.model.RepeatGroup=$hx_exports.alphaTab.model.RepeatGroup=function(){this.masterBars=null,this.openings=null,this.closings=null,this.isOpened=!1,this.isClosed=!1;this.masterBars=[];this.openings=[];this.closings=[],this.isClosed=!1},alphaTab.model.RepeatGroup.__name__=["alphaTab","model","RepeatGroup"],alphaTab.model.RepeatGroup.prototype={addMasterBar:function(masterBar){0==this.openings.length&&this.openings.push(masterBar),this.masterBars.push(masterBar),masterBar.repeatGroup=this,masterBar.get_isRepeatEnd()?(this.closings.push(masterBar),this.isClosed=!0,this.isOpened||(this.masterBars[0].isRepeatStart=!0,this.isOpened=!0)):this.isClosed&&(this.isClosed=!1,this.openings.push(masterBar))},__class__:alphaTab.model.RepeatGroup},alphaTab.model.Score=$hx_exports.alphaTab.model.Score=function(){this._currentRepeatGroup=null,this.album=null,this.artist=null,this.copyright=null,this.instructions=null,this.music=null,this.notices=null,this.subTitle=null,this.title=null,this.words=null,this.tab=null,this.tempo=0,this.tempoLabel=null,this.masterBars=null,this.tracks=null,this.stylesheet=null;this.masterBars=[];this.tracks=[],this._currentRepeatGroup=new alphaTab.model.RepeatGroup,this.album=this.artist=this.copyright=this.instructions=this.music=this.notices=this.subTitle=this.title=this.words=this.tab=this.tempoLabel="",this.tempo=120,this.stylesheet=new alphaTab.model.RenderStylesheet},alphaTab.model.Score.__name__=["alphaTab","model","Score"],alphaTab.model.Score.copyTo=function(src,dst){dst.album=src.album,dst.artist=src.artist,dst.copyright=src.copyright,dst.instructions=src.instructions,dst.music=src.music,dst.notices=src.notices,dst.subTitle=src.subTitle,dst.title=src.title,dst.words=src.words,dst.tab=src.tab,dst.tempo=src.tempo,dst.tempoLabel=src.tempoLabel},alphaTab.model.Score.prototype={rebuildRepeatGroups:function(){for(var currentGroup=new alphaTab.model.RepeatGroup,bar=$iterator(this.masterBars)();bar.hasNext();){var bar1=bar.next();(bar1.isRepeatStart||this._currentRepeatGroup.isClosed&&bar1.alternateEndings<=0)&&(currentGroup=new alphaTab.model.RepeatGroup),currentGroup.addMasterBar(bar1)}},addMasterBar:function(bar){bar.score=this,bar.index=this.masterBars.length,0!=this.masterBars.length&&(bar.previousMasterBar=this.masterBars[this.masterBars.length-1],(bar.previousMasterBar.nextMasterBar=bar).start=bar.previousMasterBar.start+bar.previousMasterBar.calculateDuration()),(bar.isRepeatStart||this._currentRepeatGroup.isClosed&&bar.alternateEndings<=0)&&(this._currentRepeatGroup=new alphaTab.model.RepeatGroup),this._currentRepeatGroup.addMasterBar(bar),this.masterBars.push(bar)},addTrack:function(track){track.score=this,track.index=this.tracks.length,this.tracks.push(track)},finish:function(settings){for(var i=0,j=this.tracks.length;i<j;)this.tracks[i].finish(settings),++i},__class__:alphaTab.model.Score},alphaTab.model.Section=$hx_exports.alphaTab.model.Section=function(){this.marker=null,this.text=null,this.text=this.marker=""},alphaTab.model.Section.__name__=["alphaTab","model","Section"],alphaTab.model.Section.copyTo=function(src,dst){dst.marker=src.marker,dst.text=src.text},alphaTab.model.Section.prototype={__class__:alphaTab.model.Section},alphaTab.model._SimileMark={},alphaTab.model._SimileMark.SimileMark_Impl_=$hx_exports.alphaTab.model._SimileMark.SimileMark_Impl_={},alphaTab.model._SimileMark.SimileMark_Impl_.__name__=["alphaTab","model","_SimileMark","SimileMark_Impl_"],alphaTab.model._SimileMark.SimileMark_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.model._SimileMark.SimileMark_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._SimileMark.SimileMark_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.model._SimileMark.SimileMark_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.model._SimileMark.SimileMark_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.model._SimileMark.SimileMark_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._SimileMark.SimileMark_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.model._SimileMark.SimileMark_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._SimileMark.SimileMark_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.model._SimileMark.SimileMark_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._SimileMark.SimileMark_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.model._SimileMark.SimileMark_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.model._SimileMark.SimileMark_Impl_.toString=function(this1){switch(this1){case 0:return"None";case 1:return"Simple";case 2:return"FirstOfDouble";case 3:return"SecondOfDouble"}return""},alphaTab.model._SimileMark.SimileMark_Impl_.fromString=function(str){switch(str.toLowerCase()){case"firstofdouble":return 2;case"none":return 0;case"secondofdouble":return 3;case"simple":return 1}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.model._SlideInType={},alphaTab.model._SlideInType.SlideInType_Impl_=$hx_exports.alphaTab.model._SlideInType.SlideInType_Impl_={},alphaTab.model._SlideInType.SlideInType_Impl_.__name__=["alphaTab","model","_SlideInType","SlideInType_Impl_"],alphaTab.model._SlideInType.SlideInType_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.model._SlideInType.SlideInType_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._SlideInType.SlideInType_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.model._SlideInType.SlideInType_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.model._SlideInType.SlideInType_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.model._SlideInType.SlideInType_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._SlideInType.SlideInType_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.model._SlideInType.SlideInType_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._SlideInType.SlideInType_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.model._SlideInType.SlideInType_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._SlideInType.SlideInType_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.model._SlideInType.SlideInType_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.model._SlideInType.SlideInType_Impl_.toString=function(this1){switch(this1){case 0:return"None";case 1:return"IntoFromBelow";case 2:return"IntoFromAbove"}return""},alphaTab.model._SlideInType.SlideInType_Impl_.fromString=function(str){switch(str.toLowerCase()){case"intofromabove":return 2;case"intofrombelow":return 1;case"none":return 0}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.model._SlideOutType={},alphaTab.model._SlideOutType.SlideOutType_Impl_=$hx_exports.alphaTab.model._SlideOutType.SlideOutType_Impl_={},alphaTab.model._SlideOutType.SlideOutType_Impl_.__name__=["alphaTab","model","_SlideOutType","SlideOutType_Impl_"],alphaTab.model._SlideOutType.SlideOutType_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.model._SlideOutType.SlideOutType_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._SlideOutType.SlideOutType_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.model._SlideOutType.SlideOutType_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.model._SlideOutType.SlideOutType_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.model._SlideOutType.SlideOutType_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._SlideOutType.SlideOutType_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.model._SlideOutType.SlideOutType_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._SlideOutType.SlideOutType_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.model._SlideOutType.SlideOutType_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._SlideOutType.SlideOutType_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.model._SlideOutType.SlideOutType_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.model._SlideOutType.SlideOutType_Impl_.toString=function(this1){switch(this1){case 0:return"None";case 1:return"Shift";case 2:return"Legato";case 3:return"OutUp";case 4:return"OutDown";case 5:return"PickSlideDown";case 6:return"PickSlideUp"}return""},alphaTab.model._SlideOutType.SlideOutType_Impl_.fromString=function(str){switch(str.toLowerCase()){case"legato":return 2;case"none":return 0;case"outdown":return 4;case"outup":return 3;case"pickslidedown":return 5;case"pickslideup":return 6;case"shift":return 1}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.model.Staff=$hx_exports.alphaTab.model.Staff=function(){this.index=0,this.track=null,this.bars=null,this.chords=null,this.capo=0,this.transpositionPitch=0,this.displayTranspositionPitch=0,this.tuning=null,this.tuningName=null,this.showTablature=!1,this.showStandardNotation=!1,this.isPercussion=!1;this.bars=[];var this2=new Int32Array(0);this.tuning=this2;this.chords={},this.showStandardNotation=!0,this.showTablature=!0},alphaTab.model.Staff.__name__=["alphaTab","model","Staff"],alphaTab.model.Staff.copyTo=function(src,dst){dst.capo=src.capo,dst.index=src.index;var array=src.tuning;dst.tuning=new Int32Array(array),dst.transpositionPitch=src.transpositionPitch,dst.displayTranspositionPitch=src.displayTranspositionPitch,dst.showStandardNotation=src.showStandardNotation,dst.showTablature=src.showTablature,dst.isPercussion=src.isPercussion},alphaTab.model.Staff.prototype={get_isStringed:function(){return 0<this.tuning.length},finish:function(settings){for(var i=0,j=this.bars.length;i<j;)this.bars[i].finish(settings),++i},addChord:function(chordId,chord){(chord.staff=this).chords[chordId]=chord},addBar:function(bar){var bars=this.bars;bar.staff=this,bar.index=bars.length,0<bars.length&&(bar.previousBar=bars[bars.length-1],bar.previousBar.nextBar=bar),bars.push(bar)},__class__:alphaTab.model.Staff},alphaTab.model.Track=$hx_exports.alphaTab.model.Track=function(staveCount){this.index=0,this.score=null,this.staves=null,this.playbackInfo=null,this.color=null,this.name=null,this.shortName=null;this.staves=[],this.ensureStaveCount(staveCount),this.playbackInfo=new alphaTab.model.PlaybackInformation,this.name="",this.shortName="",this.color=new alphaTab.platform.model.Color(200,0,0,255)},alphaTab.model.Track.__name__=["alphaTab","model","Track"],alphaTab.model.Track.copyTo=function(src,dst){dst.name=src.name,dst.shortName=src.shortName,dst.index=src.index,dst.color.raw=src.color.raw,dst.color.rgba=src.color.rgba},alphaTab.model.Track.prototype={ensureStaveCount:function(staveCount){for(;this.staves.length<staveCount;)this.addStaff(new alphaTab.model.Staff)},addStaff:function(staff){staff.index=this.staves.length,(staff.track=this).staves.push(staff)},finish:function(settings){var s=this.shortName;null!=s&&0!=s.length||(this.shortName=this.name,10<this.shortName.length&&(this.shortName=HxOverrides.substr(this.shortName,0,10)));for(var i=0,j=this.staves.length;i<j;)this.staves[i].finish(settings),++i},applyLyrics:function(lyrics){for(var lyric=$iterator(lyrics)();lyric.hasNext();){lyric.next().finish()}for(var staff=this.staves[0],li=0;li<lyrics.length;){var lyric2=lyrics[li];if(0<=lyric2.startBar)for(var beat=staff.bars[lyric2.startBar].voices[0].beats[0],ci=0;ci<lyric2.chunks.length&&null!=beat;){for(;null!=beat&&(beat.isEmpty||beat.get_isRest());)beat=beat.nextBeat;if(null!=beat){if(null==beat.lyrics){var size=lyrics.length,this1=new Array(size);beat.lyrics=this1}beat.lyrics[li]=lyric2.chunks[ci],beat=beat.nextBeat}++ci}++li}},__class__:alphaTab.model.Track},alphaTab.model._TripletFeel={},alphaTab.model._TripletFeel.TripletFeel_Impl_=$hx_exports.alphaTab.model._TripletFeel.TripletFeel_Impl_={},alphaTab.model._TripletFeel.TripletFeel_Impl_.__name__=["alphaTab","model","_TripletFeel","TripletFeel_Impl_"],alphaTab.model._TripletFeel.TripletFeel_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.model._TripletFeel.TripletFeel_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._TripletFeel.TripletFeel_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.model._TripletFeel.TripletFeel_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.model._TripletFeel.TripletFeel_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.model._TripletFeel.TripletFeel_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._TripletFeel.TripletFeel_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.model._TripletFeel.TripletFeel_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._TripletFeel.TripletFeel_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.model._TripletFeel.TripletFeel_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._TripletFeel.TripletFeel_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.model._TripletFeel.TripletFeel_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.model._TripletFeel.TripletFeel_Impl_.toString=function(this1){switch(this1){case 0:return"NoTripletFeel";case 1:return"Triplet16th";case 2:return"Triplet8th";case 3:return"Dotted16th";case 4:return"Dotted8th";case 5:return"Scottish16th";case 6:return"Scottish8th"}return""},alphaTab.model._TripletFeel.TripletFeel_Impl_.fromString=function(str){switch(str.toLowerCase()){case"dotted16th":return 3;case"dotted8th":return 4;case"notripletfeel":return 0;case"scottish16th":return 5;case"scottish8th":return 6;case"triplet16th":return 1;case"triplet8th":return 2}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.model.Tuning=$hx_exports.alphaTab.model.Tuning=function(name,tuning,isStandard){this.isStandard=!1,this.name=null,this.tunings=null,this.isStandard=isStandard,this.name=name,this.tunings=tuning},alphaTab.model.Tuning.__name__=["alphaTab","model","Tuning"],alphaTab.model.Tuning.getTextForTuning=function(tuning,includeOctave){var result=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"][tuning%12];return includeOctave&&(result+=Std.string((tuning/12|0)-1)),result},alphaTab.model.Tuning.getDefaultTuningFor=function(stringCount){return alphaTab.model.Tuning._defaultTunings.hasOwnProperty(stringCount)?alphaTab.model.Tuning._defaultTunings[stringCount]:null},alphaTab.model.Tuning.getPresetsFor=function(stringCount){switch(stringCount){case 4:return alphaTab.model.Tuning._fourStrings;case 5:return alphaTab.model.Tuning._fiveStrings;case 6:return alphaTab.model.Tuning._sixStrings;case 7:return alphaTab.model.Tuning._sevenStrings}return[]},alphaTab.model.Tuning.initialize=function(){alphaTab.model.Tuning._sevenStrings=[];alphaTab.model.Tuning._sixStrings=[];alphaTab.model.Tuning._fiveStrings=[];alphaTab.model.Tuning._fourStrings=[];alphaTab.model.Tuning._defaultTunings={},alphaTab.model.Tuning._defaultTunings[7]=new alphaTab.model.Tuning("Guitar 7 strings",new Int32Array([64,59,55,50,45,40,35]),!0),alphaTab.model.Tuning._sevenStrings.push(alphaTab.model.Tuning._defaultTunings[7]),alphaTab.model.Tuning._defaultTunings[6]=new alphaTab.model.Tuning("Guitar Standard Tuning",new Int32Array([64,59,55,50,45,40]),!0),alphaTab.model.Tuning._sixStrings.push(alphaTab.model.Tuning._defaultTunings[6]),alphaTab.model.Tuning._sixStrings.push(new alphaTab.model.Tuning("Guitar Tune down Â½ step",new Int32Array([63,58,54,49,44,39]),!1)),alphaTab.model.Tuning._sixStrings.push(new alphaTab.model.Tuning("Guitar Tune down 1 step",new Int32Array([62,57,53,48,43,38]),!1)),alphaTab.model.Tuning._sixStrings.push(new alphaTab.model.Tuning("Guitar Tune down 2 step",new Int32Array([60,55,51,46,41,36]),!1)),alphaTab.model.Tuning._sixStrings.push(new alphaTab.model.Tuning("Guitar Dropped D Tuning",new Int32Array([64,59,55,50,45,38]),!1)),alphaTab.model.Tuning._sixStrings.push(new alphaTab.model.Tuning("Guitar Dropped D Tuning variant",new Int32Array([64,57,55,50,45,38]),!1)),alphaTab.model.Tuning._sixStrings.push(new alphaTab.model.Tuning("Guitar Double Dropped D Tuning",new Int32Array([62,59,55,50,45,38]),!1)),alphaTab.model.Tuning._sixStrings.push(new alphaTab.model.Tuning("Guitar Dropped E Tuning",new Int32Array([66,61,57,52,47,40]),!1)),alphaTab.model.Tuning._sixStrings.push(new alphaTab.model.Tuning("Guitar Dropped C Tuning",new Int32Array([62,57,53,48,43,36]),!1)),alphaTab.model.Tuning._sixStrings.push(new alphaTab.model.Tuning("Guitar Open C Tuning",new Int32Array([64,60,55,48,43,36]),!1)),alphaTab.model.Tuning._sixStrings.push(new alphaTab.model.Tuning("Guitar Open Cm Tuning",new Int32Array([63,60,55,48,43,36]),!1)),alphaTab.model.Tuning._sixStrings.push(new alphaTab.model.Tuning("Guitar Open C6 Tuning",new Int32Array([64,57,55,48,43,36]),!1)),alphaTab.model.Tuning._sixStrings.push(new alphaTab.model.Tuning("Guitar Open Cmaj7 Tuning",new Int32Array([64,59,55,52,43,36]),!1)),alphaTab.model.Tuning._sixStrings.push(new alphaTab.model.Tuning("Guitar Open D Tuning",new Int32Array([62,57,54,50,45,38]),!1)),alphaTab.model.Tuning._sixStrings.push(new alphaTab.model.Tuning("Guitar Open Dm Tuning",new Int32Array([62,57,53,50,45,38]),!1)),alphaTab.model.Tuning._sixStrings.push(new alphaTab.model.Tuning("Guitar Open D5 Tuning",new Int32Array([62,57,50,50,45,38]),!1)),alphaTab.model.Tuning._sixStrings.push(new alphaTab.model.Tuning("Guitar Open D6 Tuning",new Int32Array([62,59,54,50,45,38]),!1)),alphaTab.model.Tuning._sixStrings.push(new alphaTab.model.Tuning("Guitar Open Dsus4 Tuning",new Int32Array([62,57,55,50,45,38]),!1)),alphaTab.model.Tuning._sixStrings.push(new alphaTab.model.Tuning("Guitar Open E Tuning",new Int32Array([64,59,56,52,47,40]),!1)),alphaTab.model.Tuning._sixStrings.push(new alphaTab.model.Tuning("Guitar Open Em Tuning",new Int32Array([64,59,55,52,47,40]),!1)),alphaTab.model.Tuning._sixStrings.push(new alphaTab.model.Tuning("Guitar Open Esus11 Tuning",new Int32Array([64,59,55,52,45,40]),!1)),alphaTab.model.Tuning._sixStrings.push(new alphaTab.model.Tuning("Guitar Open F Tuning",new Int32Array([65,60,53,48,45,41]),!1)),alphaTab.model.Tuning._sixStrings.push(new alphaTab.model.Tuning("Guitar Open G Tuning",new Int32Array([62,59,55,50,43,38]),!1)),alphaTab.model.Tuning._sixStrings.push(new alphaTab.model.Tuning("Guitar Open Gm Tuning",new Int32Array([62,58,55,50,43,38]),!1)),alphaTab.model.Tuning._sixStrings.push(new alphaTab.model.Tuning("Guitar Open G6 Tuning",new Int32Array([64,59,55,50,43,38]),!1)),alphaTab.model.Tuning._sixStrings.push(new alphaTab.model.Tuning("Guitar Open Gsus4 Tuning",new Int32Array([62,60,55,50,43,38]),!1)),alphaTab.model.Tuning._sixStrings.push(new alphaTab.model.Tuning("Guitar Open A Tuning",new Int32Array([64,61,57,52,45,40]),!1)),alphaTab.model.Tuning._sixStrings.push(new alphaTab.model.Tuning("Guitar Open Am Tuning",new Int32Array([64,60,57,52,45,40]),!1)),alphaTab.model.Tuning._sixStrings.push(new alphaTab.model.Tuning("Guitar Nashville Tuning",new Int32Array([64,59,67,62,57,52]),!1)),alphaTab.model.Tuning._sixStrings.push(new alphaTab.model.Tuning("Bass 6 Strings Tuning",new Int32Array([48,43,38,33,28,23]),!1)),alphaTab.model.Tuning._sixStrings.push(new alphaTab.model.Tuning("Lute or Vihuela Tuning",new Int32Array([64,59,54,50,45,40]),!1)),alphaTab.model.Tuning._defaultTunings[5]=new alphaTab.model.Tuning("Bass 5 Strings Tuning",new Int32Array([43,38,33,28,23]),!0),alphaTab.model.Tuning._fiveStrings.push(alphaTab.model.Tuning._defaultTunings[5]),alphaTab.model.Tuning._fiveStrings.push(new alphaTab.model.Tuning("Banjo Dropped C Tuning",new Int32Array([62,59,55,48,67]),!1)),alphaTab.model.Tuning._fiveStrings.push(new alphaTab.model.Tuning("Banjo Open D Tuning",new Int32Array([62,57,54,50,69]),!1)),alphaTab.model.Tuning._fiveStrings.push(new alphaTab.model.Tuning("Banjo Open G Tuning",new Int32Array([62,59,55,50,67]),!1)),alphaTab.model.Tuning._fiveStrings.push(new alphaTab.model.Tuning("Banjo G Minor Tuning",new Int32Array([62,58,55,50,67]),!1)),alphaTab.model.Tuning._fiveStrings.push(new alphaTab.model.Tuning("Banjo G Modal Tuning",new Int32Array([62,57,55,50,67]),!1)),alphaTab.model.Tuning._defaultTunings[4]=new alphaTab.model.Tuning("Bass Standard Tuning",new Int32Array([43,38,33,28]),!0),alphaTab.model.Tuning._fourStrings.push(alphaTab.model.Tuning._defaultTunings[4]),alphaTab.model.Tuning._fourStrings.push(new alphaTab.model.Tuning("Bass Tune down Â½ step",new Int32Array([42,37,32,27]),!1)),alphaTab.model.Tuning._fourStrings.push(new alphaTab.model.Tuning("Bass Tune down 1 step",new Int32Array([41,36,31,26]),!1)),alphaTab.model.Tuning._fourStrings.push(new alphaTab.model.Tuning("Bass Tune down 2 step",new Int32Array([39,34,29,24]),!1)),alphaTab.model.Tuning._fourStrings.push(new alphaTab.model.Tuning("Bass Dropped D Tuning",new Int32Array([43,38,33,26]),!1)),alphaTab.model.Tuning._fourStrings.push(new alphaTab.model.Tuning("Ukulele C Tuning",new Int32Array([45,40,36,43]),!1)),alphaTab.model.Tuning._fourStrings.push(new alphaTab.model.Tuning("Ukulele G Tuning",new Int32Array([52,47,43,38]),!1)),alphaTab.model.Tuning._fourStrings.push(new alphaTab.model.Tuning("Mandolin Standard Tuning",new Int32Array([64,57,50,43]),!1)),alphaTab.model.Tuning._fourStrings.push(new alphaTab.model.Tuning("Mandolin or Violin Tuning",new Int32Array([76,69,62,55]),!1)),alphaTab.model.Tuning._fourStrings.push(new alphaTab.model.Tuning("Viola Tuning",new Int32Array([69,62,55,48]),!1)),alphaTab.model.Tuning._fourStrings.push(new alphaTab.model.Tuning("Cello Tuning",new Int32Array([57,50,43,36]),!1))},alphaTab.model.Tuning.findTuning=function(strings){for(var tunings=alphaTab.model.Tuning.getPresetsFor(strings.length),t=0,tc=tunings.length;t<tc;){for(var tuning=tunings[t],equals=!0,i=0,j=strings.length;i<j;){if(strings[i]!=tuning.tunings[i]){equals=!1;break}++i}if(equals)return tuning;++t}return null},alphaTab.model.Tuning.prototype={__class__:alphaTab.model.Tuning},alphaTab.model.TuningParseResult=function(){this.note=null,this.noteValue=0,this.octave=0},alphaTab.model.TuningParseResult.__name__=["alphaTab","model","TuningParseResult"],alphaTab.model.TuningParseResult.prototype={get_realValue:function(){return 12*this.octave+this.noteValue},__class__:alphaTab.model.TuningParseResult},alphaTab.model.TuningParser=function(){},alphaTab.model.TuningParser.__name__=["alphaTab","model","TuningParser"],alphaTab.model.TuningParser.isTuning=function(name){return null!=alphaTab.model.TuningParser.parse(name)},alphaTab.model.TuningParser.parse=function(name){for(var note="",octave="",i=0;i<name.length;){var c=system.Convert.toUInt16(HxOverrides.cca(name,i));if(alphaTab.platform.Platform.isCharNumber(c,!1)){if(null==note||0==note.length)return null;octave+=String.fromCharCode(c)}else{if(!(65<=c&&c<=90||97<=c&&c<=122||35==c))return null;note+=String.fromCharCode(c)}++i}if(null==octave||0==octave.length||null==note||0==note.length)return null;var result=new alphaTab.model.TuningParseResult;return result.octave=alphaTab.platform.Platform.parseIntMinValue(octave)+1,result.note=note.toLowerCase(),result.noteValue=alphaTab.model.TuningParser.getToneForText(result.note),result},alphaTab.model.TuningParser.getTuningForText=function(str){var result=alphaTab.model.TuningParser.parse(str);return null==result?-1:result.get_realValue()},alphaTab.model.TuningParser.getToneForText=function(note){var b;switch(note.toLowerCase()){case"a":b=9;break;case"a#":case"bb":b=10;break;case"ab":case"g#":b=8;break;case"b":b=11;break;case"c":b=0;break;case"c#":case"db":b=1;break;case"d":b=2;break;case"e":b=4;break;case"d#":case"eb":b=3;break;case"f":b=5;break;case"g":b=7;break;case"f#":case"gb":b=6;break;default:return 0}return b},alphaTab.model.TupletGroup=$hx_exports.alphaTab.model.TupletGroup=function(voice){this._isEqualLengthTuplet=!0,this._totalDuration=0,this.beats=null,this.voice=null,this.isFull=!1,this.voice=voice;this.beats=[]},alphaTab.model.TupletGroup.__name__=["alphaTab","model","TupletGroup"],alphaTab.model.TupletGroup.prototype={check:function(beat){if(0==this.beats.length)return this.beats.push(beat),this._totalDuration=this._totalDuration+beat.playbackDuration,!0;if(0!=beat.graceType)return!0;if(beat.voice!=this.voice||this.isFull||beat.tupletNumerator!=this.beats[0].tupletNumerator||beat.tupletDenominator!=this.beats[0].tupletDenominator)return!1;if(beat.playbackDuration!=this.beats[0].playbackDuration&&(this._isEqualLengthTuplet=!1),this.beats.push(beat),this._totalDuration=this._totalDuration+beat.playbackDuration,this._isEqualLengthTuplet)this.beats.length==this.beats[0].tupletNumerator&&(this.isFull=!0);else for(var factor=this.beats[0].tupletNumerator/this.beats[0].tupletDenominator|0,potentialMatch=new system.Int32ArrayIterator(alphaTab.model.TupletGroup.AllTicks);potentialMatch.hasNext();){var potentialMatch1=potentialMatch.next();if(this._totalDuration==potentialMatch1*factor){this.isFull=!0;break}}return!0},__class__:alphaTab.model.TupletGroup},alphaTab.model._VibratoType={},alphaTab.model._VibratoType.VibratoType_Impl_=$hx_exports.alphaTab.model._VibratoType.VibratoType_Impl_={},alphaTab.model._VibratoType.VibratoType_Impl_.__name__=["alphaTab","model","_VibratoType","VibratoType_Impl_"],alphaTab.model._VibratoType.VibratoType_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.model._VibratoType.VibratoType_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._VibratoType.VibratoType_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.model._VibratoType.VibratoType_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.model._VibratoType.VibratoType_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.model._VibratoType.VibratoType_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._VibratoType.VibratoType_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.model._VibratoType.VibratoType_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._VibratoType.VibratoType_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.model._VibratoType.VibratoType_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._VibratoType.VibratoType_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.model._VibratoType.VibratoType_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.model._VibratoType.VibratoType_Impl_.toString=function(this1){switch(this1){case 0:return"None";case 1:return"Slight";case 2:return"Wide"}return""},alphaTab.model._VibratoType.VibratoType_Impl_.fromString=function(str){switch(str.toLowerCase()){case"none":return 0;case"slight":return 1;case"wide":return 2}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.model.Voice=$hx_exports.alphaTab.model.Voice=function(){this._beatLookup=null,this.index=0,this.bar=null,this.beats=null,this.isEmpty=!1;this.beats=[],this.isEmpty=!0},alphaTab.model.Voice.__name__=["alphaTab","model","Voice"],alphaTab.model.Voice.copyTo=function(src,dst){dst.index=src.index,dst.isEmpty=src.isEmpty},alphaTab.model.Voice.prototype={insertBeat:function(after,newBeat){newBeat.nextBeat=after.nextBeat,null!=newBeat.nextBeat&&(newBeat.nextBeat.previousBeat=newBeat),newBeat.previousBeat=after,newBeat.voice=this,after.nextBeat=newBeat,this.beats.splice(after.index+1,0,newBeat)},addBeat:function(beat){beat.voice=this,beat.index=this.beats.length,this.beats.push(beat),beat.isEmpty||(this.isEmpty=!1)},chain:function(beat){if(null!=this.bar)if(beat.index<this.beats.length-1)beat.nextBeat=this.beats[beat.index+1],beat.nextBeat.previousBeat=beat;else if(beat.get_isLastOfVoice()&&null!=beat.voice.bar.nextBar){var nextVoice=this.bar.nextBar.voices[this.index];0<nextVoice.beats.length&&(beat.nextBeat=nextVoice.beats[0]),beat.nextBeat.previousBeat=beat}},addGraceBeat:function(beat){if(0!=this.beats.length){var lastBeat=this.beats[this.beats.length-1],index=this.beats.length-1;-1!=index&&this.beats.splice(index,1),this.addBeat(beat),this.addBeat(lastBeat),this.isEmpty=!1}else this.addBeat(beat)},getBeatAtDisplayStart:function(displayStart){return this._beatLookup.hasOwnProperty(displayStart)?this._beatLookup[displayStart]:null},finish:function(settings){this._beatLookup={};for(var index=0;index<this.beats.length;){var beat=this.beats[index];beat.index=index,this.chain(beat),++index}for(var currentDisplayTick=0,currentPlaybackTick=0,i=0;i<this.beats.length;){var beat1=this.beats[i];if(beat1.index=i,beat1.finish(settings),0==beat1.graceType||3==beat1.graceType)beat1.displayStart=currentDisplayTick,beat1.playbackStart=currentPlaybackTick,currentDisplayTick+=beat1.displayDuration,currentPlaybackTick+=beat1.playbackDuration;else{if(null==beat1.previousBeat||0==beat1.previousBeat.graceType){for(var nonGrace=beat1,numberOfGraceBeats=0;null!=nonGrace&&0!=nonGrace.graceType;)nonGrace=nonGrace.nextBeat,++numberOfGraceBeats;var graceDuration=8,stolenDuration=0;graceDuration=1==numberOfGraceBeats?8:2==numberOfGraceBeats?16:32,null!=nonGrace&&nonGrace.updateDurations();for(var perGraceDisplayDuration=null==beat1.previousBeat?alphaTab.audio.MidiUtils.toTicks(32):(beat1.previousBeat.displayDuration/4|0)/numberOfGraceBeats|0,graceBeat=this.beats[i],j=0;j<numberOfGraceBeats&&null!=graceBeat;)graceBeat.duration=graceDuration,graceBeat.updateDurations(),graceBeat.displayStart=currentDisplayTick-(numberOfGraceBeats-j+1)*perGraceDisplayDuration,graceBeat.displayDuration=perGraceDisplayDuration,stolenDuration+=graceBeat.playbackDuration,graceBeat=graceBeat.nextBeat,++j;2==beat1.graceType?(null!=beat1.previousBeat&&(beat1.previousBeat.playbackDuration=beat1.previousBeat.playbackDuration-stolenDuration),currentPlaybackTick-=stolenDuration):null!=nonGrace&&1==beat1.graceType&&(nonGrace.playbackDuration=nonGrace.playbackDuration-stolenDuration)}beat1.playbackStart=currentPlaybackTick,currentPlaybackTick=beat1.playbackStart+beat1.playbackDuration}beat1.finishTuplet(),this._beatLookup[beat1.displayStart]=beat1,++i}},calculateDuration:function(){if(this.isEmpty||0==this.beats.length)return 0;var lastBeat=this.beats[this.beats.length-1];return lastBeat.playbackStart+lastBeat.playbackDuration},__class__:alphaTab.model.Voice},alphaTab.model._WhammyType={},alphaTab.model._WhammyType.WhammyType_Impl_=$hx_exports.alphaTab.model._WhammyType.WhammyType_Impl_={},alphaTab.model._WhammyType.WhammyType_Impl_.__name__=["alphaTab","model","_WhammyType","WhammyType_Impl_"],alphaTab.model._WhammyType.WhammyType_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.model._WhammyType.WhammyType_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._WhammyType.WhammyType_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.model._WhammyType.WhammyType_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.model._WhammyType.WhammyType_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.model._WhammyType.WhammyType_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.model._WhammyType.WhammyType_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.model._WhammyType.WhammyType_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._WhammyType.WhammyType_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.model._WhammyType.WhammyType_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.model._WhammyType.WhammyType_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.model._WhammyType.WhammyType_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.model._WhammyType.WhammyType_Impl_.toString=function(this1){switch(this1){case 0:return"None";case 1:return"Custom";case 2:return"Dive";case 3:return"Dip";case 4:return"Hold";case 5:return"Predive";case 6:return"PrediveDive"}return""},alphaTab.model._WhammyType.WhammyType_Impl_.fromString=function(str){switch(str.toLowerCase()){case"custom":return 1;case"dip":return 3;case"dive":return 2;case"hold":return 4;case"none":return 0;case"predive":return 5;case"predivedive":return 6}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.platform.javaScript.AlphaSynthFlashOutput=function(alphaSynthRoot){this._alphaSynthRoot=null,this._id=null,this._swfId=null,this._swfContainer=null,this._alphaSynthRoot=alphaSynthRoot;var lastSlash=this._alphaSynthRoot.lastIndexOf("/");-1!=lastSlash&&(this._alphaSynthRoot=HxOverrides.substr(this._alphaSynthRoot,0,lastSlash+1))},alphaTab.platform.javaScript.AlphaSynthFlashOutput.__name__=["alphaTab","platform","javaScript","AlphaSynthFlashOutput"],alphaTab.platform.javaScript.AlphaSynthFlashOutput.__interfaces__=[alphaTab.audio.synth.ISynthOutput],alphaTab.platform.javaScript.AlphaSynthFlashOutput.onReady=function(id){alphaTab.platform.javaScript.AlphaSynthFlashOutput.Lookup.hasOwnProperty(id)&&system._EventAction.EventAction_Impl_.invoke(alphaTab.platform.javaScript.AlphaSynthFlashOutput.Lookup[id].ready)},alphaTab.platform.javaScript.AlphaSynthFlashOutput.onSampleRequest=function(id){alphaTab.platform.javaScript.AlphaSynthFlashOutput.Lookup.hasOwnProperty(id)&&system._EventAction.EventAction_Impl_.invoke(alphaTab.platform.javaScript.AlphaSynthFlashOutput.Lookup[id].sampleRequest)},alphaTab.platform.javaScript.AlphaSynthFlashOutput.onFinished=function(id){alphaTab.platform.javaScript.AlphaSynthFlashOutput.Lookup.hasOwnProperty(id)&&null!=alphaTab.platform.javaScript.AlphaSynthFlashOutput.Lookup[id].finished&&system._EventAction.EventAction_Impl_.invoke(alphaTab.platform.javaScript.AlphaSynthFlashOutput.Lookup[id].finished)},alphaTab.platform.javaScript.AlphaSynthFlashOutput.onSamplesPlayed=function(id,samples){alphaTab.platform.javaScript.AlphaSynthFlashOutput.Lookup.hasOwnProperty(id)&&system._EventAction1.EventAction1_Impl_.invoke(alphaTab.platform.javaScript.AlphaSynthFlashOutput.Lookup[id].samplesPlayed,samples)},alphaTab.platform.javaScript.AlphaSynthFlashOutput.prototype={get_sampleRate:function(){return 44100},open:function(){this._id="alphaSynthFlashPlayer"+Std.string(alphaTab.platform.javaScript.AlphaSynthFlashOutput.NextId),this._swfId=this._id+"swf",alphaTab.platform.javaScript.AlphaSynthFlashOutput.Lookup[this._id]=this,alphaTab.platform.javaScript.AlphaSynthFlashOutput.NextId++;var document=window.document;this._swfContainer=document.createElement("div"),this._swfContainer.className="alphaSynthFlashPlayer",this._swfContainer.setAttribute("id",this._id),document.body.appendChild(this._swfContainer);var swf=$global.swfobject;swf?(0,swf.embedSWF)(this._alphaSynthRoot+"AlphaSynth.FlashOutput.swf",this._id,"1px","1px","9.0.0",null,{id:this._id,sampleRate:44100},{allowScriptAccess:"always"},{id:this._swfId}):alphaTab.util.Logger.error("Player","swfobject not found, player will not work",null)},get_flashOutput:function(){var element=this._swfId;return window.document.getElementById(element)},play:function(){var element=this._swfId;window.document.getElementById(element).alphaSynthPlay()},pause:function(){var element=this._swfId;window.document.getElementById(element).alphaSynthPause()},sequencerFinished:function(){var element=this._swfId;window.document.getElementById(element).alphaSynthSequencerFinished()},addSamples:function(samples){var uint8=new Uint8Array(samples.buffer),b64=window.btoa(String.fromCharCode.apply(null,uint8)),element=this._swfId;window.document.getElementById(element).alphaSynthAddSamples(b64)},resetSamples:function(){var element=this._swfId;window.document.getElementById(element).alphaSynthResetSamples()},addReady:function(value){this.ready=system._EventAction.EventAction_Impl_.add(this.ready,value)},removeReady:function(value){this.ready=system._EventAction.EventAction_Impl_.sub(this.ready,value)},addSampleRequest:function(value){this.sampleRequest=system._EventAction.EventAction_Impl_.add(this.sampleRequest,value)},removeSampleRequest:function(value){this.sampleRequest=system._EventAction.EventAction_Impl_.sub(this.sampleRequest,value)},addFinished:function(value){this.finished=system._EventAction.EventAction_Impl_.add(this.finished,value)},removeFinished:function(value){this.finished=system._EventAction.EventAction_Impl_.sub(this.finished,value)},addSamplesPlayed:function(value){this.samplesPlayed=system._EventAction1.EventAction1_Impl_.add(this.samplesPlayed,value)},removeSamplesPlayed:function(value){this.samplesPlayed=system._EventAction1.EventAction1_Impl_.sub(this.samplesPlayed,value)},activate:function(){},__class__:alphaTab.platform.javaScript.AlphaSynthFlashOutput},alphaTab.platform.javaScript.AlphaSynthWebAudioOutput=function(){this._context=null,this._buffer=null,this._source=null,this._audioNode=null,this._circularBuffer=null,this._finished=!1},alphaTab.platform.javaScript.AlphaSynthWebAudioOutput.__name__=["alphaTab","platform","javaScript","AlphaSynthWebAudioOutput"],alphaTab.platform.javaScript.AlphaSynthWebAudioOutput.__interfaces__=[alphaTab.audio.synth.ISynthOutput],alphaTab.platform.javaScript.AlphaSynthWebAudioOutput.prototype={get_sampleRate:function(){return this._context.sampleRate},open:function(){this._finished=!1,this.patchIosSampleRate(),this._circularBuffer=new alphaTab.audio.synth.ds.CircularSampleBuffer(40960),this._context=new AudioContext;var ctx=this._context;if("suspended"==ctx.state){var resume=null;resume=function(e){ctx.resume(),window.setTimeout(function(){"running"==ctx.state&&(window.document.body.removeEventListener("touchend",resume,!1),window.document.body.removeEventListener("click",resume,!1))},0)},window.document.body.addEventListener("touchend",resume,!1),window.document.body.addEventListener("click",resume,!1)}system._EventAction.EventAction_Impl_.invoke(this.ready)},activate:function(){null!=this._context&&this._context.resume()},patchIosSampleRate:function(){var ua=window.navigator.userAgent;if(-1!=ua.indexOf("iPhone")||-1!=ua.indexOf("iPad")){var context=new AudioContext,buffer=context.createBuffer(1,1,44100),dummy=context.createBufferSource();dummy.buffer=buffer,dummy.connect(context.destination),dummy.start(0),dummy.disconnect(0),context.close()}},play:function(){var ctx=this._context;"suspended"!=ctx.state&&"interrupted"!=ctx.state||ctx.resume(),this._buffer=this._context.createBuffer(2,4096,this._context.sampleRate),this._audioNode=this._context.createScriptProcessor(4096,0,2),this._audioNode.onaudioprocess=$bind(this,this.generateSound),this._circularBuffer.clear(),this.requestBuffers(),this._finished=!1,this._source=this._context.createBufferSource(),this._source.buffer=this._buffer,this._source.loop=!0,this._source.connect(this._audioNode,0,0),this._source.start(0),this._audioNode.connect(this._context.destination,0,0)},pause:function(){null!=this._source&&(this._source.stop(0),this._source.disconnect(0)),(this._source=null)!=this._audioNode&&this._audioNode.disconnect(0),this._audioNode=null},sequencerFinished:function(){this._finished=!0},addSamples:function(f){this._circularBuffer.write(f,0,f.length)},resetSamples:function(){this._circularBuffer.clear()},requestBuffers:function(){if(this._circularBuffer.count<20480&&null!=this.sampleRequest)for(var i=0;i<5;)system._EventAction.EventAction_Impl_.invoke(this.sampleRequest),++i},generateSound:function(e){var left=e.outputBuffer.getChannelData(0),right=e.outputBuffer.getChannelData(1),samples=left.length+right.length;if(this._circularBuffer.count<samples)this._finished&&system._EventAction.EventAction_Impl_.invoke(this.finished);else{var buffer=new Float32Array(samples);this._circularBuffer.read(buffer,0,buffer.length);for(var s=0,i=0;i<left.length;)left[i]=buffer[s++],right[i]=buffer[s++],++i;system._EventAction1.EventAction1_Impl_.invoke(this.samplesPlayed,left.length)}this._finished||this.requestBuffers()},addReady:function(value){this.ready=system._EventAction.EventAction_Impl_.add(this.ready,value)},removeReady:function(value){this.ready=system._EventAction.EventAction_Impl_.sub(this.ready,value)},addSamplesPlayed:function(value){this.samplesPlayed=system._EventAction1.EventAction1_Impl_.add(this.samplesPlayed,value)},removeSamplesPlayed:function(value){this.samplesPlayed=system._EventAction1.EventAction1_Impl_.sub(this.samplesPlayed,value)},addSampleRequest:function(value){this.sampleRequest=system._EventAction.EventAction_Impl_.add(this.sampleRequest,value)},removeSampleRequest:function(value){this.sampleRequest=system._EventAction.EventAction_Impl_.sub(this.sampleRequest,value)},addFinished:function(value){this.finished=system._EventAction.EventAction_Impl_.add(this.finished,value)},removeFinished:function(value){this.finished=system._EventAction.EventAction_Impl_.sub(this.finished,value)},__class__:alphaTab.platform.javaScript.AlphaSynthWebAudioOutput},alphaTab.platform.javaScript.AlphaSynthWebWorkerApi=function(player,alphaSynthScriptFile,logLevel){this._synth=null,this._output=null,this._workerIsReadyForPlayback=!1,this._workerIsReady=!1,this._outputIsReady=!1,this._state=0,this._masterVolume=0,this._metronomeVolume=0,this._playbackSpeed=0,this._tickPosition=0,this._timePosition=0,this._isLooping=!1,this._playbackRange=null,this._output=player,this._output.addReady($bind(this,this.onOutputReady)),this._output.addSamplesPlayed($bind(this,this.onOutputSamplesPlayed)),this._output.addSampleRequest($bind(this,this.onOutputSampleRequest)),this._output.addFinished($bind(this,this.onOutputFinished)),this._output.open();try{var blob=new Blob(["importScripts('"+alphaSynthScriptFile+"')"]);this._synth=new Worker(URL.createObjectURL(blob))}catch(__e){try{this._synth=new Worker(alphaSynthScriptFile)}catch(e){if(e instanceof js._Boot.HaxeError&&(e=e.val),!js.Boot.__instanceof(e,system.Exception))throw e;alphaTab.util.Logger.error("AlphaSynth","Failed to create WebWorker: "+Std.string(e),null)}}this._synth.addEventListener("message",$bind(this,this.handleWorkerMessage),!1),this._synth.postMessage({cmd:"alphaSynth.initialize",sampleRate:this._output.get_sampleRate(),logLevel:logLevel}),this.set_masterVolume(1),this.set_playbackSpeed(1),this.set_metronomeVolume(0)},alphaTab.platform.javaScript.AlphaSynthWebWorkerApi.__name__=["alphaTab","platform","javaScript","AlphaSynthWebWorkerApi"],alphaTab.platform.javaScript.AlphaSynthWebWorkerApi.__interfaces__=[alphaTab.audio.synth.IAlphaSynth],alphaTab.platform.javaScript.AlphaSynthWebWorkerApi.prototype={get_isReady:function(){return!!this._workerIsReady&&this._outputIsReady},get_isReadyForPlayback:function(){return this._workerIsReadyForPlayback},get_state:function(){return this._state},get_logLevel:function(){return alphaTab.util.Logger.logLevel},set_logLevel:function(value){return alphaTab.util.Logger.logLevel=value,this._synth.postMessage({cmd:"alphaSynth.setLogLevel",value:value}),this.get_logLevel()},get_masterVolume:function(){return this._masterVolume},set_masterVolume:function(value){return value=alphaTab.audio.synth.util.SynthHelper.clampF(value,0,1),this._masterVolume=value,this._synth.postMessage({cmd:"alphaSynth.setMasterVolume",value:value}),this.get_masterVolume()},get_metronomeVolume:function(){return this._metronomeVolume},set_metronomeVolume:function(value){return value=alphaTab.audio.synth.util.SynthHelper.clampF(value,0,1),this._metronomeVolume=value,this._synth.postMessage({cmd:"alphaSynth.setMetronomeVolume",value:value}),this.get_metronomeVolume()},get_playbackSpeed:function(){return this._playbackSpeed},set_playbackSpeed:function(value){return value=alphaTab.audio.synth.util.SynthHelper.clampD(value,.125,8),this._playbackSpeed=value,this._synth.postMessage({cmd:"alphaSynth.setPlaybackSpeed",value:value}),this.get_playbackSpeed()},get_tickPosition:function(){return this._tickPosition},set_tickPosition:function(value){return value<0&&(value=0),this._tickPosition=value,this._synth.postMessage({cmd:"alphaSynth.setTickPosition",value:value}),this.get_tickPosition()},get_timePosition:function(){return this._timePosition},set_timePosition:function(value){return value<0&&(value=0),this._timePosition=value,this._synth.postMessage({cmd:"alphaSynth.setTimePosition",value:value}),this.get_timePosition()},get_isLooping:function(){return this._isLooping},set_isLooping:function(value){return this._isLooping=value,this._synth.postMessage({cmd:"alphaSynth.setIsLooping",value:value}),this.get_isLooping()},get_playbackRange:function(){return this._playbackRange},set_playbackRange:function(value){return null!=value&&(value.startTick<0&&(value.startTick=0),value.endTick<0&&(value.endTick=0)),this._playbackRange=value,this._synth.postMessage({cmd:"alphaSynth.setPlaybackRange",value:value}),this.get_playbackRange()},destroy:function(){this._synth.terminate()},play:function(){return!(1==this.get_state()||!this.get_isReadyForPlayback())&&(this._output.activate(),this._synth.postMessage({cmd:"alphaSynth.play"}),!0)},pause:function(){this._synth.postMessage({cmd:"alphaSynth.pause"})},playPause:function(){this._output.activate(),this._synth.postMessage({cmd:"alphaSynth.playPause"})},stop:function(){this._synth.postMessage({cmd:"alphaSynth.stop"})},loadSoundFont:function(data){this._synth.postMessage({cmd:"alphaSynth.loadSoundFontBytes",data:data})},loadSoundFontFromUrl:function(data,progress){var _gthis=this,url=data;alphaTab.util.Logger.info("AlphaSynth","Start loading Soundfont from url "+url,null);var request=new XMLHttpRequest;request.open("GET",url,!0,null,null),request.responseType="arraybuffer",request.onload=function(e){var buffer=new Uint8Array(request.response);_gthis._synth.postMessage({cmd:"alphaSynth.loadSoundFontBytes",data:buffer})},request.onerror=function(e1){alphaTab.util.Logger.error("AlphaSynth","Loading failed: "+e1.message,null),_gthis.onSoundFontLoadFailed(e1)},request.onprogress=function(e2){alphaTab.util.Logger.debug("AlphaSynth","Soundfont downloading: "+e2.loaded+"/"+e2.total+" bytes",null),progress(new alphaTab.ProgressEventArgs(e2.loaded,e2.total))},request.send()},loadMidiFile:function(midi){this._synth.postMessage({cmd:"alphaSynth.loadMidi",midi:alphaTab.model.JsonConverter.midiFileToJsObject(midi)})},setChannelMute:function(channel,mute){this._synth.postMessage({cmd:"alphaSynth.setChannelMute",channel:channel,mute:mute})},resetChannelStates:function(){this._synth.postMessage({cmd:"alphaSynth.resetChannelStates"})},setChannelSolo:function(channel,solo){this._synth.postMessage({cmd:"alphaSynth.setChannelSolo",channel:channel,solo:solo})},setChannelVolume:function(channel,volume){volume=alphaTab.audio.synth.util.SynthHelper.clampF(volume,0,1),this._synth.postMessage({cmd:"alphaSynth.setChannelVolume",channel:channel,volume:volume})},setChannelProgram:function(channel,program){program=alphaTab.audio.synth.util.SynthHelper.clampB(program,0,127),this._synth.postMessage({cmd:"alphaSynth.setChannelProgram",channel:channel,program:program})},handleWorkerMessage:function(e){var data=e.data;switch(data.cmd){case"alphaSynth.finished":this.onFinished();break;case"alphaSynth.log":alphaTab.util.Logger.log(data.level,"AlphaSynth",data.message,null);break;case"alphaSynth.midiLoadFailed":this.checkReadyForPlayback(),this.onMidiLoadFailed(data.error);break;case"alphaSynth.midiLoaded":this.checkReadyForPlayback(),this.onMidiLoaded();break;case"alphaSynth.output.addSamples":this._output.addSamples(data.samples);break;case"alphaSynth.output.pause":this._output.pause();break;case"alphaSynth.output.play":this._output.play();break;case"alphaSynth.output.resetSamples":this._output.resetSamples();break;case"alphaSynth.output.sequencerFinished":this._output.sequencerFinished();break;case"alphaSynth.playerStateChanged":this._state=data.state,this.onStateChanged(new alphaTab.audio.synth.PlayerStateChangedEventArgs(data.state,data.stopped));break;case"alphaSynth.positionChanged":this._timePosition=data.currentTime,this._tickPosition=data.currentTick,this.onPositionChanged(new alphaTab.audio.synth.PositionChangedEventArgs(data.currentTime,data.endTime,data.currentTick,data.endTick));break;case"alphaSynth.ready":this._workerIsReady=!0,this.checkReady();break;case"alphaSynth.readyForPlayback":this._workerIsReadyForPlayback=!0,this.checkReadyForPlayback();break;case"alphaSynth.soundFontLoadFailed":this.onSoundFontLoadFailed(data.error);break;case"alphaSynth.soundFontLoaded":this.onSoundFontLoaded()}},checkReady:function(){this.get_isReady()&&this.onReady()},checkReadyForPlayback:function(){this.get_isReadyForPlayback()&&this.onReadyForPlayback()},addReady:function(value){this.ready=system._EventAction.EventAction_Impl_.add(this.ready,value)},removeReady:function(value){this.ready=system._EventAction.EventAction_Impl_.sub(this.ready,value)},onReady:function(){function handler(){system._EventAction.EventAction_Impl_.invoke(_e)}var _e=this.ready;null!=handler&&handler()},addReadyForPlayback:function(value){this.readyForPlayback=system._EventAction.EventAction_Impl_.add(this.readyForPlayback,value)},removeReadyForPlayback:function(value){this.readyForPlayback=system._EventAction.EventAction_Impl_.sub(this.readyForPlayback,value)},onReadyForPlayback:function(){function handler(){system._EventAction.EventAction_Impl_.invoke(_e)}var _e=this.readyForPlayback;null!=handler&&handler()},addFinished:function(value){this.finished=system._EventAction.EventAction_Impl_.add(this.finished,value)},removeFinished:function(value){this.finished=system._EventAction.EventAction_Impl_.sub(this.finished,value)},onFinished:function(){function handler(){system._EventAction.EventAction_Impl_.invoke(_e)}var _e=this.finished;null!=handler&&handler()},addSoundFontLoaded:function(value){this.soundFontLoaded=system._EventAction.EventAction_Impl_.add(this.soundFontLoaded,value)},removeSoundFontLoaded:function(value){this.soundFontLoaded=system._EventAction.EventAction_Impl_.sub(this.soundFontLoaded,value)},onSoundFontLoaded:function(){function handler(){system._EventAction.EventAction_Impl_.invoke(_e)}var _e=this.soundFontLoaded;null!=handler&&handler()},addSoundFontLoadFailed:function(value){this.soundFontLoadFailed=system._EventAction1.EventAction1_Impl_.add(this.soundFontLoadFailed,value)},removeSoundFontLoadFailed:function(value){this.soundFontLoadFailed=system._EventAction1.EventAction1_Impl_.sub(this.soundFontLoadFailed,value)},onSoundFontLoadFailed:function(e){function handler(p){system._EventAction1.EventAction1_Impl_.invoke(_e,p)}var _e=this.soundFontLoadFailed;null!=handler&&handler(e)},addMidiLoaded:function(value){this.midiLoaded=system._EventAction.EventAction_Impl_.add(this.midiLoaded,value)},removeMidiLoaded:function(value){this.midiLoaded=system._EventAction.EventAction_Impl_.sub(this.midiLoaded,value)},onMidiLoaded:function(){function handler(){system._EventAction.EventAction_Impl_.invoke(_e)}var _e=this.midiLoaded;null!=handler&&handler()},addMidiLoadFailed:function(value){this.midiLoadFailed=system._EventAction1.EventAction1_Impl_.add(this.midiLoadFailed,value)},removeMidiLoadFailed:function(value){this.midiLoadFailed=system._EventAction1.EventAction1_Impl_.sub(this.midiLoadFailed,value)},onMidiLoadFailed:function(e){function handler(p){system._EventAction1.EventAction1_Impl_.invoke(_e,p)}var _e=this.midiLoadFailed;null!=handler&&handler(e)},addStateChanged:function(value){this.stateChanged=system._EventAction1.EventAction1_Impl_.add(this.stateChanged,value)},removeStateChanged:function(value){this.stateChanged=system._EventAction1.EventAction1_Impl_.sub(this.stateChanged,value)},onStateChanged:function(e){function handler(p){system._EventAction1.EventAction1_Impl_.invoke(_e,p)}var _e=this.stateChanged;null!=handler&&handler(e)},addPositionChanged:function(value){this.positionChanged=system._EventAction1.EventAction1_Impl_.add(this.positionChanged,value)},removePositionChanged:function(value){this.positionChanged=system._EventAction1.EventAction1_Impl_.sub(this.positionChanged,value)},onPositionChanged:function(e){function handler(p){system._EventAction1.EventAction1_Impl_.invoke(_e,p)}var _e=this.positionChanged;null!=handler&&handler(e)},onOutputSampleRequest:function(){this._synth.postMessage({cmd:"alphaSynth.output.sampleRequest"})},onOutputFinished:function(){this._synth.postMessage({cmd:"alphaSynth.output.finished"})},onOutputSamplesPlayed:function(samples){this._synth.postMessage({cmd:"alphaSynth.output.samplesPlayed",samples:samples})},onOutputReady:function(){this._outputIsReady=!0,this.checkReady()},__class__:alphaTab.platform.javaScript.AlphaSynthWebWorkerApi},alphaTab.platform.javaScript.AlphaTabApi=$hx_exports.alphaTab.platform.javaScript.AlphaTabApi=function(element,options){alphaTab.AlphaTabApi.call(this,new alphaTab.ui.BrowserUiFacade(element),options)},alphaTab.platform.javaScript.AlphaTabApi.__name__=["alphaTab","platform","javaScript","AlphaTabApi"],alphaTab.platform.javaScript.AlphaTabApi.__super__=alphaTab.AlphaTabApi,alphaTab.platform.javaScript.AlphaTabApi.prototype=$extend(alphaTab.AlphaTabApi.prototype,{get_playerState:function(){return this.player.get_state()},tex:function(tex,tracks){var browser=js.Boot.__cast(this.uiFacade,alphaTab.ui.BrowserUiFacade);alphaTab.AlphaTabApi.prototype.tex.call(this,tex,browser.parseTracks(tracks))},print:function(width){var dualScreenLeft,dualScreenTop,screenWidth,screenHeight,preview=window.open("","","width=0,height=0"),a4=preview.document.createElement("div");(null!=width&&0!=width.length?a4.style.width=width:1==this.settings.display.layoutMode?a4.style.width="297mm":a4.style.width="210mm",preview.document.write("<!DOCTYPE html><html></head><body></body></html>"),preview.document.body.appendChild(a4),dualScreenLeft=void 0!==window.ScreenLeft?window.ScreenLeft:window.screen.left,dualScreenTop=void 0!==window.ScreenTop?window.ScreenTop:window.screen.top,void 0!==window.innerWidth)?screenWidth=window.innerWidth:screenWidth=void 0!==window.document.documentElement.clientWidth?window.document.documentElement.clientWidth:window.screen.width;void 0!==window.innerHeight?screenHeight=window.innerHeight:screenHeight=void 0!==window.document.documentElement.clientHeight?window.document.documentElement.clientHeight:window.screen.height;var w=a4.offsetWidth+50,h=window.innerHeight,left=(screenWidth/2|0)-(w/2|0)+dualScreenLeft,top=(screenHeight/2|0)-(h/2|0)+dualScreenTop;preview.resizeTo(w,h),preview.moveTo(left,top),preview.focus();var settings=new alphaTab.Settings;settings.core.scriptFile=this.settings.core.scriptFile,settings.core.fontDirectory=this.settings.core.fontDirectory,settings.core.enableLazyLoading=!1,settings.core.useWorkers=!1,settings.display.scale=.8,settings.display.stretchForce=.8;var alphaTab1=new alphaTab.platform.javaScript.AlphaTabApi(a4,settings);alphaTab1.renderer.addPostRenderFinished(function(){alphaTab1.canvasElement.set_height(-1),preview.print()}),alphaTab1.renderTracks(this.tracks)},downloadMidi:function(){var midiFile=new alphaTab.audio.synth.midi.MidiFile,handler=new alphaTab.audio.generator.AlphaSynthMidiFileHandler(midiFile);new alphaTab.audio.generator.MidiFileGenerator(this.score,this.settings,handler).generate();var fileName,uint8Array=midiFile.toBinary(),s=this.score.title;fileName=null==s||0==s.length?"File.mid":this.score.title+".mid";var dlLink=js.Boot.__cast(window.document.createElement("a"),HTMLAnchorElement);dlLink.download=fileName;var blob=new Blob([uint8Array],{type:"audio/midi"}),url=URL.createObjectURL(blob);dlLink.href=url,dlLink.style.display="none",window.document.body.appendChild(dlLink),dlLink.click(),window.document.body.removeChild(dlLink)},changeTrackMute:function(tracks,mute){var trackList=this.trackIndexesToTracks(js.Boot.__cast(this.uiFacade,alphaTab.ui.BrowserUiFacade).parseTracks(tracks));alphaTab.AlphaTabApi.prototype.changeTrackMute.call(this,trackList,mute)},changeTrackSolo:function(tracks,solo){var trackList=this.trackIndexesToTracks(js.Boot.__cast(this.uiFacade,alphaTab.ui.BrowserUiFacade).parseTracks(tracks));alphaTab.AlphaTabApi.prototype.changeTrackSolo.call(this,trackList,solo)},changeTrackVolume:function(tracks,volume){var trackList=this.trackIndexesToTracks(js.Boot.__cast(this.uiFacade,alphaTab.ui.BrowserUiFacade).parseTracks(tracks));alphaTab.AlphaTabApi.prototype.changeTrackVolume.call(this,trackList,volume)},trackIndexesToTracks:function(trackIndexes){if(null==this.score)return new Array(0);var tracks=[];if(1==trackIndexes.length&&-1==trackIndexes[0])for(var track=$iterator(this.score.tracks)();track.hasNext();){var track1=track.next();tracks.push(track1)}else for(var index=new system.Int32ArrayIterator(trackIndexes);index.hasNext();){var index1=index.next();0<=index1&&index1<this.score.tracks.length&&tracks.push(this.score.tracks[index1])}return tracks},addSoundFontLoad:function(value){this.soundFontLoad=system._EventAction1.EventAction1_Impl_.add(this.soundFontLoad,value)},removeSoundFontLoad:function(value){this.soundFontLoad=system._EventAction1.EventAction1_Impl_.sub(this.soundFontLoad,value)},onSoundFontLoad:function(e){function handler(p){system._EventAction1.EventAction1_Impl_.invoke(_e,p)}var _e=this.soundFontLoad;null!=handler&&handler(e),this.uiFacade.triggerEvent(this.container,"soundFontLoad",e)},loadSoundFontFromUrl:function(url){null!=this.player&&js.Boot.__cast(this.player,alphaTab.platform.javaScript.AlphaSynthWebWorkerApi).loadSoundFontFromUrl(url,$bind(this,this.onSoundFontLoad))},__class__:alphaTab.platform.javaScript.AlphaTabApi}),alphaTab.rendering.IScoreRenderer=$hx_exports.alphaTab.rendering.IScoreRenderer=function(){},alphaTab.rendering.IScoreRenderer.__name__=["alphaTab","rendering","IScoreRenderer"],alphaTab.rendering.IScoreRenderer.prototype={__class__:alphaTab.rendering.IScoreRenderer},alphaTab.platform.javaScript.AlphaTabWorkerScoreRenderer=function(api,settings){this._api=null,this._worker=null,this._width=0,this.set_boundsLookup(null),this._api=api;try{var script="importScripts('"+settings.core.scriptFile+"')",blob=new Blob([script]);this._worker=new Worker(URL.createObjectURL(blob))}catch(e){if(e instanceof js._Boot.HaxeError&&(e=e.val),!js.Boot.__instanceof(e,system.Exception))throw e;try{this._worker=new Worker(settings.core.scriptFile)}catch(__e1){alphaTab.util.Logger.error("Rendering","Failed to create WebWorker: "+Std.string(e),null)}}this._worker.postMessage({cmd:"alphaTab.initialize",settings:this.serializeSettingsForWorker(settings)}),this._worker.addEventListener("message",$bind(this,this.handleWorkerMessage))},alphaTab.platform.javaScript.AlphaTabWorkerScoreRenderer.__name__=["alphaTab","platform","javaScript","AlphaTabWorkerScoreRenderer"],alphaTab.platform.javaScript.AlphaTabWorkerScoreRenderer.__interfaces__=[alphaTab.rendering.IScoreRenderer],alphaTab.platform.javaScript.AlphaTabWorkerScoreRenderer.prototype={get_boundsLookup:function(){return this.__BoundsLookup},set_boundsLookup:function(value){return this.__BoundsLookup=value},destroy:function(){this._worker.terminate()},updateSettings:function(settings){this._worker.postMessage({cmd:"alphaTab.updateSettings",settings:this.serializeSettingsForWorker(settings)})},serializeSettingsForWorker:function(settings){var json=alphaTab.Settings.toJson(settings);return json.player=null,json},render:function(){this._worker.postMessage({cmd:"alphaTab.render"})},resizeRender:function(){this._worker.postMessage({cmd:"alphaTab.resizeRender"})},get_width:function(){return this._width},set_width:function(value){return this._width=value,this._worker.postMessage({cmd:"alphaTab.setWidth",width:value}),this.get_width()},handleWorkerMessage:function(e){var data=js.Boot.__cast(e,MessageEvent).data;switch(data.cmd){case"alphaTab.error":this.onError(data.type,data.detail);break;case"alphaTab.partialRenderFinished":this.onPartialRenderFinished(data.result);break;case"alphaTab.postRenderFinished":this.set_boundsLookup(alphaTab.rendering.utils.BoundsLookup.fromJson(data.boundsLookup,this._api.score)),this.onPostRenderFinished();break;case"alphaTab.preRender":this.onPreRender(data.resize);break;case"alphaTab.renderFinished":this.onRenderFinished(data.result)}},renderScore:function(score,trackIndexes){var jsObject=alphaTab.model.JsonConverter.scoreToJsObject(score);this._worker.postMessage({cmd:"alphaTab.renderScore",score:jsObject,trackIndexes:trackIndexes,fontSizes:alphaTab.platform.svg.FontSizes.FontSizeLookupTables})},addPreRender:function(value){this.preRender=system._EventAction1.EventAction1_Impl_.add(this.preRender,value)},removePreRender:function(value){this.preRender=system._EventAction1.EventAction1_Impl_.sub(this.preRender,value)},onPreRender:function(resize){function handler(p){system._EventAction1.EventAction1_Impl_.invoke(_e,p)}var _e=this.preRender;null!=handler&&handler(resize)},addPartialRenderFinished:function(value){this.partialRenderFinished=system._EventAction1.EventAction1_Impl_.add(this.partialRenderFinished,value)},removePartialRenderFinished:function(value){this.partialRenderFinished=system._EventAction1.EventAction1_Impl_.sub(this.partialRenderFinished,value)},onPartialRenderFinished:function(obj){function handler(p){system._EventAction1.EventAction1_Impl_.invoke(_e,p)}var _e=this.partialRenderFinished;null!=handler&&handler(obj)},addRenderFinished:function(value){this.renderFinished=system._EventAction1.EventAction1_Impl_.add(this.renderFinished,value)},removeRenderFinished:function(value){this.renderFinished=system._EventAction1.EventAction1_Impl_.sub(this.renderFinished,value)},onRenderFinished:function(obj){function handler(p){system._EventAction1.EventAction1_Impl_.invoke(_e,p)}var _e=this.renderFinished;null!=handler&&handler(obj)},addError:function(value){this.error=system._EventAction2.EventAction2_Impl_.add(this.error,value)},removeError:function(value){this.error=system._EventAction2.EventAction2_Impl_.sub(this.error,value)},onError:function(type,details){function handler(p1,p2){system._EventAction2.EventAction2_Impl_.invoke(_e,p1,p2)}var _e=this.error;null!=handler&&handler(type,details)},addPostRenderFinished:function(value){this.postRenderFinished=system._EventAction.EventAction_Impl_.add(this.postRenderFinished,value)},removePostRenderFinished:function(value){this.postRenderFinished=system._EventAction.EventAction_Impl_.sub(this.postRenderFinished,value)},onPostRenderFinished:function(){function handler(){system._EventAction.EventAction_Impl_.invoke(_e)}var _e=this.postRenderFinished;null!=handler&&handler()},__class__:alphaTab.platform.javaScript.AlphaTabWorkerScoreRenderer},alphaTab.platform.javaScript.IFlashSynthOutput=function(){},alphaTab.platform.javaScript.IFlashSynthOutput.__name__=["alphaTab","platform","javaScript","IFlashSynthOutput"],alphaTab.platform.javaScript.IFlashSynthOutput.prototype={__class__:alphaTab.platform.javaScript.IFlashSynthOutput},alphaTab.platform.model._FontStyle={},alphaTab.platform.model._FontStyle.FontStyle_Impl_=$hx_exports.alphaTab.platform.model._FontStyle.FontStyle_Impl_={},alphaTab.platform.model._FontStyle.FontStyle_Impl_.__name__=["alphaTab","platform","model","_FontStyle","FontStyle_Impl_"],alphaTab.platform.model._FontStyle.FontStyle_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.platform.model._FontStyle.FontStyle_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.platform.model._FontStyle.FontStyle_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.platform.model._FontStyle.FontStyle_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.platform.model._FontStyle.FontStyle_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.platform.model._FontStyle.FontStyle_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.platform.model._FontStyle.FontStyle_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.platform.model._FontStyle.FontStyle_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.platform.model._FontStyle.FontStyle_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.platform.model._FontStyle.FontStyle_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.platform.model._FontStyle.FontStyle_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.platform.model._FontStyle.FontStyle_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.platform.model._FontStyle.FontStyle_Impl_.toString=function(this1){switch(this1){case 0:return"Plain";case 1:return"Bold";case 2:return"Italic"}return""},alphaTab.platform.model._FontStyle.FontStyle_Impl_.fromString=function(str){switch(str.toLowerCase()){case"bold":return 1;case"italic":return 2;case"plain":return 0}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.platform.model._TextAlign={},alphaTab.platform.model._TextAlign.TextAlign_Impl_=$hx_exports.alphaTab.platform.model._TextAlign.TextAlign_Impl_={},alphaTab.platform.model._TextAlign.TextAlign_Impl_.__name__=["alphaTab","platform","model","_TextAlign","TextAlign_Impl_"],alphaTab.platform.model._TextAlign.TextAlign_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.platform.model._TextAlign.TextAlign_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.platform.model._TextAlign.TextAlign_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.platform.model._TextAlign.TextAlign_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.platform.model._TextAlign.TextAlign_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.platform.model._TextAlign.TextAlign_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.platform.model._TextAlign.TextAlign_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.platform.model._TextAlign.TextAlign_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.platform.model._TextAlign.TextAlign_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.platform.model._TextAlign.TextAlign_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.platform.model._TextAlign.TextAlign_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.platform.model._TextAlign.TextAlign_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.platform.model._TextAlign.TextAlign_Impl_.toString=function(this1){switch(this1){case 0:return"Left";case 1:return"Center";case 2:return"Right"}return""},alphaTab.platform.model._TextAlign.TextAlign_Impl_.fromString=function(str){switch(str.toLowerCase()){case"center":return 1;case"left":return 0;case"right":return 2}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.platform.model._TextBaseline={},alphaTab.platform.model._TextBaseline.TextBaseline_Impl_=$hx_exports.alphaTab.platform.model._TextBaseline.TextBaseline_Impl_={},alphaTab.platform.model._TextBaseline.TextBaseline_Impl_.__name__=["alphaTab","platform","model","_TextBaseline","TextBaseline_Impl_"],alphaTab.platform.model._TextBaseline.TextBaseline_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.platform.model._TextBaseline.TextBaseline_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.platform.model._TextBaseline.TextBaseline_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.platform.model._TextBaseline.TextBaseline_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.platform.model._TextBaseline.TextBaseline_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.platform.model._TextBaseline.TextBaseline_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.platform.model._TextBaseline.TextBaseline_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.platform.model._TextBaseline.TextBaseline_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.platform.model._TextBaseline.TextBaseline_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.platform.model._TextBaseline.TextBaseline_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.platform.model._TextBaseline.TextBaseline_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.platform.model._TextBaseline.TextBaseline_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.platform.model._TextBaseline.TextBaseline_Impl_.toString=function(this1){switch(this1){case 0:return"Top";case 1:return"Middle";case 2:return"Bottom"}return""},alphaTab.platform.model._TextBaseline.TextBaseline_Impl_.fromString=function(str){switch(str.toLowerCase()){case"bottom":return 2;case"middle":return 1;case"top":return 0}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.platform.svg.FontSizes=function(){},alphaTab.platform.svg.FontSizes.__name__=["alphaTab","platform","svg","FontSizes"],alphaTab.platform.svg.FontSizes.generateFontLookup=function(family){if(null==alphaTab.platform.svg.FontSizes.FontSizeLookupTables&&alphaTab.platform.svg.FontSizes.init(),!alphaTab.platform.svg.FontSizes.FontSizeLookupTables.hasOwnProperty(family))if($global.document){var measureContext=js.Boot.__cast(window.document.createElement("canvas"),HTMLCanvasElement).getContext("2d");measureContext.font="11px "+family;for(var sizes=[],i=32;i<255;){var s=String.fromCharCode(i);sizes.push(measureContext.measureText(s).width),++i}var data=new Uint8Array(sizes);alphaTab.platform.svg.FontSizes.FontSizeLookupTables[family]=data}else alphaTab.platform.svg.FontSizes.FontSizeLookupTables[family]=new Uint8Array([8])},alphaTab.platform.svg.FontSizes.init=function(){alphaTab.platform.svg.FontSizes.Georgia=new Uint8Array([3,4,5,7,7,9,8,2,4,4,5,7,3,4,3,5,7,5,6,6,6,6,6,6,7,6,3,3,7,7,7,5,10,7,7,7,8,7,7,8,9,4,6,8,7,10,8,8,7,8,8,6,7,8,7,11,8,7,7,4,5,4,7,7,6,6,6,5,6,5,4,6,6,3,3,6,3,10,6,6,6,6,5,5,4,6,5,8,6,5,5,5,4,5,7,6,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,3,4,6,7,6,7,4,6,6,10,6,6,7,0,10,7,5,7,6,6,6,6,6,3,6,6,6,6,12,12,12,5,7,7,7,7,7,7,11,7,7,7,7,7,4,4,4,4,8,8,8,8,8,8,8,7,8,8,8,8,8,7,7,6,6,6,6,6,6,6,8,5,5,5,5,5,3,3,3,3,6,6,6,6,6,6,6,7,6,6,6,6,6,5,6]),alphaTab.platform.svg.FontSizes.Arial=new Uint8Array([3,3,4,6,6,10,7,2,4,4,4,6,3,4,3,3,6,6,6,6,6,6,6,6,6,6,3,3,6,6,6,6,11,7,7,8,8,7,7,9,8,3,6,7,6,9,8,9,7,9,8,7,7,8,7,10,7,7,7,3,3,3,5,6,4,6,6,6,6,6,3,6,6,2,2,6,2,9,6,6,6,6,4,6,3,6,6,8,6,6,6,4,3,4,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,4,6,6,6,6,3,6,4,8,4,6,6,0,8,6,4,6,4,4,4,6,6,4,4,4,4,6,9,9,9,7,7,7,7,7,7,7,11,8,7,7,7,7,3,3,3,3,8,8,9,9,9,9,9,6,9,8,8,8,8,7,7,7,6,6,6,6,6,6,10,6,6,6,6,6,3,3,3,3,6,6,6,6,6,6,6,6,7,6,6,6,6,6,6]);alphaTab.platform.svg.FontSizes.FontSizeLookupTables={},alphaTab.platform.svg.FontSizes.FontSizeLookupTables.Arial=alphaTab.platform.svg.FontSizes.Arial,alphaTab.platform.svg.FontSizes.FontSizeLookupTables["'Arial'"]=alphaTab.platform.svg.FontSizes.Arial,alphaTab.platform.svg.FontSizes.FontSizeLookupTables['"Arial"']=alphaTab.platform.svg.FontSizes.Arial,alphaTab.platform.svg.FontSizes.FontSizeLookupTables.Georgia=alphaTab.platform.svg.FontSizes.Georgia,alphaTab.platform.svg.FontSizes.FontSizeLookupTables["'Georgia'"]=alphaTab.platform.svg.FontSizes.Georgia,alphaTab.platform.svg.FontSizes.FontSizeLookupTables['"Georgia"']=alphaTab.platform.svg.FontSizes.Georgia},alphaTab.platform.svg.FontSizes.measureString=function(s,family,size,style){var data;null==alphaTab.platform.svg.FontSizes.FontSizeLookupTables&&alphaTab.platform.svg.FontSizes.init();alphaTab.platform.svg.FontSizes.FontSizeLookupTables.hasOwnProperty(family)||alphaTab.platform.svg.FontSizes.generateFontLookup(family),data=alphaTab.platform.svg.FontSizes.FontSizeLookupTables[family];var factor=1;0!=(2&style)&&(factor*=1.2),0!=(1&style)&&(factor*=1.2);for(var stringSize=0,i=0;i<s.length;){var a=data.length-1,this1=system.Convert.toUInt16(HxOverrides.cca(s,i)),code=Math.min(a,this1-32);0<=code&&(stringSize+=data[code]*size/11),++i}return stringSize*factor},alphaTab.platform.svg.FontSizes.prototype={__class__:alphaTab.platform.svg.FontSizes},alphaTab.rendering.BarRendererBase=function(renderer,bar){this._preBeatGlyphs=null,this._voiceContainers=null,this._postBeatGlyphs=null,this.staff=null,this.x=0,this.y=0,this.width=0,this.height=0,this.index=0,this.topOverflow=0,this.bottomOverflow=0,this.helpers=null,this.bar=null,this.isLinkedToPrevious=!1,this.canWrap=!1,this.scoreRenderer=null,this._wasFirstOfLine=!1,this.layoutingInfo=null,this._appliedLayoutingInfo=0,this.isFinalized=!1,this.topPadding=0,this.bottomPadding=0,this.bar=bar,this.scoreRenderer=renderer,this.helpers=new alphaTab.rendering.utils.BarHelpers(bar),this.canWrap=!0},alphaTab.rendering.BarRendererBase.__name__=["alphaTab","rendering","BarRendererBase"],alphaTab.rendering.BarRendererBase.prototype={get_nextRenderer:function(){return null==this.bar.nextBar?null:this.scoreRenderer.layout.getRendererForBar(this.staff.get_staveId(),this.bar.nextBar)},get_previousRenderer:function(){return null==this.bar.previousBar?null:this.scoreRenderer.layout.getRendererForBar(this.staff.get_staveId(),this.bar.previousBar)},registerOverflowTop:function(topOverflow){topOverflow>this.topOverflow&&(this.topOverflow=topOverflow)},registerOverflowBottom:function(bottomOverflow){bottomOverflow>this.bottomOverflow&&(this.bottomOverflow=bottomOverflow)},scaleToWidth:function(width){for(var containerWidth=width-this._preBeatGlyphs.width-this._postBeatGlyphs.width,this1=this._voiceContainers,voice=$iterator(Object.keys(this1))();voice.hasNext();){var voice1=voice.next();this._voiceContainers[voice1].scaleToWidth(containerWidth)}this._postBeatGlyphs.x=this._preBeatGlyphs.x+this._preBeatGlyphs.width+containerWidth,this.width=width},get_resources:function(){return this.get_settings().display.resources},get_settings:function(){return this.scoreRenderer.settings},get_scale:function(){return this.get_settings().display.scale},get_isFirstOfLine:function(){return 0==this.index},get_isLast:function(){return this.bar.index==this.scoreRenderer.layout.lastBarIndex},registerLayoutingInfo:function(){var info=this.layoutingInfo,preSize=this._preBeatGlyphs.width;info.preBeatSize<preSize&&(info.preBeatSize=preSize);for(var this1=this._voiceContainers,voice=$iterator(Object.keys(this1))();voice.hasNext();){var voice1=voice.next();this._voiceContainers[voice1].registerLayoutingInfo(info)}var postSize=this._postBeatGlyphs.width;info.postBeatSize<postSize&&(info.postBeatSize=postSize)},applyLayoutingInfo:function(){if(this._appliedLayoutingInfo>=this.layoutingInfo.version)return!1;this._appliedLayoutingInfo=this.layoutingInfo.version,this._preBeatGlyphs.width=this.layoutingInfo.preBeatSize;for(var voiceEnd=this._preBeatGlyphs.x+this._preBeatGlyphs.width,this1=this._voiceContainers,voice=$iterator(Object.keys(this1))();voice.hasNext();){var voice1=voice.next(),c=this._voiceContainers[voice1];c.x=this._preBeatGlyphs.x+this._preBeatGlyphs.width,c.applyLayoutingInfo(this.layoutingInfo);var newEnd=c.x+c.width;voiceEnd<newEnd&&(voiceEnd=newEnd)}var this2=voiceEnd;this._postBeatGlyphs.x=js.Boot.__cast(Math.floor(this2),Float),this._postBeatGlyphs.width=this.layoutingInfo.postBeatSize;var this3=this._postBeatGlyphs.x+this._postBeatGlyphs.width;return this.width=js.Boot.__cast(Math.ceil(this3),Float),!0},finalizeRenderer:function(){this.isFinalized=!0},doLayout:function(){this._preBeatGlyphs=new alphaTab.rendering.glyphs.LeftToRightLayoutingGlyphGroup;(this._preBeatGlyphs.renderer=this)._voiceContainers={},this._postBeatGlyphs=new alphaTab.rendering.glyphs.LeftToRightLayoutingGlyphGroup,this._postBeatGlyphs.renderer=this;for(var i=0;i<this.bar.voices.length;){var voice=this.bar.voices[i];if(this.hasVoiceContainer(voice)){var c=new alphaTab.rendering.glyphs.VoiceContainerGlyph(0,0,voice);(c.renderer=this)._voiceContainers[this.bar.voices[i].index]=c}++i}3==this.bar.simileMark&&(this.canWrap=!1),this.createPreBeatGlyphs(),this.createBeatGlyphs(),this.createPostBeatGlyphs(),this.updateSizes()},hasVoiceContainer:function(voice){return!voice.isEmpty||0==voice.index},updateSizes:function(){this.staff.registerStaffTop(this.topPadding),this.staff.registerStaffBottom(this.height-this.bottomPadding);for(var voiceContainers=this._voiceContainers,beatGlyphsStart=this.get_beatGlyphsStart(),postBeatStart=beatGlyphsStart,voice=$iterator(Object.keys(voiceContainers))();voice.hasNext();){var c=voiceContainers[voice.next()];c.x=beatGlyphsStart,c.doLayout();var x=c.x+c.width;postBeatStart<x&&(postBeatStart=x)}var this1=postBeatStart;this._postBeatGlyphs.x=js.Boot.__cast(Math.floor(this1),Float);var this2=this._postBeatGlyphs.x+this._postBeatGlyphs.width;this.width=js.Boot.__cast(Math.ceil(this2),Float)},addPreBeatGlyph:function(g){this._preBeatGlyphs.addGlyph(g)},addBeatGlyph:function(g){g.renderer=this,g.preNotes.renderer=this,g.onNotes.renderer=this,g.onNotes.beamingHelper=this.helpers.beamHelperLookup[g.beat.voice.index][g.beat.index],this.getOrCreateVoiceContainer(g.beat.voice).addGlyph(g)},getOrCreateVoiceContainer:function(voice){return this._voiceContainers[voice.index]},getBeatContainer:function(beat){return this.getOrCreateVoiceContainer(beat.voice).beatGlyphs[beat.index]},getPreNotesGlyphForBeat:function(beat){return this.getBeatContainer(beat).preNotes},getOnNotesGlyphForBeat:function(beat){return this.getBeatContainer(beat).onNotes},paint:function(cx,cy,canvas){this.paintBackground(cx,cy,canvas),canvas.set_color(this.get_resources().mainGlyphColor),this._preBeatGlyphs.paint(cx+this.x,cy+this.y,canvas);for(var this1=this._voiceContainers,voice=$iterator(Object.keys(this1))();voice.hasNext();){var voice1=voice.next(),c=this._voiceContainers[voice1];canvas.set_color(0==c.voice.index?this.get_resources().mainGlyphColor:this.get_resources().secondaryGlyphColor),c.paint(cx+this.x,cy+this.y,canvas)}canvas.set_color(this.get_resources().mainGlyphColor),this._postBeatGlyphs.paint(cx+this.x,cy+this.y,canvas)},paintBackground:function(cx,cy,canvas){},buildBoundingsLookup:function(masterBarBounds,cx,cy){var barBounds=new alphaTab.rendering.utils.BarBounds;barBounds.bar=this.bar;var _tmp=new alphaTab.rendering.utils.Bounds;_tmp.x=cx+this.x,_tmp.y=cy+this.y+this.topPadding,_tmp.w=this.width,_tmp.h=this.height-this.topPadding-this.bottomPadding,barBounds.visualBounds=_tmp;var _tmp1=new alphaTab.rendering.utils.Bounds;_tmp1.x=cx+this.x,_tmp1.y=cy+this.y,_tmp1.w=this.width,_tmp1.h=this.height,barBounds.realBounds=_tmp1,masterBarBounds.addBar(barBounds);for(var this1=this._voiceContainers,voice=$iterator(Object.keys(this1))();voice.hasNext();){var voice1=voice.next(),c=this._voiceContainers[voice1],isEmptyBar=this.bar.get_isEmpty()&&0==voice1;if(!c.voice.isEmpty||isEmptyBar)for(var i=0,j=c.beatGlyphs.length;i<j;){var bc=c.beatGlyphs[i],beatBoundings=new alphaTab.rendering.utils.BeatBounds;beatBoundings.beat=bc.beat;var _tmp2=new alphaTab.rendering.utils.Bounds;_tmp2.x=cx+this.x+c.x+bc.x+bc.onNotes.x,_tmp2.y=barBounds.visualBounds.y,_tmp2.w=bc.onNotes.width,_tmp2.h=barBounds.visualBounds.h,beatBoundings.visualBounds=_tmp2;var _tmp3=new alphaTab.rendering.utils.Bounds;_tmp3.x=cx+this.x+c.x+bc.x,_tmp3.y=barBounds.realBounds.y,_tmp3.w=bc.width,_tmp3.h=barBounds.realBounds.h,beatBoundings.realBounds=_tmp3,isEmptyBar&&(beatBoundings.visualBounds.x=cx+this.x,beatBoundings.realBounds.x=beatBoundings.visualBounds.x),barBounds.addBeat(beatBoundings),++i}}},addPostBeatGlyph:function(g){this._postBeatGlyphs.addGlyph(g)},createPreBeatGlyphs:function(){this._wasFirstOfLine=this.get_isFirstOfLine()},createBeatGlyphs:function(){},createPostBeatGlyphs:function(){},get_beatGlyphsStart:function(){return this._preBeatGlyphs.x+this._preBeatGlyphs.width},get_postBeatGlyphsStart:function(){return this._postBeatGlyphs.x},getNoteX:function(note,onEnd){return null==onEnd&&(onEnd=!0),0},getBeatX:function(beat,requestedPosition){null==requestedPosition&&(requestedPosition=0);var container=this.getBeatContainer(beat);if(null!=container)switch(requestedPosition){case 0:return container.voiceContainer.x+container.x;case 1:return container.voiceContainer.x+container.x+container.onNotes.x;case 2:return container.voiceContainer.x+container.x+container.get_onTimeX();case 3:return container.voiceContainer.x+container.x+container.onNotes.x+container.onNotes.width;case 4:return container.voiceContainer.x+container.x+container.width}return 0},getNoteY:function(note,aboveNote){return null==aboveNote&&(aboveNote=!1),0},reLayout:function(){(this._wasFirstOfLine&&!this.get_isFirstOfLine()||!this._wasFirstOfLine&&this.get_isFirstOfLine())&&(this._preBeatGlyphs=new alphaTab.rendering.glyphs.LeftToRightLayoutingGlyphGroup,(this._preBeatGlyphs.renderer=this).createPreBeatGlyphs()),this.updateSizes(),this.registerLayoutingInfo()},paintSimileMark:function(cx,cy,canvas){switch(this.bar.simileMark){case 1:canvas.fillMusicFontSymbol(cx+this.x+(this.width-20*this.get_scale())/2,cy+this.y+this.height/2,1,58624,!1);break;case 3:canvas.fillMusicFontSymbol(cx+this.x-28*this.get_scale()/2,cy+this.y+this.height/2,1,58625,!1)}},__class__:alphaTab.rendering.BarRendererBase},alphaTab.rendering._BeatXPosition={},alphaTab.rendering._BeatXPosition.BeatXPosition_Impl_={},alphaTab.rendering._BeatXPosition.BeatXPosition_Impl_.__name__=["alphaTab","rendering","_BeatXPosition","BeatXPosition_Impl_"],alphaTab.rendering._BeatXPosition.BeatXPosition_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.rendering._BeatXPosition.BeatXPosition_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.rendering._BeatXPosition.BeatXPosition_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.rendering._BeatXPosition.BeatXPosition_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.rendering._BeatXPosition.BeatXPosition_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.rendering._BeatXPosition.BeatXPosition_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.rendering._BeatXPosition.BeatXPosition_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.rendering._BeatXPosition.BeatXPosition_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.rendering._BeatXPosition.BeatXPosition_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.rendering._BeatXPosition.BeatXPosition_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.rendering._BeatXPosition.BeatXPosition_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.rendering._BeatXPosition.BeatXPosition_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.rendering._BeatXPosition.BeatXPosition_Impl_.toString=function(this1){switch(this1){case 0:return"PreNotes";case 1:return"OnNotes";case 2:return"MiddleNotes";case 3:return"PostNotes";case 4:return"EndBeat"}return""},alphaTab.rendering._BeatXPosition.BeatXPosition_Impl_.fromString=function(str){switch(str.toLowerCase()){case"endbeat":return 4;case"middlenotes":return 2;case"onnotes":return 1;case"postnotes":return 3;case"prenotes":return 0}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.rendering.glyphs={},alphaTab.rendering.glyphs.Glyph=function(x,y){this.x=0,this.y=0,this.width=0,this.renderer=null,this.x=x,this.y=y},alphaTab.rendering.glyphs.Glyph.__name__=["alphaTab","rendering","glyphs","Glyph"],alphaTab.rendering.glyphs.Glyph.prototype={get_scale:function(){return this.renderer.get_scale()},doLayout:function(){},paint:function(cx,cy,canvas){},__class__:alphaTab.rendering.glyphs.Glyph},alphaTab.rendering.EffectBand=function(voice,info){alphaTab.rendering.glyphs.Glyph.call(this,0,0),this._uniqueEffectGlyphs=null,this._effectGlyphs=null,this.isEmpty=!1,this.previousBand=null,this.isLinkedToPrevious=!1,this.firstBeat=null,this.lastBeat=null,this.height=0,this.voice=null,this.info=null,this.slot=null,this.voice=voice,this.info=info;this._uniqueEffectGlyphs=[];this._effectGlyphs=[],this.isEmpty=!0},alphaTab.rendering.EffectBand.__name__=["alphaTab","rendering","EffectBand"],alphaTab.rendering.EffectBand.__super__=alphaTab.rendering.glyphs.Glyph,alphaTab.rendering.EffectBand.prototype=$extend(alphaTab.rendering.glyphs.Glyph.prototype,{doLayout:function(){alphaTab.rendering.glyphs.Glyph.prototype.doLayout.call(this);for(var i=0;i<this.renderer.bar.voices.length;){this._effectGlyphs.push({});this._uniqueEffectGlyphs.push([]),++i}},createGlyph:function(beat){if(beat.voice==this.voice&&this.info.shouldCreateGlyph(this.renderer.get_settings(),beat)&&(!this.info.get_hideOnMultiTrack()||0==this.renderer.staff.trackIndex)){if(this.isEmpty=!1,null!=this.firstBeat&&!beat.isBefore(this.firstBeat)||(this.firstBeat=beat),null==this.lastBeat||beat.isAfter(this.lastBeat))switch(this.lastBeat=beat,this.info.get_sizingMode()){case 2:case 5:null!=this.lastBeat.nextBeat&&(this.lastBeat=this.lastBeat.nextBeat)}var glyph=this.createOrResizeGlyph(this.info.get_sizingMode(),beat);glyph.height>this.height&&(this.height=glyph.height)}},createOrResizeGlyph:function(sizing,b){var g;switch(sizing){case 0:case 1:case 2:return(g=this.info.createNewGlyph(this.renderer,b)).renderer=this.renderer,g.beat=b,g.doLayout(),this._effectGlyphs[b.voice.index][b.index]=g,this._uniqueEffectGlyphs[b.voice.index].push(g),g;case 4:case 5:var singleSizing=4==sizing?1:2;if(0<b.index||0<this.renderer.index){var prevBeat=b.previousBeat;if(this.info.shouldCreateGlyph(this.renderer.get_settings(),prevBeat)){var prevEffect=null;if(0<b.index&&this._effectGlyphs[b.voice.index].hasOwnProperty(prevBeat.index))prevEffect=this._effectGlyphs[b.voice.index][prevBeat.index];else if(0<this.renderer.index){var voiceGlyphs=js.Boot.__cast(this.renderer.get_previousRenderer(),alphaTab.rendering.EffectBarRenderer).getBand(this.voice,this.info.get_effectId())._effectGlyphs[b.voice.index];voiceGlyphs.hasOwnProperty(prevBeat.index)&&(prevEffect=voiceGlyphs[prevBeat.index])}var newGlyph=this.createOrResizeGlyph(singleSizing,b);return null!=prevEffect&&this.info.canExpand(prevBeat,b)&&((prevEffect.nextGlyph=newGlyph).previousGlyph=prevEffect,this.isLinkedToPrevious=!0),newGlyph}return this.createOrResizeGlyph(singleSizing,b)}return this.createOrResizeGlyph(singleSizing,b);case 6:return(g=this.info.createNewGlyph(this.renderer,b)).renderer=this.renderer,g.beat=b,g.doLayout(),this._effectGlyphs[b.voice.index][b.index]=g,this._uniqueEffectGlyphs[b.voice.index].push(g),g}return null},paint:function(cx,cy,canvas){alphaTab.rendering.glyphs.Glyph.prototype.paint.call(this,cx,cy,canvas);for(var i=0,j=this._uniqueEffectGlyphs.length;i<j;){for(var v=this._uniqueEffectGlyphs[i],k=0,l=v.length;k<l;){v[k].paint(cx+this.x,cy+this.y,canvas),++k}++i}},alignGlyphs:function(){for(var v=0;v<this._effectGlyphs.length;){for(var this1=this._effectGlyphs[v],key=$iterator(Object.keys(this1))();key.hasNext();){var key1=key.next();this.alignGlyph(this.info.get_sizingMode(),this.renderer.bar.voices[v].beats[key1])}++v}},alignGlyph:function(sizing,beat){var pos,g=this._effectGlyphs[beat.voice.index][beat.index],container=this.renderer.getBeatContainer(beat);switch(sizing){case 0:pos=container.preNotes,g.x=this.renderer.get_beatGlyphsStart()+pos.x+container.x,g.width=pos.width;break;case 1:case 4:pos=container.onNotes,g.x=this.renderer.get_beatGlyphsStart()+pos.x+container.x,g.width=pos.width;break;case 2:case 5:pos=container.onNotes,g.x=this.renderer.get_beatGlyphsStart()+pos.x+container.x,container.beat.get_isLastOfVoice()?g.width=this.renderer.width-g.x:g.width=container.width-container.preNotes.width-container.preNotes.x;break;case 6:g.width=this.renderer.width}},__class__:alphaTab.rendering.EffectBand});alphaTab.rendering.EffectBandSizingInfo=function(){this._effectSlot=null,this.slots=null;this.slots=[];this._effectSlot={}},alphaTab.rendering.EffectBandSizingInfo.__name__=["alphaTab","rendering","EffectBandSizingInfo"],alphaTab.rendering.EffectBandSizingInfo.prototype={getOrCreateSlot:function(band){var this1=this._effectSlot,key=band.info.get_effectId();if(this1.hasOwnProperty(key)){var slot=this._effectSlot[band.info.get_effectId()];if(slot.canBeUsed(band))return slot}for(var slot1=$iterator(this.slots)();slot1.hasNext();){var slot2=slot1.next();if(slot2.canBeUsed(band))return slot2}var newSlot=new alphaTab.rendering.EffectBandSlot;return this.slots.push(newSlot),newSlot},register:function(effectBand){var freeSlot=this.getOrCreateSlot(effectBand);freeSlot.update(effectBand),this._effectSlot[effectBand.info.get_effectId()]=freeSlot},__class__:alphaTab.rendering.EffectBandSizingInfo},alphaTab.rendering.EffectBandSlot=function(){this.bands=null,this.shared=null;this.bands=[],this.shared=new alphaTab.rendering.EffectBandSlotShared},alphaTab.rendering.EffectBandSlot.__name__=["alphaTab","rendering","EffectBandSlot"],alphaTab.rendering.EffectBandSlot.prototype={update:function(effectBand){effectBand.info.get_canShareBand()||(this.shared.uniqueEffectId=effectBand.info.get_effectId()),(effectBand.slot=this).bands.push(effectBand),effectBand.height>this.shared.height&&(this.shared.height=effectBand.height),null!=this.shared.firstBeat&&!effectBand.firstBeat.isBefore(this.shared.firstBeat)||(this.shared.firstBeat=effectBand.firstBeat),null!=this.shared.lastBeat&&!effectBand.lastBeat.isAfter(this.shared.lastBeat)||(this.shared.lastBeat=effectBand.lastBeat)},canBeUsed:function(band){return!!(null==this.shared.uniqueEffectId&&band.info.get_canShareBand()||band.info.get_effectId()==this.shared.uniqueEffectId)&&(!(null!=this.shared.firstBeat&&!this.shared.lastBeat.isBefore(band.firstBeat))||this.shared.lastBeat.isBefore(this.shared.firstBeat))},__class__:alphaTab.rendering.EffectBandSlot},alphaTab.rendering.EffectBandSlotShared=function(){this.uniqueEffectId=null,this.y=0,this.height=0,this.firstBeat=null,this.lastBeat=null,this.y=0,this.height=0},alphaTab.rendering.EffectBandSlotShared.__name__=["alphaTab","rendering","EffectBandSlotShared"],alphaTab.rendering.EffectBandSlotShared.prototype={__class__:alphaTab.rendering.EffectBandSlotShared},alphaTab.rendering._EffectBarGlyphSizing={},alphaTab.rendering._EffectBarGlyphSizing.EffectBarGlyphSizing_Impl_={},alphaTab.rendering._EffectBarGlyphSizing.EffectBarGlyphSizing_Impl_.__name__=["alphaTab","rendering","_EffectBarGlyphSizing","EffectBarGlyphSizing_Impl_"],alphaTab.rendering._EffectBarGlyphSizing.EffectBarGlyphSizing_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.rendering._EffectBarGlyphSizing.EffectBarGlyphSizing_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.rendering._EffectBarGlyphSizing.EffectBarGlyphSizing_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.rendering._EffectBarGlyphSizing.EffectBarGlyphSizing_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.rendering._EffectBarGlyphSizing.EffectBarGlyphSizing_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.rendering._EffectBarGlyphSizing.EffectBarGlyphSizing_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.rendering._EffectBarGlyphSizing.EffectBarGlyphSizing_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.rendering._EffectBarGlyphSizing.EffectBarGlyphSizing_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.rendering._EffectBarGlyphSizing.EffectBarGlyphSizing_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.rendering._EffectBarGlyphSizing.EffectBarGlyphSizing_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.rendering._EffectBarGlyphSizing.EffectBarGlyphSizing_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.rendering._EffectBarGlyphSizing.EffectBarGlyphSizing_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.rendering._EffectBarGlyphSizing.EffectBarGlyphSizing_Impl_.toString=function(this1){switch(this1){case 0:return"SinglePreBeat";case 1:return"SingleOnBeat";case 2:return"SingleOnBeatToEnd";case 3:return"GroupedBeforeBeat";case 4:return"GroupedOnBeat";case 5:return"GroupedOnBeatToEnd";case 6:return"FullBar"}return""},alphaTab.rendering._EffectBarGlyphSizing.EffectBarGlyphSizing_Impl_.fromString=function(str){switch(str.toLowerCase()){case"fullbar":return 6;case"groupedbeforebeat":return 3;case"groupedonbeat":return 4;case"groupedonbeattoend":return 5;case"singleonbeat":return 1;case"singleonbeattoend":return 2;case"singleprebeat":return 0}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.rendering.EffectBarRenderer=function(renderer,bar,infos){alphaTab.rendering.BarRendererBase.call(this,renderer,bar),this._infos=null,this._bands=null,this._bandLookup=null,this.sizingInfo=null,this._infos=infos},alphaTab.rendering.EffectBarRenderer.__name__=["alphaTab","rendering","EffectBarRenderer"],alphaTab.rendering.EffectBarRenderer.__super__=alphaTab.rendering.BarRendererBase,alphaTab.rendering.EffectBarRenderer.prototype=$extend(alphaTab.rendering.BarRendererBase.prototype,{updateSizes:function(){this.topOverflow=0,this.bottomOverflow=0,this.topPadding=0,this.bottomPadding=0,this.updateHeight(),alphaTab.rendering.BarRendererBase.prototype.updateSizes.call(this)},finalizeRenderer:function(){alphaTab.rendering.BarRendererBase.prototype.finalizeRenderer.call(this),this.updateHeight()},updateHeight:function(){if(null!=this.sizingInfo){for(var y=0,slot=$iterator(this.sizingInfo.slots)();slot.hasNext();){var slot1=slot.next();slot1.shared.y=y;for(var band=$iterator(slot1.bands)();band.hasNext();){var band1=band.next();band1.y=y,band1.height=slot1.shared.height}y+=slot1.shared.height}this.height=y}},applyLayoutingInfo:function(){if(!alphaTab.rendering.BarRendererBase.prototype.applyLayoutingInfo.call(this))return!1;if(0<this.index){var previousRenderer=js.Boot.__cast(this.get_previousRenderer(),alphaTab.rendering.EffectBarRenderer);this.sizingInfo=previousRenderer.sizingInfo}else this.sizingInfo=new alphaTab.rendering.EffectBandSizingInfo;for(var effectBand=$iterator(this._bands)();effectBand.hasNext();){var effectBand1=effectBand.next();effectBand1.alignGlyphs(),effectBand1.isEmpty||this.sizingInfo.register(effectBand1)}return this.updateHeight(),!0},scaleToWidth:function(width){alphaTab.rendering.BarRendererBase.prototype.scaleToWidth.call(this,width);for(var effectBand=$iterator(this._bands)();effectBand.hasNext();){effectBand.next().alignGlyphs()}},createBeatGlyphs:function(){this._bands=[];this._bandLookup={};for(var voice=$iterator(this.bar.voices)();voice.hasNext();){var voice1=voice.next();if(this.hasVoiceContainer(voice1))for(var info=HxOverrides.iter(this._infos);info.hasNext();){var info1=info.next(),band=new alphaTab.rendering.EffectBand(voice1,info1);band.renderer=this,band.doLayout(),this._bands.push(band),this._bandLookup[Std.string(voice1.index)+"."+info1.get_effectId()]=band}}for(var voice2=$iterator(this.bar.voices)();voice2.hasNext();){var voice3=voice2.next();this.hasVoiceContainer(voice3)&&this.createVoiceGlyphs(voice3)}for(var effectBand=$iterator(this._bands)();effectBand.hasNext();){effectBand.next().isLinkedToPrevious&&(this.isLinkedToPrevious=!0)}},createVoiceGlyphs:function(v){for(var b=$iterator(v.beats)();b.hasNext();){var b1=b.next(),container=new alphaTab.rendering.glyphs.BeatContainerGlyph(b1,this.getOrCreateVoiceContainer(v));container.preNotes=new alphaTab.rendering.glyphs.BeatGlyphBase,container.onNotes=new alphaTab.rendering.glyphs.BeatOnNoteGlyphBase,this.addBeatGlyph(container);for(var effectBand=$iterator(this._bands)();effectBand.hasNext();){effectBand.next().createGlyph(b1)}}},paint:function(cx,cy,canvas){this.paintBackground(cx,cy,canvas);for(var effectBand=$iterator(this._bands)();effectBand.hasNext();){var effectBand1=effectBand.next();canvas.set_color(0==effectBand1.voice.index?this.get_resources().mainGlyphColor:this.get_resources().secondaryGlyphColor),effectBand1.isEmpty||effectBand1.paint(cx+this.x,cy+this.y,canvas)}},getBand:function(voice,effectId){var id=Std.string(voice.index)+"."+effectId;return this._bandLookup.hasOwnProperty(id)?this._bandLookup[id]:null},__class__:alphaTab.rendering.EffectBarRenderer}),alphaTab.rendering.RenderFinishedEventArgs=$hx_exports.alphaTab.rendering.RenderFinishedEventArgs=function(){this.width=0,this.height=0,this.totalWidth=0,this.totalHeight=0,this.firstMasterBarIndex=0,this.lastMasterBarIndex=0,this.renderResult=null},alphaTab.rendering.RenderFinishedEventArgs.__name__=["alphaTab","rendering","RenderFinishedEventArgs"],alphaTab.rendering.RenderFinishedEventArgs.prototype={__class__:alphaTab.rendering.RenderFinishedEventArgs},alphaTab.rendering.utils={},alphaTab.rendering.utils.IBeamYCalculator=function(){},alphaTab.rendering.utils.IBeamYCalculator.__name__=["alphaTab","rendering","utils","IBeamYCalculator"],alphaTab.rendering.utils.IBeamYCalculator.prototype={__class__:alphaTab.rendering.utils.IBeamYCalculator},alphaTab.rendering.ScoreBarRenderer=function(renderer,bar){alphaTab.rendering.BarRendererBase.call(this,renderer,bar),this.simpleWhammyOverflow=0,this.accidentalHelper=null,this._startSpacing=!1,this.accidentalHelper=new alphaTab.rendering.utils.AccidentalHelper(bar)},alphaTab.rendering.ScoreBarRenderer.__name__=["alphaTab","rendering","ScoreBarRenderer"],alphaTab.rendering.ScoreBarRenderer.__interfaces__=[alphaTab.rendering.utils.IBeamYCalculator],alphaTab.rendering.ScoreBarRenderer.paintSingleBar=function(canvas,x1,y1,x2,y2,size){canvas.beginPath(),canvas.moveTo(x1,y1),canvas.lineTo(x2,y2),canvas.lineTo(x2,y2+size),canvas.lineTo(x1,y1+size),canvas.closePath(),canvas.fill()},alphaTab.rendering.ScoreBarRenderer.__super__=alphaTab.rendering.BarRendererBase,alphaTab.rendering.ScoreBarRenderer.prototype=$extend(alphaTab.rendering.BarRendererBase.prototype,{getBeatDirection:function(beat){var g=js.Boot.__cast(this.getOnNotesGlyphForBeat(beat),alphaTab.rendering.glyphs.ScoreBeatGlyph);return null!=g?g.noteHeads.get_direction():0},getNoteX:function(note,onEnd){null==onEnd&&(onEnd=!0);var g=js.Boot.__cast(this.getOnNotesGlyphForBeat(note.beat),alphaTab.rendering.glyphs.ScoreBeatGlyph);if(null==g)return 0;var x=g.container.voiceContainer.x+g.container.x+g.x;return onEnd&&(x+=g.width),x},getNoteY:function(note,aboveNote){null==aboveNote&&(aboveNote=!1);var beat=js.Boot.__cast(this.getOnNotesGlyphForBeat(note.beat),alphaTab.rendering.glyphs.ScoreBeatGlyph);return null!=beat?beat.noteHeads.getNoteY(note,aboveNote):0},get_lineOffset:function(){return 9*this.get_scale()},updateSizes:function(){var res=this.get_resources(),glyphOverflow=res.tablatureFont.size/2+.2*res.tablatureFont.size;this.topPadding=glyphOverflow,this.bottomPadding=glyphOverflow,this.height=4*this.get_lineOffset()+this.topPadding+this.bottomPadding,alphaTab.rendering.BarRendererBase.prototype.updateSizes.call(this)},doLayout:function(){if(alphaTab.rendering.BarRendererBase.prototype.doLayout.call(this),!this.bar.get_isEmpty()&&null!=this.accidentalHelper.maxNoteValueBeat){var top=this.getScoreY(0,0),bottom=this.getScoreY(8,0),whammyOffset=this.simpleWhammyOverflow;this.registerOverflowTop(whammyOffset);var maxNoteY=this.getYPositionForNoteValue(this.accidentalHelper.maxNoteValue),maxNoteHelper=this.helpers.getBeamingHelperForBeat(this.accidentalHelper.maxNoteValueBeat);if(0==maxNoteHelper.direction&&(maxNoteY-=this.getStemSize(maxNoteHelper),maxNoteY-=maxNoteHelper.fingeringCount*this.get_resources().graceFont.size,maxNoteHelper.hasTuplet&&(maxNoteY-=2*this.get_resources().effectFont.size)),maxNoteHelper.hasTuplet){maxNoteY-=1.5*this.get_resources().effectFont.size}maxNoteY<top&&this.registerOverflowTop(Math.abs(maxNoteY)+whammyOffset);var minNoteY=this.getYPositionForNoteValue(this.accidentalHelper.minNoteValue),minNoteHelper=this.helpers.getBeamingHelperForBeat(this.accidentalHelper.minNoteValueBeat);1==minNoteHelper.direction&&(minNoteY+=this.getStemSize(minNoteHelper),minNoteY+=minNoteHelper.fingeringCount*this.get_resources().graceFont.size),bottom<minNoteY&&this.registerOverflowBottom(Math.abs(minNoteY)-bottom)}},addBeatGlyph:function(g){alphaTab.rendering.BarRendererBase.prototype.addBeatGlyph.call(this,g);g.beat.get_hasTuplet()&&(g.beat.id,g.beat.tupletGroup.beats[0].id)},paint:function(cx,cy,canvas){alphaTab.rendering.BarRendererBase.prototype.paint.call(this,cx,cy,canvas),this.paintBeams(cx,cy,canvas),this.paintTuplets(cx,cy,canvas)},paintTuplets:function(cx,cy,canvas){for(var voice=$iterator(this.bar.voices)();voice.hasNext();){var voice1=voice.next();if(this.hasVoiceContainer(voice1))for(var tupletGroup=$iterator(this.getOrCreateVoiceContainer(voice1).tupletGroups)();tupletGroup.hasNext();){var tupletGroup1=tupletGroup.next();this.paintTupletHelper(cx+this.get_beatGlyphsStart(),cy,canvas,tupletGroup1)}}},paintBeams:function(cx,cy,canvas){for(var i=0,j=this.helpers.beamHelpers.length;i<j;){for(var v=this.helpers.beamHelpers[i],k=0,l=v.length;k<l;){var h=v[k];this.paintBeamHelper(cx+this.get_beatGlyphsStart(),cy,canvas,h),++k}++i}},paintBeamHelper:function(cx,cy,canvas,h){canvas.set_color(0==h.voice.index?this.get_resources().mainGlyphColor:this.get_resources().secondaryGlyphColor),1==h.beats.length?this.paintFooter(cx,cy,canvas,h):this.paintBar(cx,cy,canvas,h)},paintTupletHelper:function(cx,cy,canvas,h){var s,res=this.get_resources(),oldAlign=canvas.get_textAlign();canvas.set_color(0==h.voice.index?this.get_resources().mainGlyphColor:this.get_resources().secondaryGlyphColor),canvas.set_textAlign(1);var num=h.beats[0].tupletNumerator,den=h.beats[0].tupletDenominator;if(s=2==num&&3==den?"2":3==num&&2==den?"3":4==num&&6==den?"4":5==num&&4==den?"5":6==num&&4==den?"6":7==num&&4==den?"7":9==num&&8==den?"9":10==num&&8==den?"10":11==num&&8==den?"11":12==num&&8==den?"12":13==num&&8==den?"13":Std.string(num)+":"+Std.string(den),1!=h.beats.length&&h.isFull){var firstBeat=h.beats[0],lastBeat=h.beats[h.beats.length-1],firstBeamingHelper=this.helpers.beamHelperLookup[h.voice.index][firstBeat.index],lastBeamingHelper=this.helpers.beamHelperLookup[h.voice.index][lastBeat.index];if(null!=firstBeamingHelper&&null!=lastBeamingHelper){var direction1=firstBeamingHelper.direction,startX=firstBeamingHelper.getBeatLineX(firstBeat)+this.get_scale(),endX=lastBeamingHelper.getBeatLineX(lastBeat)+this.get_scale();canvas.set_font(res.effectFont);var sw=canvas.measureText(s),sp=3*this.get_scale(),middleX=(startX+endX)/2,offset1X=middleX-sw/2-sp,offset2X=middleX+sw/2+sp,startY=this.calculateBeamYWithDirection(firstBeamingHelper,startX,firstBeamingHelper.direction),endY=this.calculateBeamYWithDirection(lastBeamingHelper,endX,firstBeamingHelper.direction),k=(endY-startY)/(endX-startX),d=startY-k*startX,offset1Y=k*offset1X+d,middleY=k*middleX+d,offset2Y=k*offset2X+d,offset1=10*this.get_scale(),size=5*this.get_scale();1==direction1&&(offset1*=-1,size*=-1),canvas.beginPath();var tmp=cx+this.x+startX,this2=system.Convert.toInt32_Single(cy+this.y+startY-offset1);canvas.moveTo(tmp,this2);var tmp1=cx+this.x+startX,this3=system.Convert.toInt32_Single(cy+this.y+startY-offset1-size);canvas.lineTo(tmp1,this3);var tmp2=cx+this.x+offset1X,this4=system.Convert.toInt32_Single(cy+this.y+offset1Y-offset1-size);canvas.lineTo(tmp2,this4),canvas.stroke(),canvas.beginPath();var tmp3=cx+this.x+offset2X,this5=system.Convert.toInt32_Single(cy+this.y+offset2Y-offset1-size);canvas.moveTo(tmp3,this5);var tmp4=cx+this.x+endX,this6=system.Convert.toInt32_Single(cy+this.y+endY-offset1-size);canvas.lineTo(tmp4,this6);var tmp5=cx+this.x+endX,this7=system.Convert.toInt32_Single(cy+this.y+endY-offset1);canvas.lineTo(tmp5,this7),canvas.stroke();canvas.fillText(s,cx+this.x+middleX,cy+this.y+middleY-offset1-size-res.effectFont.size/2)}}else for(var i=0,j=h.beats.length;i<j;){var beat=h.beats[i],beamingHelper=this.helpers.beamHelperLookup[h.voice.index][beat.index];if(null!=beamingHelper){var offset,direction=beamingHelper.direction,tupletX=beamingHelper.getBeatLineX(beat)+this.get_scale(),tupletY=cy+this.y+this.calculateBeamY(beamingHelper,tupletX);if(0==direction){offset=1.5*res.effectFont.size}else offset=-3*this.get_scale();canvas.set_font(res.effectFont),canvas.fillText(s,cx+this.x+tupletX,tupletY-offset),++i}else++i}canvas.set_textAlign(oldAlign)},getStemSize:function(helper){var size=1==helper.beats.length?this.getFooterStemSize(helper.shortestDuration):this.getBarStemSize(helper.shortestDuration);return helper.isGrace&&(size*=.75),size},getBarStemSize:function(duration){var size;switch(duration){case-4:case 2:case 4:case 8:case 16:size=6;break;case 32:case 64:size=7;break;case 128:size=9;break;case 256:size=10;break;default:size=0}var this1=size;return this.getScoreY(this1,0)},getFooterStemSize:function(duration){var size;switch(duration){case-4:case 2:case 4:case 8:case 16:case 32:case 64:case 128:case 256:size=6;break;default:size=0}var this1=size;return this.getScoreY(this1,0)},getYPositionForNoteValue:function(noteValue){var this1=this.accidentalHelper.getNoteLineForValue(noteValue,!0);return this.getScoreY(this1,0)},calculateBeamY:function(h,x){var stemSize=this.getStemSize(h);return h.calculateBeamY(stemSize,this.get_scale(),x,this.get_scale(),this)},calculateBeamYWithDirection:function(h,x,direction){var stemSize=this.getStemSize(h);return h.calculateBeamYWithDirection(stemSize,this.get_scale(),x,this.get_scale(),this,direction)},paintBar:function(cx,cy,canvas,h){for(var i=0,j=h.beats.length;i<j;){var beat=h.beats[i],scaleMod=0!=beat.graceType?.75:1,beatLineX=h.getBeatLineX(beat)+this.get_scale(),direction=h.direction,y1=cy+this.y;y1+=0==direction?this.getYPositionForNoteValue(h.getBeatMinValue(beat)):this.getYPositionForNoteValue(h.getBeatMaxValue(beat));var y2=cy+this.y;y2+=this.calculateBeamY(h,beatLineX),canvas.set_lineWidth(1.3*this.get_scale()),canvas.beginPath(),canvas.moveTo(cx+this.x+beatLineX,y1),canvas.lineTo(cx+this.x+beatLineX,y2),canvas.stroke(),canvas.set_lineWidth(this.get_scale());var fingeringY=y2;if(1==direction){fingeringY+=2*canvas.get_font().size}else if(0!=i){fingeringY-=1.5*canvas.get_font().size}this.paintFingering(canvas,beat,cx+this.x+beatLineX,direction,fingeringY);var brokenBarOffset=6*this.get_scale()*scaleMod,barSpacing=7*this.get_scale()*scaleMod,barSize=4*this.get_scale()*scaleMod,barCount=alphaTab.model.ModelUtils.getIndex(beat.duration)-2,barStart=cy+this.y;1==direction&&(barSpacing=-barSpacing,barSize=-barSize);for(var barIndex=0;barIndex<barCount;){var barStartX,barEndX,barStartY,barEndY,barY=barStart+barIndex*barSpacing;if(i<h.beats.length-1){if(alphaTab.rendering.utils.BeamingHelper.isFullBarJoin(beat,h.beats[i+1],barIndex))barStartX=beatLineX,barEndX=h.getBeatLineX(h.beats[i+1])+this.get_scale();else{if(0!=i&&alphaTab.rendering.utils.BeamingHelper.isFullBarJoin(h.beats[i-1],beat,barIndex)){++barIndex;continue}barEndX=(barStartX=beatLineX)+brokenBarOffset}barStartY=barY+this.calculateBeamY(h,barStartX),barEndY=barY+this.calculateBeamY(h,barEndX),alphaTab.rendering.ScoreBarRenderer.paintSingleBar(canvas,cx+this.x+barStartX,barStartY,cx+this.x+barEndX,barEndY,barSize)}else 0<i&&!alphaTab.rendering.utils.BeamingHelper.isFullBarJoin(beat,h.beats[i-1],barIndex)&&(barStartX=beatLineX-brokenBarOffset,barEndX=beatLineX,barStartY=barY+this.calculateBeamY(h,barStartX),barEndY=barY+this.calculateBeamY(h,barEndX),alphaTab.rendering.ScoreBarRenderer.paintSingleBar(canvas,cx+this.x+barStartX,barStartY,cx+this.x+barEndX,barEndY,barSize));++barIndex}++i}},paintFooter:function(cx,cy,canvas,h){var beat=h.beats[0];if(3!=beat.graceType&&(0==beat.graceType||1!=this.get_settings().notation.notationMode)){var beamY,fingeringY,isGrace=0!=beat.graceType,scaleMod=isGrace?.75:1,stemSize=this.getFooterStemSize(h.shortestDuration),beatLineX=h.getBeatLineX(beat)+this.get_scale(),direction=h.direction,topY=this.getYPositionForNoteValue(h.maxNoteValue),bottomY=this.getYPositionForNoteValue(h.minNoteValue);if(fingeringY=1==direction?(beamY=bottomY+=stemSize*scaleMod,cy+this.y+bottomY):(beamY=topY-=stemSize*scaleMod,cy+this.y+topY),this.paintFingering(canvas,beat,cx+this.x+beatLineX,direction,fingeringY),1!=beat.duration&&-2!=beat.duration&&-4!=beat.duration){if(canvas.set_lineWidth(1.3*this.get_scale()),canvas.beginPath(),canvas.moveTo(cx+this.x+beatLineX,cy+this.y+topY),canvas.lineTo(cx+this.x+beatLineX,cy+this.y+bottomY),canvas.stroke(),canvas.set_lineWidth(this.get_scale()),2==beat.graceType){var graceSizeY=15*this.get_scale(),graceSizeX=12*this.get_scale();canvas.beginPath(),1==direction?(canvas.moveTo(cx+this.x+beatLineX-graceSizeX/2,cy+this.y+bottomY-graceSizeY),canvas.lineTo(cx+this.x+beatLineX+graceSizeX/2,cy+this.y+bottomY)):(canvas.moveTo(cx+this.x+beatLineX-graceSizeX/2,cy+this.y+topY+graceSizeY),canvas.lineTo(cx+this.x+beatLineX+graceSizeX/2,cy+this.y+topY)),canvas.stroke()}if(4<beat.duration||isGrace){var glyph=new alphaTab.rendering.glyphs.BeamGlyph(beatLineX-this.get_scale()/2,beamY,beat.duration,direction,isGrace);glyph.renderer=this,glyph.doLayout(),glyph.paint(cx+this.x,cy+this.y,canvas)}}}},paintFingering:function(canvas,beat,beatLineX,direction,topY){var settings=this.get_settings();if(0==settings.notation.fingeringMode||1==settings.notation.fingeringMode){0==direction?beatLineX-=10*this.get_scale():beatLineX+=3*this.get_scale();var noteList=beat.notes.slice(0);noteList.sort(function(a1,b1){return b=b1,a1.get_realValue()-b.get_realValue();var b});for(var n=0;n<noteList.length;){var note=noteList[n],text=null;-2!=note.leftHandFinger?text=alphaTab.model.ModelUtils.fingerToString(settings,beat,note.leftHandFinger,!0):-2!=note.rightHandFinger&&(text=alphaTab.model.ModelUtils.fingerToString(settings,beat,note.rightHandFinger,!1)),null!=text?(canvas.fillText(text,beatLineX,topY),topY-=system.Convert.toInt32_Single(canvas.get_font().size),++n):++n}}},createPreBeatGlyphs:function(){if(alphaTab.rendering.BarRendererBase.prototype.createPreBeatGlyphs.call(this),this.bar.get_masterBar().isRepeatStart&&this.addPreBeatGlyph(new alphaTab.rendering.glyphs.RepeatOpenGlyph(0,0,1.5,3)),this.get_isFirstOfLine()||this.bar.clef!=this.bar.previousBar.clef||this.bar.clefOttava!=this.bar.previousBar.clefOttava){var offset=0,correction=0;switch(this.bar.clef){case 0:case 1:offset=6;break;case 2:offset=4;break;case 3:offset=4,correction=-1;break;case 4:offset=8}this.createStartSpacing();var this1=offset,this2=correction;this.addPreBeatGlyph(new alphaTab.rendering.glyphs.ClefGlyph(0,this.getScoreY(this1,this2),this.bar.clef,this.bar.clefOttava))}(0==this.index&&0!=this.bar.get_masterBar().keySignature||null!=this.bar.previousBar&&this.bar.get_masterBar().keySignature!=this.bar.previousBar.get_masterBar().keySignature)&&(this.createStartSpacing(),this.createKeySignatureGlyphs()),(null==this.bar.previousBar||null!=this.bar.previousBar&&this.bar.get_masterBar().timeSignatureNumerator!=this.bar.previousBar.get_masterBar().timeSignatureNumerator||null!=this.bar.previousBar&&this.bar.get_masterBar().timeSignatureDenominator!=this.bar.previousBar.get_masterBar().timeSignatureDenominator)&&(this.createStartSpacing(),this.createTimeSignatureGlyphs()),this.addPreBeatGlyph(new alphaTab.rendering.glyphs.BarNumberGlyph(0,this.getScoreY(-.5,0),this.bar.index+1)),this.bar.get_isEmpty()&&this.addPreBeatGlyph(new alphaTab.rendering.glyphs.SpacingGlyph(0,0,30*this.get_scale()))},createBeatGlyphs:function(){for(var v=0;v<this.bar.voices.length;){var voice=this.bar.voices[v];this.hasVoiceContainer(voice)&&this.createVoiceGlyphs(voice),++v}},createPostBeatGlyphs:function(){alphaTab.rendering.BarRendererBase.prototype.createPostBeatGlyphs.call(this),this.bar.get_masterBar().get_isRepeatEnd()?(this.addPostBeatGlyph(new alphaTab.rendering.glyphs.RepeatCloseGlyph(this.x,0)),2<this.bar.get_masterBar().repeatCount&&this.addPostBeatGlyph(new alphaTab.rendering.glyphs.RepeatCountGlyph(0,this.getScoreY(-1,-3),this.bar.get_masterBar().repeatCount))):this.addPostBeatGlyph(new alphaTab.rendering.glyphs.BarSeperatorGlyph(0,0))},createStartSpacing:function(){this._startSpacing||(this.addPreBeatGlyph(new alphaTab.rendering.glyphs.SpacingGlyph(0,0,2*this.get_scale())),this._startSpacing=!0)},createKeySignatureGlyphs:function(){var offsetClef=0,currentKey=this.bar.get_masterBar().keySignature,previousKey=null==this.bar.previousBar?0:this.bar.previousBar.get_masterBar().keySignature;switch(this.bar.clef){case 0:offsetClef=0;break;case 1:offsetClef=-1;break;case 2:offsetClef=1;break;case 3:offsetClef=2;break;case 4:offsetClef=1}var newLines={},newGlyphs=[];if(alphaTab.model.ModelUtils.keySignatureIsSharp(currentKey))for(var i=0;i<Math.abs(currentKey);){var step=alphaTab.rendering.ScoreBarRenderer.SharpKsSteps[i]+offsetClef,this3=step;newGlyphs.push(new alphaTab.rendering.glyphs.AccidentalGlyph(0,this.getScoreY(this3,0),2,!1)),newLines[step]=!0,++i}else for(var i1=0;i1<Math.abs(currentKey);){var step1=alphaTab.rendering.ScoreBarRenderer.FlatKsSteps[i1]+offsetClef,this4=step1;newGlyphs.push(new alphaTab.rendering.glyphs.AccidentalGlyph(0,this.getScoreY(this4,0),3,!1)),newLines[step1]=!0,++i1}for(var naturalizeSymbols=Math.abs(previousKey),previousKeyPositions=alphaTab.model.ModelUtils.keySignatureIsSharp(previousKey)?alphaTab.rendering.ScoreBarRenderer.SharpKsSteps:alphaTab.rendering.ScoreBarRenderer.FlatKsSteps,i2=0;i2<naturalizeSymbols;){var step2=previousKeyPositions[i2]+offsetClef;if(!newLines.hasOwnProperty(step2)){var this5=previousKeyPositions[i2]+offsetClef;this.addPreBeatGlyph(new alphaTab.rendering.glyphs.AccidentalGlyph(0,this.getScoreY(this5,0),1,!1))}++i2}for(var newGlyph=$iterator(newGlyphs)();newGlyph.hasNext();){var newGlyph1=newGlyph.next();this.addPreBeatGlyph(newGlyph1)}},createTimeSignatureGlyphs:function(){this.addPreBeatGlyph(new alphaTab.rendering.glyphs.SpacingGlyph(0,0,5*this.get_scale())),this.addPreBeatGlyph(new alphaTab.rendering.glyphs.ScoreTimeSignatureGlyph(0,this.getScoreY(2,0),this.bar.get_masterBar().timeSignatureNumerator,this.bar.get_masterBar().timeSignatureDenominator,this.bar.get_masterBar().timeSignatureCommon))},createVoiceGlyphs:function(v){for(var i=0,j=v.beats.length;i<j;){var b=v.beats[i],container=new alphaTab.rendering.ScoreBeatContainerGlyph(b,this.getOrCreateVoiceContainer(v));container.preNotes=new alphaTab.rendering.glyphs.ScoreBeatPreNotesGlyph,container.onNotes=new alphaTab.rendering.glyphs.ScoreBeatGlyph,this.addBeatGlyph(container),++i}},getNoteLine:function(n){return this.accidentalHelper.getNoteLine(n)},getScoreY:function(steps,correction){return null==correction&&(correction=0),this.get_lineOffset()/2*steps+correction*this.get_scale()},paintBackground:function(cx,cy,canvas){alphaTab.rendering.BarRendererBase.prototype.paintBackground.call(this,cx,cy,canvas);var res=this.get_resources();canvas.set_color(res.staffLineColor);for(var lineY=cy+this.y+this.topPadding,lineOffset=this.get_lineOffset(),i=0;i<5;){0<i&&(lineY+=lineOffset);var tmp=cx+this.x,this1=system.Convert.toInt32_Single(lineY);canvas.fillRect(tmp,this1,this.width,this.get_scale()),++i}canvas.set_color(res.mainGlyphColor),this.paintSimileMark(cx,cy,canvas)},__class__:alphaTab.rendering.ScoreBarRenderer}),alphaTab.rendering.glyphs.BeatContainerGlyph=function(beat,voiceContainer){alphaTab.rendering.glyphs.Glyph.call(this,0,0),this.voiceContainer=null,this.beat=null,this.preNotes=null,this.onNotes=null,this.ties=null,this.minWidth=0,this.beat=beat;this.ties=[],this.voiceContainer=voiceContainer},alphaTab.rendering.glyphs.BeatContainerGlyph.__name__=["alphaTab","rendering","glyphs","BeatContainerGlyph"],alphaTab.rendering.glyphs.BeatContainerGlyph.getGroupId=function(beat){return"b"+Std.string(beat.id)},alphaTab.rendering.glyphs.BeatContainerGlyph.__super__=alphaTab.rendering.glyphs.Glyph,alphaTab.rendering.glyphs.BeatContainerGlyph.prototype=$extend(alphaTab.rendering.glyphs.Glyph.prototype,{get_onTimeX:function(){return this.onNotes.x+this.onNotes.centerX},registerLayoutingInfo:function(layoutings){for(var preBeatStretch=this.get_onTimeX(),postBeatStretch=0,tie=$iterator(this.ties)();tie.hasNext();){var tie1=tie.next();tie1.width>postBeatStretch&&(postBeatStretch=tie1.width)}postBeatStretch+=this.onNotes.x+(this.onNotes.width-this.onNotes.centerX),layoutings.addBeatSpring(this.beat,preBeatStretch,postBeatStretch),layoutings.setPreBeatSize(this.beat,this.preNotes.width),layoutings.setOnBeatSize(this.beat,this.onNotes.width),layoutings.setBeatCenterX(this.beat,this.onNotes.centerX)},applyLayoutingInfo:function(info){var offset=info.getBeatCenterX(this.beat)-this.onNotes.centerX;this.preNotes.x=offset,this.preNotes.width=info.getPreBeatSize(this.beat),this.onNotes.width=info.getOnBeatSize(this.beat),this.onNotes.x=this.preNotes.x+this.preNotes.width,this.onNotes.updateBeamingHelper()},doLayout:function(){this.preNotes.x=0,this.preNotes.renderer=this.renderer,(this.preNotes.container=this).preNotes.doLayout(),this.onNotes.x=this.preNotes.x+this.preNotes.width,this.onNotes.renderer=this.renderer,(this.onNotes.container=this).onNotes.doLayout();for(var i=this.beat.notes.length-1;0<=i;)this.createTies(this.beat.notes[i--]);this.updateWidth()},updateWidth:function(){if(this.minWidth=this.preNotes.width+this.onNotes.width,!this.beat.get_isRest())if(1==this.onNotes.beamingHelper.beats.length)8<=this.beat.duration&&(this.minWidth=this.minWidth+20*this.get_scale());else switch(this.beat.duration){case 128:case 256:this.minWidth=this.minWidth+10*this.get_scale()}for(var tieWidth=0,tie=$iterator(this.ties)();tie.hasNext();){var tie1=tie.next();tie1.width>tieWidth&&(tieWidth=tie1.width)}this.minWidth=this.minWidth+tieWidth,this.width=this.minWidth},scaleToWidth:function(beatWidth){for(var tie=$iterator(this.ties)();tie.hasNext();){tie.next().doLayout()}this.onNotes.updateBeamingHelper(),this.width=beatWidth},createTies:function(n){},paint:function(cx,cy,canvas){if(!this.beat.voice.isEmpty&&!(this.preNotes.get_isEmpty()&&this.onNotes.get_isEmpty()&&0==this.ties.length)){canvas.beginGroup(alphaTab.rendering.glyphs.BeatContainerGlyph.getGroupId(this.beat)),this.preNotes.paint(cx+this.x,cy+this.y,canvas),this.onNotes.paint(cx+this.x,cy+this.y,canvas);for(var staffX=cx-this.voiceContainer.x-this.renderer.x,staffY=cy-this.voiceContainer.y-this.renderer.y,i=0,j=this.ties.length;i<j;){var t=this.ties[i];t.renderer=this.renderer,t.paint(staffX,staffY,canvas),++i}canvas.endGroup()}},__class__:alphaTab.rendering.glyphs.BeatContainerGlyph}),alphaTab.rendering.ScoreBeatContainerGlyph=function(beat,voiceContainer){alphaTab.rendering.glyphs.BeatContainerGlyph.call(this,beat,voiceContainer),this._bend=null,this._effectSlur=null,this._effectEndSlur=null},alphaTab.rendering.ScoreBeatContainerGlyph.__name__=["alphaTab","rendering","ScoreBeatContainerGlyph"],alphaTab.rendering.ScoreBeatContainerGlyph.__super__=alphaTab.rendering.glyphs.BeatContainerGlyph,alphaTab.rendering.ScoreBeatContainerGlyph.prototype=$extend(alphaTab.rendering.glyphs.BeatContainerGlyph.prototype,{doLayout:function(){if(this._effectSlur=null,this._effectEndSlur=null,alphaTab.rendering.glyphs.BeatContainerGlyph.prototype.doLayout.call(this),this.beat.isLegatoOrigin){if(null==this.beat.previousBeat||!this.beat.previousBeat.isLegatoOrigin){for(var destination=this.beat.nextBeat;null!=destination.nextBeat&&destination.nextBeat.get_isLegatoDestination();)destination=destination.nextBeat;this.ties.push(new alphaTab.rendering.glyphs.ScoreLegatoGlyph(this.beat,destination,!1))}}else if(this.beat.get_isLegatoDestination()&&!this.beat.isLegatoOrigin){for(var origin=this.beat.previousBeat;null!=origin.previousBeat&&origin.previousBeat.isLegatoOrigin;)origin=origin.previousBeat;this.ties.push(new alphaTab.rendering.glyphs.ScoreLegatoGlyph(origin,this.beat,!0))}null!=this._bend&&(this._bend.renderer=this.renderer,this._bend.doLayout(),this.updateWidth())},createTies:function(n){if(n.isVisible){if(n.get_isTieOrigin()&&!n.get_hasBend()&&!n.beat.get_hasWhammyBar()&&3!=n.beat.graceType&&null!=n.tieDestination&&n.tieDestination.isVisible){var tie=new alphaTab.rendering.glyphs.ScoreTieGlyph(n,n.tieDestination,!1);this.ties.push(tie)}if(n.isTieDestination&&!n.tieOrigin.get_hasBend()&&!n.beat.get_hasWhammyBar()){var tie1=new alphaTab.rendering.glyphs.ScoreTieGlyph(n.tieOrigin,n,!0);this.ties.push(tie1)}if(0!=n.slideInType||0!=n.slideOutType){var l=new alphaTab.rendering.glyphs.ScoreSlideLineGlyph(n.slideInType,n.slideOutType,n,this);this.ties.push(l)}if(n.get_isSlurOrigin()&&null!=n.slurDestination&&n.slurDestination.isVisible){var tie2=new alphaTab.rendering.glyphs.ScoreSlurGlyph(n,n.slurDestination,!1);this.ties.push(tie2)}if(n.isSlurDestination){var tie3=new alphaTab.rendering.glyphs.ScoreSlurGlyph(n.slurOrigin,n,!0);this.ties.push(tie3)}if(null==this._effectSlur&&n.beat.isEffectSlurOrigin&&null!=n.beat.effectSlurDestination){var direction=this.onNotes.beamingHelper.direction,startNote=0==direction?n.beat.minNote:n.beat.maxNote,endNote=0==direction?n.beat.effectSlurDestination.minNote:n.beat.effectSlurDestination.maxNote;this._effectSlur=new alphaTab.rendering.glyphs.ScoreSlurGlyph(startNote,endNote,!1),this.ties.push(this._effectSlur)}if(null==this._effectEndSlur&&n.beat.get_isEffectSlurDestination()&&null!=n.beat.effectSlurOrigin){var direction1=this.onNotes.beamingHelper.direction,startNote1=0==direction1?n.beat.effectSlurOrigin.minNote:n.beat.effectSlurOrigin.maxNote,endNote1=0==direction1?n.beat.minNote:n.beat.maxNote;this._effectEndSlur=new alphaTab.rendering.glyphs.ScoreSlurGlyph(startNote1,endNote1,!0),this.ties.push(this._effectEndSlur)}n.get_hasBend()&&(null==this._bend&&(this._bend=new alphaTab.rendering.glyphs.ScoreBendGlyph(n.beat),this._bend.renderer=this.renderer,this.ties.push(this._bend)),this._bend.addBends(n))}},__class__:alphaTab.rendering.ScoreBeatContainerGlyph}),alphaTab.rendering.ScoreRenderer=$hx_exports.alphaTab.rendering.ScoreRenderer=function(settings){this._currentLayoutMode=null,this._currentRenderEngine=null,this._renderedTracks=null,this.canvas=null,this.score=null,this.tracks=null,this.layout=null,this.settings=null,this.set_boundsLookup(null),this.set_width(0),this.settings=settings,this.recreateCanvas(),this.recreateLayout()},alphaTab.rendering.ScoreRenderer.__name__=["alphaTab","rendering","ScoreRenderer"],alphaTab.rendering.ScoreRenderer.__interfaces__=[alphaTab.rendering.IScoreRenderer],alphaTab.rendering.ScoreRenderer.prototype={get_boundsLookup:function(){return this.__BoundsLookup},set_boundsLookup:function(value){return this.__BoundsLookup=value},destroy:function(){this.score=null,this.canvas=null,this.layout=null,this.settings=null,this.set_boundsLookup(null),this.tracks=null},recreateCanvas:function(){return this._currentRenderEngine!=this.settings.core.engine&&(this.canvas=alphaTab.Environment.getRenderEngineFactory(this.settings).createCanvas(),this._currentRenderEngine=this.settings.core.engine,!0)},recreateLayout:function(){return this._currentLayoutMode!=this.settings.display.layoutMode&&(this.layout=alphaTab.Environment.getLayoutEngineFactory(this.settings).createLayout(this),this._currentLayoutMode=this.settings.display.layoutMode,!0)},renderScore:function(score,trackIndexes){try{var tracks;if(this.score=score,null==trackIndexes)tracks=score.tracks.slice(0);else{tracks=[];for(var track=new system.Int32ArrayIterator(trackIndexes);track.hasNext();){var track1=track.next();0<=track1&&track1<score.tracks.length&&tracks.push(score.tracks[track1])}}0==tracks.length&&0<score.tracks.length&&tracks.push(score.tracks[0]),this.tracks=tracks,this.render()}catch(e){if(e instanceof js._Boot.HaxeError&&(e=e.val),!js.Boot.__instanceof(e,system.Exception))throw e;this.onError("render",e)}},renderTracks:function(tracks){0==tracks.length?this.score=null:this.score=tracks[0].score,this.tracks=tracks,this.render()},updateSettings:function(settings){this.settings=settings},render:function(){if(0!=this.get_width()){if(this.set_boundsLookup(new alphaTab.rendering.utils.BoundsLookup),null!=this.tracks&&0!=this.tracks.length){this.recreateCanvas(),this.canvas.set_lineWidth(this.settings.display.scale),this.canvas.set_settings(this.settings),alphaTab.util.Logger.info("Rendering","Rendering "+Std.string(this.tracks.length)+" tracks",null);for(var i=0;i<this.tracks.length;){var track=this.tracks[i];alphaTab.util.Logger.info("Rendering","Track "+Std.string(i)+": "+track.name,null),++i}this.onPreRender(!1),this.recreateLayout(),this.layoutAndRender(),this._renderedTracks=this.tracks,alphaTab.util.Logger.info("Rendering","Rendering finished",null)}}else alphaTab.util.Logger.warning("Rendering","AlphaTab skipped rendering because of width=0 (element invisible)",null)},get_width:function(){return this.__Width},set_width:function(value){return this.__Width=value},resizeRender:function(){this.recreateLayout()||this.recreateCanvas()||this._renderedTracks!=this.tracks||null==this.tracks?(alphaTab.util.Logger.info("Rendering","Starting full rerendering due to layout or canvas change",null),this.render()):this.layout.get_supportsResize()?(alphaTab.util.Logger.info("Rendering","Starting optimized rerendering for resize",null),this.set_boundsLookup(new alphaTab.rendering.utils.BoundsLookup),this.onPreRender(!0),this.canvas.set_settings(this.settings),this.layout.resize(),this.layout.renderAnnotation(),this.onRenderFinished(),this.onPostRender()):alphaTab.util.Logger.warning("Rendering","Current layout does not support dynamic resizing, nothing was done",null),alphaTab.util.Logger.debug("Rendering","Resize finished",null)},layoutAndRender:function(){alphaTab.util.Logger.info("Rendering","Rendering at scale "+Std.string(this.settings.display.scale)+" with layout "+this.layout.get_name(),null),this.layout.layoutAndRender(),this.layout.renderAnnotation(),this.onRenderFinished(),this.onPostRender()},addPreRender:function(value){this.preRender=system._EventAction1.EventAction1_Impl_.add(this.preRender,value)},removePreRender:function(value){this.preRender=system._EventAction1.EventAction1_Impl_.sub(this.preRender,value)},onPreRender:function(isResize){function handler(p){system._EventAction1.EventAction1_Impl_.invoke(_e,p)}var _e=this.preRender;null!=handler&&handler(isResize)},addPartialRenderFinished:function(value){this.partialRenderFinished=system._EventAction1.EventAction1_Impl_.add(this.partialRenderFinished,value)},removePartialRenderFinished:function(value){this.partialRenderFinished=system._EventAction1.EventAction1_Impl_.sub(this.partialRenderFinished,value)},onPartialRenderFinished:function(e){function handler(p){system._EventAction1.EventAction1_Impl_.invoke(_e,p)}var _e=this.partialRenderFinished;null!=handler&&handler(e)},addRenderFinished:function(value){this.renderFinished=system._EventAction1.EventAction1_Impl_.add(this.renderFinished,value)},removeRenderFinished:function(value){this.renderFinished=system._EventAction1.EventAction1_Impl_.sub(this.renderFinished,value)},onRenderFinished:function(){function handler(p){system._EventAction1.EventAction1_Impl_.invoke(_e,p)}var result=this.canvas.onRenderFinished(),_e=this.renderFinished;if(null!=handler){var _tmp=new alphaTab.rendering.RenderFinishedEventArgs;_tmp.renderResult=result,_tmp.totalHeight=this.layout.height,_tmp.totalWidth=this.layout.width,handler(_tmp)}},addError:function(value){this.error=system._EventAction2.EventAction2_Impl_.add(this.error,value)},removeError:function(value){this.error=system._EventAction2.EventAction2_Impl_.sub(this.error,value)},onError:function(type,details){function handler(p1,p2){system._EventAction2.EventAction2_Impl_.invoke(_e,p1,p2)}var _e=this.error;null!=handler&&handler(type,details)},addPostRenderFinished:function(value){this.postRenderFinished=system._EventAction.EventAction_Impl_.add(this.postRenderFinished,value)},removePostRenderFinished:function(value){this.postRenderFinished=system._EventAction.EventAction_Impl_.sub(this.postRenderFinished,value)},onPostRender:function(){function handler(){system._EventAction.EventAction_Impl_.invoke(_e)}var _e=this.postRenderFinished;null!=handler&&handler()},__class__:alphaTab.rendering.ScoreRenderer},alphaTab.rendering.TabBarRenderer=function(renderer,bar){alphaTab.rendering.BarRendererBase.call(this,renderer,bar),this._tupletSize=0,this.showTimeSignature=!1,this.showRests=!1,this.showTiedNotes=!1,this._startSpacing=!1},alphaTab.rendering.TabBarRenderer.__name__=["alphaTab","rendering","TabBarRenderer"],alphaTab.rendering.TabBarRenderer.paintSingleBar=function(canvas,x1,y1,x2,y2,size){canvas.beginPath(),canvas.moveTo(x1,y1),canvas.lineTo(x2,y2),canvas.lineTo(x2,y2-size),canvas.lineTo(x1,y1-size),canvas.closePath(),canvas.fill()},alphaTab.rendering.TabBarRenderer.__super__=alphaTab.rendering.BarRendererBase,alphaTab.rendering.TabBarRenderer.prototype=$extend(alphaTab.rendering.BarRendererBase.prototype,{get_lineOffset:function(){return 11*this.get_scale()},getNoteX:function(note,onEnd){null==onEnd&&(onEnd=!0);var beat=js.Boot.__cast(this.getOnNotesGlyphForBeat(note.beat),alphaTab.rendering.glyphs.TabBeatGlyph);return null!=beat?beat.container.x+beat.container.voiceContainer.x+beat.x+beat.noteNumbers.getNoteX(note,onEnd):0},getNoteY:function(note,aboveNote){null==aboveNote&&(aboveNote=!1);var beat=js.Boot.__cast(this.getOnNotesGlyphForBeat(note.beat),alphaTab.rendering.glyphs.TabBeatGlyph);return null!=beat?beat.noteNumbers.getNoteY(note,aboveNote):0},updateSizes:function(){var res=this.get_resources(),numberOverflow=res.tablatureFont.size/2+.2*res.tablatureFont.size;this.topPadding=numberOverflow,this.bottomPadding=numberOverflow,this.height=this.get_lineOffset()*(this.bar.staff.tuning.length-1)+2*numberOverflow,0!=this.get_settings().notation.rhythmMode&&(this.height=this.height+this.get_settings().notation.rhythmHeight*this.get_settings().display.scale,this.bottomPadding=this.bottomPadding+this.get_settings().notation.rhythmHeight*this.get_settings().display.scale),alphaTab.rendering.BarRendererBase.prototype.updateSizes.call(this)},doLayout:function(){if(alphaTab.rendering.BarRendererBase.prototype.doLayout.call(this),0!=this.get_settings().notation.rhythmMode){for(var hasTuplets=!1,voice=$iterator(this.bar.voices)();voice.hasNext();){var voice1=voice.next();if(this.hasVoiceContainer(voice1))if(0<this.getOrCreateVoiceContainer(voice1).tupletGroups.length){hasTuplets=!0;break}}if(hasTuplets){this._tupletSize=.8*this.get_resources().effectFont.size,this.registerOverflowBottom(this._tupletSize)}}},createPreBeatGlyphs:function(){if(alphaTab.rendering.BarRendererBase.prototype.createPreBeatGlyphs.call(this),this.bar.get_masterBar().isRepeatStart&&this.addPreBeatGlyph(new alphaTab.rendering.glyphs.RepeatOpenGlyph(0,0,1.5,3)),this.get_isFirstOfLine()){var center=(this.bar.staff.tuning.length+1)/2;this.addPreBeatGlyph(new alphaTab.rendering.glyphs.TabClefGlyph(5*this.get_scale(),this.getTabY(center,0)))}this.showTimeSignature&&(null==this.bar.previousBar||null!=this.bar.previousBar&&this.bar.get_masterBar().timeSignatureNumerator!=this.bar.previousBar.get_masterBar().timeSignatureNumerator||null!=this.bar.previousBar&&this.bar.get_masterBar().timeSignatureDenominator!=this.bar.previousBar.get_masterBar().timeSignatureDenominator)&&(this.createStartSpacing(),this.createTimeSignatureGlyphs()),this.addPreBeatGlyph(new alphaTab.rendering.glyphs.BarNumberGlyph(0,this.getTabY(-.5,0),this.bar.index+1)),this.bar.get_isEmpty()&&this.addPreBeatGlyph(new alphaTab.rendering.glyphs.SpacingGlyph(0,0,30*this.get_scale()))},createStartSpacing:function(){this._startSpacing||(this.addPreBeatGlyph(new alphaTab.rendering.glyphs.SpacingGlyph(0,0,2*this.get_scale())),this._startSpacing=!0)},createTimeSignatureGlyphs:function(){this.addPreBeatGlyph(new alphaTab.rendering.glyphs.SpacingGlyph(0,0,5*this.get_scale())),this.addPreBeatGlyph(new alphaTab.rendering.glyphs.TabTimeSignatureGlyph(0,this.getTabY(0,0),this.bar.get_masterBar().timeSignatureNumerator,this.bar.get_masterBar().timeSignatureDenominator,this.bar.get_masterBar().timeSignatureCommon))},createBeatGlyphs:function(){for(var v=0;v<this.bar.voices.length;){var voice=this.bar.voices[v];this.hasVoiceContainer(voice)&&this.createVoiceGlyphs(this.bar.voices[v]),++v}},createVoiceGlyphs:function(v){for(var i=0,j=v.beats.length;i<j;){var b=v.beats[i],container=new alphaTab.rendering.glyphs.TabBeatContainerGlyph(b,this.getOrCreateVoiceContainer(v));container.preNotes=new alphaTab.rendering.glyphs.TabBeatPreNotesGlyph,container.onNotes=new alphaTab.rendering.glyphs.TabBeatGlyph,this.addBeatGlyph(container),++i}},createPostBeatGlyphs:function(){alphaTab.rendering.BarRendererBase.prototype.createPostBeatGlyphs.call(this),this.bar.get_masterBar().get_isRepeatEnd()?(this.addPostBeatGlyph(new alphaTab.rendering.glyphs.RepeatCloseGlyph(this.x,0)),2<this.bar.get_masterBar().repeatCount&&this.addPostBeatGlyph(new alphaTab.rendering.glyphs.RepeatCountGlyph(0,this.getTabY(-.5,-3),this.bar.get_masterBar().repeatCount))):this.addPostBeatGlyph(new alphaTab.rendering.glyphs.BarSeperatorGlyph(0,0))},getTabY:function(line,correction){return null==correction&&(correction=0),this.get_lineOffset()*line+correction*this.get_scale()},paintBackground:function(cx,cy,canvas){alphaTab.rendering.BarRendererBase.prototype.paintBackground.call(this,cx,cy,canvas);var res=this.get_resources();canvas.set_color(res.staffLineColor);for(var lineY=cy+this.y+this.topPadding,padding=this.get_scale(),tabNotes=[],i=0,j=this.bar.staff.tuning.length;i<j;){tabNotes.push([]),++i}for(var voice=$iterator(this.bar.voices)();voice.hasNext();){var voice1=voice.next();if(this.hasVoiceContainer(voice1))for(var vc=this.getOrCreateVoiceContainer(voice1),bg=$iterator(vc.beatGlyphs)();bg.hasNext();){var bg1=bg.next(),notes=js.Boot.__cast(bg1.onNotes,alphaTab.rendering.glyphs.TabBeatGlyph),noteNumbers=notes.noteNumbers;if(null!=noteNumbers)for(var this3=noteNumbers.notesPerString,s=$iterator(Object.keys(this3))();s.hasNext();){var s1=s.next();noteNumbers.notesPerString[s1].isEmpty||tabNotes[this.bar.staff.tuning.length-s1].push(new Float32Array([vc.x+bg1.x+notes.x+noteNumbers.x,noteNumbers.width+padding]))}}}for(var line=$iterator(tabNotes)();line.hasNext();){line.next().sort(function(comparison){return function(a,b){return comparison[0](a,b)}}([function(a1,b1){return a1[0]>b1[0]?1:a1[0]<b1[0]?-1:0}]))}for(var lineOffset=this.get_lineOffset(),i1=0,j1=this.bar.staff.tuning.length;i1<j1;){0<i1&&(lineY+=lineOffset);for(var lineX=0,line2=$iterator(tabNotes[i1])();line2.hasNext();){var line3=line2.next(),tmp=cx+this.x+lineX,this4=system.Convert.toInt32_Single(lineY),tmp1=this.get_scale();canvas.fillRect(tmp,this4,line3[0]-lineX,tmp1),lineX=line3[0]+line3[1]}var tmp2=cx+this.x+lineX,this5=system.Convert.toInt32_Single(lineY);canvas.fillRect(tmp2,this5,this.width-lineX,this.get_scale()),++i1}canvas.set_color(res.mainGlyphColor),this.paintSimileMark(cx,cy,canvas)},paint:function(cx,cy,canvas){alphaTab.rendering.BarRendererBase.prototype.paint.call(this,cx,cy,canvas),0!=this.get_settings().notation.rhythmMode&&(this.paintBeams(cx,cy,canvas),this.paintTuplets(cx,cy,canvas))},paintBeams:function(cx,cy,canvas){for(var i=0,j=this.helpers.beamHelpers.length;i<j;){for(var v=this.helpers.beamHelpers[i],k=0,l=v.length;k<l;){var h=v[k];this.paintBeamHelper(cx+this.get_beatGlyphsStart(),cy,canvas,h),++k}++i}},paintTuplets:function(cx,cy,canvas){for(var voice=$iterator(this.bar.voices)();voice.hasNext();){var voice1=voice.next();if(this.hasVoiceContainer(voice1))for(var tupletGroup=$iterator(this.getOrCreateVoiceContainer(voice1).tupletGroups)();tupletGroup.hasNext();){var tupletGroup1=tupletGroup.next();this.paintTupletHelper(cx+this.get_beatGlyphsStart(),cy,canvas,tupletGroup1)}}},paintBeamHelper:function(cx,cy,canvas,h){canvas.set_color(0==h.voice.index?this.get_resources().mainGlyphColor:this.get_resources().secondaryGlyphColor),1==h.beats.length||1==this.get_settings().notation.rhythmMode?this.paintFooter(cx,cy,canvas,h):this.paintBar(cx,cy,canvas,h)},paintBar:function(cx,cy,canvas,h){for(var i=0,j=h.beats.length;i<j;){var beat=h.beats[i];if(h.hasBeatLineX(beat)){var beatLineX=h.getBeatLineX(beat),y1=cy+this.y,y2=cy+this.y+this.height-this._tupletSize,startGlyph=js.Boot.__cast(this.getOnNotesGlyphForBeat(beat),alphaTab.rendering.glyphs.TabBeatGlyph);if(null==startGlyph.noteNumbers?y1+=this.height-this.get_settings().notation.rhythmHeight*this.get_settings().display.scale-this._tupletSize:y1+=startGlyph.noteNumbers.getNoteY(startGlyph.noteNumbers.minStringNote,!1)+this.get_lineOffset()/2,0==h.direction){beatLineX-=startGlyph.width/2}else{beatLineX+=startGlyph.width/2}canvas.beginPath(),canvas.moveTo(cx+this.x+beatLineX,y1),canvas.lineTo(cx+this.x+beatLineX,y2),canvas.stroke();for(var brokenBarOffset=6*this.get_scale(),barSpacing=-6*this.get_scale(),barSize=3*this.get_scale(),barCount=alphaTab.model.ModelUtils.getIndex(beat.duration)-2,barStart=y2,barIndex=0;barIndex<barCount;){var barStartX,barEndX,barStartY,barEndY,barY=barStart+barIndex*barSpacing;if(1==h.beats.length)barEndX=(barStartX=beatLineX)+brokenBarOffset,barEndY=barStartY=barY,alphaTab.rendering.TabBarRenderer.paintSingleBar(canvas,cx+this.x+barStartX,barStartY,cx+this.x+barEndX,barEndY,barSize);else if(i<h.beats.length-1){if(alphaTab.rendering.utils.BeamingHelper.isFullBarJoin(beat,h.beats[i+1],barIndex)){barStartX=beatLineX,barEndX=h.getBeatLineX(h.beats[i+1])+this.get_scale();var endGlyph=this.getOnNotesGlyphForBeat(h.beats[i+1]);if(0==h.direction){barEndX-=endGlyph.width/2}else{barEndX+=endGlyph.width/2}}else{if(0!=i&&alphaTab.rendering.utils.BeamingHelper.isFullBarJoin(h.beats[i-1],beat,barIndex)){++barIndex;continue}barEndX=(barStartX=beatLineX)+brokenBarOffset}barEndY=barStartY=barY,alphaTab.rendering.TabBarRenderer.paintSingleBar(canvas,cx+this.x+barStartX,barStartY,cx+this.x+barEndX,barEndY,barSize)}else 0<i&&!alphaTab.rendering.utils.BeamingHelper.isFullBarJoin(beat,h.beats[i-1],barIndex)&&(barStartX=beatLineX-brokenBarOffset,barEndX=beatLineX,barEndY=barStartY=barY,alphaTab.rendering.TabBarRenderer.paintSingleBar(canvas,cx+this.x+barStartX,barStartY,cx+this.x+barEndX,barEndY,barSize));++barIndex}}++i}},paintTupletHelper:function(cx,cy,canvas,h){var s,res=this.get_resources(),oldAlign=canvas.get_textAlign();canvas.set_color(0==h.voice.index?this.get_resources().mainGlyphColor:this.get_resources().secondaryGlyphColor),canvas.set_textAlign(1);var num=h.beats[0].tupletNumerator,den=h.beats[0].tupletDenominator;if(s=2==num&&3==den?"2":3==num&&2==den?"3":4==num&&6==den?"4":5==num&&4==den?"5":6==num&&4==den?"6":7==num&&4==den?"7":9==num&&8==den?"9":10==num&&8==den?"10":11==num&&8==den?"11":12==num&&8==den?"12":13==num&&8==den?"13":Std.string(num)+":"+Std.string(den),1!=h.beats.length&&h.isFull){var firstBeat=h.beats[0],lastBeat=h.beats[h.beats.length-1],firstBeamingHelper=this.helpers.beamHelperLookup[h.voice.index][firstBeat.index],lastBeamingHelper=this.helpers.beamHelperLookup[h.voice.index][lastBeat.index];if(null!=firstBeamingHelper&&null!=lastBeamingHelper){var startX=firstBeamingHelper.getBeatLineX(firstBeat),endX=lastBeamingHelper.getBeatLineX(lastBeat),startGlyph1=js.Boot.__cast(this.getOnNotesGlyphForBeat(firstBeat),alphaTab.rendering.glyphs.TabBeatGlyph),endGlyph=js.Boot.__cast(this.getOnNotesGlyphForBeat(firstBeat),alphaTab.rendering.glyphs.TabBeatGlyph);if(0==firstBeamingHelper.direction){startX-=startGlyph1.width/2;endX-=endGlyph.width/2}else{startX+=startGlyph1.width/2;endX+=endGlyph.width/2}canvas.set_font(res.effectFont);var sw=canvas.measureText(s),sp=3*this.get_scale(),middleX=(startX+endX)/2,offset1X=middleX-sw/2-sp,offset2X=middleX+sw/2+sp,startY=cy+this.y+this.height-this._tupletSize+.5*res.effectFont.size,offset=.25*-res.effectFont.size,size=-5*this.get_scale();canvas.beginPath();var tmp=cx+this.x+startX,this10=system.Convert.toInt32_Single(startY-offset);canvas.moveTo(tmp,this10);var tmp1=cx+this.x+startX,this11=system.Convert.toInt32_Single(startY-offset-size);canvas.lineTo(tmp1,this11);var tmp2=cx+this.x+offset1X,this12=system.Convert.toInt32_Single(startY-offset-size);canvas.lineTo(tmp2,this12),canvas.stroke(),canvas.beginPath();var tmp3=cx+this.x+offset2X,this13=system.Convert.toInt32_Single(startY-offset-size);canvas.moveTo(tmp3,this13);var tmp4=cx+this.x+endX,this14=system.Convert.toInt32_Single(startY-offset-size);canvas.lineTo(tmp4,this14);var tmp5=cx+this.x+endX,this15=system.Convert.toInt32_Single(startY-offset);canvas.lineTo(tmp5,this15),canvas.stroke(),canvas.fillText(s,cx+this.x+middleX,startY)}}else for(var i=0,j=h.beats.length;i<j;){var beat=h.beats[i],beamingHelper=this.helpers.beamHelperLookup[h.voice.index][beat.index];if(null!=beamingHelper){var tupletX=beamingHelper.getBeatLineX(beat),startGlyph=js.Boot.__cast(this.getOnNotesGlyphForBeat(beat),alphaTab.rendering.glyphs.TabBeatGlyph);if(0==beamingHelper.direction){tupletX-=startGlyph.width/2}else{tupletX+=startGlyph.width/2}var tupletY=cy+this.y+this.height-this._tupletSize+.5*res.effectFont.size;canvas.set_font(res.effectFont),canvas.fillText(s,cx+this.x+tupletX,tupletY),++i}else++i}canvas.set_textAlign(oldAlign)},paintFooter:function(cx,cy,canvas,h){for(var beat=$iterator(h.beats)();beat.hasNext();){var beat1=beat.next();if(0!=beat1.graceType||1==beat1.duration||-2==beat1.duration||-4==beat1.duration)return;var beatLineX=h.getBeatLineX(beat1),y1=cy+this.y,y2=cy+this.y+this.height-this._tupletSize,startGlyph=js.Boot.__cast(this.getOnNotesGlyphForBeat(beat1),alphaTab.rendering.glyphs.TabBeatGlyph);if(null==startGlyph.noteNumbers?y1+=this.height-this.get_settings().notation.rhythmHeight*this.get_settings().display.scale-this._tupletSize:y1+=startGlyph.noteNumbers.getNoteY(startGlyph.noteNumbers.minStringNote,!1)+this.get_lineOffset()/2,0==h.direction){beatLineX-=startGlyph.width/2}else{beatLineX+=startGlyph.width/2}if(canvas.beginPath(),canvas.moveTo(cx+this.x+beatLineX,y1),canvas.lineTo(cx+this.x+beatLineX,y2),canvas.stroke(),4<beat1.duration){var glyph=new alphaTab.rendering.glyphs.BeamGlyph(0,0,beat1.duration,1,!1);glyph.renderer=this,glyph.doLayout(),glyph.paint(cx+this.x+beatLineX,y2,canvas)}}},__class__:alphaTab.rendering.TabBarRenderer}),alphaTab.rendering.glyphs.EffectGlyph=function(x,y){alphaTab.rendering.glyphs.Glyph.call(this,x,y),this.beat=null,this.nextGlyph=null,this.previousGlyph=null,this.height=0},alphaTab.rendering.glyphs.EffectGlyph.__name__=["alphaTab","rendering","glyphs","EffectGlyph"],alphaTab.rendering.glyphs.EffectGlyph.__super__=alphaTab.rendering.glyphs.Glyph,alphaTab.rendering.glyphs.EffectGlyph.prototype=$extend(alphaTab.rendering.glyphs.Glyph.prototype,{__class__:alphaTab.rendering.glyphs.EffectGlyph}),alphaTab.rendering.glyphs.MusicFontGlyph=function(x,y,glyphScale,symbol){alphaTab.rendering.glyphs.EffectGlyph.call(this,x,y),this.GlyphScale=0,this.Symbol=-1,this.GlyphScale=glyphScale,this.Symbol=symbol},alphaTab.rendering.glyphs.MusicFontGlyph.__name__=["alphaTab","rendering","glyphs","MusicFontGlyph"],alphaTab.rendering.glyphs.MusicFontGlyph.__super__=alphaTab.rendering.glyphs.EffectGlyph,alphaTab.rendering.glyphs.MusicFontGlyph.prototype=$extend(alphaTab.rendering.glyphs.EffectGlyph.prototype,{paint:function(cx,cy,canvas){canvas.fillMusicFontSymbol(cx+this.x,cy+this.y,this.GlyphScale*this.get_scale(),this.Symbol,!1)},__class__:alphaTab.rendering.glyphs.MusicFontGlyph}),alphaTab.rendering.glyphs.AccentuationGlyph=function(x,y,accentuation){alphaTab.rendering.glyphs.MusicFontGlyph.call(this,x,y,1,alphaTab.rendering.glyphs.AccentuationGlyph.getSymbol(accentuation))},alphaTab.rendering.glyphs.AccentuationGlyph.__name__=["alphaTab","rendering","glyphs","AccentuationGlyph"],alphaTab.rendering.glyphs.AccentuationGlyph.getSymbol=function(accentuation){switch(accentuation){case 0:return-1;case 1:return 58528;case 2:return 58540;default:return-1}},alphaTab.rendering.glyphs.AccentuationGlyph.__super__=alphaTab.rendering.glyphs.MusicFontGlyph,alphaTab.rendering.glyphs.AccentuationGlyph.prototype=$extend(alphaTab.rendering.glyphs.MusicFontGlyph.prototype,{doLayout:function(){this.width=9*this.get_scale()},__class__:alphaTab.rendering.glyphs.AccentuationGlyph}),alphaTab.rendering.glyphs.AccidentalGlyph=function(x,y,accidentalType,isGrace){null==isGrace&&(isGrace=!1),alphaTab.rendering.glyphs.MusicFontGlyph.call(this,x,y,isGrace?.75:1,alphaTab.rendering.glyphs.AccidentalGlyph.getMusicSymbol(accidentalType)),this._isGrace=!1,this._isGrace=isGrace},alphaTab.rendering.glyphs.AccidentalGlyph.__name__=["alphaTab","rendering","glyphs","AccidentalGlyph"],alphaTab.rendering.glyphs.AccidentalGlyph.getMusicSymbol=function(accidentalType){switch(accidentalType){case 1:return 57953;case 2:return 57954;case 3:return 57952;case 4:return 57970;case 5:return 57972;case 6:return 57968}return-1},alphaTab.rendering.glyphs.AccidentalGlyph.__super__=alphaTab.rendering.glyphs.MusicFontGlyph,alphaTab.rendering.glyphs.AccidentalGlyph.prototype=$extend(alphaTab.rendering.glyphs.MusicFontGlyph.prototype,{doLayout:function(){this.width=8*(this._isGrace?.75:1)*this.get_scale()},__class__:alphaTab.rendering.glyphs.AccidentalGlyph}),alphaTab.rendering.glyphs.GlyphGroup=function(x,y){alphaTab.rendering.glyphs.Glyph.call(this,x,y),this.Glyphs=null},alphaTab.rendering.glyphs.GlyphGroup.__name__=["alphaTab","rendering","glyphs","GlyphGroup"],alphaTab.rendering.glyphs.GlyphGroup.__super__=alphaTab.rendering.glyphs.Glyph,alphaTab.rendering.glyphs.GlyphGroup.prototype=$extend(alphaTab.rendering.glyphs.Glyph.prototype,{get_isEmpty:function(){return null==this.Glyphs||0==this.Glyphs.length},doLayout:function(){if(null!=this.Glyphs&&0!=this.Glyphs.length){for(var w=0,i=0,j=this.Glyphs.length;i<j;){var g=this.Glyphs[i];g.renderer=this.renderer,g.doLayout(),w=Math.max(w,g.width),++i}this.width=w}else this.width=0},addGlyph:function(g){if(null==this.Glyphs){this.Glyphs=[]}this.Glyphs.push(g)},paint:function(cx,cy,canvas){var glyphs=this.Glyphs;if(null!=glyphs&&0!=glyphs.length)for(var g=$iterator(glyphs)();g.hasNext();){g.next().paint(cx+this.x,cy+this.y,canvas)}},__class__:alphaTab.rendering.glyphs.GlyphGroup}),alphaTab.rendering.glyphs.AccidentalGroupGlyph=function(){alphaTab.rendering.glyphs.GlyphGroup.call(this,0,0)},alphaTab.rendering.glyphs.AccidentalGroupGlyph.__name__=["alphaTab","rendering","glyphs","AccidentalGroupGlyph"],alphaTab.rendering.glyphs.AccidentalGroupGlyph.__super__=alphaTab.rendering.glyphs.GlyphGroup,alphaTab.rendering.glyphs.AccidentalGroupGlyph.prototype=$extend(alphaTab.rendering.glyphs.GlyphGroup.prototype,{doLayout:function(){if(null!=this.Glyphs){this.Glyphs.sort(function(a1,b1){return b=b1,(a=a1).y<b.y?-1:a.y>b.y?1:0;var a,b});var columns=[];columns.push(-3e3);for(var accidentalSize=21*this.get_scale(),i=0,j=this.Glyphs.length;i<j;){var g=this.Glyphs[i];g.renderer=this.renderer,g.doLayout();for(var gColumn=0;columns[gColumn]>g.y;)if(++gColumn==columns.length){columns.push(-3e3)}var this4=gColumn;g.x=this4,columns[gColumn]=g.y+accidentalSize,++i}var columnWidth=8*this.get_scale(),padding=2*this.get_scale();0==this.Glyphs.length?this.width=0:this.width=padding+columnWidth*columns.length;for(var i1=0,j1=this.Glyphs.length;i1<j1;){var g1=this.Glyphs[i1];g1.x=padding+(this.width-(g1.x+1)*columnWidth),++i1}}else this.width=0},__class__:alphaTab.rendering.glyphs.AccidentalGroupGlyph}),alphaTab.rendering.glyphs.AlternateEndingsGlyph=function(x,y,alternateEndings){alphaTab.rendering.glyphs.EffectGlyph.call(this,x,y),this._endings=null,this._endingsString=null;this._endings=[];for(var i=0;i<8;)0!=(alternateEndings&1<<i)&&this._endings.push(i),++i},alphaTab.rendering.glyphs.AlternateEndingsGlyph.__name__=["alphaTab","rendering","glyphs","AlternateEndingsGlyph"],alphaTab.rendering.glyphs.AlternateEndingsGlyph.__super__=alphaTab.rendering.glyphs.EffectGlyph,alphaTab.rendering.glyphs.AlternateEndingsGlyph.prototype=$extend(alphaTab.rendering.glyphs.EffectGlyph.prototype,{doLayout:function(){alphaTab.rendering.glyphs.EffectGlyph.prototype.doLayout.call(this),this.height=this.renderer.get_resources().wordsFont.size+(3*this.get_scale()+2);for(var endingsStrings="",i=0,j=this._endings.length;i<j;)endingsStrings+=Std.string(this._endings[i]+1),endingsStrings+=Std.string(". "),++i;this._endingsString=endingsStrings},paint:function(cx,cy,canvas){alphaTab.rendering.glyphs.EffectGlyph.prototype.paint.call(this,cx,cy,canvas);var baseline=canvas.get_textBaseline();if(canvas.set_textBaseline(0),0<this._endings.length){var res=this.renderer.get_resources();canvas.set_font(res.wordsFont),canvas.moveTo(cx+this.x,cy+this.y+this.height),canvas.lineTo(cx+this.x,cy+this.y),canvas.lineTo(cx+this.x+this.width,cy+this.y),canvas.stroke(),canvas.fillText(this._endingsString,cx+this.x+3*this.get_scale(),cy+this.y*this.get_scale())}canvas.set_textBaseline(baseline)},__class__:alphaTab.rendering.glyphs.AlternateEndingsGlyph}),alphaTab.rendering.glyphs.BarNumberGlyph=function(x,y,number){alphaTab.rendering.glyphs.Glyph.call(this,x,y),this._number=0,this._number=number},alphaTab.rendering.glyphs.BarNumberGlyph.__name__=["alphaTab","rendering","glyphs","BarNumberGlyph"],alphaTab.rendering.glyphs.BarNumberGlyph.__super__=alphaTab.rendering.glyphs.Glyph,alphaTab.rendering.glyphs.BarNumberGlyph.prototype=$extend(alphaTab.rendering.glyphs.Glyph.prototype,{doLayout:function(){this.renderer.scoreRenderer.canvas.set_font(this.renderer.get_resources().barNumberFont),this.width=this.renderer.scoreRenderer.canvas.measureText(Std.string(this._number))+5*this.get_scale()},paint:function(cx,cy,canvas){if(this.renderer.staff.isFirstInAccolade){var res=this.renderer.get_resources(),c=canvas.get_color();canvas.set_color(res.barNumberColor),canvas.set_font(res.barNumberFont),canvas.fillText(Std.string(this._number),cx+this.x,cy+this.y),canvas.set_color(c)}},__class__:alphaTab.rendering.glyphs.BarNumberGlyph}),alphaTab.rendering.glyphs.BarSeperatorGlyph=function(x,y){alphaTab.rendering.glyphs.Glyph.call(this,x,y)},alphaTab.rendering.glyphs.BarSeperatorGlyph.__name__=["alphaTab","rendering","glyphs","BarSeperatorGlyph"],alphaTab.rendering.glyphs.BarSeperatorGlyph.__super__=alphaTab.rendering.glyphs.Glyph,alphaTab.rendering.glyphs.BarSeperatorGlyph.prototype=$extend(alphaTab.rendering.glyphs.Glyph.prototype,{doLayout:function(){this.renderer.get_isLast()?this.width=15*this.get_scale():null!=this.renderer.get_nextRenderer()&&this.renderer.get_nextRenderer().staff==this.renderer.staff&&this.renderer.get_nextRenderer().bar.get_masterBar().isRepeatStart?this.width=2*this.get_scale():(this.width=2*this.get_scale(),this.renderer.bar.get_masterBar().isDoubleBar&&(this.width=this.width+2*this.get_scale()))},paint:function(cx,cy,canvas){var blockWidth=4*this.get_scale(),top=cy+this.y+this.renderer.topPadding,bottom=cy+this.y+this.renderer.height-this.renderer.bottomPadding,left=system.Convert.toInt32_Single(cx+this.x),h=bottom-top;this.renderer.get_isLast()?(canvas.fillRect(left+this.width-blockWidth-blockWidth,top,this.get_scale(),h),canvas.fillRect(left+this.width-blockWidth,top,blockWidth,h)):null!=this.renderer.get_nextRenderer()&&this.renderer.get_nextRenderer().staff==this.renderer.staff&&this.renderer.get_nextRenderer().bar.get_masterBar().isRepeatStart||(canvas.fillRect(left+this.width-this.get_scale(),top,this.get_scale(),h),this.renderer.bar.get_masterBar().isDoubleBar&&canvas.fillRect(left+this.width-5*this.get_scale(),top,this.get_scale(),h))},__class__:alphaTab.rendering.glyphs.BarSeperatorGlyph}),alphaTab.rendering.glyphs.BeamGlyph=function(x,y,duration,direction,isGrace){alphaTab.rendering.glyphs.MusicFontGlyph.call(this,x,y,isGrace?.75:1,alphaTab.rendering.glyphs.BeamGlyph.getSymbol(duration,direction,isGrace))},alphaTab.rendering.glyphs.BeamGlyph.__name__=["alphaTab","rendering","glyphs","BeamGlyph"],alphaTab.rendering.glyphs.BeamGlyph.getSymbol=function(duration,direction,isGrace){if(isGrace&&(duration=8),0==direction)switch(duration){case 8:return 57920;case 16:return 57922;case 32:return 57924;case 64:return 57926;case 128:return 57928;case 256:return 57930;default:return 57920}switch(duration){case 8:return 57921;case 16:return 57923;case 32:return 57925;case 64:return 57927;case 128:case 256:return 57929;default:return 57921}},alphaTab.rendering.glyphs.BeamGlyph.__super__=alphaTab.rendering.glyphs.MusicFontGlyph,alphaTab.rendering.glyphs.BeamGlyph.prototype=$extend(alphaTab.rendering.glyphs.MusicFontGlyph.prototype,{doLayout:function(){this.width=0},__class__:alphaTab.rendering.glyphs.BeamGlyph}),alphaTab.rendering.glyphs.BeatGlyphBase=function(){alphaTab.rendering.glyphs.GlyphGroup.call(this,0,0),this.container=null},alphaTab.rendering.glyphs.BeatGlyphBase.__name__=["alphaTab","rendering","glyphs","BeatGlyphBase"],alphaTab.rendering.glyphs.BeatGlyphBase.__super__=alphaTab.rendering.glyphs.GlyphGroup,alphaTab.rendering.glyphs.BeatGlyphBase.prototype=$extend(alphaTab.rendering.glyphs.GlyphGroup.prototype,{doLayout:function(){var w=0;if(null!=this.Glyphs)for(var i=0,j=this.Glyphs.length;i<j;){var g=this.Glyphs[i];g.x=w,g.renderer=this.renderer,g.doLayout(),w+=g.width,++i}this.width=w},noteLoop:function(action){for(var i=this.container.beat.notes.length-1;0<=i;)action(this.container.beat.notes[i]),--i},__class__:alphaTab.rendering.glyphs.BeatGlyphBase}),alphaTab.rendering.glyphs.BeatOnNoteGlyphBase=function(){alphaTab.rendering.glyphs.BeatGlyphBase.call(this),this.beamingHelper=null,this.centerX=0,this.centerX=0},alphaTab.rendering.glyphs.BeatOnNoteGlyphBase.__name__=["alphaTab","rendering","glyphs","BeatOnNoteGlyphBase"],alphaTab.rendering.glyphs.BeatOnNoteGlyphBase.__super__=alphaTab.rendering.glyphs.BeatGlyphBase,alphaTab.rendering.glyphs.BeatOnNoteGlyphBase.prototype=$extend(alphaTab.rendering.glyphs.BeatGlyphBase.prototype,{updateBeamingHelper:function(){},__class__:alphaTab.rendering.glyphs.BeatOnNoteGlyphBase}),alphaTab.rendering.glyphs.GroupedEffectGlyph=function(endPosition){alphaTab.rendering.glyphs.EffectGlyph.call(this,0,0),this.endPosition=0,this.forceGroupedRendering=!1,this.endOnBarLine=!1,this.endPosition=endPosition},alphaTab.rendering.glyphs.GroupedEffectGlyph.__name__=["alphaTab","rendering","glyphs","GroupedEffectGlyph"],alphaTab.rendering.glyphs.GroupedEffectGlyph.__super__=alphaTab.rendering.glyphs.EffectGlyph,alphaTab.rendering.glyphs.GroupedEffectGlyph.prototype=$extend(alphaTab.rendering.glyphs.EffectGlyph.prototype,{get_isLinkedWithPrevious:function(){return null!=this.previousGlyph&&this.previousGlyph.renderer.staff.staveGroup==this.renderer.staff.staveGroup},get_isLinkedWithNext:function(){return!(null==this.nextGlyph||!this.nextGlyph.renderer.isFinalized)&&this.nextGlyph.renderer.staff.staveGroup==this.renderer.staff.staveGroup},paint:function(cx,cy,canvas){if(!this.get_isLinkedWithPrevious())if(this.get_isLinkedWithNext()||this.forceGroupedRendering){var lastLinkedGlyph;if(!this.get_isLinkedWithNext()&&this.forceGroupedRendering)lastLinkedGlyph=this;else for(lastLinkedGlyph=js.Boot.__cast(this.nextGlyph,alphaTab.rendering.glyphs.GroupedEffectGlyph);lastLinkedGlyph.get_isLinkedWithNext();)lastLinkedGlyph=js.Boot.__cast(lastLinkedGlyph.nextGlyph,alphaTab.rendering.glyphs.GroupedEffectGlyph);var endBeatRenderer=lastLinkedGlyph.renderer,endBeat=lastLinkedGlyph.beat,position=this.endPosition,cxRenderer=cx-this.renderer.x,endX=this.calculateEndX(endBeatRenderer,endBeat,cxRenderer,position);this.paintGrouped(cx,cy,endX,canvas)}else this.paintNonGrouped(cx,cy,canvas)},calculateEndX:function(endBeatRenderer,endBeat,cx,endPosition){return null==endBeat?cx+endBeatRenderer.x+this.x+this.width:cx+endBeatRenderer.x+endBeatRenderer.getBeatX(endBeat,endPosition)},paintNonGrouped:function(cx,cy,canvas){var cxRenderer=cx-this.renderer.x,endX=this.calculateEndX(this.renderer,this.beat,cxRenderer,this.endPosition);this.paintGrouped(cx,cy,endX,canvas)},paintGrouped:function(cx,cy,endX,canvas){throw new js._Boot.HaxeError("abstract")},__class__:alphaTab.rendering.glyphs.GroupedEffectGlyph}),alphaTab.rendering.glyphs.BeatVibratoGlyph=function(type){alphaTab.rendering.glyphs.GroupedEffectGlyph.call(this,4),this._type=0,this._stepSize=0,this._type=type},alphaTab.rendering.glyphs.BeatVibratoGlyph.__name__=["alphaTab","rendering","glyphs","BeatVibratoGlyph"],alphaTab.rendering.glyphs.BeatVibratoGlyph.__super__=alphaTab.rendering.glyphs.GroupedEffectGlyph,alphaTab.rendering.glyphs.BeatVibratoGlyph.prototype=$extend(alphaTab.rendering.glyphs.GroupedEffectGlyph.prototype,{doLayout:function(){switch(alphaTab.rendering.glyphs.GroupedEffectGlyph.prototype.doLayout.call(this),this._type){case 1:this._stepSize=12*this.get_scale();break;case 2:this._stepSize=23*this.get_scale()}this.height=18*this.get_scale()},paintGrouped:function(cx,cy,endX,canvas){var startX=cx+this.x,width=endX-startX,loops=system.Convert.toInt32_Single(Math.max(1,width/this._stepSize));canvas.beginPath(),canvas.moveTo(startX,cy+this.y);for(var i=0;i<loops;)canvas.lineTo(startX+this._stepSize/2,cy+this.y+this.height),canvas.lineTo(startX+this._stepSize,cy+this.y),startX+=this._stepSize,++i;canvas.stroke()},__class__:alphaTab.rendering.glyphs.BeatVibratoGlyph}),alphaTab.rendering.glyphs.ScoreNoteChordGlyphBase=function(){alphaTab.rendering.glyphs.Glyph.call(this,0,0),this._infos=null,this._noteHeadPadding=0,this.minNote=null,this.maxNote=null,this.spacingChanged=null,this.upLineX=0,this.downLineX=0,this.displacedX=0,this.noteStartX=0;this._infos=[]},alphaTab.rendering.glyphs.ScoreNoteChordGlyphBase.__name__=["alphaTab","rendering","glyphs","ScoreNoteChordGlyphBase"],alphaTab.rendering.glyphs.ScoreNoteChordGlyphBase.__super__=alphaTab.rendering.glyphs.Glyph,alphaTab.rendering.glyphs.ScoreNoteChordGlyphBase.prototype=$extend(alphaTab.rendering.glyphs.Glyph.prototype,{get_direction:function(){throw new js._Boot.HaxeError("abstract")},add:function(noteGlyph,noteLine){var info=new alphaTab.rendering.glyphs.ScoreNoteGlyphInfo(noteGlyph,noteLine);this._infos.push(info),(null==this.minNote||this.minNote.line>info.line)&&(this.minNote=info),(null==this.maxNote||this.maxNote.line<info.line)&&(this.maxNote=info)},get_hasTopOverflow:function(){return null!=this.minNote&&this.minNote.line<=0},get_hasBottomOverflow:function(){return null!=this.maxNote&&8<this.maxNote.line},doLayout:function(){this._infos.sort(function(a1,b1){return a=a1,b=b1,system._Int32.Int32_Impl_.compareTo_Int32(b.line,a.line);var a,b});for(var displacedX=0,lastDisplaced=!1,lastLine=0,anyDisplaced=!1,direction=this.get_direction(),lineOffset=1.5*this.get_scale(),w=0,i=0,j=this._infos.length;i<j;){var g=this._infos[i].glyph;g.renderer=this.renderer,g.doLayout();var displace=!1;0==i?displacedX=g.width-lineOffset:lastDisplaced=Math.abs(lastLine-this._infos[i].line)<=1&&(!lastDisplaced&&(displace=!0,g.x=displacedX,anyDisplaced=!0)),g.x=1==direction?displace?0:displacedX:displace?displacedX:0,g.x=g.x+this.noteStartX,lastLine=this._infos[i].line,w=Math.max(w,g.x+g.width-lineOffset),++i}anyDisplaced?(this._noteHeadPadding=0,this.upLineX=displacedX,this.downLineX=displacedX):(this._noteHeadPadding=1==direction?-displacedX:0,w+=this._noteHeadPadding,this.upLineX=w,this.downLineX=0),this.displacedX=displacedX,this.width=w},paint:function(cx,cy,canvas){cx+=this.x,cy+=this.y;var scoreRenderer=js.Boot.__cast(this.renderer,alphaTab.rendering.ScoreBarRenderer),linePadding=3*this.get_scale(),lineWidth=this.width-this.noteStartX+2*linePadding;if(this.get_hasTopOverflow()){var color=canvas.get_color();canvas.set_color(scoreRenderer.get_resources().staffLineColor);for(var l=0;l>=this.minNote.line;){var this1=l,lY=cy+scoreRenderer.getScoreY(this1,0);canvas.fillRect(cx-linePadding+this.noteStartX,lY,lineWidth,this.get_scale()),l-=2}canvas.set_color(color)}if(this.get_hasBottomOverflow()){var color1=canvas.get_color();canvas.set_color(scoreRenderer.get_resources().staffLineColor);for(var l1=12;l1<=this.maxNote.line;){var this2=l1,lY1=cy+scoreRenderer.getScoreY(this2,0);canvas.fillRect(cx-linePadding+this.noteStartX,lY1,lineWidth,this.get_scale()),l1+=2}canvas.set_color(color1)}for(var infos=this._infos,x=cx+this._noteHeadPadding,g=$iterator(infos)();g.hasNext();){var g1=g.next();g1.glyph.renderer=this.renderer,g1.glyph.paint(x,cy,canvas)}},__class__:alphaTab.rendering.glyphs.ScoreNoteChordGlyphBase}),alphaTab.rendering.glyphs.BendNoteHeadGroupGlyph=function(beat,showParenthesis){null==showParenthesis&&(showParenthesis=!1),alphaTab.rendering.glyphs.ScoreNoteChordGlyphBase.call(this),this._beat=null,this._showParenthesis=!1,this._noteValueLookup=null,this._accidentals=null,this._preNoteParenthesis=null,this._postNoteParenthesis=null,this.isEmpty=!1,this.noteHeadOffset=0,this._beat=beat,this._showParenthesis=showParenthesis,this.isEmpty=!0,this._accidentals=new alphaTab.rendering.glyphs.AccidentalGroupGlyph;this._noteValueLookup={},showParenthesis&&(this._preNoteParenthesis=new alphaTab.rendering.glyphs.GhostNoteContainerGlyph(!0),this._postNoteParenthesis=new alphaTab.rendering.glyphs.GhostNoteContainerGlyph(!1))},alphaTab.rendering.glyphs.BendNoteHeadGroupGlyph.__name__=["alphaTab","rendering","glyphs","BendNoteHeadGroupGlyph"],alphaTab.rendering.glyphs.BendNoteHeadGroupGlyph.__super__=alphaTab.rendering.glyphs.ScoreNoteChordGlyphBase,alphaTab.rendering.glyphs.BendNoteHeadGroupGlyph.prototype=$extend(alphaTab.rendering.glyphs.ScoreNoteChordGlyphBase.prototype,{get_direction:function(){return 0},getNoteValueY:function(noteValue,aboveNote){return null==aboveNote&&(aboveNote=!1),this._noteValueLookup.hasOwnProperty(noteValue)?this.y+this._noteValueLookup[noteValue].y+(aboveNote?-6.75*this.get_scale()/2:0):0},containsNoteValue:function(noteValue){return this._noteValueLookup.hasOwnProperty(noteValue)},getNoteX:function(noteValue,onMiddle){if(null==onMiddle&&(onMiddle=!0),this._noteValueLookup.hasOwnProperty(noteValue)){var n=this._noteValueLookup[noteValue],pos=this.x+n.x;if(onMiddle){pos+=n.width/2}return pos}return 0},addGlyph:function(noteValue,quarterBend){null==quarterBend&&(quarterBend=!1);var sr=js.Boot.__cast(this.renderer,alphaTab.rendering.ScoreBarRenderer),noteHeadGlyph=new alphaTab.rendering.glyphs.NoteHeadGlyph(0,0,4,!0),accidental=sr.accidentalHelper.applyAccidentalForValue(this._beat,noteValue,quarterBend),line=sr.accidentalHelper.getNoteLineForValue(noteValue,!1),this1=line;noteHeadGlyph.y=sr.getScoreY(this1,0),this._showParenthesis&&(this._preNoteParenthesis.renderer=this.renderer,this._postNoteParenthesis.renderer=this.renderer,this._preNoteParenthesis.addParenthesisOnLine(line,!0),this._postNoteParenthesis.addParenthesisOnLine(line,!0)),0!=accidental&&this._accidentals.addGlyph(new alphaTab.rendering.glyphs.AccidentalGlyph(0,noteHeadGlyph.y,accidental,!0)),this._noteValueLookup[noteValue]=noteHeadGlyph,this.add(noteHeadGlyph,line),this.isEmpty=!1},doLayout:function(){var x=0;if(this._showParenthesis&&(this._preNoteParenthesis.x=x,this._preNoteParenthesis.renderer=this.renderer,this._preNoteParenthesis.doLayout(),x+=this._preNoteParenthesis.width+2*this.get_scale()),this._accidentals.get_isEmpty()||(this._accidentals.x=x,this._accidentals.renderer=this.renderer,this._accidentals.doLayout(),x+=this._accidentals.width+2*this.get_scale()),this.noteStartX=x,alphaTab.rendering.glyphs.ScoreNoteChordGlyphBase.prototype.doLayout.call(this),this.noteHeadOffset=this.noteStartX+(this.width-this.noteStartX)/2,this._showParenthesis){var tmp=this.width,tmp1=this.get_scale();this._postNoteParenthesis.x=tmp+2*tmp1,this._postNoteParenthesis.renderer=this.renderer,this._postNoteParenthesis.doLayout(),this.width=this.width+(this._postNoteParenthesis.width+2*this.get_scale())}},paint:function(cx,cy,canvas){this._accidentals.get_isEmpty()||this._accidentals.paint(cx+this.x,cy+this.y,canvas),this._showParenthesis&&(this._preNoteParenthesis.paint(cx+this.x,cy+this.y,canvas),this._postNoteParenthesis.paint(cx+this.x,cy+this.y,canvas)),alphaTab.rendering.glyphs.ScoreNoteChordGlyphBase.prototype.paint.call(this,cx,cy,canvas)},__class__:alphaTab.rendering.glyphs.BendNoteHeadGroupGlyph}),alphaTab.rendering.glyphs.ChineseCymbalGlyph=function(x,y,isGrace){alphaTab.rendering.glyphs.MusicFontGlyph.call(this,x,y,isGrace?.75:1,57564),this._isGrace=!1,this._isGrace=isGrace},alphaTab.rendering.glyphs.ChineseCymbalGlyph.__name__=["alphaTab","rendering","glyphs","ChineseCymbalGlyph"],alphaTab.rendering.glyphs.ChineseCymbalGlyph.__super__=alphaTab.rendering.glyphs.MusicFontGlyph,alphaTab.rendering.glyphs.ChineseCymbalGlyph.prototype=$extend(alphaTab.rendering.glyphs.MusicFontGlyph.prototype,{doLayout:function(){this.width=9*(this._isGrace?.75:1)*this.get_scale()},__class__:alphaTab.rendering.glyphs.ChineseCymbalGlyph}),alphaTab.rendering.glyphs.ChordDiagramContainerGlyph=function(x,y){alphaTab.rendering.glyphs.GlyphGroup.call(this,x,y),this._rows=null,this.height=0;this.Glyphs=[]},alphaTab.rendering.glyphs.ChordDiagramContainerGlyph.__name__=["alphaTab","rendering","glyphs","ChordDiagramContainerGlyph"],alphaTab.rendering.glyphs.ChordDiagramContainerGlyph.__super__=alphaTab.rendering.glyphs.GlyphGroup,alphaTab.rendering.glyphs.ChordDiagramContainerGlyph.prototype=$extend(alphaTab.rendering.glyphs.GlyphGroup.prototype,{addChord:function(chord){if(0<chord.strings.length){var chordDiagram=new alphaTab.rendering.glyphs.ChordDiagramGlyph(0,0,chord);chordDiagram.renderer=this.renderer,chordDiagram.doLayout(),this.Glyphs.push(chordDiagram)}},doLayout:function(){var x=0,y=0,padding=6*this.get_scale();this._rows=[];var row=new alphaTab.rendering.glyphs.ChordDiagramRowGlyph(x,y);row.width=this.width;for(var g=$iterator(this.Glyphs)();g.hasNext();){var g1=g.next();x+g1.width<this.width||(row.get_isEmpty()||(row.doLayout(),this._rows.push(row),y+=row.height+padding),x=0,(row=new alphaTab.rendering.glyphs.ChordDiagramRowGlyph(x,y)).width=this.width),row.addChord(js.Boot.__cast(g1,alphaTab.rendering.glyphs.ChordDiagramGlyph)),x+=g1.width}row.get_isEmpty()||(row.doLayout(),this._rows.push(row),y+=row.height+padding),this.height=y+padding},paint:function(cx,cy,canvas){for(var row=$iterator(this._rows)();row.hasNext();){row.next().paint(cx+this.x,cy+this.y+3*this.get_scale(),canvas)}},__class__:alphaTab.rendering.glyphs.ChordDiagramContainerGlyph}),alphaTab.rendering.glyphs.ChordDiagramGlyph=function(x,y,chord){alphaTab.rendering.glyphs.EffectGlyph.call(this,x,y),this._chord=null,this._textRow=0,this._fretRow=0,this._firstFretSpacing=0,this._chord=chord},alphaTab.rendering.glyphs.ChordDiagramGlyph.__name__=["alphaTab","rendering","glyphs","ChordDiagramGlyph"],alphaTab.rendering.glyphs.ChordDiagramGlyph.__super__=alphaTab.rendering.glyphs.EffectGlyph,alphaTab.rendering.glyphs.ChordDiagramGlyph.prototype=$extend(alphaTab.rendering.glyphs.EffectGlyph.prototype,{doLayout:function(){alphaTab.rendering.glyphs.EffectGlyph.prototype.doLayout.call(this);var res=this.renderer.get_resources();this._textRow=1.5*res.effectFont.size;this._fretRow=1.5*res.effectFont.size,1<this._chord.firstFret?this._firstFretSpacing=12*this.get_scale():this._firstFretSpacing=0,this.height=this._textRow+this._fretRow+48*this.get_scale()+10,this.width=this._firstFretSpacing+10*(this._chord.staff.tuning.length-1)*this.get_scale()+10},paint:function(cx,cy,canvas){cx+=this.x+5*this.get_scale()+this._firstFretSpacing,cy+=this.y;var w=this.width-10*this.get_scale()+this.get_scale()-this._firstFretSpacing,stringSpacing=10*this.get_scale(),fretSpacing=12*this.get_scale(),res=this.renderer.get_resources(),circleRadius=2.5*this.get_scale(),align=canvas.get_textAlign(),baseline=canvas.get_textBaseline();canvas.set_font(res.effectFont),canvas.set_textAlign(1),canvas.set_textBaseline(0),this._chord.showName&&canvas.fillText(this._chord.name,cx+this.width/2,cy+res.effectFont.size/2),cy+=this._textRow,cx+=stringSpacing/2,canvas.set_font(res.fretboardNumberFont),canvas.set_textBaseline(1);for(var i=0;i<this._chord.staff.tuning.length;){var x=cx+i*stringSpacing,y=cy+this._fretRow/2,fret=this._chord.strings[this._chord.staff.tuning.length-i-1];fret<0?canvas.fillMusicFontSymbol(x,y,this.get_scale(),59481,!0):0==fret?canvas.fillMusicFontSymbol(x,y,this.get_scale(),59482,!0):(fret-=this._chord.firstFret-1,canvas.fillText(Std.string(fret),x,y)),++i}cy+=this._fretRow;for(var i1=0;i1<this._chord.staff.tuning.length;){var x1=cx+i1*stringSpacing;canvas.fillRect(x1,cy,1,5*fretSpacing+this.get_scale()),++i1}1<this._chord.firstFret&&(canvas.set_textAlign(0),canvas.fillText(Std.string(this._chord.firstFret),cx-this._firstFretSpacing,cy+fretSpacing/2)),canvas.fillRect(cx,cy-this.get_scale(),w,2*this.get_scale());for(var i2=0;i2<=5;){var y1=cy+i2*fretSpacing;canvas.fillRect(cx,y1,w,this.get_scale()),++i2}for(var barreLookup={},barreFret=$iterator(this._chord.barreFrets)();barreFret.hasNext();){var barreFret1=barreFret.next(),strings=new Int32Array(2);strings[0]=-1,strings[1]=-1,barreLookup[barreFret1-this._chord.firstFret]=strings}for(var guitarString=0;guitarString<this._chord.strings.length;){var fret1=this._chord.strings[guitarString];if(0<fret1){if(fret1-=this._chord.firstFret,barreLookup.hasOwnProperty(fret1)){var info=barreLookup[fret1];(-1==info[0]||guitarString<info[0])&&(info[0]=guitarString),(-1==info[1]||guitarString>info[1])&&(info[1]=guitarString)}var y2=cy+fret1*fretSpacing+fretSpacing/2+.5,x2=cx+(this._chord.strings.length-guitarString-1)*stringSpacing;canvas.fillCircle(x2,y2,circleRadius)}++guitarString}for(var barreFret2=$iterator(Object.keys(barreLookup))();barreFret2.hasNext();){var barreFret3=barreFret2.next(),strings1=barreLookup[barreFret3],y3=cy+barreFret3*fretSpacing+fretSpacing/2+this.get_scale(),xLeft=cx+(this._chord.strings.length-strings1[1]-1)*stringSpacing,xRight=cx+(this._chord.strings.length-strings1[0]-1)*stringSpacing;canvas.fillRect(xLeft,y3-circleRadius,xRight-xLeft,2*circleRadius)}canvas.set_textAlign(align),canvas.set_textBaseline(baseline)},__class__:alphaTab.rendering.glyphs.ChordDiagramGlyph}),alphaTab.rendering.glyphs.ChordDiagramRowGlyph=function(x,y){alphaTab.rendering.glyphs.GlyphGroup.call(this,x,y),this._glyphWidth=0,this.height=0;this.Glyphs=[]},alphaTab.rendering.glyphs.ChordDiagramRowGlyph.__name__=["alphaTab","rendering","glyphs","ChordDiagramRowGlyph"],alphaTab.rendering.glyphs.ChordDiagramRowGlyph.__super__=alphaTab.rendering.glyphs.GlyphGroup,alphaTab.rendering.glyphs.ChordDiagramRowGlyph.prototype=$extend(alphaTab.rendering.glyphs.GlyphGroup.prototype,{doLayout:function(){for(var x=(this.width-this._glyphWidth)/2,glyph=$iterator(this.Glyphs)();glyph.hasNext();){var glyph1=glyph.next();glyph1.x=x,x+=glyph1.width}},addChord:function(chord){this.Glyphs.push(chord),this._glyphWidth=this._glyphWidth+chord.width,chord.height>this.height&&(this.height=chord.height)},__class__:alphaTab.rendering.glyphs.ChordDiagramRowGlyph}),alphaTab.rendering.glyphs.CircleGlyph=function(x,y,size){alphaTab.rendering.glyphs.Glyph.call(this,x,y),this._size=0,this._size=size},alphaTab.rendering.glyphs.CircleGlyph.__name__=["alphaTab","rendering","glyphs","CircleGlyph"],alphaTab.rendering.glyphs.CircleGlyph.__super__=alphaTab.rendering.glyphs.Glyph,alphaTab.rendering.glyphs.CircleGlyph.prototype=$extend(alphaTab.rendering.glyphs.Glyph.prototype,{doLayout:function(){this.width=this._size+3*this.get_scale()},paint:function(cx,cy,canvas){canvas.fillCircle(cx+this.x,cy+this.y,this._size)},__class__:alphaTab.rendering.glyphs.CircleGlyph}),alphaTab.rendering.glyphs.ClefGlyph=function(x,y,clef,clefOttava){alphaTab.rendering.glyphs.MusicFontGlyph.call(this,x,y,1,alphaTab.rendering.glyphs.ClefGlyph.getSymbol(clef)),this._clef=0,this._clefOttava=0,this._clef=clef,this._clefOttava=clefOttava},alphaTab.rendering.glyphs.ClefGlyph.__name__=["alphaTab","rendering","glyphs","ClefGlyph"],alphaTab.rendering.glyphs.ClefGlyph.getSymbol=function(clef){switch(clef){case 0:return 57449;case 1:case 2:return 57436;case 3:return 57442;case 4:return 57424;default:return-1}},alphaTab.rendering.glyphs.ClefGlyph.__super__=alphaTab.rendering.glyphs.MusicFontGlyph,alphaTab.rendering.glyphs.ClefGlyph.prototype=$extend(alphaTab.rendering.glyphs.MusicFontGlyph.prototype,{doLayout:function(){switch(this._clef){case 0:this.width=15*this.get_scale();break;case 1:case 2:case 3:case 4:this.width=28*this.get_scale()}},paint:function(cx,cy,canvas){var numberGlyph;alphaTab.rendering.glyphs.MusicFontGlyph.prototype.paint.call(this,cx,cy,canvas);var offsetY,offsetX,top=!1;switch(this._clefOttava){case 0:numberGlyph=new alphaTab.rendering.glyphs.MusicFontGlyph(-4*this.get_scale(),0,.5,58644),top=!0;break;case 1:numberGlyph=new alphaTab.rendering.glyphs.MusicFontGlyph(-2*this.get_scale(),0,.5,58640),top=!0;break;case 3:numberGlyph=new alphaTab.rendering.glyphs.MusicFontGlyph(-6*this.get_scale(),0,.5,58640);break;case 4:numberGlyph=new alphaTab.rendering.glyphs.MusicFontGlyph(-8*this.get_scale(),0,.5,58644);break;default:return}switch(this._clef){case 0:offsetY=top?-12:15,offsetX=0;break;case 1:case 2:offsetY=top?-19:27,offsetX=0;break;case 3:offsetY=top?-9:27,offsetX=-4;break;case 4:offsetY=top?-37:30,offsetX=0;break;default:return}numberGlyph.renderer=this.renderer,numberGlyph.doLayout();var x=this.width/2;numberGlyph.paint(cx+this.x+x+offsetX*this.get_scale(),cy+this.y+offsetY*this.get_scale(),canvas)},__class__:alphaTab.rendering.glyphs.ClefGlyph}),alphaTab.rendering.glyphs.CrescendoGlyph=function(x,y,crescendo){alphaTab.rendering.glyphs.GroupedEffectGlyph.call(this,4),this._crescendo=0,this._crescendo=crescendo,this.x=x,this.y=y},alphaTab.rendering.glyphs.CrescendoGlyph.__name__=["alphaTab","rendering","glyphs","CrescendoGlyph"],alphaTab.rendering.glyphs.CrescendoGlyph.__super__=alphaTab.rendering.glyphs.GroupedEffectGlyph,alphaTab.rendering.glyphs.CrescendoGlyph.prototype=$extend(alphaTab.rendering.glyphs.GroupedEffectGlyph.prototype,{doLayout:function(){alphaTab.rendering.glyphs.GroupedEffectGlyph.prototype.doLayout.call(this),this.height=17*this.get_scale()},paintGrouped:function(cx,cy,endX,canvas){var startX=cx+this.x,height=this.height*this.get_scale();canvas.beginPath(),1==this._crescendo?(endX-=5*this.get_scale(),canvas.moveTo(endX,cy+this.y),canvas.lineTo(startX,cy+this.y+height/2),canvas.lineTo(endX,cy+this.y+height)):(endX-=5*this.get_scale(),canvas.moveTo(startX,cy+this.y),canvas.lineTo(endX,cy+this.y+height/2),canvas.lineTo(startX,cy+this.y+height)),canvas.stroke()},__class__:alphaTab.rendering.glyphs.CrescendoGlyph}),alphaTab.rendering.glyphs.DeadNoteHeadGlyph=function(x,y,isGrace){alphaTab.rendering.glyphs.MusicFontGlyph.call(this,x,y,isGrace?.75:1,57514),this._isGrace=!1,this._isGrace=isGrace},alphaTab.rendering.glyphs.DeadNoteHeadGlyph.__name__=["alphaTab","rendering","glyphs","DeadNoteHeadGlyph"],alphaTab.rendering.glyphs.DeadNoteHeadGlyph.__super__=alphaTab.rendering.glyphs.MusicFontGlyph,alphaTab.rendering.glyphs.DeadNoteHeadGlyph.prototype=$extend(alphaTab.rendering.glyphs.MusicFontGlyph.prototype,{doLayout:function(){this.width=9*(this._isGrace?.75:1)*this.get_scale()},__class__:alphaTab.rendering.glyphs.DeadNoteHeadGlyph}),alphaTab.rendering.glyphs.DiamondNoteHeadGlyph=function(x,y,duration,isGrace){alphaTab.rendering.glyphs.MusicFontGlyph.call(this,x,y,isGrace?.75:1,alphaTab.rendering.glyphs.DiamondNoteHeadGlyph.getSymbol(duration)),this._isGrace=!1,this._isGrace=isGrace},alphaTab.rendering.glyphs.DiamondNoteHeadGlyph.__name__=["alphaTab","rendering","glyphs","DiamondNoteHeadGlyph"],alphaTab.rendering.glyphs.DiamondNoteHeadGlyph.getSymbol=function(duration){switch(duration){case-4:case-2:case 1:case 2:return 57566;default:return 57564}},alphaTab.rendering.glyphs.DiamondNoteHeadGlyph.__super__=alphaTab.rendering.glyphs.MusicFontGlyph,alphaTab.rendering.glyphs.DiamondNoteHeadGlyph.prototype=$extend(alphaTab.rendering.glyphs.MusicFontGlyph.prototype,{doLayout:function(){this.width=9*(this._isGrace?.75:1)*this.get_scale()},__class__:alphaTab.rendering.glyphs.DiamondNoteHeadGlyph}),alphaTab.rendering.glyphs.DigitGlyph=function(x,y,digit,scale){alphaTab.rendering.glyphs.MusicFontGlyph.call(this,x,y,scale,alphaTab.rendering.glyphs.DigitGlyph.getSymbol(digit)),this._digit=0,this._scale=0,this._digit=digit,this._scale=scale},alphaTab.rendering.glyphs.DigitGlyph.__name__=["alphaTab","rendering","glyphs","DigitGlyph"],alphaTab.rendering.glyphs.DigitGlyph.getSymbol=function(digit){switch(digit){case 0:return 57472;case 1:return 57473;case 2:return 57474;case 3:return 57475;case 4:return 57476;case 5:return 57477;case 6:return 57478;case 7:return 57479;case 8:return 57480;case 9:return 57481;default:return-1}},alphaTab.rendering.glyphs.DigitGlyph.__super__=alphaTab.rendering.glyphs.MusicFontGlyph,alphaTab.rendering.glyphs.DigitGlyph.prototype=$extend(alphaTab.rendering.glyphs.MusicFontGlyph.prototype,{doLayout:function(){this.y=this.y+7*this.get_scale(),this.width=this.getDigitWidth(this._digit)*this.get_scale()*this._scale},getDigitWidth:function(digit){switch(digit){case 1:return 10;case 0:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:return 14;default:return 0}},__class__:alphaTab.rendering.glyphs.DigitGlyph}),alphaTab.rendering.glyphs.DrumSticksGlyph=function(x,y,isGrace){alphaTab.rendering.glyphs.MusicFontGlyph.call(this,x,y,isGrace?.75:1,57513),this._isGrace=!1,this._isGrace=isGrace},alphaTab.rendering.glyphs.DrumSticksGlyph.__name__=["alphaTab","rendering","glyphs","DrumSticksGlyph"],alphaTab.rendering.glyphs.DrumSticksGlyph.__super__=alphaTab.rendering.glyphs.MusicFontGlyph,alphaTab.rendering.glyphs.DrumSticksGlyph.prototype=$extend(alphaTab.rendering.glyphs.MusicFontGlyph.prototype,{doLayout:function(){this.width=9*(this._isGrace?.75:1)*this.get_scale()},__class__:alphaTab.rendering.glyphs.DrumSticksGlyph}),alphaTab.rendering.glyphs.DynamicsGlyph=function(x,y,dynamics){alphaTab.rendering.glyphs.MusicFontGlyph.call(this,x,y,.6,alphaTab.rendering.glyphs.DynamicsGlyph.getSymbol(dynamics))},alphaTab.rendering.glyphs.DynamicsGlyph.__name__=["alphaTab","rendering","glyphs","DynamicsGlyph"],alphaTab.rendering.glyphs.DynamicsGlyph.getSymbol=function(dynamics){switch(dynamics){case 0:return 58666;case 1:return 58667;case 2:return 58656;case 3:return 58668;case 4:return 58669;case 5:return 58658;case 6:return 58671;case 7:return 58672;default:return-1}},alphaTab.rendering.glyphs.DynamicsGlyph.__super__=alphaTab.rendering.glyphs.MusicFontGlyph,alphaTab.rendering.glyphs.DynamicsGlyph.prototype=$extend(alphaTab.rendering.glyphs.MusicFontGlyph.prototype,{doLayout:function(){alphaTab.rendering.glyphs.MusicFontGlyph.prototype.doLayout.call(this),this.height=17*this.get_scale(),this.y=this.y+this.height/2},__class__:alphaTab.rendering.glyphs.DynamicsGlyph}),alphaTab.rendering.glyphs.FadeInGlyph=function(x,y){alphaTab.rendering.glyphs.EffectGlyph.call(this,x,y)},alphaTab.rendering.glyphs.FadeInGlyph.__name__=["alphaTab","rendering","glyphs","FadeInGlyph"],alphaTab.rendering.glyphs.FadeInGlyph.__super__=alphaTab.rendering.glyphs.EffectGlyph,alphaTab.rendering.glyphs.FadeInGlyph.prototype=$extend(alphaTab.rendering.glyphs.EffectGlyph.prototype,{doLayout:function(){alphaTab.rendering.glyphs.EffectGlyph.prototype.doLayout.call(this),this.height=17*this.get_scale()},paint:function(cx,cy,canvas){var size=6*this.get_scale(),width=Math.max(this.width,14*this.get_scale()),offset=this.height/2;canvas.beginPath(),canvas.moveTo(cx+this.x,cy+this.y+offset),canvas.quadraticCurveTo(cx+this.x+width/2,cy+this.y+offset,cx+this.x+width,cy+this.y+offset-size),canvas.moveTo(cx+this.x,cy+this.y+offset),canvas.quadraticCurveTo(cx+this.x+width/2,cy+this.y+offset,cx+this.x+width,cy+this.y+offset+size),canvas.stroke()},__class__:alphaTab.rendering.glyphs.FadeInGlyph}),alphaTab.rendering.glyphs.FermataGlyph=function(x,y,fermata){alphaTab.rendering.glyphs.MusicFontGlyph.call(this,x,y,1,alphaTab.rendering.glyphs.FermataGlyph.getSymbol(fermata))},alphaTab.rendering.glyphs.FermataGlyph.__name__=["alphaTab","rendering","glyphs","FermataGlyph"],alphaTab.rendering.glyphs.FermataGlyph.getSymbol=function(accentuation){switch(accentuation){case 0:return 58564;case 1:return 58560;case 2:return 58566;default:return-1}},alphaTab.rendering.glyphs.FermataGlyph.__super__=alphaTab.rendering.glyphs.MusicFontGlyph,alphaTab.rendering.glyphs.FermataGlyph.prototype=$extend(alphaTab.rendering.glyphs.MusicFontGlyph.prototype,{doLayout:function(){this.width=23*this.get_scale(),this.height=12*this.get_scale()},paint:function(cx,cy,canvas){alphaTab.rendering.glyphs.MusicFontGlyph.prototype.paint.call(this,cx-this.width/2,cy+this.height,canvas)},__class__:alphaTab.rendering.glyphs.FermataGlyph}),alphaTab.rendering.glyphs.GhostNoteContainerGlyph=function(isOpen){alphaTab.rendering.glyphs.Glyph.call(this,0,0),this._isOpen=!1,this._infos=null,this._glyphs=null,this.isEmpty=!1,this._isOpen=isOpen;this._infos=[];this._glyphs=[],this.isEmpty=!0},alphaTab.rendering.glyphs.GhostNoteContainerGlyph.__name__=["alphaTab","rendering","glyphs","GhostNoteContainerGlyph"],alphaTab.rendering.glyphs.GhostNoteContainerGlyph.__super__=alphaTab.rendering.glyphs.Glyph,alphaTab.rendering.glyphs.GhostNoteContainerGlyph.prototype=$extend(alphaTab.rendering.glyphs.Glyph.prototype,{addParenthesis:function(n){var sr=js.Boot.__cast(this.renderer,alphaTab.rendering.ScoreBarRenderer),line=sr.getNoteLine(n),hasParenthesis=n.isGhost||this.isTiedBend(n)&&sr.get_settings().notation.showParenthesisForTiedBends;this.addParenthesisOnLine(line,hasParenthesis)},addParenthesisOnLine:function(line,hasParenthesis){var info=new alphaTab.rendering.glyphs.GhostNoteInfo(line,hasParenthesis);this._infos.push(info),hasParenthesis&&(this.isEmpty=!1)},isTiedBend:function(note){return!!note.isTieDestination&&(!!note.tieOrigin.get_hasBend()||this.isTiedBend(note.tieOrigin))},doLayout:function(){var sr=js.Boot.__cast(this.renderer,alphaTab.rendering.ScoreBarRenderer);this._infos.sort(function(a1,b1){return a=a1,b=b1,system._Int32.Int32_Impl_.compareTo_Int32(a.line,b.line);var a,b});for(var previousGlyph=null,sizePerLine=sr.getScoreY(1,0),i=0,j=this._infos.length;i<j;){var g;if(this._infos[i].isGhost)if(null==previousGlyph){(g=new alphaTab.rendering.glyphs.GhostParenthesisGlyph(this._isOpen)).renderer=this.renderer;var this1=this._infos[i].line;g.y=sr.getScoreY(this1,0)-sizePerLine,g.height=2*sizePerLine,g.doLayout(),this._glyphs.push(g),previousGlyph=g}else{var this2=this._infos[i].line,y=sr.getScoreY(this2,0)+sizePerLine;previousGlyph.height=y-previousGlyph.y}else previousGlyph=null;++i}this.width=0<this._glyphs.length?this._glyphs[0].width:0},paint:function(cx,cy,canvas){alphaTab.rendering.glyphs.Glyph.prototype.paint.call(this,cx,cy,canvas);for(var g=$iterator(this._glyphs)();g.hasNext();){g.next().paint(cx+this.x,cy+this.y,canvas)}},__class__:alphaTab.rendering.glyphs.GhostNoteContainerGlyph}),alphaTab.rendering.glyphs.GhostNoteInfo=function(line,isGhost){this.line=0,this.isGhost=!1,this.line=line,this.isGhost=isGhost},alphaTab.rendering.glyphs.GhostNoteInfo.__name__=["alphaTab","rendering","glyphs","GhostNoteInfo"],alphaTab.rendering.glyphs.GhostNoteInfo.prototype={__class__:alphaTab.rendering.glyphs.GhostNoteInfo},alphaTab.rendering.glyphs.GhostParenthesisGlyph=function(isOpen){alphaTab.rendering.glyphs.Glyph.call(this,0,0),this._isOpen=!1,this.height=0,this._isOpen=isOpen},alphaTab.rendering.glyphs.GhostParenthesisGlyph.__name__=["alphaTab","rendering","glyphs","GhostParenthesisGlyph"],alphaTab.rendering.glyphs.GhostParenthesisGlyph.__super__=alphaTab.rendering.glyphs.Glyph,alphaTab.rendering.glyphs.GhostParenthesisGlyph.prototype=$extend(alphaTab.rendering.glyphs.Glyph.prototype,{doLayout:function(){alphaTab.rendering.glyphs.Glyph.prototype.doLayout.call(this),this.width=6*this.get_scale()},paint:function(cx,cy,canvas){if(this._isOpen){alphaTab.rendering.glyphs.TieGlyph.paintTie(canvas,this.get_scale(),cx+this.x+this.width,cy+this.y+this.height,cx+this.x+this.width,cy+this.y,!1,6,3)}else{alphaTab.rendering.glyphs.TieGlyph.paintTie(canvas,this.get_scale(),cx+this.x,cy+this.y,cx+this.x,cy+this.y+this.height,!1,6,3)}canvas.fill()},__class__:alphaTab.rendering.glyphs.GhostParenthesisGlyph}),alphaTab.rendering.glyphs.HiHatGlyph=function(x,y,isGrace){alphaTab.rendering.glyphs.MusicFontGlyph.call(this,x,y,isGrace?.75:1,57523),this._isGrace=!1,this._isGrace=isGrace},alphaTab.rendering.glyphs.HiHatGlyph.__name__=["alphaTab","rendering","glyphs","HiHatGlyph"],alphaTab.rendering.glyphs.HiHatGlyph.__super__=alphaTab.rendering.glyphs.MusicFontGlyph,alphaTab.rendering.glyphs.HiHatGlyph.prototype=$extend(alphaTab.rendering.glyphs.MusicFontGlyph.prototype,{doLayout:function(){this.width=9*(this._isGrace?.75:1)*this.get_scale()},__class__:alphaTab.rendering.glyphs.HiHatGlyph}),alphaTab.rendering.glyphs.LeftToRightLayoutingGlyphGroup=function(){alphaTab.rendering.glyphs.GlyphGroup.call(this,0,0);this.Glyphs=[]},alphaTab.rendering.glyphs.LeftToRightLayoutingGlyphGroup.__name__=["alphaTab","rendering","glyphs","LeftToRightLayoutingGlyphGroup"],alphaTab.rendering.glyphs.LeftToRightLayoutingGlyphGroup.__super__=alphaTab.rendering.glyphs.GlyphGroup,alphaTab.rendering.glyphs.LeftToRightLayoutingGlyphGroup.prototype=$extend(alphaTab.rendering.glyphs.GlyphGroup.prototype,{addGlyph:function(g){g.x=0==this.Glyphs.length?0:this.Glyphs[this.Glyphs.length-1].x+this.Glyphs[this.Glyphs.length-1].width,g.renderer=this.renderer,g.doLayout(),this.width=g.x+g.width,alphaTab.rendering.glyphs.GlyphGroup.prototype.addGlyph.call(this,g)},__class__:alphaTab.rendering.glyphs.LeftToRightLayoutingGlyphGroup}),alphaTab.rendering.glyphs.LineRangedGlyph=function(label){alphaTab.rendering.glyphs.GroupedEffectGlyph.call(this,1),this._label=null,this._label=label},alphaTab.rendering.glyphs.LineRangedGlyph.__name__=["alphaTab","rendering","glyphs","LineRangedGlyph"],alphaTab.rendering.glyphs.LineRangedGlyph.__super__=alphaTab.rendering.glyphs.GroupedEffectGlyph,alphaTab.rendering.glyphs.LineRangedGlyph.prototype=$extend(alphaTab.rendering.glyphs.GroupedEffectGlyph.prototype,{doLayout:function(){this.renderer.get_settings().notation.extendLineEffectsToBeatEnd&&(this.endPosition=4,this.forceGroupedRendering=!0),alphaTab.rendering.glyphs.GroupedEffectGlyph.prototype.doLayout.call(this),this.height=this.renderer.get_resources().effectFont.size},paintNonGrouped:function(cx,cy,canvas){var res=this.renderer.get_resources();canvas.set_font(res.effectFont);var x=canvas.get_textAlign();canvas.set_textAlign(1),canvas.fillText(this._label,cx+this.x,cy+this.y),canvas.set_textAlign(x)},paintGrouped:function(cx,cy,endX,canvas){this.paintNonGrouped(cx,cy,canvas);var lineSpacing=3*this.get_scale(),textWidth=canvas.measureText(this._label),startX=cx+this.x+textWidth/2+lineSpacing,lineY=cy+this.y+4*this.get_scale(),lineSize=8*this.get_scale();if(startX<endX){for(var lineX=startX;lineX<endX;){canvas.beginPath();var this2=system.Convert.toInt32_Single(lineY);canvas.moveTo(lineX,this2);var tmp=Math.min(lineX+lineSize,endX),this3=system.Convert.toInt32_Single(lineY);canvas.lineTo(tmp,this3),lineX+=lineSize+lineSpacing,canvas.stroke()}canvas.beginPath();var this4=system.Convert.toInt32_Single(lineY-5*this.get_scale());canvas.moveTo(endX,this4);var this5=system.Convert.toInt32_Single(lineY+5*this.get_scale());canvas.lineTo(endX,this5),canvas.stroke()}},__class__:alphaTab.rendering.glyphs.LineRangedGlyph}),alphaTab.rendering.glyphs.LyricsGlyph=function(x,y,lines,font,textAlign){null==textAlign&&(textAlign=1),alphaTab.rendering.glyphs.EffectGlyph.call(this,x,y),this._lines=null,this.font=null,this.textAlign=0,this._lines=lines,this.font=font,this.textAlign=textAlign},alphaTab.rendering.glyphs.LyricsGlyph.__name__=["alphaTab","rendering","glyphs","LyricsGlyph"],alphaTab.rendering.glyphs.LyricsGlyph.__super__=alphaTab.rendering.glyphs.EffectGlyph,alphaTab.rendering.glyphs.LyricsGlyph.prototype=$extend(alphaTab.rendering.glyphs.EffectGlyph.prototype,{doLayout:function(){alphaTab.rendering.glyphs.EffectGlyph.prototype.doLayout.call(this),this.height=this.font.size*this._lines.length},paint:function(cx,cy,canvas){canvas.set_font(this.font);var old=canvas.get_textAlign();canvas.set_textAlign(this.textAlign);for(var i=0;i<this._lines.length;)null!=this._lines[i]&&canvas.fillText(this._lines[i],cx+this.x,cy+this.y+i*this.font.size),++i;canvas.set_textAlign(old)},__class__:alphaTab.rendering.glyphs.LyricsGlyph}),alphaTab.rendering.glyphs._MusicFontSymbol={},alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_={},alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.__name__=["alphaTab","rendering","glyphs","_MusicFontSymbol","MusicFontSymbol_Impl_"],alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.toString=function(this1){switch(this1){case-1:return"None";case 57424:return"ClefG";case 57436:return"ClefC";case 57442:return"ClefF";case 57449:return"ClefNeutral";case 57453:return"ClefTab";case 57454:return"ClefTabSmall";case 57472:return"Num0";case 57473:return"Num1";case 57474:return"Num2";case 57475:return"Num3";case 57476:return"Num4";case 57477:return"Num5";case 57478:return"Num6";case 57479:return"Num7";case 57480:return"Num8";case 57481:return"Num9";case 57482:return"TimeSignatureCommon";case 57483:return"TimeSignatureCutCommon";case 57504:return"NoteDoubleWhole";case 57505:return"NoteQuadrupleWhole";case 57506:return"NoteWhole";case 57507:return"NoteHalf";case 57508:return"NoteQuarter";case 57513:return"NoteSideStick";case 57514:return"NoteDead";case 57523:return"NoteHiHat";case 57564:return"NoteHarmonic";case 57566:return"NoteHarmonicWhole";case 57591:return"NoteHiHatHalf";case 57593:return"NoteChineseCymbal";case 57813:return"Tempo";case 57815:return"NoteEighth";case 57888:return"TremoloPickingEighth";case 57889:return"TremoloPickingSixteenth";case 57890:return"TremoloPickingThirtySecond";case 57920:return"FooterUpEighth";case 57921:return"FooterDownEighth";case 57922:return"FooterUpSixteenth";case 57923:return"FooterDownSixteenth";case 57924:return"FooterUpThirtySecond";case 57925:return"FooterDownThirtySecond";case 57926:return"FooterUpSixtyFourth";case 57927:return"FooterDownSixtyFourth";case 57928:return"FooterUpOneHundredTwentyEighth";case 57929:return"FooterDownOneHundredTwentyEighth";case 57930:return"FooterUpTwoHundredFiftySixth";case 57931:return"FooterDownTwoHundredFiftySixth";case 57952:return"AccidentalFlat";case 57953:return"AccidentalNatural";case 57954:return"AccidentalSharp";case 57968:return"AccidentalQuarterToneFlatArrowUp";case 57970:return"AccidentalQuarterToneNaturalArrowUp";case 57972:return"AccidentalQuarterToneSharpArrowUp";case 58528:return"Accentuation";case 58540:return"HeavyAccentuation";case 58560:return"FermataMedium";case 58564:return"FermataShort";case 58566:return"FermataLong";case 58593:return"RestQuadrupleWhole";case 58594:return"RestDoubleWhole";case 58595:return"RestWhole";case 58596:return"RestHalf";case 58597:return"RestQuarter";case 58598:return"RestEighth";case 58599:return"RestSixteenth";case 58600:return"RestThirtySecond";case 58601:return"RestSixtyFourth";case 58602:return"RestOneHundredTwentyEighth";case 58603:return"RestTwoHundredFiftySixth";case 58624:return"SimileMarkSimple";case 58625:return"SimileMarkDouble";case 58640:return"Ottava8";case 58641:return"Ottava8va";case 58644:return"Ottava15";case 58645:return"Ottava15ma";case 58652:return"Ottava8vb";case 58656:return"DynamicP";case 58658:return"DynamicF";case 58666:return"DynamicPPP";case 58667:return"DynamicPP";case 58668:return"DynamicMP";case 58669:return"DynamicMF";case 58671:return"DynamicFF";case 58672:return"DynamicFFF";case 58726:return"Trill";case 58896:return"PickStrokeDown";case 58898:return"PickStrokeUp";case 59481:return"FretboardX";case 59482:return"FretboardO";case 60068:return"WaveHorizontalSlight";case 60126:return"WaveHorizontalWide";case 60563:return"OttavaBBaseline";case 60565:return"OttavaMBaseline"}return""},alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.fromString=function(str){switch(str.toLowerCase()){case"accentuation":return 58528;case"accidentalflat":return 57952;case"accidentalnatural":return 57953;case"accidentalquartertoneflatarrowup":return 57968;case"accidentalquartertonenaturalarrowup":return 57970;case"accidentalquartertonesharparrowup":return 57972;case"accidentalsharp":return 57954;case"clefc":return 57436;case"cleff":return 57442;case"clefg":return 57424;case"clefneutral":return 57449;case"cleftab":return 57453;case"cleftabsmall":return 57454;case"dynamicf":return 58658;case"dynamicff":return 58671;case"dynamicfff":return 58672;case"dynamicmf":return 58669;case"dynamicmp":return 58668;case"dynamicp":return 58656;case"dynamicpp":return 58667;case"dynamicppp":return 58666;case"fermatalong":return 58566;case"fermatamedium":return 58560;case"fermatashort":return 58564;case"footerdowneighth":return 57921;case"footerdownonehundredtwentyeighth":return 57929;case"footerdownsixteenth":return 57923;case"footerdownsixtyfourth":return 57927;case"footerdownthirtysecond":return 57925;case"footerdowntwohundredfiftysixth":return 57931;case"footerupeighth":return 57920;case"footeruponehundredtwentyeighth":return 57928;case"footerupsixteenth":return 57922;case"footerupsixtyfourth":return 57926;case"footerupthirtysecond":return 57924;case"footeruptwohundredfiftysixth":return 57930;case"fretboardo":return 59482;case"fretboardx":return 59481;case"heavyaccentuation":return 58540;case"none":return-1;case"notechinesecymbal":return 57593;case"notedead":return 57514;case"notedoublewhole":return 57504;case"noteeighth":return 57815;case"notehalf":return 57507;case"noteharmonic":return 57564;case"noteharmonicwhole":return 57566;case"notehihat":return 57523;case"notehihathalf":return 57591;case"notequadruplewhole":return 57505;case"notequarter":return 57508;case"notesidestick":return 57513;case"notewhole":return 57506;case"num0":return 57472;case"num1":return 57473;case"num2":return 57474;case"num3":return 57475;case"num4":return 57476;case"num5":return 57477;case"num6":return 57478;case"num7":return 57479;case"num8":return 57480;case"num9":return 57481;case"ottava15":return 58644;case"ottava15ma":return 58645;case"ottava8":return 58640;case"ottava8va":return 58641;case"ottava8vb":return 58652;case"ottavabbaseline":return 60563;case"ottavambaseline":return 60565;case"pickstrokedown":return 58896;case"pickstrokeup":return 58898;case"restdoublewhole":return 58594;case"resteighth":return 58598;case"resthalf":return 58596;case"restonehundredtwentyeighth":return 58602;case"restquadruplewhole":return 58593;case"restquarter":return 58597;case"restsixteenth":return 58599;case"restsixtyfourth":return 58601;case"restthirtysecond":return 58600;case"resttwohundredfiftysixth":return 58603;case"restwhole":return 58595;case"similemarkdouble":return 58625;case"similemarksimple":return 58624;case"tempo":return 57813;case"timesignaturecommon":return 57482;case"timesignaturecutcommon":return 57483;case"tremolopickingeighth":return 57888;case"tremolopickingsixteenth":return 57889;case"tremolopickingthirtysecond":return 57890;case"trill":return 58726;case"wavehorizontalslight":return 60068;case"wavehorizontalwide":return 60126}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.rendering.glyphs.NoteHeadGlyph=function(x,y,duration,isGrace){alphaTab.rendering.glyphs.MusicFontGlyph.call(this,x,y,isGrace?.75:1,alphaTab.rendering.glyphs.NoteHeadGlyph.getSymbol(duration)),this._isGrace=!1,this._duration=-4,this._isGrace=isGrace,this._duration=duration},alphaTab.rendering.glyphs.NoteHeadGlyph.__name__=["alphaTab","rendering","glyphs","NoteHeadGlyph"],alphaTab.rendering.glyphs.NoteHeadGlyph.getSymbol=function(duration){switch(duration){case-4:return 57505;case-2:return 57504;case 1:return 57506;case 2:return 57507;default:return 57508}},alphaTab.rendering.glyphs.NoteHeadGlyph.__super__=alphaTab.rendering.glyphs.MusicFontGlyph,alphaTab.rendering.glyphs.NoteHeadGlyph.prototype=$extend(alphaTab.rendering.glyphs.MusicFontGlyph.prototype,{paint:function(cx,cy,canvas){var offset=this._isGrace?this.get_scale():0;canvas.fillMusicFontSymbol(cx+this.x,cy+this.y+offset,this.GlyphScale*this.get_scale(),this.Symbol,!1)},doLayout:function(){var scale=(this._isGrace?.75:1)*this.get_scale();switch(this._duration){case-4:this.width=14*scale,this.height=9*scale;break;case-2:case 1:this.width=14*(this._isGrace?.75:1)*this.get_scale(),this.height=9*scale;break;default:this.width=10*(this._isGrace?.75:1)*this.get_scale(),this.height=9*scale}},__class__:alphaTab.rendering.glyphs.NoteHeadGlyph}),alphaTab.rendering.glyphs.NoteNumberGlyph=function(x,y,note){alphaTab.rendering.glyphs.Glyph.call(this,x,y),this._note=null,this._noteString=null,this._trillNoteString=null,this._trillNoteStringWidth=0,this.isEmpty=!1,this.height=0,this.noteStringWidth=0,this._note=note},alphaTab.rendering.glyphs.NoteNumberGlyph.__name__=["alphaTab","rendering","glyphs","NoteNumberGlyph"],alphaTab.rendering.glyphs.NoteNumberGlyph.__super__=alphaTab.rendering.glyphs.Glyph,alphaTab.rendering.glyphs.NoteNumberGlyph.prototype=$extend(alphaTab.rendering.glyphs.Glyph.prototype,{doLayout:function(){var n=this._note,fret=n.fret-n.beat.voice.bar.staff.transpositionPitch;1==n.harmonicType&&0!=n.harmonicValue&&(fret=n.harmonicValue-n.beat.voice.bar.staff.transpositionPitch);if(n.isTieDestination)0==n.beat.index||(2==n.bendType||4==n.bendType)&&this.renderer.get_settings().notation.showTabNoteOnTiedBend?this._noteString="("+Std.string(n.tieOrigin.fret-n.beat.voice.bar.staff.transpositionPitch)+")":this._noteString="";else if(this._noteString=n.isDead?"x":Std.string(fret),n.isGhost)this._noteString="("+this._noteString+")";else if(1==n.harmonicType){var this3=this._noteString,this4=system.Convert.toUInt16(46),i=this3.indexOf(String.fromCharCode(this4));0<=i&&(this._noteString=HxOverrides.substr(this._noteString,0,i+2)),this._noteString="<"+this._noteString+">"}if(n.get_isTrill())this._trillNoteString="("+Std.string(n.get_trillFret()-n.beat.voice.bar.staff.transpositionPitch)+")";else if(alphaTab.platform.Platform.isAlmostEqualTo(n.harmonicValue,0))this._trillNoteString="";else{switch(n.harmonicType){case 2:case 3:case 4:case 5:case 6:var s=Std.string(fret+n.harmonicValue),this5=system.Convert.toUInt16(46),i1=s.indexOf(String.fromCharCode(this5));0<=i1&&(s=HxOverrides.substr(s,0,i1+2)),this._trillNoteString="<"+s+">";break;default:this._trillNoteString=""}}var s1=this._noteString;if(this.isEmpty=null==s1||0==s1.length,!this.isEmpty){this.renderer.scoreRenderer.canvas.set_font(this.renderer.get_resources().tablatureFont),this.width=this.noteStringWidth=this.renderer.scoreRenderer.canvas.measureText(this._noteString),this.height=this.renderer.scoreRenderer.canvas.get_font().size;var s2=this._trillNoteString;!(null==s2||0==s2.length)&&(this.renderer.scoreRenderer.canvas.set_font(this.renderer.get_resources().graceFont),this._trillNoteStringWidth=3*this.get_scale()+this.renderer.scoreRenderer.canvas.measureText(this._trillNoteString),this.width=this.width+this._trillNoteStringWidth)}},paint:function(cx,cy,canvas){if(!this.isEmpty){var textWidth=this.noteStringWidth+this._trillNoteStringWidth,x=cx+this.x+(this.width-textWidth)/2,prevFont=this.renderer.scoreRenderer.canvas.get_font();if(this.renderer.scoreRenderer.canvas.set_font(this.renderer.get_resources().graceFont),canvas.fillText(this._trillNoteString,x+this.noteStringWidth+3*this.get_scale(),cy+this.y),this.renderer.scoreRenderer.canvas.set_font(prevFont),canvas.fillText(this._noteString,x,cy+this.y),this.renderer.get_settings().core.includeNoteBounds){var noteBounds=new alphaTab.rendering.utils.NoteBounds;noteBounds.note=this._note;var _tmp=new alphaTab.rendering.utils.Bounds;_tmp.x=cx+x,_tmp.y=cy+this.y,_tmp.w=this.width,_tmp.h=this.height,noteBounds.noteHeadBounds=_tmp,this.renderer.scoreRenderer.get_boundsLookup().addNote(noteBounds)}}},__class__:alphaTab.rendering.glyphs.NoteNumberGlyph}),alphaTab.rendering.glyphs.NoteVibratoGlyph=function(x,y,type,scale){null==scale&&(scale=1.2),alphaTab.rendering.glyphs.GroupedEffectGlyph.call(this,4),this._type=0,this._scale=0,this._symbol=-1,this._symbolSize=0,this._symbolOffset=0,this._type=type,this._scale=scale,this.x=x,this.y=y},alphaTab.rendering.glyphs.NoteVibratoGlyph.__name__=["alphaTab","rendering","glyphs","NoteVibratoGlyph"],alphaTab.rendering.glyphs.NoteVibratoGlyph.__super__=alphaTab.rendering.glyphs.GroupedEffectGlyph,alphaTab.rendering.glyphs.NoteVibratoGlyph.prototype=$extend(alphaTab.rendering.glyphs.GroupedEffectGlyph.prototype,{doLayout:function(){alphaTab.rendering.glyphs.GroupedEffectGlyph.prototype.doLayout.call(this);var symbolHeight=0;switch(this._type){case 1:this._symbol=60068,this._symbolSize=8.5*this._scale,this._symbolOffset=10*this._scale,symbolHeight=6*this._scale;break;case 2:this._symbol=60126,this._symbolSize=10*this._scale,this._symbolOffset=7*this._scale,symbolHeight=10*this._scale}this.height=symbolHeight*this.get_scale()},paintGrouped:function(cx,cy,endX,canvas){for(var width=endX-(cx+this.x),step=this._symbolSize*this.get_scale(),loops=system.Convert.toInt32_Single(Math.max(1,width/step)),loopX=0,i=0;i<loops;)canvas.fillMusicFontSymbol(cx+this.x+loopX,cy+this.y+this._symbolOffset,this._scale,this._symbol,!1),loopX+=step,++i},__class__:alphaTab.rendering.glyphs.NoteVibratoGlyph}),alphaTab.rendering.glyphs.NumberGlyph=function(x,y,number,scale){null==scale&&(scale=1),alphaTab.rendering.glyphs.GlyphGroup.call(this,x,y),this._number=0,this._scale=0,this._number=number,this._scale=scale},alphaTab.rendering.glyphs.NumberGlyph.__name__=["alphaTab","rendering","glyphs","NumberGlyph"],alphaTab.rendering.glyphs.NumberGlyph.__super__=alphaTab.rendering.glyphs.GlyphGroup,alphaTab.rendering.glyphs.NumberGlyph.prototype=$extend(alphaTab.rendering.glyphs.GlyphGroup.prototype,{doLayout:function(){for(var i=this._number;0<i;){var num=i%10,gl=new alphaTab.rendering.glyphs.DigitGlyph(0,0,num,this._scale);this.addGlyph(gl),i=i/10|0}this.Glyphs.reverse();for(var cx=0,j=0,k=this.Glyphs.length;j<k;){var g=this.Glyphs[j];g.x=cx,g.y=0,g.renderer=this.renderer,g.doLayout(),cx+=g.width,++j}this.width=cx},__class__:alphaTab.rendering.glyphs.NumberGlyph}),alphaTab.rendering.glyphs.OttavaGlyph=function(ottava,aboveStaff){alphaTab.rendering.glyphs.GroupedEffectGlyph.call(this,3),this._ottava=0,this._aboveStaff=!1,this._ottava=ottava,this._aboveStaff=aboveStaff},alphaTab.rendering.glyphs.OttavaGlyph.__name__=["alphaTab","rendering","glyphs","OttavaGlyph"],alphaTab.rendering.glyphs.OttavaGlyph.__super__=alphaTab.rendering.glyphs.GroupedEffectGlyph,alphaTab.rendering.glyphs.OttavaGlyph.prototype=$extend(alphaTab.rendering.glyphs.GroupedEffectGlyph.prototype,{doLayout:function(){alphaTab.rendering.glyphs.GroupedEffectGlyph.prototype.doLayout.call(this),this.height=13*this.get_scale()},paintNonGrouped:function(cx,cy,canvas){this.paintOttava(cx,cy,canvas)},paintOttava:function(cx,cy,canvas){var size=0;switch(this._ottava){case 0:size=37*this.get_scale(),canvas.fillMusicFontSymbol(cx+this.x-size/2,cy+this.y+this.height,.8,58645,!1);break;case 1:size=26*this.get_scale(),canvas.fillMusicFontSymbol(cx+this.x-size/2,cy+this.y+this.height,.8,58641,!1);break;case 3:size=23*this.get_scale(),canvas.fillMusicFontSymbol(cx+this.x-size/2,cy+this.y+this.height,.8,58652,!1);break;case 4:size=36*this.get_scale(),canvas.fillMusicFontSymbols(cx+this.x-size/2,cy+this.y+this.height,.8,[58644,60565,60563],!1)}return size/2},paintGrouped:function(cx,cy,endX,canvas){var size=this.paintOttava(cx,cy,canvas),lineSpacing=3*this.get_scale(),startX=cx+this.x+size+lineSpacing,lineY=cy+this.y;lineY+=this._aboveStaff?2*this.get_scale():this.height-2*this.get_scale();var lineSize=8*this.get_scale();if(startX<endX){for(var lineX=startX;lineX<endX;){canvas.beginPath();var this1=system.Convert.toInt32_Single(lineY);canvas.moveTo(lineX,this1);var tmp=Math.min(lineX+lineSize,endX),this2=system.Convert.toInt32_Single(lineY);canvas.lineTo(tmp,this2),lineX+=lineSize+lineSpacing,canvas.stroke()}canvas.beginPath(),this._aboveStaff?(canvas.moveTo(endX,lineY),canvas.lineTo(endX,cy+this.y+this.height)):(canvas.moveTo(endX,lineY),canvas.lineTo(endX,cy+this.y)),canvas.stroke()}},__class__:alphaTab.rendering.glyphs.OttavaGlyph}),alphaTab.rendering.glyphs.PickStrokeGlyph=function(x,y,pickStroke){alphaTab.rendering.glyphs.MusicFontGlyph.call(this,x,y,.75,alphaTab.rendering.glyphs.PickStrokeGlyph.getSymbol(pickStroke))},alphaTab.rendering.glyphs.PickStrokeGlyph.__name__=["alphaTab","rendering","glyphs","PickStrokeGlyph"],alphaTab.rendering.glyphs.PickStrokeGlyph.getSymbol=function(pickStroke){switch(pickStroke){case 1:return 58898;case 2:return 58896;default:return-1}},alphaTab.rendering.glyphs.PickStrokeGlyph.__super__=alphaTab.rendering.glyphs.MusicFontGlyph,alphaTab.rendering.glyphs.PickStrokeGlyph.prototype=$extend(alphaTab.rendering.glyphs.MusicFontGlyph.prototype,{doLayout:function(){this.width=9*this.get_scale(),this.height=10*this.get_scale()},paint:function(cx,cy,canvas){alphaTab.rendering.glyphs.MusicFontGlyph.prototype.paint.call(this,cx,cy+this.height,canvas)},__class__:alphaTab.rendering.glyphs.PickStrokeGlyph}),alphaTab.rendering.glyphs.RepeatCloseGlyph=function(x,y){alphaTab.rendering.glyphs.Glyph.call(this,x,y)},alphaTab.rendering.glyphs.RepeatCloseGlyph.__name__=["alphaTab","rendering","glyphs","RepeatCloseGlyph"],alphaTab.rendering.glyphs.RepeatCloseGlyph.__super__=alphaTab.rendering.glyphs.Glyph,alphaTab.rendering.glyphs.RepeatCloseGlyph.prototype=$extend(alphaTab.rendering.glyphs.Glyph.prototype,{doLayout:function(){this.width=11*this.get_scale()},paint:function(cx,cy,canvas){var blockWidth=4*this.get_scale(),top=cy+this.y+this.renderer.topPadding,bottom=cy+this.y+this.renderer.height-this.renderer.bottomPadding,left=cx+this.x,h=bottom-top,circleSize=1.5*this.get_scale(),middle=(top+bottom)/2;canvas.fillCircle(left,middle-3*circleSize,circleSize),canvas.fillCircle(left,middle+3*circleSize,circleSize),left+=4*this.get_scale(),canvas.beginPath(),canvas.moveTo(left,top),canvas.lineTo(left,bottom),canvas.stroke();left+=3*this.get_scale()+.5,canvas.fillRect(left,top,blockWidth,h)},__class__:alphaTab.rendering.glyphs.RepeatCloseGlyph}),alphaTab.rendering.glyphs.RepeatCountGlyph=function(x,y,count){alphaTab.rendering.glyphs.Glyph.call(this,x,y),this._count=0,this._count=count},alphaTab.rendering.glyphs.RepeatCountGlyph.__name__=["alphaTab","rendering","glyphs","RepeatCountGlyph"],alphaTab.rendering.glyphs.RepeatCountGlyph.__super__=alphaTab.rendering.glyphs.Glyph,alphaTab.rendering.glyphs.RepeatCountGlyph.prototype=$extend(alphaTab.rendering.glyphs.Glyph.prototype,{doLayout:function(){this.width=0},paint:function(cx,cy,canvas){var res=this.renderer.get_resources(),oldAlign=canvas.get_textAlign();canvas.set_font(res.barNumberFont),canvas.set_textAlign(2);var s="x"+Std.string(this._count),w=canvas.measureText(s)/1.5;canvas.fillText(s,cx+this.x-w,cy+this.y),canvas.set_textAlign(oldAlign)},__class__:alphaTab.rendering.glyphs.RepeatCountGlyph}),alphaTab.rendering.glyphs.RepeatOpenGlyph=function(x,y,circleSize,dotOffset){alphaTab.rendering.glyphs.Glyph.call(this,x,y),this._dotOffset=0,this._circleSize=0,this._dotOffset=dotOffset,this._circleSize=circleSize},alphaTab.rendering.glyphs.RepeatOpenGlyph.__name__=["alphaTab","rendering","glyphs","RepeatOpenGlyph"],alphaTab.rendering.glyphs.RepeatOpenGlyph.__super__=alphaTab.rendering.glyphs.Glyph,alphaTab.rendering.glyphs.RepeatOpenGlyph.prototype=$extend(alphaTab.rendering.glyphs.Glyph.prototype,{doLayout:function(){this.width=13*this.get_scale()},paint:function(cx,cy,canvas){var blockWidth=4*this.get_scale(),top=cy+this.y+this.renderer.topPadding,bottom=cy+this.y+this.renderer.height-this.renderer.bottomPadding,left=cx+this.x+.5,h=bottom-top;canvas.fillRect(left,top,blockWidth,h);left+=2*blockWidth-.5,canvas.beginPath(),canvas.moveTo(left,top),canvas.lineTo(left,bottom),canvas.stroke(),left+=3*this.get_scale();var circleSize=this._circleSize*this.get_scale(),middle=(top+bottom)/2;canvas.fillCircle(left,middle-circleSize*this._dotOffset,circleSize),canvas.fillCircle(left,middle+circleSize*this._dotOffset,circleSize)},__class__:alphaTab.rendering.glyphs.RepeatOpenGlyph}),alphaTab.rendering.glyphs.RideCymbalGlyph=function(x,y,isGrace){alphaTab.rendering.glyphs.MusicFontGlyph.call(this,x,y,isGrace?.75:1,57566),this._isGrace=!1,this._isGrace=isGrace},alphaTab.rendering.glyphs.RideCymbalGlyph.__name__=["alphaTab","rendering","glyphs","RideCymbalGlyph"],alphaTab.rendering.glyphs.RideCymbalGlyph.__super__=alphaTab.rendering.glyphs.MusicFontGlyph,alphaTab.rendering.glyphs.RideCymbalGlyph.prototype=$extend(alphaTab.rendering.glyphs.MusicFontGlyph.prototype,{doLayout:function(){this.width=9*(this._isGrace?.75:1)*this.get_scale()},__class__:alphaTab.rendering.glyphs.RideCymbalGlyph}),alphaTab.rendering.glyphs.ScoreBeatGlyph=function(){alphaTab.rendering.glyphs.BeatOnNoteGlyphBase.call(this)},alphaTab.rendering.glyphs.ScoreBeatGlyph.__name__=["alphaTab","rendering","glyphs","ScoreBeatGlyph"],alphaTab.rendering.glyphs.ScoreBeatGlyph.__super__=alphaTab.rendering.glyphs.BeatOnNoteGlyphBase,alphaTab.rendering.glyphs.ScoreBeatGlyph.prototype=$extend(alphaTab.rendering.glyphs.BeatOnNoteGlyphBase.prototype,{updateBeamingHelper:function(){null!=this.noteHeads?this.noteHeads.updateBeamingHelper(this.container.x+this.x):null!=this.restGlyph&&this.restGlyph.updateBeamingHelper(this.container.x+this.x)},doLayout:function(){var sr=js.Boot.__cast(this.renderer,alphaTab.rendering.ScoreBarRenderer);if(!this.container.beat.isEmpty)if(this.container.beat.get_isRest()){var dotLine=0,line=0,offset=0;switch(this.container.beat.duration){case-4:case-2:line=6,dotLine=5;break;case 1:line=4,dotLine=5;break;case 2:line=6,dotLine=5;break;case 4:line=6,offset=-2,dotLine=5;break;case 8:case 16:line=6,dotLine=5;break;case 32:case 64:case 128:case 256:line=6,dotLine=3}var this1=line,this2=offset,y=sr.getScoreY(this1,this2);if(this.restGlyph=new alphaTab.rendering.glyphs.ScoreRestGlyph(0,y,this.container.beat.duration),this.restGlyph.beat=this.container.beat,this.restGlyph.beamingHelper=this.beamingHelper,this.addGlyph(this.restGlyph),0<this.container.beat.dots){this.addGlyph(new alphaTab.rendering.glyphs.SpacingGlyph(0,0,5*this.get_scale()));for(var i1=0;i1<this.container.beat.dots;){var group1=new alphaTab.rendering.glyphs.GlyphGroup(0,0);this.createBeatDot(dotLine,group1),this.addGlyph(group1),++i1}}}else{this.noteHeads=new alphaTab.rendering.glyphs.ScoreNoteChordGlyph,this.noteHeads.beat=this.container.beat,this.noteHeads.beamingHelper=this.beamingHelper;var ghost=new alphaTab.rendering.glyphs.GhostNoteContainerGlyph(!1);ghost.renderer=this.renderer;for(var note=$iterator(this.container.beat.notes)();note.hasNext();){var note1=note.next();note1.isVisible&&(this.createNoteGlyph(note1),ghost.addParenthesis(note1))}if(this.addGlyph(this.noteHeads),ghost.isEmpty||(this.addGlyph(new alphaTab.rendering.glyphs.SpacingGlyph(0,0,4*(0!=this.container.beat.graceType?.75:1)*this.get_scale())),this.addGlyph(ghost)),this.container.beat.get_hasWhammyBar()){var whammy=new alphaTab.rendering.glyphs.ScoreWhammyBarGlyph(this.container.beat);whammy.renderer=this.renderer,whammy.doLayout(),this.container.ties.push(whammy)}if(0<this.container.beat.dots){this.addGlyph(new alphaTab.rendering.glyphs.SpacingGlyph(0,0,5*this.get_scale()));for(var i=0;i<this.container.beat.dots;){for(var group=new alphaTab.rendering.glyphs.GlyphGroup(0,0),note2=$iterator(this.container.beat.notes)();note2.hasNext();){var note3=note2.next();this.createBeatDot(sr.getNoteLine(note3),group)}this.addGlyph(group),++i}}}alphaTab.rendering.glyphs.BeatOnNoteGlyphBase.prototype.doLayout.call(this),this.container.beat.isEmpty?this.centerX=this.width/2:this.container.beat.get_isRest()?this.centerX=this.restGlyph.x+this.restGlyph.width/2:this.centerX=this.noteHeads.x+this.noteHeads.width/2},createBeatDot:function(line,group){var sr=js.Boot.__cast(this.renderer,alphaTab.rendering.ScoreBarRenderer),this1=line;group.addGlyph(new alphaTab.rendering.glyphs.CircleGlyph(0,sr.getScoreY(this1,0),1.5*this.get_scale()))},createNoteHeadGlyph:function(n){var isGrace=0!=this.container.beat.graceType;if(n.beat.voice.bar.staff.isPercussion){var value=n.get_realValue();return value<=30||67<=value||alphaTab.rendering.glyphs.ScoreBeatGlyph.NormalKeys.hasOwnProperty(value)?new alphaTab.rendering.glyphs.NoteHeadGlyph(0,0,4,isGrace):alphaTab.rendering.glyphs.ScoreBeatGlyph.XKeys.hasOwnProperty(value)?new alphaTab.rendering.glyphs.DrumSticksGlyph(0,0,isGrace):46==value?new alphaTab.rendering.glyphs.HiHatGlyph(0,0,isGrace):49==value||57==value?new alphaTab.rendering.glyphs.DiamondNoteHeadGlyph(0,0,n.beat.duration,isGrace):52==value?new alphaTab.rendering.glyphs.ChineseCymbalGlyph(0,0,isGrace):51==value||53==value||59==value?new alphaTab.rendering.glyphs.RideCymbalGlyph(0,0,isGrace):new alphaTab.rendering.glyphs.NoteHeadGlyph(0,0,4,isGrace)}return n.isDead?new alphaTab.rendering.glyphs.DeadNoteHeadGlyph(0,0,isGrace):3==n.beat.graceType?new alphaTab.rendering.glyphs.NoteHeadGlyph(0,0,4,!0):1==n.harmonicType?new alphaTab.rendering.glyphs.DiamondNoteHeadGlyph(0,0,n.beat.duration,isGrace):new alphaTab.rendering.glyphs.NoteHeadGlyph(0,0,n.beat.duration,isGrace)},createNoteGlyph:function(n){if(3!=n.beat.graceType||n.get_hasBend()){var sr=js.Boot.__cast(this.renderer,alphaTab.rendering.ScoreBarRenderer),noteHeadGlyph=this.createNoteHeadGlyph(n),line=sr.getNoteLine(n),this1=line;if(noteHeadGlyph.y=sr.getScoreY(this1,0),this.noteHeads.addNoteGlyph(noteHeadGlyph,n,line),0!=n.harmonicType&&1!=n.harmonicType){var harmonicFret=n.get_displayValue()+n.get_harmonicPitch();noteHeadGlyph=new alphaTab.rendering.glyphs.DiamondNoteHeadGlyph(0,0,n.beat.duration,0!=this.container.beat.graceType);var this2=line=sr.accidentalHelper.getNoteLineForValue(harmonicFret,!1);noteHeadGlyph.y=sr.getScoreY(this2,0),this.noteHeads.addNoteGlyph(noteHeadGlyph,n,line)}n.isStaccato&&!this.noteHeads.beatEffects.hasOwnProperty("Staccato")&&(this.noteHeads.beatEffects.Staccato=new alphaTab.rendering.glyphs.CircleGlyph(0,0,1.5)),1!=n.accentuated||this.noteHeads.beatEffects.hasOwnProperty("Accent")||(this.noteHeads.beatEffects.Accent=new alphaTab.rendering.glyphs.AccentuationGlyph(0,0,1)),2!=n.accentuated||this.noteHeads.beatEffects.hasOwnProperty("HAccent")||(this.noteHeads.beatEffects.HAccent=new alphaTab.rendering.glyphs.AccentuationGlyph(0,0,2))}},__class__:alphaTab.rendering.glyphs.ScoreBeatGlyph}),alphaTab.rendering.glyphs.ScoreBeatPreNotesGlyph=function(){alphaTab.rendering.glyphs.BeatGlyphBase.call(this)},alphaTab.rendering.glyphs.ScoreBeatPreNotesGlyph.__name__=["alphaTab","rendering","glyphs","ScoreBeatPreNotesGlyph"],alphaTab.rendering.glyphs.ScoreBeatPreNotesGlyph.__super__=alphaTab.rendering.glyphs.BeatGlyphBase,alphaTab.rendering.glyphs.ScoreBeatPreNotesGlyph.prototype=$extend(alphaTab.rendering.glyphs.BeatGlyphBase.prototype,{get_prebendNoteHeadOffset:function(){return this._prebends.x+this._prebends.noteHeadOffset},doLayout:function(){if(!this.container.beat.get_isRest()){var accidentals=new alphaTab.rendering.glyphs.AccidentalGroupGlyph,ghost=new alphaTab.rendering.glyphs.GhostNoteContainerGlyph(!0);ghost.renderer=this.renderer,this._prebends=new alphaTab.rendering.glyphs.BendNoteHeadGroupGlyph(this.container.beat,!0),this._prebends.renderer=this.renderer;for(var note=$iterator(this.container.beat.notes)();note.hasNext();){var note1=note.next();if(note1.isVisible){if(note1.get_hasBend())switch(note1.bendType){case 6:case 7:case 8:this._prebends.addGlyph(note1.get_displayValue()-(note1.bendPoints[0].value/2|0),!1)}else if(note1.beat.get_hasWhammyBar()){switch(note1.beat.whammyBarType){case 5:case 6:this._prebends.addGlyph(note1.get_displayValue()-(note1.beat.whammyBarPoints[0].value/2|0),!1)}}this.createAccidentalGlyph(note1,accidentals),ghost.addParenthesis(note1)}}this._prebends.isEmpty||(this.addGlyph(this._prebends),this.addGlyph(new alphaTab.rendering.glyphs.SpacingGlyph(0,0,4*(0!=this.container.beat.graceType?.75:1)*this.get_scale()))),0!=this.container.beat.brushType&&(this.addGlyph(new alphaTab.rendering.glyphs.ScoreBrushGlyph(this.container.beat)),this.addGlyph(new alphaTab.rendering.glyphs.SpacingGlyph(0,0,4*this.get_scale()))),ghost.isEmpty||(this.addGlyph(ghost),this.addGlyph(new alphaTab.rendering.glyphs.SpacingGlyph(0,0,4*(0!=this.container.beat.graceType?.75:1)*this.get_scale()))),accidentals.get_isEmpty()||(this.accidentals=accidentals,this.addGlyph(accidentals),this.addGlyph(new alphaTab.rendering.glyphs.SpacingGlyph(0,0,4*(0!=this.container.beat.graceType?.75:1)*this.get_scale())))}alphaTab.rendering.glyphs.BeatGlyphBase.prototype.doLayout.call(this)},createAccidentalGlyph:function(n,accidentals){var sr=js.Boot.__cast(this.renderer,alphaTab.rendering.ScoreBarRenderer),accidental=sr.accidentalHelper.applyAccidental(n),noteLine=sr.getNoteLine(n),isGrace=0!=this.container.beat.graceType;if(0!=accidental){var this1=noteLine;accidentals.addGlyph(new alphaTab.rendering.glyphs.AccidentalGlyph(0,sr.getScoreY(this1,0),accidental,isGrace))}if(0!=n.harmonicType&&1!=n.harmonicType){var harmonicFret=n.get_displayValue()+n.get_harmonicPitch();accidental=sr.accidentalHelper.applyAccidentalForValue(n.beat,harmonicFret,isGrace);var this2=noteLine=sr.accidentalHelper.getNoteLineForValue(harmonicFret,!1);accidentals.addGlyph(new alphaTab.rendering.glyphs.AccidentalGlyph(0,sr.getScoreY(this2,0),accidental,isGrace))}},__class__:alphaTab.rendering.glyphs.ScoreBeatPreNotesGlyph}),alphaTab.rendering.glyphs.ScoreHelperNotesBaseGlyph=function(){alphaTab.rendering.glyphs.Glyph.call(this,0,0),this.BendNoteHeads=null;this.BendNoteHeads=[]},alphaTab.rendering.glyphs.ScoreHelperNotesBaseGlyph.__name__=["alphaTab","rendering","glyphs","ScoreHelperNotesBaseGlyph"],alphaTab.rendering.glyphs.ScoreHelperNotesBaseGlyph.__super__=alphaTab.rendering.glyphs.Glyph,alphaTab.rendering.glyphs.ScoreHelperNotesBaseGlyph.prototype=$extend(alphaTab.rendering.glyphs.Glyph.prototype,{drawBendSlur:function(canvas,x1,y1,x2,y2,down,scale,slurText){var normalVectorX=y2-y1,normalVectorY=x2-x1,this1=normalVectorX*normalVectorX+normalVectorY*normalVectorY,length=js.Boot.__cast(Math.sqrt(this1),Float);down?normalVectorX*=-1:normalVectorY*=-1;var offset=11*scale;x2-x1<20&&(offset/=2);var cp1X=(x2+x1)/2+offset*(normalVectorX/=length),cp1Y=(y2+y1)/2+offset*(normalVectorY/=length);if(canvas.beginPath(),canvas.moveTo(x1,y1),canvas.lineTo(cp1X,cp1Y),canvas.lineTo(x2,y2),canvas.stroke(),null!=slurText&&0!=slurText.length){var w=canvas.measureText(slurText),textOffset=down?0:-canvas.get_font().size;canvas.fillText(slurText,cp1X-w/2,cp1Y+textOffset)}},doLayout:function(){alphaTab.rendering.glyphs.Glyph.prototype.doLayout.call(this),this.width=0;for(var noteHeads=$iterator(this.BendNoteHeads)();noteHeads.hasNext();){var noteHeads1=noteHeads.next();noteHeads1.doLayout(),this.width=this.width+(noteHeads1.width+10*this.get_scale())}},getBeamDirection:function(beat,noteRenderer){return 0==noteRenderer.getBeatDirection(beat)?1:0},__class__:alphaTab.rendering.glyphs.ScoreHelperNotesBaseGlyph}),alphaTab.rendering.glyphs.ScoreBendGlyph=function(beat){alphaTab.rendering.glyphs.ScoreHelperNotesBaseGlyph.call(this),this._beat=null,this._notes=null,this._endNoteGlyph=null,this._middleNoteGlyph=null,this._beat=beat;this._notes=[],this._middleNoteGlyph=null,this._endNoteGlyph=null},alphaTab.rendering.glyphs.ScoreBendGlyph.__name__=["alphaTab","rendering","glyphs","ScoreBendGlyph"],alphaTab.rendering.glyphs.ScoreBendGlyph.__super__=alphaTab.rendering.glyphs.ScoreHelperNotesBaseGlyph,alphaTab.rendering.glyphs.ScoreBendGlyph.prototype=$extend(alphaTab.rendering.glyphs.ScoreHelperNotesBaseGlyph.prototype,{addBends:function(note){if(this._notes.push(note),!note.get_isTieOrigin())switch(note.bendType){case 3:if(!note.get_isTieOrigin()){var endGlyphs=this._endNoteGlyph;null==endGlyphs&&((endGlyphs=this._endNoteGlyph=new alphaTab.rendering.glyphs.BendNoteHeadGroupGlyph(note.beat,!1)).renderer=this.renderer,this.BendNoteHeads.push(endGlyphs));var lastBendPoint=note.bendPoints[note.bendPoints.length-1];endGlyphs.addGlyph(this.getBendNoteValue(note,lastBendPoint),lastBendPoint.value%2!=0)}break;case 4:var middleGlyphs=this._middleNoteGlyph;null==middleGlyphs&&((middleGlyphs=this._middleNoteGlyph=new alphaTab.rendering.glyphs.BendNoteHeadGroupGlyph(note.beat,!1)).renderer=this.renderer,this.BendNoteHeads.push(middleGlyphs));var middleBendPoint=note.bendPoints[1];middleGlyphs.addGlyph(this.getBendNoteValue(note,note.bendPoints[1]),middleBendPoint.value%2!=0);var endGlyphs1=this._endNoteGlyph;null==endGlyphs1&&((endGlyphs1=this._endNoteGlyph=new alphaTab.rendering.glyphs.BendNoteHeadGroupGlyph(note.beat,!1)).renderer=this.renderer,this.BendNoteHeads.push(endGlyphs1));var lastBendPoint1=note.bendPoints[note.bendPoints.length-1];endGlyphs1.addGlyph(this.getBendNoteValue(note,lastBendPoint1),lastBendPoint1.value%2!=0);break;case 2:case 7:case 8:var endGlyphs2=this._endNoteGlyph;null==endGlyphs2&&((endGlyphs2=this._endNoteGlyph=new alphaTab.rendering.glyphs.BendNoteHeadGroupGlyph(note.beat,!1)).renderer=this.renderer,this.BendNoteHeads.push(endGlyphs2));var lastBendPoint2=note.bendPoints[note.bendPoints.length-1];endGlyphs2.addGlyph(this.getBendNoteValue(note,lastBendPoint2),lastBendPoint2.value%2!=0)}},paint:function(cx,cy,canvas){var startNoteRenderer=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.get_staveId(),this._beat.voice.bar),startX=cx+startNoteRenderer.x+startNoteRenderer.getBeatX(this._beat,2),endBeatX=cx+startNoteRenderer.x;this._beat.get_isLastOfVoice()?endBeatX+=startNoteRenderer.get_postBeatGlyphsStart():endBeatX+=startNoteRenderer.getBeatX(this._beat.nextBeat,0);var middleX=(startX+(endBeatX-=8*this.get_scale()))/2;null!=this._middleNoteGlyph&&(this._middleNoteGlyph.x=middleX-this._middleNoteGlyph.noteHeadOffset,this._middleNoteGlyph.y=cy+startNoteRenderer.y,this._middleNoteGlyph.paint(0,0,canvas)),null!=this._endNoteGlyph&&(this._endNoteGlyph.x=endBeatX-this._endNoteGlyph.noteHeadOffset,this._endNoteGlyph.y=cy+startNoteRenderer.y,this._endNoteGlyph.paint(0,0,canvas));this._notes.sort(function(a1,b1){return a=a1,b1.get_displayValue()-a.get_displayValue();var a});for(var directionBeat=3==this._beat.graceType?this._beat.nextBeat:this._beat,direction=1==this._notes.length?this.getBeamDirection(directionBeat,startNoteRenderer):0,i=0;i<this._notes.length;){var note=this._notes[i];0<i&&i>=(this._notes.length/2|0)&&(direction=1);var startY=cy+startNoteRenderer.y+startNoteRenderer.getNoteY(note,!0),heightOffset=9*this.get_scale()*.75*.5;1==direction&&(startY+=9*this.get_scale());var slurText=1==note.bendStyle?"grad.":"";if(note.get_isTieOrigin()){var endNote=note.tieDestination,endNoteRenderer=null==endNote?null:this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.get_staveId(),endNote.beat.voice.bar);if(null==endNoteRenderer||endNoteRenderer.staff!=startNoteRenderer.staff){var endX=cx+startNoteRenderer.x+startNoteRenderer.width,noteValueToDraw=note.tieDestination.get_realValue();startNoteRenderer.accidentalHelper.applyAccidentalForValue(note.beat,noteValueToDraw,!1);var endY=cy+startNoteRenderer.y,this2=startNoteRenderer.accidentalHelper.getNoteLineForValue(noteValueToDraw,!1),endY1=endY+startNoteRenderer.getScoreY(this2,0);5==note.bendType||6==note.bendType?(alphaTab.rendering.glyphs.TieGlyph.paintTie(canvas,this.get_scale(),startX,startY,endX,endY1,1==direction,22,4),canvas.fill()):this.drawBendSlur(canvas,startX,startY,endX,endY1,1==direction,this.get_scale(),slurText)}else{var endX1=cx+endNoteRenderer.x+endNoteRenderer.getBeatX(endNote.beat,2),endY2=cy+endNoteRenderer.y+endNoteRenderer.getNoteY(endNote,!0);1==direction&&(endY2+=9*this.get_scale()),5==note.bendType||6==note.bendType?(alphaTab.rendering.glyphs.TieGlyph.paintTie(canvas,this.get_scale(),startX,startY,endX1,endY2,1==direction,22,4),canvas.fill()):this.drawBendSlur(canvas,startX,startY,endX1,endY2,1==direction,this.get_scale(),slurText)}switch(note.bendType){case 6:case 7:case 8:var preX=cx+startNoteRenderer.x+startNoteRenderer.getBeatX(note.beat,0);preX+=js.Boot.__cast(startNoteRenderer.getBeatContainer(note.beat).preNotes,alphaTab.rendering.glyphs.ScoreBeatPreNotesGlyph).get_prebendNoteHeadOffset();var preY=cy+startNoteRenderer.y,this3=startNoteRenderer.accidentalHelper.getNoteLineForValue(note.get_displayValue()-(note.bendPoints[0].value/2|0),!1),preY1=preY+startNoteRenderer.getScoreY(this3,0)+heightOffset;this.drawBendSlur(canvas,preX,preY1,startX,startY,1==direction,this.get_scale(),null)}}else{var endValue,endY3;switch(0==direction&&(heightOffset=-heightOffset),note.bendType){case 2:endValue=this.getBendNoteValue(note,note.bendPoints[note.bendPoints.length-1]),endY3=this._endNoteGlyph.getNoteValueY(endValue,!1)+heightOffset,this.drawBendSlur(canvas,startX,startY,endBeatX,endY3,1==direction,this.get_scale(),slurText);break;case 3:0<this.BendNoteHeads.length&&(endValue=this.getBendNoteValue(note,note.bendPoints[note.bendPoints.length-1]),endY3=this.BendNoteHeads[0].getNoteValueY(endValue,!1)+heightOffset,this.drawBendSlur(canvas,startX,startY,endBeatX,endY3,1==direction,this.get_scale(),slurText));break;case 4:var middleValue=this.getBendNoteValue(note,note.bendPoints[1]),middleY=this._middleNoteGlyph.getNoteValueY(middleValue,!1)+heightOffset;this.drawBendSlur(canvas,startX,startY,middleX,middleY,1==direction,this.get_scale(),slurText),endValue=this.getBendNoteValue(note,note.bendPoints[note.bendPoints.length-1]),endY3=this._endNoteGlyph.getNoteValueY(endValue,!1)+heightOffset,this.drawBendSlur(canvas,middleX,middleY,endBeatX,endY3,1==direction,this.get_scale(),slurText);break;case 6:case 7:case 8:var preX1=cx+startNoteRenderer.x+startNoteRenderer.getBeatX(note.beat,0);preX1+=js.Boot.__cast(startNoteRenderer.getBeatContainer(note.beat).preNotes,alphaTab.rendering.glyphs.ScoreBeatPreNotesGlyph).get_prebendNoteHeadOffset();var preY2=cy+startNoteRenderer.y,this4=startNoteRenderer.accidentalHelper.getNoteLineForValue(note.get_displayValue()-(note.bendPoints[0].value/2|0),!1),preY3=preY2+startNoteRenderer.getScoreY(this4,0)+heightOffset;this.drawBendSlur(canvas,preX1,preY3,startX,startY,1==direction,this.get_scale(),null),0<this.BendNoteHeads.length&&(endValue=this.getBendNoteValue(note,note.bendPoints[note.bendPoints.length-1]),endY3=this.BendNoteHeads[0].getNoteValueY(endValue,!1)+heightOffset,this.drawBendSlur(canvas,startX,startY,endBeatX,endY3,1==direction,this.get_scale(),slurText))}}++i}},getBendNoteValue:function(note,bendPoint){return note.get_displayValueWithoutBend()+(bendPoint.value/2|0)},__class__:alphaTab.rendering.glyphs.ScoreBendGlyph}),alphaTab.rendering.glyphs.ScoreBrushGlyph=function(beat){alphaTab.rendering.glyphs.Glyph.call(this,0,0),this._beat=null,this._beat=beat},alphaTab.rendering.glyphs.ScoreBrushGlyph.__name__=["alphaTab","rendering","glyphs","ScoreBrushGlyph"],alphaTab.rendering.glyphs.ScoreBrushGlyph.__super__=alphaTab.rendering.glyphs.Glyph,alphaTab.rendering.glyphs.ScoreBrushGlyph.prototype=$extend(alphaTab.rendering.glyphs.Glyph.prototype,{doLayout:function(){this.width=10*this.get_scale()},paint:function(cx,cy,canvas){var scoreBarRenderer=js.Boot.__cast(this.renderer,alphaTab.rendering.ScoreBarRenderer),lineSize=scoreBarRenderer.get_lineOffset(),startY=cy+this.y+(scoreBarRenderer.getNoteY(this._beat.maxNote,!1)-lineSize),endY=cy+this.y+scoreBarRenderer.getNoteY(this._beat.minNote,!1)+lineSize,arrowX=cx+this.x+this.width/2,arrowSize=8*this.get_scale();if(0!=this._beat.brushType)if(3==this._beat.brushType){var lineStartY=startY-arrowSize,lineEndY=endY-arrowSize;canvas.beginRotate(cx+this.x+2*this.get_scale(),lineEndY,-90);var glyph=new alphaTab.rendering.glyphs.NoteVibratoGlyph(0,0,1,1.2);glyph.renderer=this.renderer,glyph.doLayout(),glyph.width=Math.abs(lineEndY-lineStartY),glyph.paint(0,0,canvas),canvas.endRotate(),canvas.beginPath(),canvas.moveTo(arrowX,endY),canvas.lineTo(arrowX+arrowSize/2,endY-arrowSize),canvas.lineTo(arrowX-arrowSize/2,endY-arrowSize),canvas.closePath(),canvas.fill()}else if(4==this._beat.brushType){var lineStartY1=startY+arrowSize,lineEndY1=endY+arrowSize;canvas.beginRotate(cx+this.x+7*this.get_scale(),lineStartY1,90);var glyph1=new alphaTab.rendering.glyphs.NoteVibratoGlyph(0,0,1,1.2);glyph1.renderer=this.renderer,glyph1.doLayout(),glyph1.width=Math.abs(lineEndY1-lineStartY1),glyph1.paint(0,0,canvas),canvas.endRotate(),canvas.beginPath(),canvas.moveTo(arrowX,startY),canvas.lineTo(arrowX+arrowSize/2,startY+arrowSize),canvas.lineTo(arrowX-arrowSize/2,startY+arrowSize),canvas.closePath(),canvas.fill()}},__class__:alphaTab.rendering.glyphs.ScoreBrushGlyph}),alphaTab.rendering.glyphs.TieGlyph=function(startBeat,endBeat,forEnd){alphaTab.rendering.glyphs.Glyph.call(this,0,0),this.StartBeat=null,this.EndBeat=null,this.YOffset=0,this.ForEnd=!1,this.StartBeat=startBeat,this.EndBeat=endBeat,this.ForEnd=forEnd},alphaTab.rendering.glyphs.TieGlyph.__name__=["alphaTab","rendering","glyphs","TieGlyph"],alphaTab.rendering.glyphs.TieGlyph.paintTie=function(canvas,scale,x1,y1,x2,y2,down,offset,size){if(null==size&&(size=4),null==offset&&(offset=22),null==down&&(down=!1),x1!=x2||y1!=y2){if(x2<x1){var t=x1;x1=x2,x2=t,t=y1,y1=y2,y2=t}offset*=scale,size*=scale;var normalVectorX=y2-y1,normalVectorY=x2-x1,this1=normalVectorX*normalVectorX+normalVectorY*normalVectorY,length=js.Boot.__cast(Math.sqrt(this1),Float);down?normalVectorX*=-1:normalVectorY*=-1;var centerX=(x2+x1)/2,centerY=(y2+y1)/2,cp1X=centerX+offset*(normalVectorX/=length),cp1Y=centerY+offset*(normalVectorY/=length),cp2X=centerX+(offset-size)*normalVectorX,cp2Y=centerY+(offset-size)*normalVectorY;canvas.beginPath(),canvas.moveTo(x1,y1),canvas.quadraticCurveTo(cp1X,cp1Y,x2,y2),canvas.quadraticCurveTo(cp2X,cp2Y,x1,y1),canvas.closePath()}},alphaTab.rendering.glyphs.TieGlyph.__super__=alphaTab.rendering.glyphs.Glyph,alphaTab.rendering.glyphs.TieGlyph.prototype=$extend(alphaTab.rendering.glyphs.Glyph.prototype,{doLayout:function(){this.width=0},paint:function(cx,cy,canvas){if(null!=this.EndBeat){var startNoteRenderer=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.get_staveId(),this.StartBeat.voice.bar),endNoteRenderer=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.get_staveId(),this.EndBeat.voice.bar),startX=0,endX=0,startY=0,endY=0,shouldDraw=!1,direction=null==startNoteRenderer?this.getBeamDirection(this.EndBeat,endNoteRenderer):this.getBeamDirection(this.StartBeat,startNoteRenderer);this.ForEnd||null==startNoteRenderer?null!=startNoteRenderer&&startNoteRenderer.staff==endNoteRenderer.staff||(startX=cx+endNoteRenderer.x,endX=cx+endNoteRenderer.x+this.getEndX(endNoteRenderer),endY=startY=cy+endNoteRenderer.y+this.getEndY(endNoteRenderer,direction)+this.YOffset,shouldDraw=!0):(endY=startNoteRenderer!=endNoteRenderer?(startX=cx+startNoteRenderer.x+this.getStartX(startNoteRenderer),startY=cy+startNoteRenderer.y+this.getStartY(startNoteRenderer,direction)+this.YOffset,null==endNoteRenderer||startNoteRenderer.staff!=endNoteRenderer.staff?(endX=cx+startNoteRenderer.x+startNoteRenderer.width,startY):(endX=cx+endNoteRenderer.x+this.getEndX(endNoteRenderer),cy+endNoteRenderer.y+this.getEndY(endNoteRenderer,direction)+this.YOffset)):(startX=cx+startNoteRenderer.x+this.getStartX(startNoteRenderer),endX=cx+endNoteRenderer.x+this.getEndX(endNoteRenderer),startY=cy+startNoteRenderer.y+this.getStartY(startNoteRenderer,direction)+this.YOffset,cy+endNoteRenderer.y+this.getEndY(endNoteRenderer,direction)+this.YOffset),shouldDraw=!0),shouldDraw&&(alphaTab.rendering.glyphs.TieGlyph.paintTie(canvas,this.get_scale(),startX,startY,endX,endY,1==direction,this.getTieHeight(startX,startY,endX,endY),4),canvas.fill())}},getTieHeight:function(startX,startY,endX,endY){return 22},getBeamDirection:function(beat,noteRenderer){return 1},getStartY:function(noteRenderer,direction){return 0},getEndY:function(noteRenderer,direction){return 0},getStartX:function(noteRenderer){return 0},getEndX:function(noteRenderer){return 0},__class__:alphaTab.rendering.glyphs.TieGlyph}),alphaTab.rendering.glyphs.ScoreLegatoGlyph=function(startBeat,endBeat,forEnd){null==forEnd&&(forEnd=!1),alphaTab.rendering.glyphs.TieGlyph.call(this,startBeat,endBeat,forEnd)},alphaTab.rendering.glyphs.ScoreLegatoGlyph.__name__=["alphaTab","rendering","glyphs","ScoreLegatoGlyph"],alphaTab.rendering.glyphs.ScoreLegatoGlyph.__super__=alphaTab.rendering.glyphs.TieGlyph,alphaTab.rendering.glyphs.ScoreLegatoGlyph.prototype=$extend(alphaTab.rendering.glyphs.TieGlyph.prototype,{doLayout:function(){alphaTab.rendering.glyphs.TieGlyph.prototype.doLayout.call(this),this.YOffset=4.5},getBeamDirection:function(beat,noteRenderer){return!beat.get_isRest()&&0==js.Boot.__cast(noteRenderer,alphaTab.rendering.ScoreBarRenderer).getBeatDirection(beat)?1:0},getStartY:function(noteRenderer,direction){return this.StartBeat.get_isRest()?js.Boot.__cast(noteRenderer,alphaTab.rendering.ScoreBarRenderer).getScoreY(9,0):0==direction?noteRenderer.getNoteY(this.StartBeat.minNote,!1):noteRenderer.getNoteY(this.StartBeat.maxNote,!1)},getEndY:function(noteRenderer,direction){return this.EndBeat.get_isRest()?0==direction?js.Boot.__cast(noteRenderer,alphaTab.rendering.ScoreBarRenderer).getScoreY(9,0):js.Boot.__cast(noteRenderer,alphaTab.rendering.ScoreBarRenderer).getScoreY(0,0):0==direction?js.Boot.__cast(noteRenderer,alphaTab.rendering.ScoreBarRenderer).getNoteY(this.EndBeat.minNote,!1):js.Boot.__cast(noteRenderer,alphaTab.rendering.ScoreBarRenderer).getNoteY(this.EndBeat.maxNote,!1)},getStartX:function(noteRenderer){return this.StartBeat.get_isRest()?noteRenderer.getBeatX(this.StartBeat,0):noteRenderer.getNoteX(this.StartBeat.minNote,!0)},getEndX:function(noteRenderer){return this.EndBeat.get_isRest()?noteRenderer.getBeatX(this.EndBeat,0):noteRenderer.getNoteX(this.EndBeat.minNote,!1)},__class__:alphaTab.rendering.glyphs.ScoreLegatoGlyph}),alphaTab.rendering.glyphs.ScoreNoteChordGlyph=function(){alphaTab.rendering.glyphs.ScoreNoteChordGlyphBase.call(this),this._noteGlyphLookup=null,this._notes=null,this._tremoloPicking=null,this.beatEffects=null,this.beat=null,this.beamingHelper=null;this.beatEffects={};this._noteGlyphLookup={};this._notes=[]},alphaTab.rendering.glyphs.ScoreNoteChordGlyph.__name__=["alphaTab","rendering","glyphs","ScoreNoteChordGlyph"],alphaTab.rendering.glyphs.ScoreNoteChordGlyph.__super__=alphaTab.rendering.glyphs.ScoreNoteChordGlyphBase,alphaTab.rendering.glyphs.ScoreNoteChordGlyph.prototype=$extend(alphaTab.rendering.glyphs.ScoreNoteChordGlyphBase.prototype,{get_direction:function(){return this.beamingHelper.direction},getNoteX:function(note,onEnd){if(null==onEnd&&(onEnd=!0),this._noteGlyphLookup.hasOwnProperty(note.id)){var n=this._noteGlyphLookup[note.id],pos=this.x+n.x;return onEnd&&(pos+=n.width),pos}return 0},getNoteY:function(note,aboveNote){return null==aboveNote&&(aboveNote=!1),this._noteGlyphLookup.hasOwnProperty(note.id)?this.y+this._noteGlyphLookup[note.id].y+(aboveNote?-9*this.get_scale()/2:0):0},addNoteGlyph:function(noteGlyph,note,noteLine){alphaTab.rendering.glyphs.ScoreNoteChordGlyphBase.prototype.add.call(this,noteGlyph,noteLine),this._noteGlyphLookup[note.id]=noteGlyph,this._notes.push(note)},updateBeamingHelper:function(cx){null!=this.beamingHelper&&this.beamingHelper.registerBeatLineX("score",this.beat,cx+this.x+this.upLineX,cx+this.x+this.downLineX)},doLayout:function(){alphaTab.rendering.glyphs.ScoreNoteChordGlyphBase.prototype.doLayout.call(this);for(var direction=this.get_direction(),this1=this.beatEffects,effectKey=$iterator(Object.keys(this1))();effectKey.hasNext();){var effectKey1=effectKey.next(),effect=this.beatEffects[effectKey1];effect.renderer=this.renderer,effect.doLayout()}if(this.beat.get_isTremolo()){var offset,baseNote=0==direction?this.minNote:this.maxNote,tremoloX=0==direction?this.displacedX:0;switch(this.beat.tremoloSpeed){case 8:offset=0==direction?-10:10;break;case 16:offset=0==direction?-12:15;break;case 32:offset=0==direction?-15:15;break;default:offset=0==direction?-10:15}this._tremoloPicking=new alphaTab.rendering.glyphs.TremoloPickingGlyph(tremoloX,baseNote.glyph.y+offset*this.get_scale(),this.beat.tremoloSpeed),this._tremoloPicking.renderer=this.renderer,this._tremoloPicking.doLayout()}},paint:function(cx,cy,canvas){var effectY,scoreRenderer=js.Boot.__cast(this.renderer,alphaTab.rendering.ScoreBarRenderer);if(0==this.beamingHelper.direction){var this1=this.maxNote.line;effectY=scoreRenderer.getScoreY(this1,13.5)}else{var this3=this.minNote.line;effectY=scoreRenderer.getScoreY(this3,-9)}for(var effectSpacing=0==this.beamingHelper.direction?7*this.get_scale():-7*this.get_scale(),this4=this.beatEffects,effectKey=$iterator(Object.keys(this4))();effectKey.hasNext();){var effectKey1=effectKey.next(),g=this.beatEffects[effectKey1];g.y=effectY,g.x=this.width/2,g.paint(cx+this.x,cy+this.y,canvas),effectY+=effectSpacing}if(this.renderer.get_settings().core.includeNoteBounds)for(var note=$iterator(this._notes)();note.hasNext();){var note1=note.next();if(this._noteGlyphLookup.hasOwnProperty(note1.id)){var glyph=this._noteGlyphLookup[note1.id],noteBounds=new alphaTab.rendering.utils.NoteBounds;noteBounds.note=note1;var _tmp=new alphaTab.rendering.utils.Bounds;_tmp.x=cx+this.x+glyph.x,_tmp.y=cy+this.y+glyph.y,_tmp.w=glyph.width,_tmp.h=glyph.height,noteBounds.noteHeadBounds=_tmp,this.renderer.scoreRenderer.get_boundsLookup().addNote(noteBounds)}}alphaTab.rendering.glyphs.ScoreNoteChordGlyphBase.prototype.paint.call(this,cx,cy,canvas),null!=this._tremoloPicking&&this._tremoloPicking.paint(cx,cy,canvas)},__class__:alphaTab.rendering.glyphs.ScoreNoteChordGlyph}),alphaTab.rendering.glyphs.ScoreNoteGlyphInfo=function(glyph,line){this.glyph=null,this.line=0,this.glyph=glyph,this.line=line},alphaTab.rendering.glyphs.ScoreNoteGlyphInfo.__name__=["alphaTab","rendering","glyphs","ScoreNoteGlyphInfo"],alphaTab.rendering.glyphs.ScoreNoteGlyphInfo.prototype={__class__:alphaTab.rendering.glyphs.ScoreNoteGlyphInfo},alphaTab.rendering.glyphs.ScoreRestGlyph=function(x,y,duration){alphaTab.rendering.glyphs.MusicFontGlyph.call(this,x,y,1,alphaTab.rendering.glyphs.ScoreRestGlyph.getSymbol(duration)),this._duration=-4,this.beamingHelper=null,this._duration=duration},alphaTab.rendering.glyphs.ScoreRestGlyph.__name__=["alphaTab","rendering","glyphs","ScoreRestGlyph"],alphaTab.rendering.glyphs.ScoreRestGlyph.getSymbol=function(duration){switch(duration){case-4:return 58593;case-2:return 58594;case 1:return 58595;case 2:return 58596;case 4:return 58597;case 8:return 58598;case 16:return 58599;case 32:return 58600;case 64:return 58601;case 128:return 58602;case 256:return 58603;default:return-1}},alphaTab.rendering.glyphs.ScoreRestGlyph.getSize=function(duration){switch(duration){case-4:case-2:case 1:case 2:case 4:case 8:case 16:return 9;case 32:return 12;case 64:return 14;case 128:case 256:return 20}return 10},alphaTab.rendering.glyphs.ScoreRestGlyph.__super__=alphaTab.rendering.glyphs.MusicFontGlyph,alphaTab.rendering.glyphs.ScoreRestGlyph.prototype=$extend(alphaTab.rendering.glyphs.MusicFontGlyph.prototype,{doLayout:function(){this.width=alphaTab.rendering.glyphs.ScoreRestGlyph.getSize(this._duration)*this.get_scale()},updateBeamingHelper:function(cx){null!=this.beamingHelper&&this.beamingHelper.registerBeatLineX("score",this.beat,cx+this.x+this.width/2,cx+this.x+this.width/2)},__class__:alphaTab.rendering.glyphs.ScoreRestGlyph}),alphaTab.rendering.glyphs.ScoreSlideLineGlyph=function(inType,outType,startNote,parent){alphaTab.rendering.glyphs.Glyph.call(this,0,0),this._outType=0,this._inType=0,this._startNote=null,this._parent=null,this._outType=outType,this._inType=inType,this._startNote=startNote,this._parent=parent},alphaTab.rendering.glyphs.ScoreSlideLineGlyph.__name__=["alphaTab","rendering","glyphs","ScoreSlideLineGlyph"],alphaTab.rendering.glyphs.ScoreSlideLineGlyph.__super__=alphaTab.rendering.glyphs.Glyph,alphaTab.rendering.glyphs.ScoreSlideLineGlyph.prototype=$extend(alphaTab.rendering.glyphs.Glyph.prototype,{doLayout:function(){this.width=0},paint:function(cx,cy,canvas){this.paintSlideIn(cx,cy,canvas),this.drawSlideOut(cx,cy,canvas)},paintSlideIn:function(cx,cy,canvas){var startX,startY,endX,endY,startNoteRenderer=js.Boot.__cast(this.renderer,alphaTab.rendering.ScoreBarRenderer),sizeX=12*this.get_scale(),offsetX=this.get_scale();switch(this._inType){case 1:endX=cx+startNoteRenderer.x+startNoteRenderer.getNoteX(this._startNote,!1)-offsetX,endY=cy+startNoteRenderer.y+startNoteRenderer.getNoteY(this._startNote,!0)+4.5,startX=endX-sizeX,startY=cy+startNoteRenderer.y+startNoteRenderer.getNoteY(this._startNote,!0)+9;break;case 2:endX=cx+startNoteRenderer.x+startNoteRenderer.getNoteX(this._startNote,!1)-offsetX,endY=cy+startNoteRenderer.y+startNoteRenderer.getNoteY(this._startNote,!0)+4.5,startX=endX-sizeX,startY=cy+startNoteRenderer.y+startNoteRenderer.getNoteY(this._startNote,!0);break;default:return}var accidentalsWidth=this.getAccidentalsWidth(startNoteRenderer,this._startNote.beat);startX-=accidentalsWidth,endX-=accidentalsWidth,this.paintSlideLine(canvas,!1,startX,endX,startY,endY)},getAccidentalsWidth:function(renderer,beat){var preNotes=js.Boot.__cast(renderer.getPreNotesGlyphForBeat(beat),alphaTab.rendering.glyphs.ScoreBeatPreNotesGlyph);return null!=preNotes&&null!=preNotes.accidentals?preNotes.accidentals.width:0},drawSlideOut:function(cx,cy,canvas){var startX,startY,endX,endY,startNoteRenderer=js.Boot.__cast(this.renderer,alphaTab.rendering.ScoreBarRenderer),sizeX=12*this.get_scale(),offsetX=this.get_scale(),waves=!1;switch(this._outType){case 1:case 2:startX=cx+startNoteRenderer.x+startNoteRenderer.getBeatX(this._startNote.beat,3)+offsetX;var isUp=this._startNote.slideTarget.get_realValue()>this._startNote.get_realValue();startY=cy+startNoteRenderer.y+startNoteRenderer.getNoteY(this._startNote,!1);var lineOffset=2.25*this.get_scale();if(isUp?startY+=lineOffset:startY-=lineOffset,null!=this._startNote.slideTarget){var endNoteRenderer=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.get_staveId(),this._startNote.slideTarget.beat.voice.bar);null==endNoteRenderer||endNoteRenderer.staff!=startNoteRenderer.staff?(endX=cx+startNoteRenderer.x+this._parent.x,endY=startY):(endX=cx+endNoteRenderer.x+endNoteRenderer.getBeatX(this._startNote.slideTarget.beat,0)-offsetX,endY=cy+endNoteRenderer.y+endNoteRenderer.getNoteY(this._startNote.slideTarget,!1),isUp?endY-=lineOffset:endY+=lineOffset)}else endX=cx+startNoteRenderer.x+this._parent.x,endY=startY;break;case 3:startX=cx+startNoteRenderer.x+startNoteRenderer.getNoteX(this._startNote,!0)+2*offsetX,startY=cy+startNoteRenderer.y+startNoteRenderer.getNoteY(this._startNote,!0)+4.5,endX=startX+sizeX,endY=cy+startNoteRenderer.y+startNoteRenderer.getNoteY(this._startNote,!0);break;case 4:startX=cx+startNoteRenderer.x+startNoteRenderer.getNoteX(this._startNote,!0)+2*offsetX,startY=cy+startNoteRenderer.y+startNoteRenderer.getNoteY(this._startNote,!0)+4.5,endX=startX+sizeX,endY=cy+startNoteRenderer.y+startNoteRenderer.getNoteY(this._startNote,!0)+9;break;case 5:startX=cx+startNoteRenderer.x+startNoteRenderer.getNoteX(this._startNote,!0)+2*offsetX,startY=cy+startNoteRenderer.y+startNoteRenderer.getNoteY(this._startNote,!0)-4.5,endY=cy+startNoteRenderer.y+startNoteRenderer.getNoteY(this._startNote,!0)+9,endX=cx+startNoteRenderer.x+startNoteRenderer.width,null!=this._startNote.beat.nextBeat&&this._startNote.beat.nextBeat.voice==this._startNote.beat.voice&&(endX=cx+startNoteRenderer.x+startNoteRenderer.getBeatX(this._startNote.beat.nextBeat,0)),waves=!0;break;case 6:startX=cx+startNoteRenderer.x+startNoteRenderer.getNoteX(this._startNote,!0)+2*offsetX,startY=cy+startNoteRenderer.y+startNoteRenderer.getNoteY(this._startNote,!0)+4.5,endY=cy+startNoteRenderer.y+startNoteRenderer.getNoteY(this._startNote,!0)-9,endX=cx+startNoteRenderer.x+startNoteRenderer.width,null!=this._startNote.beat.nextBeat&&this._startNote.beat.nextBeat.voice==this._startNote.beat.voice&&(endX=cx+startNoteRenderer.x+startNoteRenderer.getBeatX(this._startNote.beat.nextBeat,0)),waves=!0;break;default:return}this.paintSlideLine(canvas,waves,startX,endX,startY,endY)},paintSlideLine:function(canvas,waves,startX,endX,startY,endY){if(waves){var b=endX-startX,a=endY-startY,this1=a,this2=b,this3=a/Math.sqrt(Math.pow(this1,2)+Math.pow(this2,2)),angle=js.Boot.__cast(57.29577951308238*Math.asin(this3),Float);canvas.beginRotate(startX,startY,angle);var glyph=new alphaTab.rendering.glyphs.NoteVibratoGlyph(0,0,1,1.2);glyph.renderer=this.renderer,glyph.doLayout(),glyph.width=b,glyph.paint(0,0,canvas),canvas.endRotate()}else canvas.beginPath(),canvas.moveTo(startX,startY),canvas.lineTo(endX,endY),canvas.stroke()},__class__:alphaTab.rendering.glyphs.ScoreSlideLineGlyph}),alphaTab.rendering.glyphs.ScoreTieGlyph=function(startNote,endNote,forEnd){null==forEnd&&(forEnd=!1),alphaTab.rendering.glyphs.TieGlyph.call(this,null==startNote?null:startNote.beat,null==endNote?null:endNote.beat,forEnd),this.StartNote=null,this.EndNote=null,this.StartNote=startNote,this.EndNote=endNote},alphaTab.rendering.glyphs.ScoreTieGlyph.__name__=["alphaTab","rendering","glyphs","ScoreTieGlyph"],alphaTab.rendering.glyphs.ScoreTieGlyph.__super__=alphaTab.rendering.glyphs.TieGlyph,alphaTab.rendering.glyphs.ScoreTieGlyph.prototype=$extend(alphaTab.rendering.glyphs.TieGlyph.prototype,{doLayout:function(){alphaTab.rendering.glyphs.TieGlyph.prototype.doLayout.call(this),this.YOffset=4.5},getBeamDirection:function(beat,noteRenderer){return 0==js.Boot.__cast(noteRenderer,alphaTab.rendering.ScoreBarRenderer).getBeatDirection(beat)?1:0},getStartY:function(noteRenderer,direction){return noteRenderer.getNoteY(this.StartNote,!1)},getEndY:function(noteRenderer,direction){return noteRenderer.getNoteY(this.EndNote,!1)},getStartX:function(noteRenderer){return noteRenderer.getBeatX(this.StartNote.beat,2)},getEndX:function(noteRenderer){return noteRenderer.getNoteX(this.EndNote,!1)},__class__:alphaTab.rendering.glyphs.ScoreTieGlyph}),alphaTab.rendering.glyphs.ScoreSlurGlyph=function(startNote,endNote,forEnd){null==forEnd&&(forEnd=!1),alphaTab.rendering.glyphs.ScoreTieGlyph.call(this,startNote,endNote,forEnd)},alphaTab.rendering.glyphs.ScoreSlurGlyph.__name__=["alphaTab","rendering","glyphs","ScoreSlurGlyph"],alphaTab.rendering.glyphs.ScoreSlurGlyph.__super__=alphaTab.rendering.glyphs.ScoreTieGlyph,alphaTab.rendering.glyphs.ScoreSlurGlyph.prototype=$extend(alphaTab.rendering.glyphs.ScoreTieGlyph.prototype,{getTieHeight:function(startX,startY,endX,endY){var this1=endX-startX+1;return js.Boot.__cast(Math.log(this1),Float)*this.renderer.get_settings().notation.slurHeight},__class__:alphaTab.rendering.glyphs.ScoreSlurGlyph}),alphaTab.rendering.glyphs.TimeSignatureGlyph=function(x,y,numerator,denominator,isCommon){alphaTab.rendering.glyphs.GlyphGroup.call(this,x,y),this._numerator=0,this._denominator=0,this._isCommon=!1,this._numerator=numerator,this._denominator=denominator,this._isCommon=isCommon},alphaTab.rendering.glyphs.TimeSignatureGlyph.__name__=["alphaTab","rendering","glyphs","TimeSignatureGlyph"],alphaTab.rendering.glyphs.TimeSignatureGlyph.__super__=alphaTab.rendering.glyphs.GlyphGroup,alphaTab.rendering.glyphs.TimeSignatureGlyph.prototype=$extend(alphaTab.rendering.glyphs.GlyphGroup.prototype,{get_commonY:function(){throw new js._Boot.HaxeError("abstract")},get_numeratorY:function(){throw new js._Boot.HaxeError("abstract")},get_denominatorY:function(){throw new js._Boot.HaxeError("abstract")},get_commonScale:function(){throw new js._Boot.HaxeError("abstract")},get_numberScale:function(){throw new js._Boot.HaxeError("abstract")},doLayout:function(){if(this._isCommon&&2==this._numerator&&2==this._denominator){var common=new alphaTab.rendering.glyphs.MusicFontGlyph(0,this.get_commonY(),this.get_commonScale(),57483);common.width=14*this.get_scale(),this.addGlyph(common),alphaTab.rendering.glyphs.GlyphGroup.prototype.doLayout.call(this)}else if(this._isCommon&&4==this._numerator&&4==this._denominator){var common1=new alphaTab.rendering.glyphs.MusicFontGlyph(0,this.get_commonY(),this.get_commonScale(),57482);common1.width=14*this.get_scale(),this.addGlyph(common1),alphaTab.rendering.glyphs.GlyphGroup.prototype.doLayout.call(this)}else{var numerator=new alphaTab.rendering.glyphs.NumberGlyph(0,this.get_numeratorY(),this._numerator,this.get_numberScale()),denominator=new alphaTab.rendering.glyphs.NumberGlyph(0,this.get_denominatorY(),this._denominator,this.get_numberScale());this.addGlyph(numerator),this.addGlyph(denominator),alphaTab.rendering.glyphs.GlyphGroup.prototype.doLayout.call(this);for(var i=0,j=this.Glyphs.length;i<j;){var g=this.Glyphs[i];g.x=(this.width-g.width)/2,++i}}},__class__:alphaTab.rendering.glyphs.TimeSignatureGlyph}),alphaTab.rendering.glyphs.ScoreTimeSignatureGlyph=function(x,y,numerator,denominator,isCommon){alphaTab.rendering.glyphs.TimeSignatureGlyph.call(this,x,y,numerator,denominator,isCommon)},alphaTab.rendering.glyphs.ScoreTimeSignatureGlyph.__name__=["alphaTab","rendering","glyphs","ScoreTimeSignatureGlyph"],alphaTab.rendering.glyphs.ScoreTimeSignatureGlyph.__super__=alphaTab.rendering.glyphs.TimeSignatureGlyph,alphaTab.rendering.glyphs.ScoreTimeSignatureGlyph.prototype=$extend(alphaTab.rendering.glyphs.TimeSignatureGlyph.prototype,{get_commonY:function(){return js.Boot.__cast(this.renderer,alphaTab.rendering.ScoreBarRenderer).getScoreY(4,0)},get_numeratorY:function(){return 2*this.get_scale()},get_denominatorY:function(){return 20*this.get_scale()},get_commonScale:function(){return 1},get_numberScale:function(){return 1},__class__:alphaTab.rendering.glyphs.ScoreTimeSignatureGlyph}),alphaTab.rendering.glyphs.ScoreWhammyBarGlyph=function(beat){alphaTab.rendering.glyphs.ScoreHelperNotesBaseGlyph.call(this),this._beat=null,this._beat=beat},alphaTab.rendering.glyphs.ScoreWhammyBarGlyph.__name__=["alphaTab","rendering","glyphs","ScoreWhammyBarGlyph"],alphaTab.rendering.glyphs.ScoreWhammyBarGlyph.__super__=alphaTab.rendering.glyphs.ScoreHelperNotesBaseGlyph,alphaTab.rendering.glyphs.ScoreWhammyBarGlyph.prototype=$extend(alphaTab.rendering.glyphs.ScoreHelperNotesBaseGlyph.prototype,{doLayout:function(){var whammyMode=this.renderer.get_settings().notation.notationMode;switch(this._beat.whammyBarType){case 0:case 1:case 4:return;case 2:case 6:var endGlyphs=new alphaTab.rendering.glyphs.BendNoteHeadGroupGlyph(this._beat,!1);endGlyphs.renderer=this.renderer;for(var lastWhammyPoint=this._beat.whammyBarPoints[this._beat.whammyBarPoints.length-1],note=$iterator(this._beat.notes)();note.hasNext();){var note1=note.next();note1.get_isTieOrigin()||endGlyphs.addGlyph(this.getBendNoteValue(note1,lastWhammyPoint),lastWhammyPoint.value%2!=0)}endGlyphs.doLayout(),this.BendNoteHeads.push(endGlyphs);break;case 3:if(1==whammyMode){var tmp=1.5*this.renderer.get_resources().tablatureFont.size+12*this.get_scale(),tmp1=this.get_scale();js.Boot.__cast(this.renderer,alphaTab.rendering.ScoreBarRenderer).simpleWhammyOverflow=tmp+2*tmp1}else{var middleGlyphs=new alphaTab.rendering.glyphs.BendNoteHeadGroupGlyph(this._beat,!1);if(middleGlyphs.renderer=this.renderer,0==this.renderer.get_settings().notation.notationMode)for(var middleBendPoint=this._beat.whammyBarPoints[1],note2=$iterator(this._beat.notes)();note2.hasNext();){var note3=note2.next();middleGlyphs.addGlyph(this.getBendNoteValue(note3,this._beat.whammyBarPoints[1]),middleBendPoint.value%2!=0)}middleGlyphs.doLayout(),this.BendNoteHeads.push(middleGlyphs);var endGlyphs1=new alphaTab.rendering.glyphs.BendNoteHeadGroupGlyph(this._beat,!1);if(endGlyphs1.renderer=this.renderer,0==this.renderer.get_settings().notation.notationMode)for(var lastBendPoint=this._beat.whammyBarPoints[this._beat.whammyBarPoints.length-1],note4=$iterator(this._beat.notes)();note4.hasNext();){var note5=note4.next();endGlyphs1.addGlyph(this.getBendNoteValue(note5,lastBendPoint),lastBendPoint.value%2!=0)}endGlyphs1.doLayout(),this.BendNoteHeads.push(endGlyphs1)}}alphaTab.rendering.glyphs.ScoreHelperNotesBaseGlyph.prototype.doLayout.call(this)},paint:function(cx,cy,canvas){var beat=this._beat;switch(beat.whammyBarType){case 0:case 1:return}for(var whammyMode=this.renderer.get_settings().notation.notationMode,startNoteRenderer=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.get_staveId(),beat.voice.bar),startX=cx+startNoteRenderer.x+startNoteRenderer.getBeatX(beat,2),beatDirection=this.getBeamDirection(beat,startNoteRenderer),direction=1==this._beat.notes.length?beatDirection:0,textalign=canvas.get_textAlign(),i=0;i<beat.notes.length;){var note=beat.notes[i],startY=cy+startNoteRenderer.y+startNoteRenderer.getNoteY(note,!0);1==direction&&(startY+=9*this.get_scale()),0<i&&i>=(this._beat.notes.length/2|0)&&(direction=1);var endX=cx+startNoteRenderer.x;beat.get_isLastOfVoice()?endX+=startNoteRenderer.width:endX+=startNoteRenderer.getBeatX(beat,4),endX-=8*this.get_scale();var slurText=1==beat.whammyStyle&&0==i?"grad.":"",endNoteRenderer=null;note.get_isTieOrigin()&&(null!=(endNoteRenderer=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.get_staveId(),note.tieDestination.beat.voice.bar))&&endNoteRenderer.staff==startNoteRenderer.staff?endX=cx+endNoteRenderer.x+endNoteRenderer.getBeatX(note.tieDestination.beat,2):endNoteRenderer=null);var endValue,endY,heightOffset=9*this.get_scale()*.75*.5;switch(0==direction&&(heightOffset=-heightOffset),beat.whammyBarType){case 2:0==i&&(this.BendNoteHeads[0].x=endX-this.BendNoteHeads[0].noteHeadOffset,this.BendNoteHeads[0].y=cy+startNoteRenderer.y,this.BendNoteHeads[0].paint(0,0,canvas)),endValue=this.getBendNoteValue(note,beat.whammyBarPoints[beat.whammyBarPoints.length-1]),this.BendNoteHeads[0].containsNoteValue(endValue)?(endY=this.BendNoteHeads[0].getNoteValueY(endValue,!1)+heightOffset,this.drawBendSlur(canvas,startX,startY,endX,endY,1==direction,this.get_scale(),slurText)):null!=endNoteRenderer&&(note.get_isTieOrigin()&&note.tieDestination.beat.get_hasWhammyBar()||note.beat.isContinuedWhammy)?(endY=cy+endNoteRenderer.y+endNoteRenderer.getNoteY(note.tieDestination,!0),this.drawBendSlur(canvas,startX,startY,endX,endY,1==direction,this.get_scale(),slurText)):note.get_isTieOrigin()&&(endY=null==endNoteRenderer?startY:cy+endNoteRenderer.y+endNoteRenderer.getNoteY(note.tieDestination,!0),alphaTab.rendering.glyphs.TieGlyph.paintTie(canvas,this.get_scale(),startX,startY,endX,endY,1==beatDirection,22,4),canvas.fill());break;case 3:if(1==whammyMode){if(0==i){var simpleStartX=cx+startNoteRenderer.x+startNoteRenderer.getBeatX(this._beat,1)-2*this.get_scale(),simpleEndX=cx+startNoteRenderer.x+startNoteRenderer.getBeatX(this._beat,3)+2*this.get_scale(),middleX=(simpleStartX+simpleEndX)/2,text=Std.string((this._beat.whammyBarPoints[1].value-this._beat.whammyBarPoints[0].value)/4|0);canvas.set_font(this.renderer.get_resources().tablatureFont),canvas.fillText(text,middleX,cy+this.y);var simpleStartY=cy+this.y+canvas.get_font().size+2*this.get_scale(),simpleEndY=simpleStartY+12*this.get_scale();this._beat.whammyBarPoints[1].value>this._beat.whammyBarPoints[0].value?(canvas.moveTo(simpleStartX,simpleEndY),canvas.lineTo(middleX,simpleStartY),canvas.lineTo(simpleEndX,simpleEndY)):(canvas.moveTo(simpleStartX,simpleStartY),canvas.lineTo(middleX,simpleEndY),canvas.lineTo(simpleEndX,simpleStartY)),canvas.stroke()}note.get_isTieOrigin()&&(endY=null==endNoteRenderer?startY:cy+endNoteRenderer.y+endNoteRenderer.getNoteY(note.tieDestination,!0),alphaTab.rendering.glyphs.TieGlyph.paintTie(canvas,this.get_scale(),startX,startY,endX,endY,1==beatDirection,22,4),canvas.fill())}else{var middleX1=(startX+endX)/2;this.BendNoteHeads[0].x=middleX1-this.BendNoteHeads[0].noteHeadOffset,this.BendNoteHeads[0].y=cy+startNoteRenderer.y,this.BendNoteHeads[0].paint(0,0,canvas);var middleValue=this.getBendNoteValue(note,beat.whammyBarPoints[1]),middleY=this.BendNoteHeads[0].getNoteValueY(middleValue,!1)+heightOffset;this.drawBendSlur(canvas,startX,startY,middleX1,middleY,1==direction,this.get_scale(),slurText),this.BendNoteHeads[1].x=endX-this.BendNoteHeads[1].noteHeadOffset,this.BendNoteHeads[1].y=cy+startNoteRenderer.y,this.BendNoteHeads[1].paint(0,0,canvas),endValue=this.getBendNoteValue(note,beat.whammyBarPoints[beat.whammyBarPoints.length-1]),endY=this.BendNoteHeads[1].getNoteValueY(endValue,!1)+heightOffset,this.drawBendSlur(canvas,middleX1,middleY,endX,endY,1==direction,this.get_scale(),slurText)}break;case 4:note.get_isTieOrigin()&&(endY=null==endNoteRenderer?startY:cy+endNoteRenderer.y+endNoteRenderer.getNoteY(note.tieDestination,!0),alphaTab.rendering.glyphs.TieGlyph.paintTie(canvas,this.get_scale(),startX,startY,endX,endY,1==beatDirection,22,4),canvas.fill());break;case 5:case 6:var preX=cx+startNoteRenderer.x+startNoteRenderer.getBeatX(note.beat,0);preX+=js.Boot.__cast(startNoteRenderer.getBeatContainer(note.beat).preNotes,alphaTab.rendering.glyphs.ScoreBeatPreNotesGlyph).get_prebendNoteHeadOffset();var preY=cy+startNoteRenderer.y,this2=startNoteRenderer.accidentalHelper.getNoteLineForValue(note.get_displayValue()-(note.beat.whammyBarPoints[0].value/2|0),!1),preY1=preY+startNoteRenderer.getScoreY(this2,0)+heightOffset;this.drawBendSlur(canvas,preX,preY1,startX,startY,1==direction,this.get_scale(),slurText),0<this.BendNoteHeads.length&&(this.BendNoteHeads[0].x=endX-this.BendNoteHeads[0].noteHeadOffset,this.BendNoteHeads[0].y=cy+startNoteRenderer.y,this.BendNoteHeads[0].paint(0,0,canvas),endValue=this.getBendNoteValue(note,beat.whammyBarPoints[beat.whammyBarPoints.length-1]),endY=this.BendNoteHeads[0].getNoteValueY(endValue,!1)+heightOffset,this.drawBendSlur(canvas,startX,startY,endX,endY,1==direction,this.get_scale(),slurText))}++i}canvas.set_textAlign(textalign)},getBendNoteValue:function(note,bendPoint){return note.get_displayValueWithoutBend()+(bendPoint.value/2|0)},__class__:alphaTab.rendering.glyphs.ScoreWhammyBarGlyph}),alphaTab.rendering.glyphs.SpacingGlyph=function(x,y,width){alphaTab.rendering.glyphs.Glyph.call(this,x,y),this.width=width},alphaTab.rendering.glyphs.SpacingGlyph.__name__=["alphaTab","rendering","glyphs","SpacingGlyph"],alphaTab.rendering.glyphs.SpacingGlyph.__super__=alphaTab.rendering.glyphs.Glyph,alphaTab.rendering.glyphs.SpacingGlyph.prototype=$extend(alphaTab.rendering.glyphs.Glyph.prototype,{__class__:alphaTab.rendering.glyphs.SpacingGlyph}),alphaTab.rendering.glyphs.TabBeatContainerGlyph=function(beat,voiceContainer){alphaTab.rendering.glyphs.BeatContainerGlyph.call(this,beat,voiceContainer),this._bend=null,this._effectSlurs=null},alphaTab.rendering.glyphs.TabBeatContainerGlyph.__name__=["alphaTab","rendering","glyphs","TabBeatContainerGlyph"],alphaTab.rendering.glyphs.TabBeatContainerGlyph.__super__=alphaTab.rendering.glyphs.BeatContainerGlyph,alphaTab.rendering.glyphs.TabBeatContainerGlyph.prototype=$extend(alphaTab.rendering.glyphs.BeatContainerGlyph.prototype,{doLayout:function(){this._effectSlurs=[],alphaTab.rendering.glyphs.BeatContainerGlyph.prototype.doLayout.call(this),null!=this._bend&&(this._bend.renderer=this.renderer,this._bend.doLayout(),this.updateWidth())},createTies:function(n){if(n.isVisible){var renderer=js.Boot.__cast(this.renderer,alphaTab.rendering.TabBarRenderer);if(n.get_isTieOrigin()&&renderer.showTiedNotes&&n.tieDestination.isVisible){var tie=new alphaTab.rendering.glyphs.TabTieGlyph(n,n.tieDestination,!1,!1);this.ties.push(tie)}if(n.isTieDestination&&renderer.showTiedNotes){var tie1=new alphaTab.rendering.glyphs.TabTieGlyph(n.tieOrigin,n,!1,!0);this.ties.push(tie1)}if(n.isEffectSlurOrigin&&null!=n.effectSlurDestination){for(var expanded=!1,slur=$iterator(this._effectSlurs)();slur.hasNext();){if(slur.next().tryExpand(n,n.effectSlurDestination,!1,!1)){expanded=!0;break}}if(!expanded){var effectSlur=new alphaTab.rendering.glyphs.TabSlurGlyph(n,n.effectSlurDestination,!1,!1);this._effectSlurs.push(effectSlur),this.ties.push(effectSlur)}}if(n.get_isEffectSlurDestination()&&null!=n.effectSlurOrigin){for(var expanded1=!1,slur2=$iterator(this._effectSlurs)();slur2.hasNext();){if(slur2.next().tryExpand(n.effectSlurOrigin,n,!1,!0)){expanded1=!0;break}}if(!expanded1){var effectSlur1=new alphaTab.rendering.glyphs.TabSlurGlyph(n.effectSlurOrigin,n,!1,!0);this._effectSlurs.push(effectSlur1),this.ties.push(effectSlur1)}}if(0!=n.slideInType||0!=n.slideOutType){var l=new alphaTab.rendering.glyphs.TabSlideLineGlyph(n.slideInType,n.slideOutType,n,this);this.ties.push(l)}n.get_hasBend()&&(null==this._bend&&(this._bend=new alphaTab.rendering.glyphs.TabBendGlyph,this._bend.renderer=this.renderer,this.ties.push(this._bend)),this._bend.addBends(n))}},__class__:alphaTab.rendering.glyphs.TabBeatContainerGlyph}),alphaTab.rendering.glyphs.TabBeatGlyph=function(){alphaTab.rendering.glyphs.BeatOnNoteGlyphBase.call(this)},alphaTab.rendering.glyphs.TabBeatGlyph.__name__=["alphaTab","rendering","glyphs","TabBeatGlyph"],alphaTab.rendering.glyphs.TabBeatGlyph.__super__=alphaTab.rendering.glyphs.BeatOnNoteGlyphBase,alphaTab.rendering.glyphs.TabBeatGlyph.prototype=$extend(alphaTab.rendering.glyphs.BeatOnNoteGlyphBase.prototype,{doLayout:function(){var tabRenderer=js.Boot.__cast(this.renderer,alphaTab.rendering.TabBarRenderer);if(this.container.beat.get_isRest()){var line=0,offset1=0;switch(this.container.beat.duration){case-4:case-2:line=3;break;case 1:line=2;break;case 2:case 4:line=3;break;case 8:case 16:line=2,offset1=5;break;case 32:case 64:case 128:case 256:line=3}var this2=offset1,y=tabRenderer.getTabY(line,this2);if(this.restGlyph=new alphaTab.rendering.glyphs.TabRestGlyph(0,y,tabRenderer.showRests,this.container.beat.duration),this.restGlyph.beat=this.container.beat,this.restGlyph.beamingHelper=this.beamingHelper,this.addGlyph(this.restGlyph),0<this.container.beat.dots&&tabRenderer.showRests){this.addGlyph(new alphaTab.rendering.glyphs.SpacingGlyph(0,0,5*this.get_scale()));for(var i1=0;i1<this.container.beat.dots;){this.addGlyph(new alphaTab.rendering.glyphs.CircleGlyph(0,y,1.5*this.get_scale())),++i1}}}else{var isGrace=this.renderer.get_settings().notation.smallGraceTabNotes&&0!=this.container.beat.graceType;this.noteNumbers=new alphaTab.rendering.glyphs.TabNoteChordGlyph(0,0,isGrace),this.noteNumbers.beat=this.container.beat,this.noteNumbers.beamingHelper=this.beamingHelper;for(var note=$iterator(this.container.beat.notes)();note.hasNext();){var note1=note.next();note1.isVisible&&this.createNoteGlyph(note1)}if(this.addGlyph(this.noteNumbers),this.container.beat.get_hasWhammyBar()){var whammy=new alphaTab.rendering.glyphs.TabWhammyBarGlyph(this.container.beat);whammy.renderer=this.renderer,whammy.doLayout(),this.container.ties.push(whammy)}if(this.container.beat.get_isTremolo()&&!this.noteNumbers.beatEffects.hasOwnProperty("Tremolo")){var offset=0;switch(this.container.beat.tremoloSpeed){case 8:offset=0;break;case 16:offset=5;break;case 32:offset=10}this.noteNumbers.beatEffects.Tremolo=new alphaTab.rendering.glyphs.TremoloPickingGlyph(5*this.get_scale(),offset*this.get_scale(),this.container.beat.tremoloSpeed)}if(0<this.container.beat.dots&&0!=tabRenderer.get_settings().notation.rhythmMode){this.addGlyph(new alphaTab.rendering.glyphs.SpacingGlyph(0,0,5*this.get_scale()));for(var i=0;i<this.container.beat.dots;){this.addGlyph(new alphaTab.rendering.glyphs.CircleGlyph(0,tabRenderer.get_lineOffset()*tabRenderer.bar.staff.tuning.length+tabRenderer.get_settings().notation.rhythmHeight*tabRenderer.get_scale(),1.5*this.get_scale())),++i}}}if(null!=this.Glyphs){for(var w=0,i2=0,j=this.Glyphs.length;i2<j;){var g=this.Glyphs[i2];g.x=w,g.renderer=this.renderer,g.doLayout(),w+=g.width,++i2}this.width=w,this.container.beat.isEmpty?this.centerX=this.width/2:this.container.beat.get_isRest()?this.centerX=this.restGlyph.x+this.restGlyph.width/2:this.centerX=this.noteNumbers.x+this.noteNumbers.noteStringWidth/2}},updateBeamingHelper:function(){this.container.beat.get_isRest()?this.restGlyph.updateBeamingHelper(this.container.x+this.x):this.noteNumbers.updateBeamingHelper(this.container.x+this.x)},createNoteGlyph:function(n){var tr=js.Boot.__cast(this.renderer,alphaTab.rendering.TabBarRenderer),noteNumberGlyph=new alphaTab.rendering.glyphs.NoteNumberGlyph(0,0,n),this1=n.beat.voice.bar.staff.tuning.length-n.string+1;noteNumberGlyph.y=tr.getTabY(this1,-2),noteNumberGlyph.renderer=this.renderer,noteNumberGlyph.doLayout(),this.noteNumbers.addNoteGlyph(noteNumberGlyph,n)},__class__:alphaTab.rendering.glyphs.TabBeatGlyph}),alphaTab.rendering.glyphs.TabBeatPreNotesGlyph=function(){alphaTab.rendering.glyphs.BeatGlyphBase.call(this)},alphaTab.rendering.glyphs.TabBeatPreNotesGlyph.__name__=["alphaTab","rendering","glyphs","TabBeatPreNotesGlyph"],alphaTab.rendering.glyphs.TabBeatPreNotesGlyph.__super__=alphaTab.rendering.glyphs.BeatGlyphBase,alphaTab.rendering.glyphs.TabBeatPreNotesGlyph.prototype=$extend(alphaTab.rendering.glyphs.BeatGlyphBase.prototype,{doLayout:function(){0==this.container.beat.brushType||this.container.beat.get_isRest()||(this.addGlyph(new alphaTab.rendering.glyphs.TabBrushGlyph(this.container.beat)),this.addGlyph(new alphaTab.rendering.glyphs.SpacingGlyph(0,0,4*this.get_scale()))),alphaTab.rendering.glyphs.BeatGlyphBase.prototype.doLayout.call(this)},__class__:alphaTab.rendering.glyphs.TabBeatPreNotesGlyph}),alphaTab.rendering.glyphs.TabBendGlyph=function(){alphaTab.rendering.glyphs.Glyph.call(this,0,0),this._notes=null,this._renderPoints=null,this._preBendMinValue=0,this._bendMiddleMinValue=0,this._bendEndMinValue=0,this._bendEndContinuedMinValue=0,this._releaseMinValue=0,this._releaseContinuedMinValue=0,this._maxBendValue=0;this._notes=[];this._renderPoints={},this._preBendMinValue=-1,this._bendMiddleMinValue=-1,this._bendEndMinValue=-1,this._bendEndContinuedMinValue=-1,this._releaseMinValue=-1,this._releaseContinuedMinValue=-1,this._maxBendValue=-1},alphaTab.rendering.glyphs.TabBendGlyph.__name__=["alphaTab","rendering","glyphs","TabBendGlyph"],alphaTab.rendering.glyphs.TabBendGlyph.getFractionSign=function(steps){switch(steps){case 1:return"Â¼";case 2:return"Â½";case 3:return"Â¾";default:return Std.string(steps)+"/ 4"}},alphaTab.rendering.glyphs.TabBendGlyph.__super__=alphaTab.rendering.glyphs.Glyph,alphaTab.rendering.glyphs.TabBendGlyph.prototype=$extend(alphaTab.rendering.glyphs.Glyph.prototype,{addBends:function(note){this._notes.push(note);var value,renderPoints=this.createRenderingPoints(note);switch(this._renderPoints[note.id]=renderPoints,(-1==this._maxBendValue||this._maxBendValue<note.maxBendPoint.value)&&(this._maxBendValue=note.maxBendPoint.value),note.bendType){case 2:value=renderPoints[1].value,note.get_isTieOrigin()?(-1==this._bendEndContinuedMinValue||value<this._bendEndContinuedMinValue)&&(this._bendEndContinuedMinValue=value):(-1==this._bendEndMinValue||value<this._bendEndMinValue)&&(this._bendEndMinValue=value);break;case 3:value=renderPoints[1].value,note.get_isTieOrigin()?(-1==this._releaseContinuedMinValue||value<this._releaseContinuedMinValue)&&(this._releaseContinuedMinValue=value):0<value&&(-1==this._releaseMinValue||value<this._releaseMinValue)&&(this._releaseMinValue=value);break;case 4:value=renderPoints[1].value,(-1==this._bendMiddleMinValue||value<this._bendMiddleMinValue)&&(this._bendMiddleMinValue=value),value=renderPoints[2].value,note.get_isTieOrigin()?(-1==this._releaseContinuedMinValue||value<this._releaseContinuedMinValue)&&(this._releaseContinuedMinValue=value):0<value&&(-1==this._releaseMinValue||value<this._releaseMinValue)&&(this._releaseMinValue=value);break;case 6:value=renderPoints[0].value,(-1==this._preBendMinValue||value<this._preBendMinValue)&&(this._preBendMinValue=value);break;case 7:value=renderPoints[0].value,(-1==this._preBendMinValue||value<this._preBendMinValue)&&(this._preBendMinValue=value),value=renderPoints[1].value,note.get_isTieOrigin()?(-1==this._bendEndContinuedMinValue||value<this._bendEndContinuedMinValue)&&(this._bendEndContinuedMinValue=value):(-1==this._bendEndMinValue||value<this._bendEndMinValue)&&(this._bendEndMinValue=value);break;case 8:value=renderPoints[0].value,(-1==this._preBendMinValue||value<this._preBendMinValue)&&(this._preBendMinValue=value),value=renderPoints[1].value,note.get_isTieOrigin()?(-1==this._releaseContinuedMinValue||value<this._releaseContinuedMinValue)&&(this._releaseContinuedMinValue=value):0<value&&(-1==this._releaseMinValue||value<this._releaseMinValue)&&(this._releaseMinValue=value)}},doLayout:function(){alphaTab.rendering.glyphs.Glyph.prototype.doLayout.call(this);var value,bendHeight=6*this._maxBendValue*this.get_scale();this.renderer.registerOverflowTop(bendHeight);for(var note=$iterator(this._notes)();note.hasNext();){var note1=note.next(),renderPoints=this._renderPoints[note1.id];switch(note1.bendType){case 2:var tmp=note1.get_isTieOrigin()?this._bendEndContinuedMinValue:this._bendEndMinValue;renderPoints[1].lineValue=tmp;break;case 3:0<=(value=note1.get_isTieOrigin()?this._releaseContinuedMinValue:this._releaseMinValue)&&(renderPoints[1].lineValue=value);break;case 4:renderPoints[1].lineValue=this._bendMiddleMinValue,0<=(value=note1.get_isTieOrigin()?this._releaseContinuedMinValue:this._releaseMinValue)&&(renderPoints[2].lineValue=value);break;case 6:renderPoints[0].lineValue=this._preBendMinValue;break;case 7:renderPoints[0].lineValue=this._preBendMinValue;var tmp1=note1.get_isTieOrigin()?this._bendEndContinuedMinValue:this._bendEndMinValue;renderPoints[1].lineValue=tmp1;break;case 8:renderPoints[0].lineValue=this._preBendMinValue,0<=(value=note1.get_isTieOrigin()?this._releaseContinuedMinValue:this._releaseMinValue)&&(renderPoints[1].lineValue=value)}}this.width=0;this._notes.sort(function(a1,b1){return b=b1,(a=a1).get_isStringed()?a.string-b.string:a.get_realValue()-b.get_realValue();var a,b})},createRenderingPoints:function(note){var renderingPoints=[];switch(note.bendType){case 1:for(var bendPoint=$iterator(note.bendPoints)();bendPoint.hasNext();){var bendPoint1=bendPoint.next();renderingPoints.push(new alphaTab.rendering.glyphs.TabBendRenderPoint(bendPoint1.offset,bendPoint1.value))}break;case 4:renderingPoints.push(new alphaTab.rendering.glyphs.TabBendRenderPoint(0,note.bendPoints[0].value)),renderingPoints.push(new alphaTab.rendering.glyphs.TabBendRenderPoint(30,note.bendPoints[1].value)),renderingPoints.push(new alphaTab.rendering.glyphs.TabBendRenderPoint(60,note.bendPoints[3].value));break;case 2:case 3:case 5:case 6:case 7:case 8:renderingPoints.push(new alphaTab.rendering.glyphs.TabBendRenderPoint(0,note.bendPoints[0].value)),renderingPoints.push(new alphaTab.rendering.glyphs.TabBendRenderPoint(60,note.bendPoints[1].value))}return renderingPoints},paint:function(cx,cy,canvas){var color=canvas.get_color();1<this._notes.length&&canvas.set_color(this.renderer.get_resources().secondaryGlyphColor);for(var note=$iterator(this._notes)();note.hasNext();){for(var endNoteRenderer,note1=note.next(),renderPoints=this._renderPoints[note1.id],startNoteRenderer=this.renderer,endNote=note1,isMultiBeatBend=!1,endNoteHasBend=!1,slurText=1==note1.bendStyle?"grad.":"",endBeat=null;endNote.get_isTieOrigin();){var nextNote=endNote.tieDestination;if(null==(endNoteRenderer=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.get_staveId(),nextNote.beat.voice.bar))||startNoteRenderer.staff!=endNoteRenderer.staff)break;if(isMultiBeatBend=!0,(endNote=nextNote).get_hasBend()||!this.renderer.get_settings().notation.extendBendArrowsOnTiedNotes){endNoteHasBend=!0;break}}endBeat=endNote.beat,endNoteRenderer=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.get_staveId(),endBeat.voice.bar),endBeat.get_isLastOfVoice()&&!endNote.get_hasBend()&&this.renderer.get_settings().notation.extendBendArrowsOnTiedNotes&&(endBeat=null);var startX=0,endX=0,topY=cy+startNoteRenderer.y;startX=cx+startNoteRenderer.x,0<renderPoints[0].value||note1.isContinuedBend?startX+=startNoteRenderer.getBeatX(note1.beat,2):startX+=startNoteRenderer.getNoteX(note1,!0),endX=null==endBeat||endBeat.get_isLastOfVoice()&&!endNoteHasBend?cx+endNoteRenderer.x+endNoteRenderer.get_postBeatGlyphsStart():endNoteHasBend||null==endBeat.nextBeat?cx+endNoteRenderer.x+endNoteRenderer.getBeatX(endBeat,2):5==note1.bendType?cx+endNoteRenderer.x+endNoteRenderer.getBeatX(endBeat.nextBeat,1):cx+endNoteRenderer.x+endNoteRenderer.getBeatX(endBeat.nextBeat,0),isMultiBeatBend||(endX-=6*this.get_scale());var dX=(endX-startX)/60;canvas.beginPath();for(var i=0,j=renderPoints.length-1;i<j;){var firstPt=renderPoints[i],secondPt=renderPoints[i+1];if(0!=i||0==firstPt.value||note1.isTieDestination||this.paintBend(note1,new alphaTab.rendering.glyphs.TabBendRenderPoint(0,0),firstPt,startX,topY,dX,slurText,canvas),6!=note1.bendType)this.paintBend(note1,firstPt,secondPt,startX,topY,dX,slurText,canvas);else if(note1.get_isTieOrigin()&&note1.tieDestination.get_hasBend()){var _tmp=new alphaTab.rendering.glyphs.TabBendRenderPoint(60,firstPt.value);_tmp.lineValue=firstPt.lineValue,this.paintBend(note1,firstPt,_tmp,startX,topY,dX,slurText,canvas)}++i}canvas.set_color(color)}},paintBend:function(note,firstPt,secondPt,cx,cy,dX,slurText,canvas){var r=js.Boot.__cast(this.renderer,alphaTab.rendering.TabBarRenderer),res=this.renderer.get_resources(),overflowOffset=r.get_lineOffset()/2,x1=cx+dX*firstPt.offset,bendValueHeight=6*this.get_scale(),y1=cy-bendValueHeight*firstPt.lineValue;0==firstPt.value?secondPt.offset==firstPt.offset?y1+=r.getNoteY(note.beat.maxStringNote,!0):y1+=r.getNoteY(note,!1):y1+=overflowOffset;var x2=cx+dX*secondPt.offset,y2=cy-bendValueHeight*secondPt.lineValue;0==secondPt.lineValue?y2+=r.getNoteY(note,!1):y2+=overflowOffset;var arrowOffset=0,arrowSize=6*this.get_scale();if(secondPt.value>firstPt.value){y1<y2+arrowSize&&(y2=y1-arrowSize),canvas.beginPath(),canvas.moveTo(x2,y2);canvas.lineTo(x2-.5*arrowSize,y2+arrowSize);canvas.lineTo(x2+.5*arrowSize,y2+arrowSize),canvas.closePath(),canvas.fill(),arrowOffset=arrowSize}else if(secondPt.value!=firstPt.value){y2<y1&&(y2=y1+arrowSize),canvas.beginPath(),canvas.moveTo(x2,y2);canvas.lineTo(x2-.5*arrowSize,y2-arrowSize);canvas.lineTo(x2+.5*arrowSize,y2-arrowSize),canvas.closePath(),canvas.fill(),arrowOffset=-arrowSize}if(canvas.stroke(),firstPt.value==secondPt.value){if(0<firstPt.lineValue){var dashX=x2,dashSize=3*this.get_scale(),end=x1+dashSize;if((dashX-x1)/(2*dashSize)<1)canvas.moveTo(dashX,y1),canvas.lineTo(x1,y1);else for(;end<dashX;)canvas.moveTo(dashX,y1),canvas.lineTo(dashX-dashSize,y1),dashX-=2*dashSize;canvas.stroke()}}else x1<x2?(canvas.moveTo(x1,y1),canvas.bezierCurveTo((x1+x2)/2,y1,x2,y1,x2,y2+arrowOffset)):(canvas.moveTo(x1,y1),canvas.lineTo(x2,y2)),canvas.stroke();if(null!=slurText&&0!=slurText.length&&firstPt.offset<secondPt.offset){canvas.set_font(res.graceFont);var y,x,size=canvas.measureText(slurText);if(y2<y1){var h=Math.abs(y1-y2);y=h>1.3*canvas.get_font().size?y1-h/2:y1,x=(x1+x2-size)/2}else y=y1,x=x2-size;canvas.fillText(slurText,x,y)}if(0!=secondPt.value&&firstPt.value!=secondPt.value){var dV=secondPt.value,up=secondPt.value>firstPt.value,s="";if(4==(dV=Math.abs(dV)))s="full",dV-=4;else if(4<=dV||dV<=-4){var steps=dV/4|0;s+=Std.string(steps),dV-=4*steps}if(0<dV&&(s+=alphaTab.rendering.glyphs.TabBendGlyph.getFractionSign(dV)),""!=s){var startY=y2=cy-bendValueHeight*secondPt.value;if(!up){startY=y1+Math.abs(y2-y1)/3}canvas.set_font(res.tablatureFont);var size1=canvas.measureText(s),y3=startY-.5*res.tablatureFont.size-2*this.get_scale(),x3=x2-size1/2;canvas.fillText(s,x3,y3)}}},__class__:alphaTab.rendering.glyphs.TabBendGlyph}),alphaTab.rendering.glyphs.TabBendRenderPoint=function(offset,value){null==value&&(value=0),null==offset&&(offset=0),alphaTab.model.BendPoint.call(this,offset,value),this.lineValue=0,this.lineValue=value},alphaTab.rendering.glyphs.TabBendRenderPoint.__name__=["alphaTab","rendering","glyphs","TabBendRenderPoint"],alphaTab.rendering.glyphs.TabBendRenderPoint.__super__=alphaTab.model.BendPoint,alphaTab.rendering.glyphs.TabBendRenderPoint.prototype=$extend(alphaTab.model.BendPoint.prototype,{__class__:alphaTab.rendering.glyphs.TabBendRenderPoint}),alphaTab.rendering.glyphs.TabBrushGlyph=function(beat){alphaTab.rendering.glyphs.Glyph.call(this,0,0),this._beat=null,this._beat=beat},alphaTab.rendering.glyphs.TabBrushGlyph.__name__=["alphaTab","rendering","glyphs","TabBrushGlyph"],alphaTab.rendering.glyphs.TabBrushGlyph.__super__=alphaTab.rendering.glyphs.Glyph,alphaTab.rendering.glyphs.TabBrushGlyph.prototype=$extend(alphaTab.rendering.glyphs.Glyph.prototype,{doLayout:function(){this.width=10*this.get_scale()},paint:function(cx,cy,canvas){var tabBarRenderer=js.Boot.__cast(this.renderer,alphaTab.rendering.TabBarRenderer),res=this.renderer.get_resources(),startY=cy+this.x+(tabBarRenderer.getNoteY(this._beat.maxNote,!1)-res.tablatureFont.size/2),endY=cy+this.y+tabBarRenderer.getNoteY(this._beat.minNote,!1)+res.tablatureFont.size/2,arrowX=system.Convert.toInt32_Single(cx+this.x+this.width/2),arrowSize=8*this.get_scale();if(0!=this._beat.brushType){if(1==this._beat.brushType||2==this._beat.brushType){canvas.beginPath();var this1=arrowX;canvas.moveTo(this1,startY);var this2=arrowX;canvas.lineTo(this2,endY),canvas.stroke()}else if(3==this._beat.brushType){var lineStartY=startY-arrowSize,lineEndY=endY-arrowSize;canvas.beginRotate(cx+this.x+2*this.get_scale(),lineEndY,-90);var glyph=new alphaTab.rendering.glyphs.NoteVibratoGlyph(0,0,1,1.2);glyph.renderer=this.renderer,glyph.doLayout(),glyph.width=Math.abs(lineEndY-lineStartY),glyph.paint(0,0,canvas),canvas.endRotate()}else if(4==this._beat.brushType){var lineStartY1=startY+arrowSize,lineEndY1=endY+arrowSize;canvas.beginRotate(cx+this.x+7*this.get_scale(),lineStartY1,90);var glyph1=new alphaTab.rendering.glyphs.NoteVibratoGlyph(0,0,1,1.2);glyph1.renderer=this.renderer,glyph1.doLayout(),glyph1.width=Math.abs(lineEndY1-lineStartY1),glyph1.paint(0,0,canvas),canvas.endRotate()}if(1==this._beat.brushType||3==this._beat.brushType){canvas.beginPath();var this3=arrowX;canvas.moveTo(this3,endY),canvas.lineTo(arrowX+arrowSize/2,endY-arrowSize),canvas.lineTo(arrowX-arrowSize/2,endY-arrowSize),canvas.closePath(),canvas.fill()}else{canvas.beginPath();var this4=arrowX;canvas.moveTo(this4,startY),canvas.lineTo(arrowX+arrowSize/2,startY+arrowSize),canvas.lineTo(arrowX-arrowSize/2,startY+arrowSize),canvas.closePath(),canvas.fill()}}},__class__:alphaTab.rendering.glyphs.TabBrushGlyph}),alphaTab.rendering.glyphs.TabClefGlyph=function(x,y){alphaTab.rendering.glyphs.Glyph.call(this,x,y)},alphaTab.rendering.glyphs.TabClefGlyph.__name__=["alphaTab","rendering","glyphs","TabClefGlyph"],alphaTab.rendering.glyphs.TabClefGlyph.__super__=alphaTab.rendering.glyphs.Glyph,alphaTab.rendering.glyphs.TabClefGlyph.prototype=$extend(alphaTab.rendering.glyphs.Glyph.prototype,{doLayout:function(){this.width=28*this.get_scale()},paint:function(cx,cy,canvas){var scale,strings=this.renderer.bar.staff.tuning.length,correction=strings*this.get_scale()*.5,symbol=strings<=4?57454:57453;if(strings<=4){scale=strings/4.5}else{scale=strings/6.5}canvas.fillMusicFontSymbol(cx+this.x+5*this.get_scale(),cy+this.y-correction,scale*this.get_scale(),symbol,!1)},__class__:alphaTab.rendering.glyphs.TabClefGlyph}),alphaTab.rendering.glyphs.TabNoteChordGlyph=function(x,y,isGrace){alphaTab.rendering.glyphs.Glyph.call(this,x,y),this._notes=null,this._isGrace=!1,this.beat=null,this.beamingHelper=null,this.minStringNote=null,this.beatEffects=null,this.notesPerString=null,this.noteStringWidth=0,this._isGrace=isGrace;this._notes=[];this.beatEffects={};this.notesPerString={}},alphaTab.rendering.glyphs.TabNoteChordGlyph.__name__=["alphaTab","rendering","glyphs","TabNoteChordGlyph"],alphaTab.rendering.glyphs.TabNoteChordGlyph.__super__=alphaTab.rendering.glyphs.Glyph,alphaTab.rendering.glyphs.TabNoteChordGlyph.prototype=$extend(alphaTab.rendering.glyphs.Glyph.prototype,{getNoteX:function(note,onEnd){if(null==onEnd&&(onEnd=!0),this.notesPerString.hasOwnProperty(note.string)){var n=this.notesPerString[note.string],pos=this.x+n.x;return onEnd&&(pos+=n.width),pos}return 0},getNoteY:function(note,aboveNote){return null==aboveNote&&(aboveNote=!1),this.notesPerString.hasOwnProperty(note.string)?this.y+this.notesPerString[note.string].y+(aboveNote?-this.notesPerString[note.string].height/2:0):0},doLayout:function(){for(var w=0,noteStringWidth=0,i=0,j=this._notes.length;i<j;){var g=this._notes[i];g.renderer=this.renderer,g.doLayout(),g.width>w&&(w=g.width),g.noteStringWidth>noteStringWidth&&(noteStringWidth=g.noteStringWidth),++i}this.noteStringWidth=noteStringWidth;for(var tabHeight=this.renderer.get_resources().tablatureFont.size,effectY=this.getNoteY(this.minStringNote,!1)+tabHeight/2,effectSpacing=7*this.get_scale(),this1=this.beatEffects,beatEffectKey=$iterator(Object.keys(this1))();beatEffectKey.hasNext();){var beatEffectKey1=beatEffectKey.next(),g1=this.beatEffects[beatEffectKey1];g1.y=g1.y+effectY,g1.x=g1.x+this.width/2,g1.renderer=this.renderer,effectY+=effectSpacing,g1.doLayout()}this.width=w},addNoteGlyph:function(noteGlyph,note){this._notes.push(noteGlyph),this.notesPerString[note.string]=noteGlyph,(null==this.minStringNote||note.string<this.minStringNote.string)&&(this.minStringNote=note)},paint:function(cx,cy,canvas){cx+=this.x,cy+=this.y;var res=this.renderer.get_resources(),oldBaseLine=canvas.get_textBaseline();canvas.set_textBaseline(1),canvas.set_font(this._isGrace?res.graceFont:res.tablatureFont);for(var notes=this._notes,w=this.width,g=$iterator(notes)();g.hasNext();){var g1=g.next();g1.renderer=this.renderer,g1.width=w,g1.paint(cx,cy,canvas)}canvas.set_textBaseline(oldBaseLine);for(var this1=this.beatEffects,beatEffectKey=$iterator(Object.keys(this1))();beatEffectKey.hasNext();){var beatEffectKey1=beatEffectKey.next();this.beatEffects[beatEffectKey1].paint(cx,cy,canvas)}},updateBeamingHelper:function(cx){null!=this.beamingHelper&&this.beamingHelper.isPositionFrom("tab",this.beat)&&this.beamingHelper.registerBeatLineX("tab",this.beat,cx+this.x+this.width,cx+this.x)},__class__:alphaTab.rendering.glyphs.TabNoteChordGlyph}),alphaTab.rendering.glyphs.TabRestGlyph=function(x,y,isVisibleRest,duration){alphaTab.rendering.glyphs.MusicFontGlyph.call(this,x,y,1,alphaTab.rendering.glyphs.ScoreRestGlyph.getSymbol(duration)),this._isVisibleRest=!1,this._duration=-4,this.beamingHelper=null,this._isVisibleRest=isVisibleRest,this._duration=duration},alphaTab.rendering.glyphs.TabRestGlyph.__name__=["alphaTab","rendering","glyphs","TabRestGlyph"],alphaTab.rendering.glyphs.TabRestGlyph.__super__=alphaTab.rendering.glyphs.MusicFontGlyph,alphaTab.rendering.glyphs.TabRestGlyph.prototype=$extend(alphaTab.rendering.glyphs.MusicFontGlyph.prototype,{doLayout:function(){this._isVisibleRest?this.width=alphaTab.rendering.glyphs.ScoreRestGlyph.getSize(this._duration)*this.get_scale():this.width=10*this.get_scale()},updateBeamingHelper:function(cx){null!=this.beamingHelper&&this.beamingHelper.isPositionFrom("tab",this.beat)&&this.beamingHelper.registerBeatLineX("tab",this.beat,cx+this.x+this.width,cx+this.x)},paint:function(cx,cy,canvas){this._isVisibleRest&&alphaTab.rendering.glyphs.MusicFontGlyph.prototype.paint.call(this,cx,cy,canvas)},__class__:alphaTab.rendering.glyphs.TabRestGlyph}),alphaTab.rendering.glyphs.TabSlideLineGlyph=function(inType,outType,startNote,parent){alphaTab.rendering.glyphs.Glyph.call(this,0,0),this._inType=0,this._outType=0,this._startNote=null,this._parent=null,this._inType=inType,this._outType=outType,this._startNote=startNote,this._parent=parent},alphaTab.rendering.glyphs.TabSlideLineGlyph.__name__=["alphaTab","rendering","glyphs","TabSlideLineGlyph"],alphaTab.rendering.glyphs.TabSlideLineGlyph.__super__=alphaTab.rendering.glyphs.Glyph,alphaTab.rendering.glyphs.TabSlideLineGlyph.prototype=$extend(alphaTab.rendering.glyphs.Glyph.prototype,{doLayout:function(){this.width=0},paint:function(cx,cy,canvas){this.paintSlideIn(cx,cy,canvas),this.paintSlideOut(cx,cy,canvas)},paintSlideIn:function(cx,cy,canvas){var startX,startY,endX,endY,startNoteRenderer=js.Boot.__cast(this.renderer,alphaTab.rendering.TabBarRenderer),sizeX=12*this.get_scale(),sizeY=3*this.get_scale();switch(this._inType){case 1:endX=cx+startNoteRenderer.x+startNoteRenderer.getNoteX(this._startNote,!1),endY=cy+startNoteRenderer.y+startNoteRenderer.getNoteY(this._startNote,!1),startX=endX-sizeX,startY=cy+startNoteRenderer.y+startNoteRenderer.getNoteY(this._startNote,!1)+sizeY;break;case 2:endX=cx+startNoteRenderer.x+startNoteRenderer.getNoteX(this._startNote,!1),endY=cy+startNoteRenderer.y+startNoteRenderer.getNoteY(this._startNote,!1),startX=endX-sizeX,startY=cy+startNoteRenderer.y+startNoteRenderer.getNoteY(this._startNote,!1)-sizeY;break;default:return}this.paintSlideLine(canvas,!1,startX,endX,startY,endY)},paintSlideOut:function(cx,cy,canvas){var startX,startY,endX,endY,startNoteRenderer=js.Boot.__cast(this.renderer,alphaTab.rendering.TabBarRenderer),sizeX=12*this.get_scale(),sizeY=3*this.get_scale(),waves=!1;switch(this._outType){case 1:case 2:var startOffsetY,endOffsetY;if(endOffsetY=null==this._startNote.slideTarget?startOffsetY=0:this._startNote.slideTarget.fret>this._startNote.fret?-1*(startOffsetY=sizeY):(startOffsetY=-1*sizeY,sizeY),startX=cx+startNoteRenderer.x+startNoteRenderer.getBeatX(this._startNote.beat,3),startY=cy+startNoteRenderer.y+startNoteRenderer.getNoteY(this._startNote,!1)+startOffsetY,null!=this._startNote.slideTarget){var endNoteRenderer=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.get_staveId(),this._startNote.slideTarget.beat.voice.bar);endY=null==endNoteRenderer||endNoteRenderer.staff!=startNoteRenderer.staff?(endX=cx+startNoteRenderer.x+this._parent.x,startY):(endX=cx+endNoteRenderer.x+endNoteRenderer.getBeatX(this._startNote.slideTarget.beat,1),cy+endNoteRenderer.y+endNoteRenderer.getNoteY(this._startNote.slideTarget,!1)+endOffsetY)}else endX=cx+startNoteRenderer.x+this._parent.x,endY=startY;break;case 3:startX=cx+startNoteRenderer.x+startNoteRenderer.getNoteX(this._startNote,!0),startY=cy+startNoteRenderer.y+startNoteRenderer.getNoteY(this._startNote,!1),endX=startX+sizeX,endY=cy+startNoteRenderer.y+startNoteRenderer.getNoteY(this._startNote,!1)-sizeY;break;case 4:startX=cx+startNoteRenderer.x+startNoteRenderer.getNoteX(this._startNote,!0),startY=cy+startNoteRenderer.y+startNoteRenderer.getNoteY(this._startNote,!1),endX=startX+sizeX,endY=cy+startNoteRenderer.y+startNoteRenderer.getNoteY(this._startNote,!1)+sizeY;break;case 5:startX=cx+startNoteRenderer.x+startNoteRenderer.getNoteX(this._startNote,!0),startY=cy+startNoteRenderer.y+startNoteRenderer.getNoteY(this._startNote,!1)-2*sizeY,endX=cx+startNoteRenderer.x+startNoteRenderer.getBeatX(this._startNote.beat,4),endY=startY+3*sizeY,waves=!0;break;case 6:startX=cx+startNoteRenderer.x+startNoteRenderer.getNoteX(this._startNote,!0),startY=cy+startNoteRenderer.y+startNoteRenderer.getNoteY(this._startNote,!1)+sizeY,endX=cx+startNoteRenderer.x+startNoteRenderer.getBeatX(this._startNote.beat,4),endY=startY-3*sizeY,waves=!0;break;default:return}this.paintSlideLine(canvas,waves,startX,endX,startY,endY)},paintSlideLine:function(canvas,waves,startX,endX,startY,endY){if(waves){var b=endX-startX,a=endY-startY,this1=a,this2=b,this3=a/Math.sqrt(Math.pow(this1,2)+Math.pow(this2,2)),angle=js.Boot.__cast(57.29577951308238*Math.asin(this3),Float);canvas.beginRotate(startX,startY,angle);var glyph=new alphaTab.rendering.glyphs.NoteVibratoGlyph(0,0,1,1.2);glyph.renderer=this.renderer,glyph.doLayout(),glyph.width=b,glyph.paint(0,0,canvas),canvas.endRotate()}else canvas.beginPath(),canvas.moveTo(startX,startY),canvas.lineTo(endX,endY),canvas.stroke()},__class__:alphaTab.rendering.glyphs.TabSlideLineGlyph}),alphaTab.rendering.glyphs.TabTieGlyph=function(startNote,endNote,forSlide,forEnd){null==forEnd&&(forEnd=!1),alphaTab.rendering.glyphs.TieGlyph.call(this,startNote.beat,endNote.beat,forEnd),this.StartNote=null,this.EndNote=null,this.ForSlide=!1,this.StartNote=startNote,this.EndNote=endNote,this.ForSlide=forSlide},alphaTab.rendering.glyphs.TabTieGlyph.__name__=["alphaTab","rendering","glyphs","TabTieGlyph"],alphaTab.rendering.glyphs.TabTieGlyph.getBeamDirection_Note=function(note){return 3<note.string?0:1},alphaTab.rendering.glyphs.TabTieGlyph.__super__=alphaTab.rendering.glyphs.TieGlyph,alphaTab.rendering.glyphs.TabTieGlyph.prototype=$extend(alphaTab.rendering.glyphs.TieGlyph.prototype,{get_offset:function(){return this.ForSlide?5*this.get_scale():0},getBeamDirection:function(beat,noteRenderer){return alphaTab.rendering.glyphs.TabTieGlyph.getBeamDirection_Note(this.StartNote)},getStartY:function(noteRenderer,direction){return noteRenderer.getNoteY(this.StartNote,!1)-this.get_offset()},getEndY:function(noteRenderer,direction){return noteRenderer.getNoteY(this.EndNote,!1)-this.get_offset()},getStartX:function(noteRenderer){return noteRenderer.getNoteX(this.StartNote,!0)},getEndX:function(noteRenderer){return noteRenderer.getNoteX(this.EndNote,!1)},__class__:alphaTab.rendering.glyphs.TabTieGlyph}),alphaTab.rendering.glyphs.TabSlurGlyph=function(startNote,endNote,forSlide,forEnd){null==forEnd&&(forEnd=!1),alphaTab.rendering.glyphs.TabTieGlyph.call(this,startNote,endNote,forSlide,forEnd),this._direction=0,this._direction=alphaTab.rendering.glyphs.TabTieGlyph.getBeamDirection_Note(startNote)},alphaTab.rendering.glyphs.TabSlurGlyph.__name__=["alphaTab","rendering","glyphs","TabSlurGlyph"],alphaTab.rendering.glyphs.TabSlurGlyph.__super__=alphaTab.rendering.glyphs.TabTieGlyph,alphaTab.rendering.glyphs.TabSlurGlyph.prototype=$extend(alphaTab.rendering.glyphs.TabTieGlyph.prototype,{getTieHeight:function(startX,startY,endX,endY){var this1=endX-startX+1;return js.Boot.__cast(Math.log(this1),Float)*this.renderer.get_settings().notation.slurHeight},tryExpand:function(startNote,endNote,forSlide,forEnd){if(this.ForSlide!=forSlide)return!1;if(this.ForEnd!=forEnd)return!1;if(this.StartNote.beat.id!=startNote.beat.id)return!1;if(this.EndNote.beat.id!=endNote.beat.id)return!1;if(this._direction!=alphaTab.rendering.glyphs.TabTieGlyph.getBeamDirection_Note(startNote))return!1;switch(this._direction){case 0:startNote.get_realValue()>this.StartNote.get_realValue()&&(this.StartNote=startNote,this.StartBeat=startNote.beat),endNote.get_realValue()>this.EndNote.get_realValue()&&(this.EndNote=endNote,this.EndBeat=endNote.beat);break;case 1:startNote.get_realValue()<this.StartNote.get_realValue()&&(this.StartNote=startNote,this.StartBeat=startNote.beat),endNote.get_realValue()<this.EndNote.get_realValue()&&(this.EndNote=endNote,this.EndBeat=endNote.beat)}return!0},paint:function(cx,cy,canvas){var startNoteRenderer=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.get_staveId(),this.StartBeat.voice.bar),direction=this.getBeamDirection(this.StartBeat,startNoteRenderer),slurId="tab.slur."+Std.string(this.StartNote.beat.id)+"."+Std.string(this.EndNote.beat.id)+"."+direction,renderer=js.Boot.__cast(this.renderer,alphaTab.rendering.TabBarRenderer);renderer.staff.getSharedLayoutData(slurId,!1)||(renderer.staff.setSharedLayoutData(slurId,!0),alphaTab.rendering.glyphs.TabTieGlyph.prototype.paint.call(this,cx,cy,canvas))},__class__:alphaTab.rendering.glyphs.TabSlurGlyph}),alphaTab.rendering.glyphs.TabTimeSignatureGlyph=function(x,y,numerator,denominator,isCommon){alphaTab.rendering.glyphs.TimeSignatureGlyph.call(this,x,y,numerator,denominator,isCommon)},alphaTab.rendering.glyphs.TabTimeSignatureGlyph.__name__=["alphaTab","rendering","glyphs","TabTimeSignatureGlyph"],alphaTab.rendering.glyphs.TabTimeSignatureGlyph.__super__=alphaTab.rendering.glyphs.TimeSignatureGlyph,alphaTab.rendering.glyphs.TabTimeSignatureGlyph.prototype=$extend(alphaTab.rendering.glyphs.TimeSignatureGlyph.prototype,{get_commonY:function(){return js.Boot.__cast(this.renderer,alphaTab.rendering.TabBarRenderer).getTabY(0,0)},get_numeratorY:function(){var offset,renderer=js.Boot.__cast(this.renderer,alphaTab.rendering.TabBarRenderer);if(renderer.bar.staff.tuning.length<=4){offset=.25}else{offset=1/3}return renderer.get_lineOffset()*renderer.bar.staff.tuning.length*offset*this.get_scale()},get_denominatorY:function(){var renderer=js.Boot.__cast(this.renderer,alphaTab.rendering.TabBarRenderer);return renderer.get_lineOffset()*renderer.bar.staff.tuning.length*.6*this.get_scale()},get_commonScale:function(){return 1},get_numberScale:function(){return js.Boot.__cast(this.renderer,alphaTab.rendering.TabBarRenderer).bar.staff.tuning.length<=4?.75:1},__class__:alphaTab.rendering.glyphs.TabTimeSignatureGlyph}),alphaTab.rendering.glyphs.TabWhammyBarGlyph=function(beat){alphaTab.rendering.glyphs.Glyph.call(this,0,0),this._beat=null,this._renderPoints=null,this._isSimpleDip=!1,this._beat=beat,this._renderPoints=this.createRenderingPoints(beat),this._isSimpleDip=!1},alphaTab.rendering.glyphs.TabWhammyBarGlyph.__name__=["alphaTab","rendering","glyphs","TabWhammyBarGlyph"],alphaTab.rendering.glyphs.TabWhammyBarGlyph.__super__=alphaTab.rendering.glyphs.Glyph,alphaTab.rendering.glyphs.TabWhammyBarGlyph.prototype=$extend(alphaTab.rendering.glyphs.Glyph.prototype,{createRenderingPoints:function(beat){if(1==beat.whammyBarType)return beat.whammyBarPoints;var renderingPoints=[];switch(beat.whammyBarType){case 3:renderingPoints.push(new alphaTab.model.BendPoint(0,beat.whammyBarPoints[0].value)),renderingPoints.push(new alphaTab.model.BendPoint(30,beat.whammyBarPoints[1].value)),renderingPoints.push(new alphaTab.model.BendPoint(60,beat.whammyBarPoints[beat.whammyBarPoints.length-1].value));break;case 2:case 4:case 5:case 6:renderingPoints.push(new alphaTab.model.BendPoint(0,beat.whammyBarPoints[0].value)),renderingPoints.push(new alphaTab.model.BendPoint(60,beat.whammyBarPoints[1].value))}return renderingPoints},doLayout:function(){alphaTab.rendering.glyphs.Glyph.prototype.doLayout.call(this),this._isSimpleDip=1==this.renderer.get_settings().notation.notationMode&&3==this._beat.whammyBarType;for(var minValue=null,maxValue=null,beat=this._beat;null!=beat&&beat.get_hasWhammyBar();)(null==minValue||minValue.value>beat.minWhammyPoint.value)&&(minValue=beat.minWhammyPoint),(null==maxValue||maxValue.value<beat.maxWhammyPoint.value)&&(maxValue=beat.maxWhammyPoint),beat=beat.nextBeat;var topOffset=0<maxValue.value?Math.abs(this.getOffset(maxValue.value)):0;if(0<topOffset||0!=this._beat.whammyBarPoints[0].value||this.renderer.get_settings().notation.showZeroOnDiveWhammy){topOffset+=2*this.renderer.get_resources().tablatureFont.size}var bottomOffset=minValue.value<0?Math.abs(this.getOffset(minValue.value)):0;this.renderer.registerOverflowTop(topOffset+bottomOffset),this.renderer.staff.getSharedLayoutData("tab.whammy.topoffset",-1)<topOffset&&this.renderer.staff.setSharedLayoutData("tab.whammy.topoffset",topOffset)},getOffset:function(value){if(0==value)return 0;var offset=6*this.get_scale()+6*Math.log2(Math.abs(value)/2)*this.get_scale();return value<0&&(offset=-offset),offset},paint:function(cx,cy,canvas){var startX,endX,startNoteRenderer=this.renderer,endBeat=this._beat.nextBeat,endNoteRenderer=null,endXPositionType=0;null!=endBeat&&(null!=(endNoteRenderer=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.get_staveId(),endBeat.voice.bar))&&endNoteRenderer.staff==startNoteRenderer.staff&&(endNoteRenderer==startNoteRenderer||endBeat.get_hasWhammyBar())?endXPositionType=!endBeat.get_hasWhammyBar()||1==startNoteRenderer.get_settings().notation.notationMode&&3==endBeat.whammyBarType?0:2:endNoteRenderer=endBeat=null),endX=this._isSimpleDip?(startX=cx+startNoteRenderer.x+startNoteRenderer.getBeatX(this._beat,1)-2*this.get_scale(),cx+startNoteRenderer.x+startNoteRenderer.getBeatX(this._beat,3)+2*this.get_scale()):(startX=cx+startNoteRenderer.x+startNoteRenderer.getBeatX(this._beat,2),null==endNoteRenderer?cx+startNoteRenderer.x+startNoteRenderer.width-2*this.get_scale():cx+endNoteRenderer.x+endNoteRenderer.getBeatX(endBeat,endXPositionType));var old=canvas.get_textAlign();if(canvas.set_textAlign(1),2<=this._renderPoints.length){var dx=(endX-startX)/60;canvas.beginPath();for(var zeroY=cy+this.renderer.staff.getSharedLayoutData("tab.whammy.topoffset",0),slurText=1==this._beat.whammyStyle?"grad.":"",i=0,j=this._renderPoints.length-1;i<j;){var firstPt=this._renderPoints[i],secondPt=this._renderPoints[i+1],nextPt=i<j-2?this._renderPoints[i+2]:null,isFirst=0==i;0!=i||0==firstPt.value||this._beat.isContinuedWhammy||(this.paintWhammy(!1,new alphaTab.model.BendPoint(0,0),firstPt,secondPt,startX,zeroY,dx,canvas,null),isFirst=!1),this.paintWhammy(isFirst,firstPt,secondPt,nextPt,startX,zeroY,dx,canvas,slurText),slurText="",++i}canvas.stroke()}canvas.set_textAlign(old)},paintWhammy:function(isFirst,firstPt,secondPt,nextPt,cx,cy,dx,canvas,slurText){var x1=cx+dx*firstPt.offset,x2=cx+dx*secondPt.offset,y1=cy-this.getOffset(firstPt.value),y2=cy-this.getOffset(secondPt.value);if(firstPt.offset==secondPt.offset){var dashSize=3*this.get_scale();if(Math.abs(y2-y1)/(2*dashSize)<1)canvas.moveTo(x1,y1),canvas.lineTo(x2,y2);else for(var dashEndY=Math.max(y1,y2),dashStartY=Math.min(y1,y2);dashStartY<dashEndY;)canvas.moveTo(x1,dashStartY),canvas.lineTo(x1,dashStartY+dashSize),dashStartY+=2*dashSize;canvas.stroke()}else if(firstPt.value==secondPt.value){var dashSize1=3*this.get_scale();if(Math.abs(x2-x1)/(2*dashSize1)<1)canvas.moveTo(x1,y1),canvas.lineTo(x2,y2);else for(var dashEndX=Math.max(x1,x2),dashStartX=Math.min(x1,x2);dashStartX<dashEndX;)canvas.moveTo(dashEndX,y1),canvas.lineTo(dashEndX-dashSize1,y1),dashEndX-=2*dashSize1;canvas.stroke()}else canvas.moveTo(x1,y1),canvas.lineTo(x2,y2);var res=this.renderer.get_resources();if(isFirst&&!this._beat.isContinuedWhammy&&!this._isSimpleDip){var y=y1;y-=res.tablatureFont.size+2*this.get_scale(),this.renderer.get_settings().notation.showZeroOnDiveWhammy&&canvas.fillText("0",x1,y),null!=slurText&&(y-=res.tablatureFont.size+2*this.get_scale(),canvas.fillText(slurText,x1,y))}var dV=Math.abs(secondPt.value);if((0!=dV||this.renderer.get_settings().notation.showZeroOnDiveWhammy&&!this._isSimpleDip)&&firstPt.value!=secondPt.value){var y3,s="";if(secondPt.value<0&&(s+="-"),4<=dV){var steps=dV/4|0;s+=Std.string(steps),dV-=4*steps}else 0==dV&&(s+="0");0<dV&&(s+=alphaTab.rendering.glyphs.TabBendGlyph.getFractionSign(dV)),this._isSimpleDip?y3=Math.min(y1,y2)-res.tablatureFont.size-2*this.get_scale():(y3=firstPt.offset==secondPt.offset?Math.min(y1,y2):y2,y3-=res.tablatureFont.size+2*this.get_scale(),null!=nextPt&&nextPt.value>secondPt.value&&(y3-=2*this.get_scale()));var x=x2;canvas.fillText(s,x,y3)}},__class__:alphaTab.rendering.glyphs.TabWhammyBarGlyph}),alphaTab.rendering.glyphs.TempoGlyph=function(x,y,tempo){alphaTab.rendering.glyphs.EffectGlyph.call(this,x,y),this._tempo=0,this._tempo=tempo},alphaTab.rendering.glyphs.TempoGlyph.__name__=["alphaTab","rendering","glyphs","TempoGlyph"],alphaTab.rendering.glyphs.TempoGlyph.__super__=alphaTab.rendering.glyphs.EffectGlyph,alphaTab.rendering.glyphs.TempoGlyph.prototype=$extend(alphaTab.rendering.glyphs.EffectGlyph.prototype,{doLayout:function(){alphaTab.rendering.glyphs.EffectGlyph.prototype.doLayout.call(this),this.height=25*this.get_scale()},paint:function(cx,cy,canvas){var res=this.renderer.get_resources();canvas.set_font(res.markerFont);canvas.fillMusicFontSymbol(cx+this.x,cy+this.y+.8*this.height,.75*this.get_scale(),57813,!1),canvas.fillText("= "+Std.string(this._tempo),cx+this.x+this.height/2,cy+this.y+canvas.get_font().size/2)},__class__:alphaTab.rendering.glyphs.TempoGlyph}),alphaTab.rendering.glyphs.TextGlyph=function(x,y,text,font,textAlign){null==textAlign&&(textAlign=0),alphaTab.rendering.glyphs.EffectGlyph.call(this,x,y),this._lines=null,this.font=null,this.textAlign=0;var this2=system.Convert.toUInt16(10);this._lines=system._CsString.CsString_Impl_.split_CharArray(text,[this2]),this.font=font,this.textAlign=textAlign},alphaTab.rendering.glyphs.TextGlyph.__name__=["alphaTab","rendering","glyphs","TextGlyph"],alphaTab.rendering.glyphs.TextGlyph.__super__=alphaTab.rendering.glyphs.EffectGlyph,alphaTab.rendering.glyphs.TextGlyph.prototype=$extend(alphaTab.rendering.glyphs.EffectGlyph.prototype,{doLayout:function(){alphaTab.rendering.glyphs.EffectGlyph.prototype.doLayout.call(this),this.height=this.font.size*this._lines.length},paint:function(cx,cy,canvas){canvas.set_font(this.font);for(var old=canvas.get_textAlign(),y=cy+this.y,line=HxOverrides.iter(this._lines);line.hasNext();){var line1=line.next();canvas.set_textAlign(this.textAlign),canvas.fillText(line1,cx+this.x,y),canvas.set_textAlign(old),y+=this.font.size}},__class__:alphaTab.rendering.glyphs.TextGlyph}),alphaTab.rendering.glyphs.TremoloPickingGlyph=function(x,y,duration){alphaTab.rendering.glyphs.MusicFontGlyph.call(this,x,y,1,alphaTab.rendering.glyphs.TremoloPickingGlyph.getSymbol(duration))},alphaTab.rendering.glyphs.TremoloPickingGlyph.__name__=["alphaTab","rendering","glyphs","TremoloPickingGlyph"],alphaTab.rendering.glyphs.TremoloPickingGlyph.getSymbol=function(duration){switch(duration){case 8:return 57888;case 16:return 57889;case 32:return 57890;default:return-1}},alphaTab.rendering.glyphs.TremoloPickingGlyph.__super__=alphaTab.rendering.glyphs.MusicFontGlyph,alphaTab.rendering.glyphs.TremoloPickingGlyph.prototype=$extend(alphaTab.rendering.glyphs.MusicFontGlyph.prototype,{doLayout:function(){this.width=12*this.get_scale()},__class__:alphaTab.rendering.glyphs.TremoloPickingGlyph}),alphaTab.rendering.glyphs.TrillGlyph=function(x,y){alphaTab.rendering.glyphs.EffectGlyph.call(this,x,y)},alphaTab.rendering.glyphs.TrillGlyph.__name__=["alphaTab","rendering","glyphs","TrillGlyph"],alphaTab.rendering.glyphs.TrillGlyph.__super__=alphaTab.rendering.glyphs.EffectGlyph,alphaTab.rendering.glyphs.TrillGlyph.prototype=$extend(alphaTab.rendering.glyphs.EffectGlyph.prototype,{doLayout:function(){alphaTab.rendering.glyphs.EffectGlyph.prototype.doLayout.call(this),this.height=20*this.get_scale()},paint:function(cx,cy,canvas){var res=this.renderer.get_resources();canvas.set_font(res.markerFont);var textw=canvas.measureText("tr");canvas.fillText("tr",cx+this.x,cy+this.y+canvas.get_font().size/2);for(var startX=textw+3*this.get_scale(),endX=this.width-startX,step=11*this.get_scale()*1.2,loops=Math.max(1,(endX-startX)/step),loopX=startX,loopY=cy+this.y+this.height,i=0;i<loops;)canvas.fillMusicFontSymbol(cx+this.x+loopX,loopY,1.2,60068,!1),loopX+=step,++i},__class__:alphaTab.rendering.glyphs.TrillGlyph}),alphaTab.rendering.glyphs.TripletFeelGlyph=function(tripletFeel){alphaTab.rendering.glyphs.EffectGlyph.call(this,0,0),this._tripletFeel=0,this._tripletFeel=tripletFeel},alphaTab.rendering.glyphs.TripletFeelGlyph.__name__=["alphaTab","rendering","glyphs","TripletFeelGlyph"],alphaTab.rendering.glyphs.TripletFeelGlyph.__super__=alphaTab.rendering.glyphs.EffectGlyph,alphaTab.rendering.glyphs.TripletFeelGlyph.prototype=$extend(alphaTab.rendering.glyphs.EffectGlyph.prototype,{doLayout:function(){alphaTab.rendering.glyphs.EffectGlyph.prototype.doLayout.call(this),this.height=25*this.get_scale()},paint:function(cx,cy,canvas){cx+=this.x;var noteY=(cy+=this.y)+.75*this.height;canvas.set_font(this.renderer.get_resources().effectFont);canvas.fillText("(",cx,cy+.3*this.height);var leftNoteX=cx+10*this.get_scale(),rightNoteX=cx+40*this.get_scale();switch(this._tripletFeel){case 0:this.renderBarNote(leftNoteX,noteY,.4,canvas,[0]),this.renderBarNote(rightNoteX,noteY,.4,canvas,[0]);break;case 1:this.renderBarNote(leftNoteX,noteY,.4,canvas,[0,0]),this.renderBarNote(rightNoteX,noteY,.4,canvas,[0,2]),this.renderTriplet(rightNoteX,cy,canvas);break;case 2:this.renderBarNote(leftNoteX,noteY,.4,canvas,[0]),canvas.fillMusicFontSymbol(rightNoteX,noteY,.4,57813,!1),canvas.fillMusicFontSymbol(rightNoteX+12*this.get_scale(),noteY,.4,57815,!1),this.renderTriplet(rightNoteX,cy,canvas);break;case 3:this.renderBarNote(leftNoteX,noteY,.4,canvas,[0,0]),this.renderBarNote(rightNoteX,noteY,.4,canvas,[0,0,2]),canvas.fillCircle(rightNoteX+9*this.get_scale(),noteY,this.get_scale());break;case 4:this.renderBarNote(leftNoteX,noteY,.4,canvas,[0]),this.renderBarNote(rightNoteX,noteY,.4,canvas,[0,2]),canvas.fillCircle(rightNoteX+9*this.get_scale(),noteY,this.get_scale());break;case 5:this.renderBarNote(leftNoteX,noteY,.4,canvas,[0,0]),this.renderBarNote(rightNoteX,noteY,.4,canvas,[0,0,1]),canvas.fillCircle(rightNoteX+12*this.get_scale()+8*this.get_scale(),noteY,this.get_scale());break;case 6:this.renderBarNote(leftNoteX,noteY,.4,canvas,[0]),this.renderBarNote(rightNoteX,noteY,.4,canvas,[0,1]),canvas.fillCircle(rightNoteX+12*this.get_scale()+8*this.get_scale(),noteY,this.get_scale())}canvas.fillText("=",cx+30*this.get_scale(),cy+5*this.get_scale());canvas.fillText(")",cx+65*this.get_scale(),cy+.3*this.height)},renderBarNote:function(cx,noteY,noteScale,canvas,bars){canvas.fillMusicFontSymbol(cx,noteY,noteScale,57813,!1);for(var partialBarWidth=6*this.get_scale(),i=0;i<bars.length;){switch(bars[i]){case 0:canvas.fillRect(cx+4*this.get_scale(),noteY-12*this.get_scale()+3*this.get_scale()*i,12*this.get_scale(),2*this.get_scale());break;case 1:canvas.fillRect(cx+4*this.get_scale(),noteY-12*this.get_scale()+3*this.get_scale()*i,partialBarWidth,2*this.get_scale());break;case 2:canvas.fillRect(cx+4*this.get_scale()+partialBarWidth,noteY-12*this.get_scale()+3*this.get_scale()*i,partialBarWidth,2*this.get_scale())}++i}canvas.fillMusicFontSymbol(cx+12*this.get_scale(),noteY,noteScale,57813,!1)},renderTriplet:function(cx,cy,canvas){cy+=2*this.get_scale();var font=this.renderer.get_resources().effectFont;canvas.set_font(new alphaTab.platform.model.Font(font.family,.8*font.size,font.style));var rightX=cx+12*this.get_scale()+3*this.get_scale();canvas.beginPath(),canvas.moveTo(cx,cy+3*this.get_scale()),canvas.lineTo(cx,cy),canvas.lineTo(cx+5*this.get_scale(),cy),canvas.moveTo(rightX+5*this.get_scale(),cy+3*this.get_scale()),canvas.lineTo(rightX+5*this.get_scale(),cy),canvas.lineTo(rightX,cy),canvas.stroke(),canvas.fillText("3",cx+7*this.get_scale(),cy-10*this.get_scale()),canvas.set_font(font)},__class__:alphaTab.rendering.glyphs.TripletFeelGlyph}),alphaTab.rendering.glyphs._TripletFeelGlyph_BarType={},alphaTab.rendering.glyphs._TripletFeelGlyph_BarType.TripletFeelGlyph_BarType_Impl_={},alphaTab.rendering.glyphs._TripletFeelGlyph_BarType.TripletFeelGlyph_BarType_Impl_.__name__=["alphaTab","rendering","glyphs","_TripletFeelGlyph_BarType","TripletFeelGlyph_BarType_Impl_"],alphaTab.rendering.glyphs._TripletFeelGlyph_BarType.TripletFeelGlyph_BarType_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.rendering.glyphs._TripletFeelGlyph_BarType.TripletFeelGlyph_BarType_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.rendering.glyphs._TripletFeelGlyph_BarType.TripletFeelGlyph_BarType_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.rendering.glyphs._TripletFeelGlyph_BarType.TripletFeelGlyph_BarType_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.rendering.glyphs._TripletFeelGlyph_BarType.TripletFeelGlyph_BarType_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.rendering.glyphs._TripletFeelGlyph_BarType.TripletFeelGlyph_BarType_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.rendering.glyphs._TripletFeelGlyph_BarType.TripletFeelGlyph_BarType_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.rendering.glyphs._TripletFeelGlyph_BarType.TripletFeelGlyph_BarType_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.rendering.glyphs._TripletFeelGlyph_BarType.TripletFeelGlyph_BarType_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.rendering.glyphs._TripletFeelGlyph_BarType.TripletFeelGlyph_BarType_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.rendering.glyphs._TripletFeelGlyph_BarType.TripletFeelGlyph_BarType_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.rendering.glyphs._TripletFeelGlyph_BarType.TripletFeelGlyph_BarType_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.rendering.glyphs._TripletFeelGlyph_BarType.TripletFeelGlyph_BarType_Impl_.toString=function(this1){switch(this1){case 0:return"Full";case 1:return"PartialLeft";case 2:return"PartialRight"}return""},alphaTab.rendering.glyphs._TripletFeelGlyph_BarType.TripletFeelGlyph_BarType_Impl_.fromString=function(str){switch(str.toLowerCase()){case"full":return 0;case"partialleft":return 1;case"partialright":return 2}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.rendering.glyphs.TuningGlyph=function(x,y,scale,resources,tuning){alphaTab.rendering.glyphs.GlyphGroup.call(this,x,y),this._scale=0,this._resources=null,this.height=0,this._scale=scale,this._resources=resources,this.createGlyphs(tuning)},alphaTab.rendering.glyphs.TuningGlyph.__name__=["alphaTab","rendering","glyphs","TuningGlyph"],alphaTab.rendering.glyphs.TuningGlyph.__super__=alphaTab.rendering.glyphs.GlyphGroup,alphaTab.rendering.glyphs.TuningGlyph.prototype=$extend(alphaTab.rendering.glyphs.GlyphGroup.prototype,{createGlyphs:function(tuning){if(this.addGlyph(new alphaTab.rendering.glyphs.TextGlyph(0,0,tuning.name,this._resources.effectFont,0)),this.height=this.height+15*this._scale,!tuning.isStandard){for(var stringsPerColumn=system.Convert.toInt32_Double(Math.ceil(tuning.tunings.length/2)),currentX=0,currentY=this.height,i=0,j=tuning.tunings.length;i<j;){var str="("+Std.string(i+1)+") = "+alphaTab.model.Tuning.getTextForTuning(tuning.tunings[i],!1);this.addGlyph(new alphaTab.rendering.glyphs.TextGlyph(currentX,currentY,str,this._resources.effectFont,0)),currentY+=this.height,i==stringsPerColumn-1&&(currentY=this.height,currentX+=43*this._scale),++i}this.height=this.height+stringsPerColumn*(15*this._scale)}},__class__:alphaTab.rendering.glyphs.TuningGlyph}),alphaTab.rendering.glyphs.VoiceContainerGlyph=function(x,y,voice){alphaTab.rendering.glyphs.GlyphGroup.call(this,x,y),this.beatGlyphs=null,this.voice=null,this.minWidth=0,this.tupletGroups=null,this.voice=voice;this.beatGlyphs=[];this.tupletGroups=[]},alphaTab.rendering.glyphs.VoiceContainerGlyph.__name__=["alphaTab","rendering","glyphs","VoiceContainerGlyph"],alphaTab.rendering.glyphs.VoiceContainerGlyph.__super__=alphaTab.rendering.glyphs.GlyphGroup,alphaTab.rendering.glyphs.VoiceContainerGlyph.prototype=$extend(alphaTab.rendering.glyphs.GlyphGroup.prototype,{scaleToWidth:function(width){var force=this.renderer.layoutingInfo.spaceToForce(width);this.scaleToForce(force)},scaleToForce:function(force){this.width=this.renderer.layoutingInfo.calculateVoiceWidth(force);for(var positions=this.renderer.layoutingInfo.buildOnTimePositions(force),beatGlyphs=this.beatGlyphs,i=0,j=beatGlyphs.length;i<j;){var currentBeatGlyph=beatGlyphs[i],time=currentBeatGlyph.beat.get_absoluteDisplayStart(),tmp=currentBeatGlyph.get_onTimeX();if(currentBeatGlyph.x=positions[time]-tmp,0<i){var beatWidth=currentBeatGlyph.x-beatGlyphs[i-1].x;beatGlyphs[i-1].scaleToWidth(beatWidth)}if(i==j-1){var beatWidth1=this.width-beatGlyphs[beatGlyphs.length-1].x;currentBeatGlyph.scaleToWidth(beatWidth1)}++i}},registerLayoutingInfo:function(info){info.updateVoiceSize(this.width);for(var b=$iterator(this.beatGlyphs)();b.hasNext();){b.next().registerLayoutingInfo(info)}},applyLayoutingInfo:function(info){for(var b=$iterator(this.beatGlyphs)();b.hasNext();){b.next().applyLayoutingInfo(info)}this.scaleToForce(Math.max(this.renderer.get_settings().display.stretchForce,info.minStretchForce))},addGlyph:function(g){var bg=js.Boot.__cast(g,alphaTab.rendering.glyphs.BeatContainerGlyph);g.x=0==this.beatGlyphs.length?0:this.beatGlyphs[this.beatGlyphs.length-1].x+this.beatGlyphs[this.beatGlyphs.length-1].width,g.renderer=this.renderer,g.doLayout(),this.beatGlyphs.push(bg),this.width=g.x+g.width,bg.beat.get_hasTuplet()&&bg.beat.tupletGroup.beats[0].id==bg.beat.id&&this.tupletGroups.push(bg.beat.tupletGroup)},doLayout:function(){this.minWidth=this.width},paint:function(cx,cy,canvas){canvas.set_color(0==this.voice.index?this.renderer.get_resources().mainGlyphColor:this.renderer.get_resources().secondaryGlyphColor);for(var i=0,j=this.beatGlyphs.length;i<j;)this.beatGlyphs[i].paint(cx+this.x,cy+this.y,canvas),++i},__class__:alphaTab.rendering.glyphs.VoiceContainerGlyph}),alphaTab.rendering.layout._HeaderFooterElements={},alphaTab.rendering.layout._HeaderFooterElements.HeaderFooterElements_Impl_={},alphaTab.rendering.layout._HeaderFooterElements.HeaderFooterElements_Impl_.__name__=["alphaTab","rendering","layout","_HeaderFooterElements","HeaderFooterElements_Impl_"],alphaTab.rendering.layout._HeaderFooterElements.HeaderFooterElements_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.rendering.layout._HeaderFooterElements.HeaderFooterElements_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.rendering.layout._HeaderFooterElements.HeaderFooterElements_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.rendering.layout._HeaderFooterElements.HeaderFooterElements_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.rendering.layout._HeaderFooterElements.HeaderFooterElements_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.rendering.layout._HeaderFooterElements.HeaderFooterElements_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.rendering.layout._HeaderFooterElements.HeaderFooterElements_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.rendering.layout._HeaderFooterElements.HeaderFooterElements_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.rendering.layout._HeaderFooterElements.HeaderFooterElements_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.rendering.layout._HeaderFooterElements.HeaderFooterElements_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.rendering.layout._HeaderFooterElements.HeaderFooterElements_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.rendering.layout._HeaderFooterElements.HeaderFooterElements_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.rendering.layout._HeaderFooterElements.HeaderFooterElements_Impl_.toString=function(this1){switch(this1){case 0:return"None";case 1:return"Title";case 2:return"SubTitle";case 4:return"Artist";case 8:return"Album";case 16:return"Words";case 32:return"Music";case 64:return"WordsAndMusic";case 128:return"Copyright";case 256:return"PageNumber";case 511:return"All"}return""},alphaTab.rendering.layout._HeaderFooterElements.HeaderFooterElements_Impl_.fromString=function(str){switch(str.toLowerCase()){case"album":return 8;case"all":return 511;case"artist":return 4;case"copyright":return 128;case"music":return 32;case"none":return 0;case"pagenumber":return 256;case"subtitle":return 2;case"title":return 1;case"words":return 16;case"wordsandmusic":return 64}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.rendering.layout.HorizontalScreenLayoutPartialInfo=function(){this.width=0,this.masterBars=null;this.masterBars=[]},alphaTab.rendering.layout.HorizontalScreenLayoutPartialInfo.__name__=["alphaTab","rendering","layout","HorizontalScreenLayoutPartialInfo"],alphaTab.rendering.layout.HorizontalScreenLayoutPartialInfo.prototype={__class__:alphaTab.rendering.layout.HorizontalScreenLayoutPartialInfo},alphaTab.rendering.staves={},alphaTab.rendering.staves.BarLayoutingInfo=function(){this._timeSortedSprings=null,this._xMin=0,this._minTime=0,this._onTimePositionsForce=0,this._onTimePositions=null,this.version=0,this.preBeatSizes=null,this.onBeatSizes=null,this.onBeatCenterX=null,this.preBeatSize=0,this.postBeatSize=0,this.voiceSize=0,this.minStretchForce=0,this.totalSpringConstant=0,this.springs=null;this.preBeatSizes={};this.onBeatSizes={};this.onBeatCenterX={},this.voiceSize=0;this.springs={},this.version=0;this._timeSortedSprings=[],this._minTime=2147483647},alphaTab.rendering.staves.BarLayoutingInfo.__name__=["alphaTab","rendering","staves","BarLayoutingInfo"],alphaTab.rendering.staves.BarLayoutingInfo.prototype={updateVoiceSize:function(size){size>this.voiceSize&&(this.voiceSize=size,this.version++)},setPreBeatSize:function(beat,size){(!this.preBeatSizes.hasOwnProperty(beat.index)||this.preBeatSizes[beat.index]<size)&&(this.preBeatSizes[beat.index]=size,this.version++)},getPreBeatSize:function(beat){return this.preBeatSizes.hasOwnProperty(beat.index)?this.preBeatSizes[beat.index]:0},setOnBeatSize:function(beat,size){(!this.onBeatSizes.hasOwnProperty(beat.index)||this.onBeatSizes[beat.index]<size)&&(this.onBeatSizes[beat.index]=size,this.version++)},getOnBeatSize:function(beat){return this.onBeatSizes.hasOwnProperty(beat.index)?this.onBeatSizes[beat.index]:0},getBeatCenterX:function(beat){return this.onBeatCenterX.hasOwnProperty(beat.index)?this.onBeatCenterX[beat.index]:0},setBeatCenterX:function(beat,x){(!this.onBeatCenterX.hasOwnProperty(beat.index)||this.onBeatCenterX[beat.index]<x)&&(this.onBeatCenterX[beat.index]=x,this.version++)},updateMinStretchForce:function(force){this.minStretchForce<force&&(this.minStretchForce=force,this.version++)},addSpring:function(start,duration,preSpringSize,postSpringSize){var spring;if(this.version++,this.springs.hasOwnProperty(start))(spring=this.springs[start]).postSpringWidth<postSpringSize&&(spring.postSpringWidth=postSpringSize),spring.preSpringWidth<preSpringSize&&(spring.preSpringWidth=preSpringSize),duration<spring.smallestDuration&&(spring.smallestDuration=duration),duration>spring.longestDuration&&(spring.longestDuration=duration),spring.allDurations.push(duration);else{if((spring=new alphaTab.rendering.staves.Spring).timePosition=start,spring.allDurations.push(duration),0<this._timeSortedSprings.length)for(var smallestDuration=duration,previousSpring=this._timeSortedSprings[this._timeSortedSprings.length-1],prevDuration=$iterator(previousSpring.allDurations)();prevDuration.hasNext();){var prevDuration1=prevDuration.next();start<=previousSpring.timePosition+prevDuration1&&prevDuration1<smallestDuration&&(smallestDuration=prevDuration1)}spring.longestDuration=duration,spring.postSpringWidth=postSpringSize,spring.preSpringWidth=preSpringSize,this.springs[start]=spring;for(var timeSorted=this._timeSortedSprings,insertPos=timeSorted.length-1;0<insertPos&&timeSorted[insertPos].timePosition>start;)--insertPos;this._timeSortedSprings.splice(insertPos+1,0,spring)}return this._minTime>start&&(this._minTime=start),spring},addBeatSpring:function(beat,preBeatSize,postBeatSize){var start=beat.get_absoluteDisplayStart();return this.addSpring(start,beat.displayDuration,preBeatSize,postBeatSize)},finish:function(){this.calculateSpringConstants(),this.version++},calculateSpringConstants:function(){this._xMin=0;for(var springs=this.springs,time=$iterator(Object.keys(springs))();time.hasNext();){var spring=springs[time.next()];spring.get_springWidth()<this._xMin&&(this._xMin=spring.get_springWidth())}for(var totalSpringConstant=0,sortedSprings=this._timeSortedSprings,i=0;i<sortedSprings.length;){var duration,currentSpring=sortedSprings[i];if(i==sortedSprings.length-1)duration=currentSpring.longestDuration;else{var nextSpring=sortedSprings[i+1];duration=Math.abs(nextSpring.timePosition-currentSpring.timePosition)}currentSpring.springConstant=this.calculateSpringConstant(currentSpring,duration),totalSpringConstant+=1/currentSpring.springConstant,++i}this.totalSpringConstant=1/totalSpringConstant;for(var i1=0;i1<sortedSprings.length;){var force=sortedSprings[i1].get_springWidth()*sortedSprings[i1].springConstant;this.updateMinStretchForce(force),++i1}},calculateSpringConstant:function(spring,duration){duration<=0&&(duration=alphaTab.audio.MidiUtils.toTicks(64)),0==spring.smallestDuration&&(spring.smallestDuration=duration);return spring.smallestDuration/duration*(1/(10*(1+.6*Math.log2(duration/js.Boot.__cast(30,Float)))))},spaceToForce:function(space){return space*this.totalSpringConstant},calculateVoiceWidth:function(force){return this.calculateWidth(force,this.totalSpringConstant)},calculateWidth:function(force,springConstant){return force/springConstant},buildOnTimePositions:function(force){if(Math.abs(this._onTimePositionsForce-force)<1e-5&&null!=this._onTimePositions)return this._onTimePositions;this._onTimePositionsForce=force;var positions=this._onTimePositions={},sortedSprings=this._timeSortedSprings;if(0==sortedSprings.length)return positions;for(var springX=sortedSprings[0].preSpringWidth,i=0;i<sortedSprings.length;)positions[sortedSprings[i].timePosition]=springX,springX+=this.calculateWidth(force,sortedSprings[i].springConstant),++i;return positions},__class__:alphaTab.rendering.staves.BarLayoutingInfo},alphaTab.rendering.staves.MasterBarsRenderers=function(){this.width=0,this.isLinkedToPrevious=!1,this.canWrap=!1,this.masterBar=null,this.renderers=null,this.layoutingInfo=null;this.renderers=[],this.canWrap=!0},alphaTab.rendering.staves.MasterBarsRenderers.__name__=["alphaTab","rendering","staves","MasterBarsRenderers"],alphaTab.rendering.staves.MasterBarsRenderers.prototype={__class__:alphaTab.rendering.staves.MasterBarsRenderers},alphaTab.rendering.staves.Spring=function(){this.timePosition=0,this.longestDuration=0,this.smallestDuration=0,this.force=0,this.springConstant=0,this.preSpringWidth=0,this.postSpringWidth=0,this.allDurations=null;this.allDurations=[]},alphaTab.rendering.staves.Spring.__name__=["alphaTab","rendering","staves","Spring"],alphaTab.rendering.staves.Spring.prototype={get_springWidth:function(){return this.preSpringWidth+this.postSpringWidth},__class__:alphaTab.rendering.staves.Spring},alphaTab.rendering.staves.Staff=function(trackIndex,staff,factory){this._factory=null,this._sharedLayoutData=null,this.staveTrackGroup=null,this.staveGroup=null,this.barRenderers=null,this.x=0,this.y=0,this.height=0,this.index=0,this.staffIndex=0,this.trackIndex=0,this.modelStaff=null,this.staveTop=0,this.topSpacing=0,this.bottomSpacing=0,this.staveBottom=0,this.isFirstInAccolade=!1,this.isLastInAccolade=!1;this.barRenderers=[],this.trackIndex=trackIndex,this.modelStaff=staff,this._factory=factory,this.topSpacing=20,this.bottomSpacing=5,this.staveTop=0,this.staveBottom=0;this._sharedLayoutData={}},alphaTab.rendering.staves.Staff.__name__=["alphaTab","rendering","staves","Staff"],alphaTab.rendering.staves.Staff.prototype={get_staveId:function(){return this._factory.get_staffId()},getSharedLayoutData:function(key,def){return this._sharedLayoutData.hasOwnProperty(key)?this._sharedLayoutData[key]:def},setSharedLayoutData:function(key,def){this._sharedLayoutData[key]=def},get_isInAccolade:function(){return this._factory.isInAccolade},get_isRelevantForBoundsLookup:function(){return this._factory.isRelevantForBoundsLookup},registerStaffTop:function(offset){this.staveTop=offset},registerStaffBottom:function(offset){this.staveBottom=offset},addBarRenderer:function(renderer){renderer.staff=this,renderer.index=this.barRenderers.length,renderer.reLayout(),this.barRenderers.push(renderer),this.staveGroup.layout.registerBarRenderer(this.get_staveId(),renderer)},addBar:function(bar,layoutingInfo){var renderer;(renderer=null==bar?new alphaTab.rendering.BarRendererBase(this.staveGroup.layout.renderer,bar):this._factory.create(this.staveGroup.layout.renderer,bar)).staff=this,renderer.index=this.barRenderers.length,renderer.layoutingInfo=layoutingInfo,renderer.doLayout(),renderer.registerLayoutingInfo(),this.barRenderers.push(renderer),null!=bar&&this.staveGroup.layout.registerBarRenderer(this.get_staveId(),renderer)},revertLastBar:function(){var lastBar=this.barRenderers[this.barRenderers.length-1],index=this.barRenderers.length-1;return-1!=index&&this.barRenderers.splice(index,1),this.staveGroup.layout.unregisterBarRenderer(this.get_staveId(),lastBar),lastBar},scaleToWidth:function(width){this._sharedLayoutData={};for(var spacePerBar=(width-this.staveGroup.width)/this.barRenderers.length,i=0,j=this.barRenderers.length;i<j;)this.barRenderers[i].scaleToWidth(this.barRenderers[i].width+spacePerBar),++i},get_topOverflow:function(){for(var m=0,i=0,j=this.barRenderers.length;i<j;){var r=this.barRenderers[i];r.topOverflow>m&&(m=r.topOverflow),++i}return m},get_bottomOverflow:function(){for(var m=0,i=0,j=this.barRenderers.length;i<j;){var r=this.barRenderers[i];r.bottomOverflow>m&&(m=r.bottomOverflow),++i}return m},finalizeStaff:function(){var x=0;this.height=0;for(var topOverflow=this.get_topOverflow(),bottomOverflow=this.get_bottomOverflow(),i=0;i<this.barRenderers.length;)this.barRenderers[i].x=x,this.barRenderers[i].y=this.topSpacing+topOverflow,this.height=Math.max(this.height,this.barRenderers[i].height),this.barRenderers[i].finalizeRenderer(),x+=this.barRenderers[i].width,++i;0<this.height&&(this.height=this.height+(this.topSpacing+topOverflow+bottomOverflow+this.bottomSpacing))},paint:function(cx,cy,canvas,startIndex,count){if(0!=this.height&&0!=count)for(var i=startIndex,j=Math.min(startIndex+count,this.barRenderers.length);i<j;)this.barRenderers[i].paint(cx+this.x,cy+this.y,canvas),++i},__class__:alphaTab.rendering.staves.Staff},alphaTab.rendering.staves.StaveGroup=function(){this._allStaves=null,this._firstStaffInAccolade=null,this._lastStaffInAccolade=null,this.x=0,this.y=0,this.index=0,this._accoladeSpacingCalculated=!1,this.accoladeSpacing=0,this.isFull=!1,this.width=0,this.isLast=!1,this.masterBarsRenderers=null,this.staves=null,this.layout=null;this.masterBarsRenderers=[];this.staves=[];this._allStaves=[],this.width=0,this.index=0,this._accoladeSpacingCalculated=!1,this.accoladeSpacing=0},alphaTab.rendering.staves.StaveGroup.__name__=["alphaTab","rendering","staves","StaveGroup"],alphaTab.rendering.staves.StaveGroup.prototype={get_firstBarIndex:function(){return this.masterBarsRenderers[0].masterBar.index},get_lastBarIndex:function(){return this.masterBarsRenderers[this.masterBarsRenderers.length-1].masterBar.index},addMasterBarRenderers:function(tracks,renderers){if(0==tracks.length)return null;this.masterBarsRenderers.push(renderers),this.calculateAccoladeSpacing(tracks);for(var src=renderers.layoutingInfo.preBeatSize=0,i=0,j=this.staves.length;i<j;){for(var g=this.staves[i],k=0,l=g.staves.length;k<l;){var s=g.staves[k],renderer=renderers.renderers[src++];s.addBarRenderer(renderer),++k}++i}return this.updateWidth(),renderers},addBars:function(tracks,barIndex){if(0==tracks.length)return null;var result=new alphaTab.rendering.staves.MasterBarsRenderers;result.layoutingInfo=new alphaTab.rendering.staves.BarLayoutingInfo,result.masterBar=tracks[0].score.masterBars[barIndex],this.masterBarsRenderers.push(result),this.calculateAccoladeSpacing(tracks);for(var barLayoutingInfo=result.layoutingInfo,g=$iterator(this.staves)();g.hasNext();)for(var g1=g.next(),s=$iterator(g1.staves)();s.hasNext();){var s1=s.next(),bar=g1.track.staves[s1.modelStaff.index].bars[barIndex];s1.addBar(bar,barLayoutingInfo);var renderer=s1.barRenderers[s1.barRenderers.length-1];result.renderers.push(renderer),renderer.isLinkedToPrevious&&(result.isLinkedToPrevious=!0),renderer.canWrap||(result.canWrap=!1)}return barLayoutingInfo.finish(),result.width=this.updateWidth(),result},revertLastBar:function(){if(1<this.masterBarsRenderers.length){var toRemove=this.masterBarsRenderers[this.masterBarsRenderers.length-1],index=this.masterBarsRenderers.length-1;-1!=index&&this.masterBarsRenderers.splice(index,1);for(var w=0,i=0,j=this._allStaves.length;i<j;){var lastBar=this._allStaves[i].revertLastBar();w=Math.max(w,lastBar.width),++i}return this.width=this.width-w,toRemove}return null},updateWidth:function(){for(var realWidth=0,i=0,j=this._allStaves.length;i<j;){var s=this._allStaves[i];s.barRenderers[s.barRenderers.length-1].applyLayoutingInfo(),s.barRenderers[s.barRenderers.length-1].width>realWidth&&(realWidth=s.barRenderers[s.barRenderers.length-1].width),++i}return this.width=this.width+realWidth,realWidth},calculateAccoladeSpacing:function(tracks){if(!this._accoladeSpacingCalculated&&0==this.index)if(this._accoladeSpacingCalculated=!0,this.layout.renderer.settings.notation.hideTrackNames)this.accoladeSpacing=0;else{var canvas=this.layout.renderer.canvas,res=this.layout.renderer.settings.display.resources.effectFont;canvas.set_font(res);for(var t=HxOverrides.iter(tracks);t.hasNext();){var t1=t.next(),this1=Math.max(this.accoladeSpacing,canvas.measureText(t1.shortName));this.accoladeSpacing=js.Boot.__cast(Math.ceil(this1),Float)}this.accoladeSpacing=this.accoladeSpacing+20,this.width=this.width+this.accoladeSpacing}},getStaveTrackGroup:function(track){for(var i=0,j=this.staves.length;i<j;){var g=this.staves[i];if(g.track==track)return g;++i}return null},addStaff:function(track,staff){var group=this.getStaveTrackGroup(track);null==group&&(group=new alphaTab.rendering.staves.StaveTrackGroup(this,track),this.staves.push(group)),staff.staveTrackGroup=group,staff.staveGroup=this,staff.index=this._allStaves.length,this._allStaves.push(staff),group.addStaff(staff),staff.get_isInAccolade()&&(null==this._firstStaffInAccolade&&((this._firstStaffInAccolade=staff).isFirstInAccolade=!0),null==group.firstStaffInAccolade&&(group.firstStaffInAccolade=staff),null==this._lastStaffInAccolade&&((this._lastStaffInAccolade=staff).isLastInAccolade=!0),null!=this._lastStaffInAccolade&&(this._lastStaffInAccolade.isLastInAccolade=!1),this._lastStaffInAccolade=staff,this._lastStaffInAccolade.isLastInAccolade=!0,group.lastStaffInAccolade=staff)},get_height:function(){return this._allStaves[this._allStaves.length-1].y+this._allStaves[this._allStaves.length-1].height},scaleToWidth:function(width){for(var i=0,j=this._allStaves.length;i<j;)this._allStaves[i].scaleToWidth(width),++i;this.width=width},paint:function(cx,cy,canvas){this.paintPartial(cx+this.x,cy+this.y,canvas,0,this.masterBarsRenderers.length)},paintPartial:function(cx,cy,canvas,startIndex,count){this.buildBoundingsLookup(cx,cy);for(var i=0,j=this._allStaves.length;i<j;)this._allStaves[i].paint(cx,cy,canvas,startIndex,count),++i;var res=this.layout.renderer.settings.display.resources;if(0<this.staves.length&&0==startIndex){if(canvas.set_color(res.barSeparatorColor),null!=this._firstStaffInAccolade&&null!=this._lastStaffInAccolade){var firstStart=cy+this._firstStaffInAccolade.y+this._firstStaffInAccolade.staveTop+this._firstStaffInAccolade.topSpacing+this._firstStaffInAccolade.get_topOverflow(),lastEnd=cy+this._lastStaffInAccolade.y+this._lastStaffInAccolade.topSpacing+this._lastStaffInAccolade.get_topOverflow()+this._lastStaffInAccolade.staveBottom,acooladeX=cx+this._firstStaffInAccolade.x;canvas.beginPath(),canvas.moveTo(acooladeX,firstStart),canvas.lineTo(acooladeX,lastEnd),canvas.stroke()}canvas.set_font(res.effectFont);for(var i1=0,j1=this.staves.length;i1<j1;){var g=this.staves[i1];if(null!=g.firstStaffInAccolade&&null!=g.lastStaffInAccolade){var firstStart1=cy+g.firstStaffInAccolade.y+g.firstStaffInAccolade.staveTop+g.firstStaffInAccolade.topSpacing+g.firstStaffInAccolade.get_topOverflow(),lastEnd1=cy+g.lastStaffInAccolade.y+g.lastStaffInAccolade.topSpacing+g.lastStaffInAccolade.get_topOverflow()+g.lastStaffInAccolade.staveBottom,acooladeX1=cx+g.firstStaffInAccolade.x,barSize=3*this.layout.renderer.settings.display.scale,barOffset=barSize,accoladeStart=firstStart1-4*barSize,accoladeEnd=lastEnd1+4*barSize;0!=this.index||this.layout.renderer.settings.notation.hideTrackNames||canvas.fillText(g.track.shortName,cx+10*this.layout.get_scale(),firstStart1),canvas.fillRect(acooladeX1-barOffset-barSize,accoladeStart,barSize,accoladeEnd-accoladeStart);var spikeStartX=acooladeX1-barOffset-barSize,spikeEndX=acooladeX1+2*barSize;canvas.beginPath(),canvas.moveTo(spikeStartX,accoladeStart),canvas.bezierCurveTo(spikeStartX,accoladeStart,spikeStartX,accoladeStart,spikeEndX,accoladeStart-barSize),canvas.bezierCurveTo(acooladeX1,accoladeStart+barSize,spikeStartX,accoladeStart+barSize,spikeStartX,accoladeStart+barSize),canvas.closePath(),canvas.fill(),canvas.beginPath(),canvas.moveTo(spikeStartX,accoladeEnd),canvas.bezierCurveTo(spikeStartX,accoladeEnd,acooladeX1,accoladeEnd,spikeEndX,accoladeEnd+barSize),canvas.bezierCurveTo(acooladeX1,accoladeEnd-barSize,spikeStartX,accoladeEnd-barSize,spikeStartX,accoladeEnd-barSize),canvas.closePath(),canvas.fill()}++i1}}},finalizeGroup:function(){for(var currentY=0,staff=$iterator(this._allStaves)();staff.hasNext();){var staff1=staff.next();staff1.x=this.accoladeSpacing,staff1.y=currentY,staff1.finalizeStaff(),currentY+=staff1.height}},buildBoundingsLookup:function(cx,cy){if(!this.layout.renderer.get_boundsLookup().isFinished&&null!=this._firstStaffInAccolade&&null!=this._lastStaffInAccolade){var lastStaff=this._allStaves[this._allStaves.length-1],visualTop=cy+this.y+this._firstStaffInAccolade.y,visualBottom=cy+this.y+this._lastStaffInAccolade.y+this._lastStaffInAccolade.height,realTop=cy+this.y+this._allStaves[0].y,realBottom=cy+this.y+lastStaff.y+lastStaff.height,lineTop=cy+this.y+this._firstStaffInAccolade.y+this._firstStaffInAccolade.topSpacing+this._firstStaffInAccolade.get_topOverflow()+(0<this._firstStaffInAccolade.barRenderers.length?this._firstStaffInAccolade.barRenderers[0].topPadding:0),visualHeight=visualBottom-visualTop,lineHeight=cy+this.y+lastStaff.y+lastStaff.height-lastStaff.bottomSpacing-lastStaff.get_bottomOverflow()-(0<lastStaff.barRenderers.length?lastStaff.barRenderers[0].bottomPadding:0)-lineTop,realHeight=realBottom-realTop,x=this.x+this._firstStaffInAccolade.x,staveGroupBounds=new alphaTab.rendering.utils.StaveGroupBounds,_tmp=new alphaTab.rendering.utils.Bounds;_tmp.x=cx,_tmp.y=cy+this.y,_tmp.w=this.width,_tmp.h=this.get_height(),staveGroupBounds.visualBounds=_tmp;var _tmp1=new alphaTab.rendering.utils.Bounds;_tmp1.x=cx,_tmp1.y=cy+this.y,_tmp1.w=this.width,_tmp1.h=this.get_height(),staveGroupBounds.realBounds=_tmp1,this.layout.renderer.get_boundsLookup().addStaveGroup(staveGroupBounds);for(var masterBarBoundsLookup={},i=0;i<this.staves.length;){for(var staff=$iterator(this.staves[i].stavesRelevantForBoundsLookup)();staff.hasNext();)for(var staff1=staff.next(),renderer=$iterator(staff1.barRenderers)();renderer.hasNext();){var masterBarBounds,renderer1=renderer.next(),key=renderer1.bar.get_masterBar().index;if(masterBarBoundsLookup.hasOwnProperty(key))masterBarBounds=masterBarBoundsLookup[renderer1.bar.get_masterBar().index];else{(masterBarBounds=new alphaTab.rendering.utils.MasterBarBounds).index=renderer1.bar.get_masterBar().index,masterBarBounds.isFirstOfLine=renderer1.get_isFirstOfLine();var _tmp2=new alphaTab.rendering.utils.Bounds;_tmp2.x=x+renderer1.x,_tmp2.y=realTop,_tmp2.w=renderer1.width,_tmp2.h=realHeight,masterBarBounds.realBounds=_tmp2;var _tmp3=new alphaTab.rendering.utils.Bounds;_tmp3.x=x+renderer1.x,_tmp3.y=visualTop,_tmp3.w=renderer1.width,_tmp3.h=visualHeight,masterBarBounds.visualBounds=_tmp3;var _tmp4=new alphaTab.rendering.utils.Bounds;_tmp4.x=x+renderer1.x,_tmp4.y=lineTop,_tmp4.w=renderer1.width,_tmp4.h=lineHeight,masterBarBounds.lineAlignedBounds=_tmp4,this.layout.renderer.get_boundsLookup().addMasterBar(masterBarBounds),masterBarBoundsLookup[masterBarBounds.index]=masterBarBounds}renderer1.buildBoundingsLookup(masterBarBounds,x,cy+this.y+staff1.y)}++i}}},getBarX:function(index){if(null==this._firstStaffInAccolade||0==this.layout.renderer.tracks.length)return 0;var bar=this.layout.renderer.tracks[0].staves[0].bars[index];return this.layout.getRendererForBar(this._firstStaffInAccolade.get_staveId(),bar).x},__class__:alphaTab.rendering.staves.StaveGroup},alphaTab.rendering.staves.StaveTrackGroup=function(staveGroup,track){this.track=null,this.staveGroup=null,this.staves=null,this.stavesRelevantForBoundsLookup=null,this.firstStaffInAccolade=null,this.lastStaffInAccolade=null,this.staveGroup=staveGroup,this.track=track;this.staves=[];this.stavesRelevantForBoundsLookup=[]},alphaTab.rendering.staves.StaveTrackGroup.__name__=["alphaTab","rendering","staves","StaveTrackGroup"],alphaTab.rendering.staves.StaveTrackGroup.prototype={addStaff:function(staff){this.staves.push(staff),staff.get_isRelevantForBoundsLookup()&&this.stavesRelevantForBoundsLookup.push(staff)},__class__:alphaTab.rendering.staves.StaveTrackGroup},alphaTab.rendering.utils.AccidentalHelper=function(bar){this._bar=null,this._registeredAccidentals=null,this._appliedScoreLines=null,this._appliedScoreLinesByValue=null,this._notesByValue=null,this.maxNoteValueBeat=null,this.minNoteValueBeat=null,this.maxNoteValue=0,this.minNoteValue=0,this._bar=bar;this._registeredAccidentals={};this._appliedScoreLines={};this._appliedScoreLinesByValue={};this._notesByValue={},this.maxNoteValue=-1,this.minNoteValue=-1},alphaTab.rendering.utils.AccidentalHelper.__name__=["alphaTab","rendering","utils","AccidentalHelper"],alphaTab.rendering.utils.AccidentalHelper.prototype={applyAccidental:function(note){var noteValue=this._bar.staff.isPercussion?alphaTab.rendering.utils.PercussionMapper.mapNoteForDisplay(note.get_displayValue()):note.get_displayValue(),quarterBend=note.get_hasQuarterToneOffset(),line=this.registerNoteLine(note,noteValue);return(-1==this.minNoteValue||noteValue<this.minNoteValue)&&(this.minNoteValue=noteValue,this.minNoteValueBeat=note.beat),(-1==this.maxNoteValue||noteValue>this.maxNoteValue)&&(this.maxNoteValue=noteValue,this.maxNoteValueBeat=note.beat),this.getAccidental(line,noteValue,quarterBend)},applyAccidentalForValue:function(relatedBeat,noteValue,quarterBend){this._bar.staff.isPercussion&&(noteValue=alphaTab.rendering.utils.PercussionMapper.mapNoteForDisplay(noteValue));var line=this.registerNoteValueLine(noteValue);return(-1==this.minNoteValue||noteValue<this.minNoteValue)&&(this.minNoteValue=noteValue,this.minNoteValueBeat=relatedBeat),(-1==this.maxNoteValue||noteValue>this.maxNoteValue)&&(this.maxNoteValue=noteValue,this.maxNoteValueBeat=relatedBeat),this.getAccidental(line,noteValue,quarterBend)},getAccidental:function(line,noteValue,quarterBend){var accidentalToSet=0;if(!this._bar.staff.isPercussion){var ksi=this._bar.get_masterBar().keySignature+7,index=noteValue%12,keySignatureAccidental=ksi<7?3:2,hasNoteAccidentalForKeySignature=alphaTab.rendering.utils.AccidentalHelper.KeySignatureLookup[ksi][index],isAccidentalNote=alphaTab.rendering.utils.AccidentalHelper.AccidentalNotes[index];if(quarterBend)accidentalToSet=isAccidentalNote?keySignatureAccidental:1;else{var isAccidentalRegistered=this._registeredAccidentals.hasOwnProperty(line);if(hasNoteAccidentalForKeySignature==isAccidentalNote||isAccidentalRegistered){if(hasNoteAccidentalForKeySignature==isAccidentalNote&&isAccidentalRegistered){delete this._registeredAccidentals[line],accidentalToSet=isAccidentalNote?keySignatureAccidental:1}}else this._registeredAccidentals[line]=!0,accidentalToSet=isAccidentalNote?keySignatureAccidental:1}}if(quarterBend)switch(accidentalToSet){case 1:return 4;case 2:return 5;case 3:return 6}return accidentalToSet},registerNoteLine:function(n,noteValue){var steps=this.calculateNoteLine(noteValue,n.accidentalMode);return this._appliedScoreLines[n.id]=steps,this._notesByValue[noteValue]=n,steps},registerNoteValueLine:function(noteValue){var steps=this.calculateNoteLine(noteValue,0);return this._appliedScoreLinesByValue[noteValue]=steps},calculateNoteLine:function(noteValue,mode){var value=noteValue,ks=this._bar.get_masterBar().keySignature,clef=this._bar.clef,index=value%12,octave=(value/12|0)-1,steps=alphaTab.rendering.utils.AccidentalHelper.OctaveSteps[clef];return steps-=7*octave,steps-=(alphaTab.model.ModelUtils.keySignatureIsSharp(ks)||alphaTab.model.ModelUtils.keySignatureIsNatural(ks)?alphaTab.rendering.utils.AccidentalHelper.SharpNoteSteps:alphaTab.rendering.utils.AccidentalHelper.FlatNoteSteps)[index]},getNoteLine:function(n){return this._appliedScoreLines[n.id]},getNoteLineForValue:function(rawValue,searchForNote){return null==searchForNote&&(searchForNote=!1),this._appliedScoreLinesByValue.hasOwnProperty(rawValue)?this._appliedScoreLinesByValue[rawValue]:searchForNote&&this._notesByValue.hasOwnProperty(rawValue)?this.getNoteLine(this._notesByValue[rawValue]):0},__class__:alphaTab.rendering.utils.AccidentalHelper},alphaTab.rendering.utils.BarBounds=$hx_exports.alphaTab.rendering.utils.BarBounds=function(){this.masterBarBounds=null,this.visualBounds=null,this.realBounds=null,this.bar=null,this.beats=null;this.beats=[]},alphaTab.rendering.utils.BarBounds.__name__=["alphaTab","rendering","utils","BarBounds"],alphaTab.rendering.utils.BarBounds.prototype={addBeat:function(bounds){(bounds.barBounds=this).beats.push(bounds),this.masterBarBounds.addBeat(bounds)},findBeatAtPos:function(x){for(var beat=null,t=$iterator(this.beats)();t.hasNext();){var t1=t.next();if(null==beat||t1.realBounds.x<x)beat=t1;else if(t1.realBounds.x>x)break}return beat},__class__:alphaTab.rendering.utils.BarBounds},alphaTab.rendering.utils.BarHelpers=function(bar){this.beamHelpers=null,this.beamHelperLookup=null;this.beamHelpers=[];this.beamHelperLookup=[];var currentBeamHelper=null,currentGraceBeamHelper=null;if(null!=bar)for(var i=0,j=bar.voices.length;i<j;){var v=bar.voices[i];this.beamHelpers.push([]);this.beamHelperLookup.push({});for(var k=0,l=v.beats.length;k<l;){var helperForBeat,b=v.beats[k];0!=b.graceType?helperForBeat=currentGraceBeamHelper:(helperForBeat=currentBeamHelper,currentGraceBeamHelper=null),b.get_isRest()||null!=helperForBeat&&helperForBeat.checkBeat(b)||(null!=helperForBeat&&helperForBeat.finish(),(helperForBeat=new alphaTab.rendering.utils.BeamingHelper(bar.staff)).checkBeat(b),0!=b.graceType?currentGraceBeamHelper=helperForBeat:currentBeamHelper=helperForBeat,this.beamHelpers[v.index].push(helperForBeat)),this.beamHelperLookup[v.index][b.index]=helperForBeat,++k}null!=currentBeamHelper&&currentBeamHelper.finish(),null!=currentGraceBeamHelper&&currentGraceBeamHelper.finish(),currentGraceBeamHelper=currentBeamHelper=null,++i}},alphaTab.rendering.utils.BarHelpers.__name__=["alphaTab","rendering","utils","BarHelpers"],alphaTab.rendering.utils.BarHelpers.prototype={getBeamingHelperForBeat:function(beat){return this.beamHelperLookup[beat.voice.index][beat.index]},__class__:alphaTab.rendering.utils.BarHelpers},alphaTab.rendering.utils._BeamDirection={},alphaTab.rendering.utils._BeamDirection.BeamDirection_Impl_={},alphaTab.rendering.utils._BeamDirection.BeamDirection_Impl_.__name__=["alphaTab","rendering","utils","_BeamDirection","BeamDirection_Impl_"],alphaTab.rendering.utils._BeamDirection.BeamDirection_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.rendering.utils._BeamDirection.BeamDirection_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.rendering.utils._BeamDirection.BeamDirection_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.rendering.utils._BeamDirection.BeamDirection_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.rendering.utils._BeamDirection.BeamDirection_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.rendering.utils._BeamDirection.BeamDirection_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.rendering.utils._BeamDirection.BeamDirection_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.rendering.utils._BeamDirection.BeamDirection_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.rendering.utils._BeamDirection.BeamDirection_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.rendering.utils._BeamDirection.BeamDirection_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.rendering.utils._BeamDirection.BeamDirection_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.rendering.utils._BeamDirection.BeamDirection_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.rendering.utils._BeamDirection.BeamDirection_Impl_.toString=function(this1){switch(this1){case 0:return"Up";case 1:return"Down"}return""},alphaTab.rendering.utils._BeamDirection.BeamDirection_Impl_.fromString=function(str){switch(str.toLowerCase()){case"down":return 1;case"up":return 0}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.rendering.utils.BeamingHelper=function(staff){this._staff=null,this._beatLineXPositions=null,this.voice=null,this.beats=null,this.shortestDuration=-4,this.fingeringCount=0,this.hasTuplet=!1,this.firstMinNoteValue=0,this.firstMaxNoteValue=0,this.lastMinNoteValue=0,this.lastMaxNoteValue=0,this.minNoteValue=0,this.minNoteBeat=null,this.maxNoteValue=0,this.maxNoteBeat=null,this.invertBeamDirection=!1,this.isGrace=!1,this.direction=0,this._staff=staff;this.beats=[];this._beatLineXPositions={},this.shortestDuration=-4,this.maxNoteValue=-2147483648,this.minNoteValue=-2147483648,this.firstMinNoteValue=-2147483648,this.firstMaxNoteValue=-2147483648,this.lastMinNoteValue=-2147483648,this.lastMaxNoteValue=-2147483648},alphaTab.rendering.utils.BeamingHelper.__name__=["alphaTab","rendering","utils","BeamingHelper"],alphaTab.rendering.utils.BeamingHelper.canJoin=function(b1,b2){if(null==b1||null==b2||b1.get_isRest()||b2.get_isRest()||b1.graceType!=b2.graceType||3==b1.graceType||3==b2.graceType)return!1;if(0!=b1.graceType&&0!=b2.graceType)return!0;var m1=b1.voice.bar;if(m1!=b1.voice.bar)return!1;var start1=b1.playbackStart,start2=b2.playbackStart;if(!alphaTab.rendering.utils.BeamingHelper.canJoinDuration(b1.duration)||!alphaTab.rendering.utils.BeamingHelper.canJoinDuration(b2.duration))return start1==start2;if(b1.tupletGroup!=b2.tupletGroup)return!1;if(b1.get_hasTuplet()&&b2.get_hasTuplet()&&b1.tupletGroup==b2.tupletGroup&&b1.tupletGroup.isFull)return!0;var divisionLength=960;return 8==m1.get_masterBar().timeSignatureDenominator&&m1.get_masterBar().timeSignatureNumerator%3==0&&(divisionLength+=480),((divisionLength+start1)/divisionLength|0)==((divisionLength+start2)/divisionLength|0)},alphaTab.rendering.utils.BeamingHelper.canJoinDuration=function(d){switch(d){case 1:case 2:case 4:return!1;default:return!0}},alphaTab.rendering.utils.BeamingHelper.isFullBarJoin=function(a,b,barIndex){return 0<alphaTab.model.ModelUtils.getIndex(a.duration)-2-barIndex&&0<alphaTab.model.ModelUtils.getIndex(b.duration)-2-barIndex},alphaTab.rendering.utils.BeamingHelper.prototype={getValue:function(n){return this._staff.isPercussion?alphaTab.rendering.utils.PercussionMapper.mapNoteForDisplay(n.get_displayValue()):n.get_displayValue()},getMaxValue:function(n){var value=this.getValue(n);return 0!=n.harmonicType&&1!=n.harmonicType&&(value=n.get_realValue()-this._staff.displayTranspositionPitch),value},getMinValue:function(n){return this.getValue(n)},getBeatLineX:function(beat){return this.hasBeatLineX(beat)?0==this.direction?system.Convert.toInt32_Single(this._beatLineXPositions[beat.index].up):system.Convert.toInt32_Single(this._beatLineXPositions[beat.index].down):0},hasBeatLineX:function(beat){return this._beatLineXPositions.hasOwnProperty(beat.index)},registerBeatLineX:function(staffId,beat,up,down){var positions=this.getOrCreateBeatPositions(beat);positions.staffId=staffId,positions.up=up,positions.down=down},getOrCreateBeatPositions:function(beat){return this._beatLineXPositions.hasOwnProperty(beat.index)?this._beatLineXPositions[beat.index]:this._beatLineXPositions[beat.index]=new alphaTab.rendering.utils.BeatLinePositions},finish:function(){this.direction=this.calculateDirection()},calculateDirection:function(){if(0<this.voice.index)return this.invert(1);if(1<this.voice.bar.voices.length)for(var v=1;v<this.voice.bar.voices.length;){if(!this.voice.bar.voices[v].isEmpty)return this.invert(0);++v}if(0!=this.beats[0].graceType)return this.invert(0);var avg=(this.maxNoteValue+this.minNoteValue)/2|0;return this.invert(avg<alphaTab.rendering.utils.BeamingHelper.ScoreMiddleKeys[this.beats[this.beats.length-1].voice.bar.clef]?0:1)},invert:function(direction){if(!this.invertBeamDirection)return direction;switch(direction){case 0:return 1;case 1:return 0}return 0},checkBeat:function(beat){beat.invertBeamDirection&&(this.invertBeamDirection=!0),null==this.voice&&(this.voice=beat.voice);var add=!1;if((0==this.beats.length||alphaTab.rendering.utils.BeamingHelper.canJoin(this.beats[this.beats.length-1],beat))&&(add=!0),add){this.beats.push(beat),0!=beat.graceType&&(this.isGrace=!0);var positions=this.getOrCreateBeatPositions(beat);beat.get_hasTuplet()&&(this.hasTuplet=!0);for(var fingeringCount=0,n=0;n<beat.notes.length;){var note=beat.notes[n];-2==note.leftHandFinger&&-2==note.rightHandFinger||++fingeringCount,++n}fingeringCount>this.fingeringCount&&(this.fingeringCount=fingeringCount),this.lastMinNoteValue=-2147483648,this.lastMaxNoteValue=-2147483648,this.checkNote(beat.minNote),this.checkNote(beat.maxNote),positions.minNoteValue=this.lastMinNoteValue,positions.maxNoteValue=this.lastMaxNoteValue,this.shortestDuration<beat.duration&&(this.shortestDuration=beat.duration),beat.get_hasTuplet()&&(this.hasTuplet=!0)}return add},checkNote:function(note){var value=this.getValue(note);1==this.beats.length&&this.beats[0]==note.beat&&((-2147483648==this.firstMinNoteValue||value<this.firstMinNoteValue)&&(this.firstMinNoteValue=value),(-2147483648==this.firstMaxNoteValue||value>this.firstMaxNoteValue)&&(this.firstMaxNoteValue=value)),(-2147483648==this.lastMinNoteValue||value<this.lastMinNoteValue)&&(this.lastMinNoteValue=value),(-2147483648==this.lastMaxNoteValue||value>this.lastMaxNoteValue)&&(this.lastMaxNoteValue=value);var minValue=this.getMinValue(note);(-2147483648==this.minNoteValue||this.minNoteValue>minValue)&&(this.minNoteValue=minValue,this.minNoteBeat=note.beat);var maxValue=this.getMaxValue(note);(-2147483648==this.maxNoteValue||this.maxNoteValue<maxValue)&&(this.maxNoteValue=maxValue,this.maxNoteBeat=note.beat)},calculateBeamY:function(stemSize,xCorrection,xPosition,scale,yPosition){return this.calculateBeamYWithDirection(stemSize,xCorrection,xPosition,scale,yPosition,this.direction)},calculateBeamYWithDirection:function(stemSize,xCorrection,xPosition,scale,yPosition,direction){if(1==this.beats.length)return 0==direction?yPosition.getYPositionForNoteValue(this.maxNoteValue)-stemSize:yPosition.getYPositionForNoteValue(this.minNoteValue)+stemSize;var maxDistance=10*scale;if(1==direction&&this.minNoteBeat!=this.beats[0]&&this.minNoteBeat!=this.beats[this.beats.length-1])return yPosition.getYPositionForNoteValue(this.minNoteValue)+stemSize;if(0==direction&&this.maxNoteBeat!=this.beats[0]&&this.minNoteBeat!=this.beats[this.beats.length-1])return yPosition.getYPositionForNoteValue(this.maxNoteValue)-stemSize;var startX=this.getBeatLineX(this.beats[0])+xCorrection,startY=0==direction?yPosition.getYPositionForNoteValue(this.firstMaxNoteValue)-stemSize:yPosition.getYPositionForNoteValue(this.firstMinNoteValue)+stemSize,endX=this.getBeatLineX(this.beats[this.beats.length-1])+xCorrection,endY=0==direction?yPosition.getYPositionForNoteValue(this.lastMaxNoteValue)-stemSize:yPosition.getYPositionForNoteValue(this.lastMinNoteValue)+stemSize;return 1==direction&&endY<startY&&maxDistance<startY-endY&&(endY=startY-maxDistance),1==direction&&startY<endY&&maxDistance<endY-startY&&(startY=endY-maxDistance),0==direction&&startY<endY&&maxDistance<endY-startY&&(endY=startY+maxDistance),0==direction&&endY<startY&&maxDistance<startY-endY&&(startY=endY+maxDistance),startX==endX?startY:(endY-startY)/(endX-startX)*(xPosition-startX)+startY},isPositionFrom:function(staffId,beat){return!this._beatLineXPositions.hasOwnProperty(beat.index)||(this._beatLineXPositions[beat.index].staffId==staffId||null==this._beatLineXPositions[beat.index].staffId)},getBeatMinValue:function(beat){return this._beatLineXPositions.hasOwnProperty(beat.index)?this._beatLineXPositions[beat.index].minNoteValue:beat.minNote.get_displayValue()},getBeatMaxValue:function(beat){return this._beatLineXPositions.hasOwnProperty(beat.index)?this._beatLineXPositions[beat.index].maxNoteValue:beat.maxNote.get_displayValue()},__class__:alphaTab.rendering.utils.BeamingHelper},alphaTab.rendering.utils.BeatBounds=$hx_exports.alphaTab.rendering.utils.BeatBounds=function(){this.barBounds=null,this.visualBounds=null,this.realBounds=null,this.beat=null,this.notes=null},alphaTab.rendering.utils.BeatBounds.__name__=["alphaTab","rendering","utils","BeatBounds"],alphaTab.rendering.utils.BeatBounds.prototype={addNote:function(bounds){if(null==this.notes){this.notes=[]}this.notes.push(bounds)},findNoteAtPos:function(x,y){if(null==this.notes)return null;for(var note=$iterator(this.notes)();note.hasNext();){var note1=note.next(),bottom=note1.noteHeadBounds.y+note1.noteHeadBounds.h,right=note1.noteHeadBounds.x+note1.noteHeadBounds.w;if(note1.noteHeadBounds.x>=x&&note1.noteHeadBounds.y>=y&&x<=right&&y<=bottom)return note1.note}return null},__class__:alphaTab.rendering.utils.BeatBounds},alphaTab.rendering.utils.BeatLinePositions=function(){this.staffId=null,this.up=0,this.down=0,this.minNoteValue=0,this.maxNoteValue=0},alphaTab.rendering.utils.BeatLinePositions.__name__=["alphaTab","rendering","utils","BeatLinePositions"],alphaTab.rendering.utils.BeatLinePositions.prototype={__class__:alphaTab.rendering.utils.BeatLinePositions},alphaTab.rendering.utils.Bounds=$hx_exports.alphaTab.rendering.utils.Bounds=function(){this.x=0,this.y=0,this.w=0,this.h=0},alphaTab.rendering.utils.Bounds.__name__=["alphaTab","rendering","utils","Bounds"],alphaTab.rendering.utils.Bounds.prototype={__class__:alphaTab.rendering.utils.Bounds},alphaTab.rendering.utils.BoundsLookup=$hx_exports.alphaTab.rendering.utils.BoundsLookup=function(){this._beatLookup=null,this._masterBarLookup=null,this._currentStaveGroup=null,this.staveGroups=null,this.isFinished=!1;this.staveGroups=[];this._beatLookup={};this._masterBarLookup={}},alphaTab.rendering.utils.BoundsLookup.__name__=["alphaTab","rendering","utils","BoundsLookup"],alphaTab.rendering.utils.BoundsLookup.fromJson=function(json,score){for(var lookup=new alphaTab.rendering.utils.BoundsLookup,staveGroup=$iterator(json.staveGroups)();staveGroup.hasNext();){var staveGroup1=staveGroup.next(),sg=new alphaTab.rendering.utils.StaveGroupBounds;sg.visualBounds=staveGroup1.visualBounds,sg.realBounds=staveGroup1.realBounds,lookup.addStaveGroup(sg);for(var masterBar=$iterator(staveGroup1.bars)();masterBar.hasNext();){var masterBar1=masterBar.next(),mb=new alphaTab.rendering.utils.MasterBarBounds;mb.index=masterBar1.index,mb.isFirstOfLine=masterBar1.isFirstOfLine,mb.lineAlignedBounds=masterBar1.lineAlignedBounds,mb.visualBounds=masterBar1.visualBounds,mb.realBounds=masterBar1.realBounds,sg.addBar(mb);for(var bar=$iterator(masterBar1.bars)();bar.hasNext();){var bar1=bar.next(),b=new alphaTab.rendering.utils.BarBounds;b.visualBounds=bar1.visualBounds,b.realBounds=bar1.realBounds,mb.addBar(b);for(var beat=$iterator(bar1.beats)();beat.hasNext();){var beat1=beat.next(),bb=new alphaTab.rendering.utils.BeatBounds;bb.visualBounds=beat1.visualBounds,bb.realBounds=beat1.realBounds;if(bb.beat=score.tracks[beat1.trackIndex].staves[beat1.staffIndex].bars[beat1.barIndex].voices[beat1.voiceIndex].beats[beat1.beatIndex],null!=beat1.notes){bb.notes=[];for(var note=$iterator(beat1.notes)();note.hasNext();){var note1=note.next(),n=new alphaTab.rendering.utils.NoteBounds,nd=note1;n.note=bb.beat.notes[nd.index],n.noteHeadBounds=note1.noteHeadBounds,bb.addNote(n)}}b.addBeat(bb)}}}}return lookup},alphaTab.rendering.utils.BoundsLookup.prototype={toJson:function(){var json={},staveGroups=[];json.staveGroups=staveGroups;for(var group=$iterator(this.staveGroups)();group.hasNext();){var group1=group.next(),g={};g.visualBounds=this.boundsToJson(group1.visualBounds),g.realBounds=this.boundsToJson(group1.realBounds);g.bars=[];for(var masterBar=$iterator(group1.bars)();masterBar.hasNext();){var masterBar1=masterBar.next(),mb={};mb.lineAlignedBounds=this.boundsToJson(masterBar1.lineAlignedBounds),mb.visualBounds=this.boundsToJson(masterBar1.visualBounds),mb.realBounds=this.boundsToJson(masterBar1.realBounds),mb.index=masterBar1.index;mb.bars=[];for(var bar=$iterator(masterBar1.bars)();bar.hasNext();){var bar1=bar.next(),b={};b.visualBounds=this.boundsToJson(bar1.visualBounds),b.realBounds=this.boundsToJson(bar1.realBounds);b.beats=[];for(var beat=$iterator(bar1.beats)();beat.hasNext();){var beat1=beat.next(),bb={};bb.visualBounds=this.boundsToJson(beat1.visualBounds),bb.realBounds=this.boundsToJson(beat1.realBounds);var bbd=bb;if(bbd.beatIndex=beat1.beat.index,bbd.voiceIndex=beat1.beat.voice.index,bbd.barIndex=beat1.beat.voice.bar.index,bbd.staffIndex=beat1.beat.voice.bar.staff.index,bbd.trackIndex=beat1.beat.voice.bar.staff.track.index,null!=beat1.notes)for(var notes=bb.notes=[],note=$iterator(beat1.notes)();note.hasNext();){var note1=note.next(),n={};n.index=note1.note.index,n.noteHeadBounds=this.boundsToJson(note1.noteHeadBounds),notes.push(n)}b.beats.push(bb)}mb.bars.push(b)}g.bars.push(mb)}staveGroups.push(g)}return json},boundsToJson:function(bounds){var json={};return json.x=bounds.x,json.y=bounds.y,json.w=bounds.w,json.h=bounds.h,json},finish:function(){for(var t=$iterator(this.staveGroups)();t.hasNext();){t.next().finish()}this.isFinished=!0},addNote:function(bounds){this.findBeat(bounds.note.beat).addNote(bounds)},addStaveGroup:function(bounds){bounds.index=this.staveGroups.length,(bounds.boundsLookup=this).staveGroups.push(bounds),this._currentStaveGroup=bounds},addMasterBar:function(bounds){null==bounds.staveGroupBounds?(bounds.staveGroupBounds=this._currentStaveGroup,this._masterBarLookup[bounds.index]=bounds,this._currentStaveGroup.addBar(bounds)):this._masterBarLookup[bounds.index]=bounds},addBeat:function(bounds){this._beatLookup[bounds.beat.id]=bounds},findMasterBarByIndex:function(index){return this._masterBarLookup.hasOwnProperty(index)?this._masterBarLookup[index]:null},findMasterBar:function(bar){var id=bar.index;return this._masterBarLookup.hasOwnProperty(id)?this._masterBarLookup[id]:null},findBeat:function(beat){var id=beat.id;return this._beatLookup.hasOwnProperty(id)?this._beatLookup[id]:null},getBeatAtPos:function(x,y){for(var bottom=0,top=this.staveGroups.length-1,staveGroupIndex=-1;bottom<=top;){var middle=(top+bottom)/2|0,group=this.staveGroups[middle];if(y>=group.realBounds.y&&y<=group.realBounds.y+group.realBounds.h){staveGroupIndex=middle;break}y<group.realBounds.y?top=middle-1:bottom=1+middle}if(-1==staveGroupIndex)return null;var bar=this.staveGroups[staveGroupIndex].findBarAtPos(x);return null!=bar?bar.findBeatAtPos(x,y):null},getNoteAtPos:function(beat,x,y){var beatBounds=this.findBeat(beat);return null==beatBounds?null:(x-=beatBounds.barBounds.masterBarBounds.staveGroupBounds.realBounds.x,y-=beatBounds.barBounds.masterBarBounds.staveGroupBounds.realBounds.y,beatBounds.findNoteAtPos(x,y))},__class__:alphaTab.rendering.utils.BoundsLookup},alphaTab.rendering.utils.MasterBarBounds=$hx_exports.alphaTab.rendering.utils.MasterBarBounds=function(){this.index=0,this.isFirstOfLine=!1,this.visualBounds=null,this.realBounds=null,this.lineAlignedBounds=null,this.bars=null,this.staveGroupBounds=null;this.bars=[]},alphaTab.rendering.utils.MasterBarBounds.__name__=["alphaTab","rendering","utils","MasterBarBounds"],alphaTab.rendering.utils.MasterBarBounds.prototype={addBar:function(bounds){(bounds.masterBarBounds=this).bars.push(bounds)},findBeatAtPos:function(x,y){for(var beat=null,bar=$iterator(this.bars)();bar.hasNext();){var b=bar.next().findBeatAtPos(x);null!=b&&(null==beat||beat.realBounds.x<b.realBounds.x)&&(beat=b)}return null==beat?null:beat.beat},finish:function(){this.bars.sort(function(a1,b1){return b=b1,(a=a1).realBounds.y<b.realBounds.y?-1:a.realBounds.y>b.realBounds.y?1:a.realBounds.x<b.realBounds.x?-1:a.realBounds.x>b.realBounds.x?1:0;var a,b})},addBeat:function(bounds){this.staveGroupBounds.boundsLookup.addBeat(bounds)},__class__:alphaTab.rendering.utils.MasterBarBounds},alphaTab.rendering.utils.NoteBounds=$hx_exports.alphaTab.rendering.utils.NoteBounds=function(){this.noteHeadBounds=null,this.note=null},alphaTab.rendering.utils.NoteBounds.__name__=["alphaTab","rendering","utils","NoteBounds"],alphaTab.rendering.utils.NoteBounds.prototype={__class__:alphaTab.rendering.utils.NoteBounds},alphaTab.rendering.utils.PercussionMapper=function(){},alphaTab.rendering.utils.PercussionMapper.__name__=["alphaTab","rendering","utils","PercussionMapper"],alphaTab.rendering.utils.PercussionMapper.midiFromElementVariation=function(note){return alphaTab.rendering.utils.PercussionMapper.ElementVariationToMidi[note.element][note.variation]},alphaTab.rendering.utils.PercussionMapper.mapNoteForDisplay=function(value){return 61==value||66==value||44==value?62:60==value||65==value?64:35<=value&&value<=36?65:41==value||64==value?67:43==value||62==value?69:45==value||63==value?71:47==value||54==value?74:48==value||56==value?76:50==value?77:42==value||46==value||49<=value&&value<=53||57==value||59==value?79:72},alphaTab.rendering.utils.PercussionMapper.prototype={__class__:alphaTab.rendering.utils.PercussionMapper},alphaTab.rendering.utils.StaveGroupBounds=$hx_exports.alphaTab.rendering.utils.StaveGroupBounds=function(){this.index=0,this.visualBounds=null,this.realBounds=null,this.bars=null,this.boundsLookup=null;this.bars=[],this.index=0},alphaTab.rendering.utils.StaveGroupBounds.__name__=["alphaTab","rendering","utils","StaveGroupBounds"],alphaTab.rendering.utils.StaveGroupBounds.prototype={finish:function(){for(var t=$iterator(this.bars)();t.hasNext();){t.next().finish()}},addBar:function(bounds){this.boundsLookup.addMasterBar(bounds),(bounds.staveGroupBounds=this).bars.push(bounds)},findBarAtPos:function(x){for(var b=null,bar=$iterator(this.bars)();bar.hasNext();){var bar1=bar.next();if(null==b||bar1.realBounds.x<x)b=bar1;else if(x>bar1.realBounds.x+bar1.realBounds.w)break}return b},__class__:alphaTab.rendering.utils.StaveGroupBounds},alphaTab.ui={},alphaTab.ui.IMouseEventArgs=$hx_exports.alphaTab.ui.IMouseEventArgs=function(){},alphaTab.ui.IMouseEventArgs.__name__=["alphaTab","ui","IMouseEventArgs"],alphaTab.ui.IMouseEventArgs.prototype={__class__:alphaTab.ui.IMouseEventArgs},alphaTab.ui.BrowserMouseEventArgs=function(e){this._e=null,this._e=e},alphaTab.ui.BrowserMouseEventArgs.__name__=["alphaTab","ui","BrowserMouseEventArgs"],alphaTab.ui.BrowserMouseEventArgs.__interfaces__=[alphaTab.ui.IMouseEventArgs],alphaTab.ui.BrowserMouseEventArgs.prototype={get_isLeftMouseButton:function(){return 0==this._e.button},getX:function(relativeTo){var relativeToElement=js.Boot.__cast(relativeTo,alphaTab.ui.HtmlElementContainer).element,left=relativeToElement.getBoundingClientRect().left+relativeToElement.ownerDocument.defaultView.pageXOffset;return this._e.pageX-left},getY:function(relativeTo){var relativeToElement=js.Boot.__cast(relativeTo,alphaTab.ui.HtmlElementContainer).element,top=relativeToElement.getBoundingClientRect().top+relativeToElement.ownerDocument.defaultView.pageYOffset;return this._e.pageY-top},preventDefault:function(){this._e.preventDefault()},__class__:alphaTab.ui.BrowserMouseEventArgs},alphaTab.ui.IUiFacade=$hx_exports.alphaTab.ui.IUiFacade=function(){},alphaTab.ui.IUiFacade.__name__=["alphaTab","ui","IUiFacade"],alphaTab.ui.IUiFacade.prototype={__class__:alphaTab.ui.IUiFacade},alphaTab.ui.BrowserUiFacade=function(rootElement){this._fontCheckers=null,this._api=null,this._contents=null,this._file=null,this._visibilityCheckIntervalId=0,this._visibilityCheckInterval=0,this._totalResultCount=0,this._initialTrackIndexes=null,this.__RootContainer=null,this.__AreWorkersSupported=!1;this._fontCheckers={},rootElement.classList.add("alphaTab"),this.__RootContainer=new alphaTab.ui.HtmlElementContainer(rootElement);var workersUnsupported=!window.Worker;this.__AreWorkersSupported=!workersUnsupported,alphaTab.Environment.bravuraFontChecker.addFontLoaded($bind(this,this.onFontLoaded))},alphaTab.ui.BrowserUiFacade.__name__=["alphaTab","ui","BrowserUiFacade"],alphaTab.ui.BrowserUiFacade.__interfaces__=[alphaTab.ui.IUiFacade],alphaTab.ui.BrowserUiFacade.prototype={add_rootContainerBecameVisible:function(value){this._rootContainerBecameVisible=system._EventAction.EventAction_Impl_.add(this._rootContainerBecameVisible,value)},remove_rootContainerBecameVisible:function(value){this._rootContainerBecameVisible=system._EventAction.EventAction_Impl_.sub(this._rootContainerBecameVisible,value)},get_resizeThrottle:function(){return 10},get_rootContainer:function(){return this.__RootContainer},get_areWorkersSupported:function(){return this.__AreWorkersSupported},get_canRender:function(){return this.areAllFontsLoaded()},areAllFontsLoaded:function(){if(!alphaTab.Environment.bravuraFontChecker.isFontLoaded)return!1;for(var this1=this._fontCheckers,font=$iterator(Object.keys(this1))();font.hasNext();){var font1=font.next();if(!this._fontCheckers[font1].isFontLoaded)return!1}var this2=this._fontCheckers;return alphaTab.util.Logger.debug("Font","All fonts loaded: "+Std.string(Object.keys(this2).length),null),!0},addCanRenderChanged:function(value){this.canRenderChanged=system._EventAction.EventAction_Impl_.add(this.canRenderChanged,value)},removeCanRenderChanged:function(value){this.canRenderChanged=system._EventAction.EventAction_Impl_.sub(this.canRenderChanged,value)},onFontLoaded:function(family){if(alphaTab.platform.svg.FontSizes.generateFontLookup(family),this.areAllFontsLoaded()){var _e=this.canRenderChanged,handler=function(){system._EventAction.EventAction_Impl_.invoke(_e)};null!=handler&&handler()}},createWorkerRenderer:function(){return new alphaTab.platform.javaScript.AlphaTabWorkerScoreRenderer(this._api,this._api.settings)},addRootContainerBecameVisible:function(value){var _gthis=this;this.get_rootContainer().get_isVisible()?value():(this.add_rootContainerBecameVisible(value),0==this._visibilityCheckIntervalId&&(this._visibilityCheckIntervalId=window.setInterval(function(){_gthis._api.container.get_isVisible()&&(window.clearInterval(_gthis._visibilityCheckIntervalId),_gthis._visibilityCheckIntervalId=0,null!=_gthis._rootContainerBecameVisible&&system._EventAction.EventAction_Impl_.invoke(_gthis._rootContainerBecameVisible),_gthis._visibilityCheckIntervalId=0)},this._visibilityCheckInterval)))},removeRootContainerBecameVisible:function(value){this.remove_rootContainerBecameVisible(value)},initialize:function(api,raw){this._api=api;var settings=new alphaTab.Settings;settings.fillFromJson(raw);var tracksData,dataAttributes=this.getDataAttributes();settings.fillFromDataAttributes(dataAttributes),1==settings.notation.notationMode&&settings.setSongBookModeSettings(),"default"!=(api.settings=settings).core.engine&&"svg"!=settings.core.engine||(api.container.addScroll($bind(this,this.showSvgsInViewPort)),api.container.addResize($bind(this,this.showSvgsInViewPort))),this.setupFontCheckers(settings);var options=raw;tracksData=null!=options&&options.tracks?options.tracks:dataAttributes.hasOwnProperty("tracks")?dataAttributes.tracks:0,this._initialTrackIndexes=this.parseTracks(tracksData),this._contents="";var element=js.Boot.__cast(api.container,alphaTab.ui.HtmlElementContainer);dataAttributes.hasOwnProperty("tex")&&element.element.innerText&&(this._contents=element.element.innerHTML,element.element.innerHTML=""),this.createStyleElement(settings),options&&options.file?this._file=options.file:dataAttributes.hasOwnProperty("file")&&(this._file=dataAttributes.file),this._visibilityCheckInterval=500,options&&options.visibilityCheckInterval&&(this._visibilityCheckInterval=options.visibilityCheckInterval)},setupFontCheckers:function(settings){this.registerFontChecker(settings.display.resources.copyrightFont),this.registerFontChecker(settings.display.resources.effectFont),this.registerFontChecker(settings.display.resources.fingeringFont),this.registerFontChecker(settings.display.resources.graceFont),this.registerFontChecker(settings.display.resources.markerFont),this.registerFontChecker(settings.display.resources.tablatureFont),this.registerFontChecker(settings.display.resources.titleFont),this.registerFontChecker(settings.display.resources.wordsFont),this.registerFontChecker(settings.display.resources.barNumberFont),this.registerFontChecker(settings.display.resources.fretboardNumberFont),this.registerFontChecker(settings.display.resources.subTitleFont)},registerFontChecker:function(font){if(!this._fontCheckers.hasOwnProperty(font.family)){var checker=new alphaTab.utils.FontLoadingChecker(font.family,null);(this._fontCheckers[font.family]=checker).addFontLoaded($bind(this,this.onFontLoaded)),checker.checkForFontAvailability()}},destroy:function(){js.Boot.__cast(this.__RootContainer,alphaTab.ui.HtmlElementContainer).element.innerHTML=""},createCanvasElement:function(){var canvasElement=window.document.createElement("div");return canvasElement.className="at-surface",canvasElement.style.fontSize="0",canvasElement.style.overflow="hidden",canvasElement.style.lineHeight="0",new alphaTab.ui.HtmlElementContainer(canvasElement)},triggerEvent:function(container,name,details){var element=js.Boot.__cast(container,alphaTab.ui.HtmlElementContainer).element;name="alphaTab."+name;var e=window.document.createEvent("CustomEvent");e.initCustomEvent(name,!1,!1,details),element.dispatchEvent(e);var json=window;json&&"jQuery"in json&&(0,window.jQuery)(element).trigger(name,details)},load:function(data,success,error){return js.Boot.__instanceof(data,alphaTab.model.Score)?(success(data),!0):data instanceof ArrayBuffer?(success(alphaTab.importer.ScoreLoader.loadScoreFromBytes(new Uint8Array(data),this._api.settings)),!0):data instanceof Uint8Array?(success(alphaTab.importer.ScoreLoader.loadScoreFromBytes(data,this._api.settings)),!0):"string"==typeof data&&(alphaTab.importer.ScoreLoader.loadScoreAsync(data,success,error,this._api.settings),!0)},loadSoundFont:function(data){return data instanceof ArrayBuffer?(this._api.player.loadSoundFont(new Uint8Array(data)),!0):data instanceof Uint8Array?(this._api.player.loadSoundFont(data),!0):"string"==typeof data&&(js.Boot.__cast(this._api,alphaTab.platform.javaScript.AlphaTabApi).loadSoundFontFromUrl(data),!0)},initialRender:function(){var _gthis=this;this._api.renderer.addPreRender(function(resize){_gthis._totalResultCount=0}),this.addRootContainerBecameVisible(function(){_gthis._api.renderer.set_width(system.Convert.toInt32_Single(_gthis.get_rootContainer().get_width())),_gthis._api.renderer.updateSettings(_gthis._api.settings);var s=_gthis._contents;if(null!=s&&0!=s.length)_gthis._api.tex(_gthis._contents,_gthis._initialTrackIndexes),_gthis._initialTrackIndexes=null;else{var s1=_gthis._file;null!=s1&&0!=s1.length&&alphaTab.importer.ScoreLoader.loadScoreAsync(_gthis._file,function(s2){_gthis._api.renderScore(s2,_gthis._initialTrackIndexes),_gthis._initialTrackIndexes=null},function(e){_gthis._api.onError("import",e)},_gthis._api.settings)}})},showSvgsInViewPort:function(){for(var placeholders=js.Boot.__cast(this._api.canvasElement,alphaTab.ui.HtmlElementContainer).element.querySelectorAll("[data-lazy=true]"),i=0;i<placeholders.length;){var placeholder=placeholders.item(i);this.isElementInViewPort(placeholder)&&(placeholder.outerHTML=placeholder.svg),++i}},isElementInViewPort:function(element){var rect=element.getBoundingClientRect();return 0<=rect.top+rect.height&&rect.top<=window.innerHeight&&0<=rect.left+rect.width&&rect.left<=window.innerWidth},createStyleElement:function(settings){var elementDocument=js.Boot.__cast(this._api.container,alphaTab.ui.HtmlElementContainer).element.ownerDocument,styleElement=elementDocument.getElementById("alphaTabStyle");if(null==styleElement){var fontDirectory=settings.core.fontDirectory;(styleElement=elementDocument.createElement("style")).id="alphaTabStyle",styleElement.type="text/css";var css="";css+="@font-face {\r\n",css=(css=(css=(css=(css=(css+="    font-family: 'alphaTab';\r\n")+"     src: url('"+fontDirectory+"Bravura.eot');\r\n")+"     src: url('"+fontDirectory+"Bravura.eot?#iefix') format('embedded-opentype')\r\n")+"          , url('"+fontDirectory+"Bravura.woff') format('woff')\r\n")+"          , url('"+fontDirectory+"Bravura.otf') format('opentype')\r\n")+"          , url('"+fontDirectory+"Bravura.svg#Bravura') format('svg');\r\n",css+="     font-weight: normal;\r\n",css+="     font-style: normal;\r\n",css+="}\r\n",css+=".at-surface * {\r\n",css+="    cursor: default;\r\n",css+="    vertical-align: top;\r\n",css+="}\r\n",css+=".at {\r\n",css+="     font-family: 'alphaTab';\r\n",css+="     speak: none;\r\n",css+="     font-style: normal;\r\n",css+="     font-weight: normal;\r\n",css+="     font-variant: normal;\r\n",css+="     text-transform: none;\r\n",css+="     line-height: 1;\r\n",css+="     line-height: 1;\r\n",css+="     -webkit-font-smoothing: antialiased;\r\n",css+="     -moz-osx-font-smoothing: grayscale;\r\n",css+="     font-size: 34px;\r\n",css+="     overflow: visible !important;\r\n",css+="}\r\n",styleElement.innerHTML=css,elementDocument.getElementsByTagName("head").item(0).appendChild(styleElement),alphaTab.Environment.bravuraFontChecker.checkForFontAvailability()}},parseTracks:function(tracksData){if(null==tracksData)return new Int32Array(0);var tracks=[];if("string"==typeof tracksData)try{if("all"==tracksData)return new Int32Array([-1]);tracksData=JSON.parse(tracksData)}catch(__e){tracksData=[0]}if("number"==typeof tracksData)tracks.push(tracksData);else if("length"in tracksData)for(var length=tracksData.length,array=tracksData,i=0;i<length;){var value,item=array[i];(0<=(value="number"==typeof item?item:"index"in item?item.index:alphaTab.platform.Platform.parseIntMinValue(Std.string(item)))||-1==value)&&tracks.push(value),++i}else"index"in tracksData&&tracks.push(tracksData.index);return new Int32Array(tracks)},getDataAttributes:function(){var dataAttributes={},element=js.Boot.__cast(this._api.container,alphaTab.ui.HtmlElementContainer).element;if(element.dataset)for(var json=element.dataset,key=HxOverrides.iter(Object.keys(json));key.hasNext();){var key1=key.next(),value=element.dataset[key1];try{var stringValue=value;value=JSON.parse(stringValue)}catch(__e){""==value&&(value=null)}dataAttributes[key1]=value}else for(var i=0;i<element.attributes.length;){var attr=element.attributes.item(i),nodeName=attr.nodeName;if(StringTools.startsWith(nodeName,"data-")){for(var a=HxOverrides.substr(nodeName,5,null),this3=system.Convert.toUInt16(45),keyParts=system._CsString.CsString_Impl_.split_CharArray(a,[this3]),key2=keyParts[0],j=1;j<keyParts.length;)key2+=HxOverrides.substr(keyParts[j],0,1).toUpperCase()+HxOverrides.substr(keyParts[j],1,null),++j;var value1=attr.nodeValue;try{value1=JSON.parse(value1)}catch(__e1){""==value1&&(value1=null)}dataAttributes[key2]=value1}++i}return dataAttributes},beginAppendRenderResults:function(renderResult){var canvasElement=js.Boot.__cast(this._api.canvasElement,alphaTab.ui.HtmlElementContainer).element;if(null==renderResult){for(;canvasElement.childElementCount>this._totalResultCount;)canvasElement.removeChild(canvasElement.lastChild);this._api.settings.core.enableLazyLoading&&this.showSvgsInViewPort()}else{var placeholder,body=renderResult.renderResult;if("string"==typeof body)if(this._totalResultCount<canvasElement.childElementCount?placeholder=canvasElement.childNodes.item(this._totalResultCount):(placeholder=window.document.createElement("div"),canvasElement.appendChild(placeholder)),placeholder.style.width=Std.string(renderResult.width)+"px",placeholder.style.height=Std.string(renderResult.height)+"px",placeholder.style.display="inline-block",this.isElementInViewPort(placeholder)||!this._api.settings.core.enableLazyLoading){var bodyHtml=body;placeholder.outerHTML=bodyHtml}else placeholder.svg=body,placeholder.setAttribute("data-lazy","true");else this._totalResultCount<canvasElement.childElementCount?canvasElement.replaceChild(renderResult.renderResult,canvasElement.childNodes.item(this._totalResultCount)):canvasElement.appendChild(renderResult.renderResult);this._totalResultCount++}},createWorkerPlayer:function(){var _gthis=this,supportsWebAudio=!!window.ScriptProcessorNode,supportsWebWorkers=!!window.Worker,forceFlash=!!window.ForceFlash,alphaSynthScriptFile=alphaTab.Environment.scriptFile,player=null;return supportsWebAudio&&!forceFlash?(alphaTab.util.Logger.info("Player","Will use webworkers for synthesizing and web audio api for playback",null),player=new alphaTab.platform.javaScript.AlphaSynthWebWorkerApi(new alphaTab.platform.javaScript.AlphaSynthWebAudioOutput,alphaSynthScriptFile,this._api.settings.core.logLevel)):supportsWebWorkers&&(alphaTab.util.Logger.info("Player","Will use webworkers for synthesizing and flash for playback",null),player=new alphaTab.platform.javaScript.AlphaSynthWebWorkerApi(new alphaTab.platform.javaScript.AlphaSynthFlashOutput(alphaSynthScriptFile),alphaSynthScriptFile,this._api.settings.core.logLevel)),null==player?alphaTab.util.Logger.error("Player","Player requires webworkers and web audio api or flash, browser unsupported",null):player.addReady(function(){var s=_gthis._api.settings.player.soundFont;null!=s&&0!=s.length&&js.Boot.__cast(_gthis._api,alphaTab.platform.javaScript.AlphaTabApi).loadSoundFontFromUrl(_gthis._api.settings.player.soundFont)}),player},beginInvoke:function(action){window.requestAnimationFrame(function(f){action()})},highlightElements:function(groupId){for(var elementsToHighlight=js.Boot.__cast(this._api.container,alphaTab.ui.HtmlElementContainer).element.getElementsByClassName(groupId),i=0;i<elementsToHighlight.length;)elementsToHighlight.item(i).classList.add("at-highlight"),++i},removeHighlights:function(){for(var elements=js.Boot.__cast(this._api.container,alphaTab.ui.HtmlElementContainer).element.getElementsByClassName("at-highlight");0<elements.length;)elements.item(0).classList.remove("at-highlight")},destroyCursors:function(){var element=js.Boot.__cast(this._api.container,alphaTab.ui.HtmlElementContainer).element,cursorWrapper=element.querySelector(".at-cursors");element.removeChild(cursorWrapper)},createCursors:function(){var element=js.Boot.__cast(this._api.container,alphaTab.ui.HtmlElementContainer).element,cursorWrapper=window.document.createElement("div");cursorWrapper.classList.add("at-cursors");var selectionWrapper=window.document.createElement("div");selectionWrapper.classList.add("at-selection");var barCursor=window.document.createElement("div");barCursor.classList.add("at-cursor-bar");var beatCursor=window.document.createElement("div");return beatCursor.classList.add("at-cursor-beat"),element.style.position="relative",element.style.textAlign="left",cursorWrapper.style.position="absolute",cursorWrapper.style.zIndex="1000",cursorWrapper.style.display="inline",cursorWrapper.style.pointerEvents="none",selectionWrapper.style.position="absolute",barCursor.style.position="absolute",beatCursor.style.position="absolute",beatCursor.style.transition="all 0s linear",element.insertBefore(cursorWrapper,element.firstChild),cursorWrapper.appendChild(selectionWrapper),cursorWrapper.appendChild(barCursor),cursorWrapper.appendChild(beatCursor),new alphaTab.ui.Cursors(new alphaTab.ui.HtmlElementContainer(cursorWrapper),new alphaTab.ui.HtmlElementContainer(barCursor),new alphaTab.ui.HtmlElementContainer(beatCursor),new alphaTab.ui.HtmlElementContainer(selectionWrapper))},getOffset:function(scrollContainer,container){var element=js.Boot.__cast(container,alphaTab.ui.HtmlElementContainer).element,bounds=element.getBoundingClientRect(),top=bounds.top+element.ownerDocument.defaultView.pageYOffset,left=bounds.left+element.ownerDocument.defaultView.pageXOffset;if(null!=scrollContainer){var scrollElement=js.Boot.__cast(scrollContainer,alphaTab.ui.HtmlElementContainer).element,nodeName=scrollElement.nodeName.toLowerCase();if("html"!=nodeName&&"body"!=nodeName){var scrollElementOffset=this.getOffset(null,scrollContainer);top=top+scrollElement.scrollTop-scrollElementOffset.y,left=left+scrollElement.scrollLeft-scrollElementOffset.x}}var _tmp=new alphaTab.rendering.utils.Bounds;return _tmp.x=left,_tmp.y=top,_tmp.w=bounds.width,_tmp.h=bounds.height,_tmp},getScrollContainer:function(){var scrollElement;if("string"==typeof this._api.settings.player.scrollElement){var scrollElement1=this._api.settings.player.scrollElement;scrollElement=window.document.querySelector(scrollElement1)}else scrollElement=this._api.settings.player.scrollElement;var nodeName=scrollElement.nodeName.toLowerCase();"html"!=nodeName&&"body"!=nodeName||(scrollElement=window.navigator.userAgent.match("((iPod|iPhone|iPad|Android))")?window.document.body:window.document.documentElement);return new alphaTab.ui.HtmlElementContainer(scrollElement)},createSelectionElement:function(){var element=window.document.createElement("div");return element.style.position="absolute",new alphaTab.ui.HtmlElementContainer(element)},scrollToY:function(element,scrollTargetY,speed){var this1=speed;this.internalScrollToY(js.Boot.__cast(element,alphaTab.ui.HtmlElementContainer).element,scrollTargetY,this1)},scrollToX:function(element,scrollTargetY,speed){this.internalScrollToX(js.Boot.__cast(element,alphaTab.ui.HtmlElementContainer).element,scrollTargetY,speed)},internalScrollToY:function(element,scrollTargetY,speed){var startY=element.scrollTop,diff=scrollTargetY-startY,start=0,step=null;step=function(x){0==start&&(start=x);var time=x-start,percent=Math.min(time/speed,1),step1=system.Convert.toInt32_Double(startY+diff*percent);element.scrollTop=step1,time<speed&&window.requestAnimationFrame(step)},window.requestAnimationFrame(step)},internalScrollToX:function(element,scrollTargetX,speed){var startX=element.scrollLeft,diff=scrollTargetX-startX,start=0,step=null;step=function(t){0==start&&(start=t);var time=t-start,percent=Math.min(time/speed,1),step1=system.Convert.toInt32_Double(startX+diff*percent);element.scrollLeft=step1,time<speed&&window.requestAnimationFrame(step)},window.requestAnimationFrame(step)},__class__:alphaTab.ui.BrowserUiFacade},alphaTab.ui.Cursors=$hx_exports.alphaTab.ui.Cursors=function(cursorWrapper,barCursor,beatCursor,selectionWrapper){this.cursorWrapper=null,this.barCursor=null,this.beatCursor=null,this.selectionWrapper=null,this.cursorWrapper=cursorWrapper,this.barCursor=barCursor,this.beatCursor=beatCursor,this.selectionWrapper=selectionWrapper},alphaTab.ui.Cursors.__name__=["alphaTab","ui","Cursors"],alphaTab.ui.Cursors.prototype={__class__:alphaTab.ui.Cursors},alphaTab.ui.IContainer=$hx_exports.alphaTab.ui.IContainer=function(){},alphaTab.ui.IContainer.__name__=["alphaTab","ui","IContainer"],alphaTab.ui.IContainer.prototype={__class__:alphaTab.ui.IContainer},alphaTab.ui.HtmlElementContainer=function(element){this.element=null,this.element=element},alphaTab.ui.HtmlElementContainer.__name__=["alphaTab","ui","HtmlElementContainer"],alphaTab.ui.HtmlElementContainer.__interfaces__=[alphaTab.ui.IContainer],alphaTab.ui.HtmlElementContainer.prototype={get_top:function(){var s=this.element.style.top;return parseFloat(s)},set_top:function(value){var x=Std.string(value)+"px";return this.element.style.top=x,this.get_top()},get_left:function(){var s=this.element.style.top;return parseFloat(s)},set_left:function(value){var x=Std.string(value)+"px";return this.element.style.left=x,this.get_left()},get_width:function(){return this.element.offsetWidth},set_width:function(value){var x=Std.string(value)+"px";return this.element.style.width=x,this.get_width()},get_scrollLeft:function(){return this.element.scrollLeft},set_scrollLeft:function(value){var tmp=system.Convert.toInt32_Single(value);return this.element.scrollTop=tmp,this.get_scrollLeft()},get_scrollTop:function(){return this.element.scrollLeft},set_scrollTop:function(value){var tmp=system.Convert.toInt32_Single(value);return this.element.scrollTop=tmp,this.get_scrollTop()},get_height:function(){return this.element.offsetHeight},set_height:function(value){return this.element.style.height=0<=value?Std.string(value)+"px":"100%",this.get_height()},get_isVisible:function(){return!(!this.element.offsetWidth&&!this.element.offsetHeight)||!!this.element.getClientRects().length},stopAnimation:function(){this.element.style.transition="none"},transitionToX:function(duration,x){this.element.style.transition="all 0s linear",this.element.style.transitionDuration=Std.string(duration)+"ms",this.element.style.left=Std.string(x)+"px"},addMouseDown:function(value){this.element.addEventListener("mousedown",function(e){value(new alphaTab.ui.BrowserMouseEventArgs(js.Boot.__cast(e,MouseEvent)))},!0)},removeMouseDown:function(value){},addMouseMove:function(value){this.element.addEventListener("mousemove",function(e){value(new alphaTab.ui.BrowserMouseEventArgs(js.Boot.__cast(e,MouseEvent)))},!0)},removeMouseMove:function(value){},addMouseUp:function(value){this.element.addEventListener("mouseup",function(e){value(new alphaTab.ui.BrowserMouseEventArgs(js.Boot.__cast(e,MouseEvent)))},!0)},removeMouseUp:function(value){},clear:function(){this.element.innerHTML=""},appendChild:function(child){this.element.appendChild(js.Boot.__cast(child,alphaTab.ui.HtmlElementContainer).element)},addScroll:function(value){window.addEventListener("scroll",value,!0)},removeScroll:function(value){window.removeEventListener("scroll",value,!0)},addResize:function(value){window.addEventListener("resize",value,!0)},removeResize:function(value){window.removeEventListener("resize",value,!0)},__class__:alphaTab.ui.HtmlElementContainer},alphaTab.util.Lazy=function(factory){this._factory=null,this._created=!1,this._value=null,this._factory=factory},alphaTab.util.Lazy.__name__=["alphaTab","util","Lazy"],alphaTab.util.Lazy.prototype={get_value:function(){return this._created||(this._value=this._factory(),this._created=!0),this._value},__class__:alphaTab.util.Lazy},alphaTab.util._LogLevel={},alphaTab.util._LogLevel.LogLevel_Impl_=$hx_exports.alphaTab.util._LogLevel.LogLevel_Impl_={},alphaTab.util._LogLevel.LogLevel_Impl_.__name__=["alphaTab","util","_LogLevel","LogLevel_Impl_"],alphaTab.util._LogLevel.LogLevel_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.util._LogLevel.LogLevel_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.util._LogLevel.LogLevel_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.util._LogLevel.LogLevel_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.util._LogLevel.LogLevel_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.util._LogLevel.LogLevel_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.util._LogLevel.LogLevel_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.util._LogLevel.LogLevel_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.util._LogLevel.LogLevel_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.util._LogLevel.LogLevel_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.util._LogLevel.LogLevel_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.util._LogLevel.LogLevel_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.util._LogLevel.LogLevel_Impl_.toString=function(this1){switch(this1){case 0:return"None";case 1:return"Debug";case 2:return"Info";case 3:return"Warning";case 4:return"Error"}return""},alphaTab.util._LogLevel.LogLevel_Impl_.fromString=function(str){switch(str.toLowerCase()){case"debug":return 1;case"error":return 4;case"info":return 2;case"none":return 0;case"warning":return 3}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.util._LogLevel.LogLevel_Impl_.toJson=function(obj){return obj},alphaTab.util._LogLevel.LogLevel_Impl_.fromJson=function(json){if("number"==typeof json)return json;if("string"==typeof json)return alphaTab.util._LogLevel.LogLevel_Impl_.fromString(json);throw new js._Boot.HaxeError((new alphaTab.utils.SerializationException).SerializationException("Unsupported value type"))},alphaTab.utils.SerializationException=$hx_exports.alphaTab.utils.SerializationException=function(){alphaTab.AlphaTabException.call(this)},alphaTab.utils.SerializationException.__name__=["alphaTab","utils","SerializationException"],alphaTab.utils.SerializationException.__super__=alphaTab.AlphaTabException,alphaTab.utils.SerializationException.prototype=$extend(alphaTab.AlphaTabException.prototype,{SerializationException:function(message){return this.AlphaTabException(message),this},__class__:alphaTab.utils.SerializationException}),alphaTab.xml={},alphaTab.xml.XmlNode=function(){this.nodeType=0,this.localName=null,this.value=null,this.childNodes=null,this.attributes=null,this.firstChild=null,this.firstElement=null;this.attributes={};this.childNodes=[]},alphaTab.xml.XmlNode.__name__=["alphaTab","xml","XmlNode"],alphaTab.xml.XmlNode.prototype={addChild:function(node){this.childNodes.push(node),1==(this.firstChild=node).nodeType&&(this.firstElement=node)},getAttribute:function(name){return this.attributes.hasOwnProperty(name)?this.attributes[name]:""},getElementsByTagName:function(name,recursive){null==recursive&&(recursive=!1);var tags=[];return this.searchElementsByTagName(this.childNodes,tags,name,recursive),tags},searchElementsByTagName:function(all,result,name,recursive){null==recursive&&(recursive=!1);for(var c=$iterator(all)();c.hasNext();){var c1=c.next();null!=c1&&1==c1.nodeType&&c1.localName==name&&result.push(c1),recursive&&this.searchElementsByTagName(c1.childNodes,result,name,!0)}},findChildElement:function(name){for(var c=$iterator(this.childNodes)();c.hasNext();){var c1=c.next();if(null!=c1&&1==c1.nodeType&&c1.localName==name)return c1}return null},get_innerText:function(){if(1!=this.nodeType&&9!=this.nodeType)return this.value;for(var txt="",c=$iterator(this.childNodes)();c.hasNext();){var c1=c.next();txt+=Std.string(c1.get_innerText())}return StringTools.trim(txt)},__class__:alphaTab.xml.XmlNode},alphaTab.xml.XmlDocument=function(xml){alphaTab.xml.XmlNode.call(this),this.documentElement=null,this.nodeType=9,alphaTab.xml.XmlParser.parse(xml,0,this);for(var child=$iterator(this.childNodes)();child.hasNext();){var child1=child.next();if(1==child1.nodeType){this.documentElement=child1;break}}},alphaTab.xml.XmlDocument.__name__=["alphaTab","xml","XmlDocument"],alphaTab.xml.XmlDocument.__super__=alphaTab.xml.XmlNode,alphaTab.xml.XmlDocument.prototype=$extend(alphaTab.xml.XmlNode.prototype,{__class__:alphaTab.xml.XmlDocument}),alphaTab.xml.XmlException=function(){alphaTab.AlphaTabException.call(this),this.xml=null,this.pos=0},alphaTab.xml.XmlException.__name__=["alphaTab","xml","XmlException"],alphaTab.xml.XmlException.__super__=alphaTab.AlphaTabException,alphaTab.xml.XmlException.prototype=$extend(alphaTab.AlphaTabException.prototype,{XmlException:function(message,xml,pos){return this.AlphaTabException(message),this.xml=null,this.pos=0,this.xml=xml,this.pos=pos,this},__class__:alphaTab.xml.XmlException}),alphaTab.xml._XmlNodeType={},alphaTab.xml._XmlNodeType.XmlNodeType_Impl_={},alphaTab.xml._XmlNodeType.XmlNodeType_Impl_.__name__=["alphaTab","xml","_XmlNodeType","XmlNodeType_Impl_"],alphaTab.xml._XmlNodeType.XmlNodeType_Impl_.toBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab.xml._XmlNodeType.XmlNodeType_Impl_.toChar_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.xml._XmlNodeType.XmlNodeType_Impl_.toSByte_IFormatProvider=function(this1,provider){return system.Convert.toInt8(this1)},alphaTab.xml._XmlNodeType.XmlNodeType_Impl_.toByte_IFormatProvider=function(this1,provider){return system.Convert.toUInt8(this1)},alphaTab.xml._XmlNodeType.XmlNodeType_Impl_.toInt16_IFormatProvider=function(this1,provider){return system.Convert.toInt16(this1)},alphaTab.xml._XmlNodeType.XmlNodeType_Impl_.toUInt16_IFormatProvider=function(this1,provider){return system.Convert.toUInt16(this1)},alphaTab.xml._XmlNodeType.XmlNodeType_Impl_.toInt32_IFormatProvider=function(this1,provider){return this1},alphaTab.xml._XmlNodeType.XmlNodeType_Impl_.toUInt32_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.xml._XmlNodeType.XmlNodeType_Impl_.toInt64_IFormatProvider=function(this1,provider){return this1},alphaTab.xml._XmlNodeType.XmlNodeType_Impl_.toUInt64_IFormatProvider=function(this1,provider){return system.Convert.toUInt32(this1)},alphaTab.xml._XmlNodeType.XmlNodeType_Impl_.toSingle_IFormatProvider=function(this1,provider){return this1},alphaTab.xml._XmlNodeType.XmlNodeType_Impl_.toDouble_IFormatProvider=function(this1,provider){return this1},alphaTab.xml._XmlNodeType.XmlNodeType_Impl_.toString=function(this1){switch(this1){case 0:return"None";case 1:return"Element";case 2:return"Attribute";case 3:return"Text";case 4:return"CDATA";case 5:return"EntityReference";case 6:return"Entity";case 7:return"ProcessingInstruction";case 8:return"Comment";case 9:return"Document";case 10:return"DocumentType";case 11:return"DocumentFragment";case 12:return"Notation";case 13:return"Whitespace";case 14:return"SignificantWhitespace";case 15:return"EndElement";case 16:return"EndEntity";case 17:return"XmlDeclaration"}return""},alphaTab.xml._XmlNodeType.XmlNodeType_Impl_.fromString=function(str){switch(str.toLowerCase()){case"attribute":return 2;case"cdata":return 4;case"comment":return 8;case"document":return 9;case"documentfragment":return 11;case"documenttype":return 10;case"element":return 1;case"endelement":return 15;case"endentity":return 16;case"entity":return 6;case"entityreference":return 5;case"none":return 0;case"notation":return 12;case"processinginstruction":return 7;case"significantwhitespace":return 14;case"text":return 3;case"whitespace":return 13;case"xmldeclaration":return 17}throw new js._Boot.HaxeError((new system.ArgumentException).ArgumentException_CsString_CsString("Unsupported string value","str"))},alphaTab.xml.XmlParser=function(){},alphaTab.xml.XmlParser.__name__=["alphaTab","xml","XmlParser"],alphaTab.xml.XmlParser.parse=function(str,p,parent){for(var c=system.Convert.toUInt16(HxOverrides.cca(str,p)),state=1,next=1,start=0,buf="",escapeNext=1,xml=null,aname=null,nbrackets=0,attrValQuote=0;p<str.length;){switch(c=system.Convert.toUInt16(HxOverrides.cca(str,p)),state){case 0:switch(c){case 9:case 10:case 13:case 32:break;default:state=next;continue}break;case 1:if(60!=c){start=p,state=13;continue}state=0,next=2;break;case 2:switch(c){case 33:if(91==system.Convert.toUInt16(HxOverrides.cca(str,p+1))){if("CDATA["!=HxOverrides.substr(str,p+=2,6).toUpperCase())throw new js._Boot.HaxeError((new alphaTab.xml.XmlException).XmlException("Expected <![CDATA[",str,p));state=17,start=(p+=5)+1}else{var tmp;if(68!=system.Convert.toUInt16(HxOverrides.cca(str,p+1)))tmp=100==system.Convert.toUInt16(HxOverrides.cca(str,p+1));else tmp=!0;if(tmp){if("OCTYPE"!=HxOverrides.substr(str,p+2,6).toUpperCase())throw new js._Boot.HaxeError((new alphaTab.xml.XmlException).XmlException("Expected <!DOCTYPE",str,p));state=16,start=(p+=8)+1}else{var tmp1;if(45==system.Convert.toUInt16(HxOverrides.cca(str,p+1)))tmp1=45!=system.Convert.toUInt16(HxOverrides.cca(str,p+2));else tmp1=!0;if(tmp1)throw new js._Boot.HaxeError((new alphaTab.xml.XmlException).XmlException("Expected \x3c!--",str,p));state=15,start=(p+=2)+1}}break;case 47:if(null==parent)throw new js._Boot.HaxeError((new alphaTab.xml.XmlException).XmlException("Expected node name",str,p));start=p+1,state=0,next=10;break;case 63:state=14,start=p;break;default:state=3,start=p;continue}break;case 3:if(alphaTab.xml.XmlParser.isValidChar(c))break;if(p==start)throw new js._Boot.HaxeError((new alphaTab.xml.XmlException).XmlException("Expected node name",str,p));(xml=new alphaTab.xml.XmlNode).nodeType=1,xml.localName=HxOverrides.substr(str,start,p-start),parent.addChild(xml),state=0,next=4;continue;case 4:switch(c){case 47:state=11;break;case 62:state=9;break;default:state=5,start=p;continue}break;case 5:if(alphaTab.xml.XmlParser.isValidChar(c))break;if(start==p)throw new js._Boot.HaxeError((new alphaTab.xml.XmlException).XmlException("Expected attribute name",str,p));if(aname=HxOverrides.substr(str,start,p-start),xml.attributes.hasOwnProperty(aname))throw new js._Boot.HaxeError((new alphaTab.xml.XmlException).XmlException("Duplicate attribute ["+aname+"]",str,p));state=0,next=6;continue;case 6:if(61!=c)throw new js._Boot.HaxeError((new alphaTab.xml.XmlException).XmlException("Expected =",str,p));state=0,next=7;break;case 7:switch(c){case 34:case 39:buf="",state=8,start=p+1,attrValQuote=c}break;case 8:if(38==c)buf+=Std.string(HxOverrides.substr(str,start,p-start)),state=18,escapeNext=8,start=p+1;else if(c==attrValQuote){var val=buf+=Std.string(HxOverrides.substr(str,start,p-start));buf="",xml.attributes[aname]=val,state=0,next=4}break;case 9:start=p=alphaTab.xml.XmlParser.parse(str,p,xml),state=1;break;case 10:if(alphaTab.xml.XmlParser.isValidChar(c))break;if(start==p)throw new js._Boot.HaxeError((new alphaTab.xml.XmlException).XmlException("Expected node name",str,p));if(HxOverrides.substr(str,start,p-start)!=parent.localName){var tmp3="Expected </"+parent.localName+">";throw new js._Boot.HaxeError((new alphaTab.xml.XmlException).XmlException(tmp3,str,p))}state=0,next=12;continue;case 11:if(62!=c)throw new js._Boot.HaxeError((new alphaTab.xml.XmlException).XmlException("Expected >",str,p));state=1;break;case 12:if(62==c)return p;throw new js._Boot.HaxeError((new alphaTab.xml.XmlException).XmlException("Expected >",str,p));case 13:if(60==c){buf+=Std.string(HxOverrides.substr(str,start,p-start));var child=new alphaTab.xml.XmlNode;child.nodeType=3,child.value=buf;buf="",parent.addChild(child),state=0,next=2}else 38==c&&(buf+=Std.string(HxOverrides.substr(str,start,p-start)),state=18,escapeNext=13,start=p+1);break;case 14:var tmp4;if(63==c)tmp4=62==system.Convert.toUInt16(HxOverrides.cca(str,p+1));else tmp4=!1;tmp4&&(++p,state=1);break;case 15:var tmp5,tmp6;if(45==c)tmp6=45==system.Convert.toUInt16(HxOverrides.cca(str,p+1));else tmp6=!1;if(tmp6)tmp5=62==system.Convert.toUInt16(HxOverrides.cca(str,p+2));else tmp5=!1;tmp5&&(p+=2,state=1);break;case 16:if(91==c)++nbrackets;else if(93==c)--nbrackets;else if(62==c&&0==nbrackets){var node=new alphaTab.xml.XmlNode;node.nodeType=10,node.value=HxOverrides.substr(str,start,p-start),parent.addChild(node),state=1}break;case 17:var tmp7,tmp8;if(93==c)tmp8=93==system.Convert.toUInt16(HxOverrides.cca(str,p+1));else tmp8=!1;if(tmp8)tmp7=62==system.Convert.toUInt16(HxOverrides.cca(str,p+2));else tmp7=!1;if(tmp7){var child1=new alphaTab.xml.XmlNode;child1.nodeType=4,child1.value=HxOverrides.substr(str,start,p-start),parent.addChild(child1),p+=2,state=1}break;case 18:if(c==system.Convert.toUInt16(59)){var code,s=HxOverrides.substr(str,start,p-start);if(35==system.Convert.toUInt16(HxOverrides.cca(s,0)))code=120==system.Convert.toUInt16(HxOverrides.cca(s,1))?alphaTab.platform.Platform.parseIntMinValue("0"+HxOverrides.substr(s,1,s.length-1)):alphaTab.platform.Platform.parseIntMinValue(HxOverrides.substr(s,1,s.length-1)),buf+=String.fromCharCode(code);else alphaTab.xml.XmlParser.Escapes.hasOwnProperty(s)?buf+=Std.string(alphaTab.xml.XmlParser.Escapes[s]):buf+=Std.string("&"+s+";");start=p+1,state=escapeNext}else alphaTab.xml.XmlParser.isValidChar(c)||35==c||(buf+=Std.string("&"),buf+=Std.string(HxOverrides.substr(str,start,p-start)),start=--p+1,state=escapeNext)}++p}if(1==state&&(start=p,state=13),13==state){if(p!=start){buf+=Std.string(HxOverrides.substr(str,start,p-start));var node1=new alphaTab.xml.XmlNode;node1.nodeType=3,node1.value=buf,parent.addChild(node1)}return p}if(18!=state||13!=escapeNext)throw new js._Boot.HaxeError((new alphaTab.xml.XmlException).XmlException("Unexpected end",str,p));buf+=Std.string("&"),buf+=Std.string(HxOverrides.substr(str,start,p-start));var node2=new alphaTab.xml.XmlNode;return node2.nodeType=3,node2.value=buf,parent.addChild(node2),p},alphaTab.xml.XmlParser.isValidChar=function(c){return 97<=c&&c<=122||65<=c&&c<=90||48<=c&&c<=57||58==c||46==c||95==c||45==c},alphaTab.xml.XmlParser.prototype={__class__:alphaTab.xml.XmlParser},alphaTab.xml.XmlParser_XmlState=function(){},alphaTab.xml.XmlParser_XmlState.__name__=["alphaTab","xml","XmlParser_XmlState"],alphaTab.xml.XmlParser_XmlState.prototype={__class__:alphaTab.xml.XmlParser_XmlState},haxe.IMap=function(){},haxe.IMap.__name__=["haxe","IMap"],haxe._Int64={},haxe._Int64.___Int64=function(high,low){this.high=high,this.low=low},haxe._Int64.___Int64.__name__=["haxe","_Int64","___Int64"],haxe._Int64.___Int64.prototype={__class__:haxe._Int64.___Int64},haxe.crypto={},haxe.crypto.Adler32=function(){this.a1=1,this.a2=0},haxe.crypto.Adler32.__name__=["haxe","crypto","Adler32"],haxe.crypto.Adler32.read=function(i){var a=new haxe.crypto.Adler32,a2a=i.readByte(),a2b=i.readByte(),a1a=i.readByte(),a1b=i.readByte();return a.a1=a1a<<8|a1b,a.a2=a2a<<8|a2b,a},haxe.crypto.Adler32.prototype={update:function(b,pos,len){for(var a1=this.a1,a2=this.a2,_g1=pos,_g=pos+len;_g1<_g;){var p=_g1++;a2=(a2+(a1=(a1+b.b[p])%65521))%65521}this.a1=a1,this.a2=a2},equals:function(a){return a.a1==this.a1&&a.a2==this.a2},__class__:haxe.crypto.Adler32},haxe.ds={},haxe.ds.IntMap=function(){this.h={}},haxe.ds.IntMap.__name__=["haxe","ds","IntMap"],haxe.ds.IntMap.__interfaces__=[haxe.IMap],haxe.ds.IntMap.prototype={__class__:haxe.ds.IntMap},haxe.io.Bytes=function(data){this.length=data.byteLength,this.b=new Uint8Array(data),(this.b.bufferValue=data).hxBytes=this,data.bytes=this.b},haxe.io.Bytes.__name__=["haxe","io","Bytes"],haxe.io.Bytes.prototype={blit:function(pos,src,srcpos,len){if(pos<0||srcpos<0||len<0||pos+len>this.length||srcpos+len>src.length)throw new js._Boot.HaxeError(haxe.io.Error.OutsideBounds);0==srcpos&&len==src.b.byteLength?this.b.set(src.b,pos):this.b.set(src.b.subarray(srcpos,srcpos+len),pos)},getString:function(pos,len){if(pos<0||len<0||pos+len>this.length)throw new js._Boot.HaxeError(haxe.io.Error.OutsideBounds);for(var s="",b=this.b,fcc=String.fromCharCode,i=pos,max=pos+len;i<max;){var c=b[i++];if(c<128){if(0==c)break;s+=fcc(c)}else if(c<224)s+=fcc((63&c)<<6|127&b[i++]);else if(c<240){s+=fcc((31&c)<<12|(127&b[i++])<<6|127&b[i++])}else{var u=(15&c)<<18|(127&b[i++])<<12|(127&b[i++])<<6|127&b[i++];s+=fcc(55232+(u>>10)),s+=fcc(1023&u|56320)}}return s},toString:function(){return this.getString(0,this.length)},__class__:haxe.io.Bytes},haxe.io.BytesBuffer=function(){this.b=[]},haxe.io.BytesBuffer.__name__=["haxe","io","BytesBuffer"],haxe.io.BytesBuffer.prototype={getBytes:function(){var bytes=new haxe.io.Bytes(new Uint8Array(this.b).buffer);return this.b=null,bytes},__class__:haxe.io.BytesBuffer},haxe.io.Eof=function(){},haxe.io.Eof.__name__=["haxe","io","Eof"],haxe.io.Eof.prototype={toString:function(){return"Eof"},__class__:haxe.io.Eof},haxe.io.Error={__ename__:!0,__constructs__:["Blocked","Overflow","OutsideBounds","Custom"]},haxe.io.Error.Blocked=["Blocked",0],haxe.io.Error.Blocked.toString=$estr,haxe.io.Error.Blocked.__enum__=haxe.io.Error,haxe.io.Error.Overflow=["Overflow",1],haxe.io.Error.Overflow.toString=$estr,haxe.io.Error.Overflow.__enum__=haxe.io.Error,haxe.io.Error.OutsideBounds=["OutsideBounds",2],haxe.io.Error.OutsideBounds.toString=$estr,haxe.io.Error.OutsideBounds.__enum__=haxe.io.Error,haxe.io.Error.Custom=function(e){var $x=["Custom",3,e];return $x.__enum__=haxe.io.Error,$x.toString=$estr,$x},haxe.io.FPHelper=function(){},haxe.io.FPHelper.__name__=["haxe","io","FPHelper"],haxe.io.FPHelper.i32ToFloat=function(i){var exp=i>>>23&255,sig=8388607&i;return 0==sig&&0==exp?0:(1-(i>>>31<<1))*(1+Math.pow(2,-23)*sig)*Math.pow(2,exp-127)},haxe.io.FPHelper.floatToI32=function(f){if(0==f)return 0;var af=f<0?-f:f,exp=Math.floor(Math.log(af)/.6931471805599453);exp<-127?exp=-127:128<exp&&(exp=128);var sig=Math.round(8388608*(af/Math.pow(2,exp)-1));return 8388608==sig&&exp<128&&(sig=0,++exp),(f<0?-2147483648:0)|exp+127<<23|sig},haxe.io.FPHelper.i64ToDouble=function(low,high){var exp=(high>>20&2047)-1023,sig=4294967296*(1048575&high)+2147483648*(low>>>31)+(2147483647&low);return 0==sig&&-1023==exp?0:(1-(high>>>31<<1))*(1+Math.pow(2,-52)*sig)*Math.pow(2,exp)},haxe.io.FPHelper.doubleToI64=function(v){var i64=haxe.io.FPHelper.i64tmp;if(0==v)i64.low=0,i64.high=0;else if(isFinite(v)){var av=v<0?-v:v,exp=Math.floor(Math.log(av)/.6931471805599453),sig=Math.round(4503599627370496*(av/Math.pow(2,exp)-1)),sig_l=0|sig,sig_h=sig/4294967296|0;i64.low=sig_l,i64.high=(v<0?-2147483648:0)|exp+1023<<20|sig_h}else 0<v?(i64.low=0,i64.high=2146435072):(i64.low=0,i64.high=-1048576);return i64},haxe.zip={},haxe.zip.ExtraField={__ename__:!0,__constructs__:["FUnknown","FInfoZipUnicodePath","FUtf8"]},haxe.zip.ExtraField.FUnknown=function(tag,bytes){var $x=["FUnknown",0,tag,bytes];return $x.__enum__=haxe.zip.ExtraField,$x.toString=$estr,$x},haxe.zip.ExtraField.FInfoZipUnicodePath=function(name,crc){var $x=["FInfoZipUnicodePath",1,name,crc];return $x.__enum__=haxe.zip.ExtraField,$x.toString=$estr,$x},haxe.zip.ExtraField.FUtf8=["FUtf8",2],haxe.zip.ExtraField.FUtf8.toString=$estr,haxe.zip.ExtraField.FUtf8.__enum__=haxe.zip.ExtraField,haxe.zip.Huffman={__ename__:!0,__constructs__:["Found","NeedBit","NeedBits"]},haxe.zip.Huffman.Found=function(i){var $x=["Found",0,i];return $x.__enum__=haxe.zip.Huffman,$x.toString=$estr,$x},haxe.zip.Huffman.NeedBit=function(left,right){var $x=["NeedBit",1,left,right];return $x.__enum__=haxe.zip.Huffman,$x.toString=$estr,$x},haxe.zip.Huffman.NeedBits=function(n,table){var $x=["NeedBits",2,n,table];return $x.__enum__=haxe.zip.Huffman,$x.toString=$estr,$x},haxe.zip.HuffTools=function(){},haxe.zip.HuffTools.__name__=["haxe","zip","HuffTools"],haxe.zip.HuffTools.prototype={treeDepth:function(t){switch(t[1]){case 0:return 0;case 1:var b=t[3],a=t[2],da=this.treeDepth(a),db=this.treeDepth(b);return 1+(da<db?da:db);case 2:throw new js._Boot.HaxeError("assert")}},treeCompress:function(t){var d=this.treeDepth(t);if(0==d)return t;if(1==d){if(1!=t[1])throw new js._Boot.HaxeError("assert");var b=t[3],a=t[2];return haxe.zip.Huffman.NeedBit(this.treeCompress(a),this.treeCompress(b))}for(var table=[],_g1=0,_g=1<<d;_g1<_g;){_g1++;table.push(haxe.zip.Huffman.Found(-1))}return this.treeWalk(table,0,0,d,t),haxe.zip.Huffman.NeedBits(d,table)},treeWalk:function(table,p,cd,d,t){if(1==t[1]){var b=t[3],a=t[2];0<d?(this.treeWalk(table,p,cd+1,d-1,a),this.treeWalk(table,p|1<<cd,cd+1,d-1,b)):table[p]=this.treeCompress(t)}else table[p]=this.treeCompress(t)},treeMake:function(bits,maxbits,v,len){if(maxbits<len)throw new js._Boot.HaxeError("Invalid huffman");var idx=v<<5|len;return bits.h.hasOwnProperty(idx)?haxe.zip.Huffman.Found(bits.h[idx]):(v<<=1,++len,haxe.zip.Huffman.NeedBit(this.treeMake(bits,maxbits,v,len),this.treeMake(bits,maxbits,1|v,len)))},make:function(lengths,pos,nlengths,maxbits){var counts=[],tmp=[];if(32<maxbits)throw new js._Boot.HaxeError("Invalid huffman");for(var _g1=0,_g=maxbits;_g1<_g;){_g1++;counts.push(0),tmp.push(0)}for(var _g11=0,_g2=nlengths;_g11<_g2;){var p=lengths[_g11+++pos];if(maxbits<=p)throw new js._Boot.HaxeError("Invalid huffman");counts[p]++}for(var code=0,_g12=1,_g3=maxbits-1;_g12<_g3;){var i2=_g12++;code=code+counts[i2]<<1,tmp[i2]=code}for(var bits=new haxe.ds.IntMap,_g13=0,_g4=nlengths;_g13<_g4;){var i3=_g13++,l=lengths[i3+pos];if(0!=l){var n=tmp[l-1];tmp[l-1]=n+1,bits.h[n<<5|l]=i3}}return this.treeCompress(haxe.zip.Huffman.NeedBit(this.treeMake(bits,maxbits,0,1),this.treeMake(bits,maxbits,1,1)))},__class__:haxe.zip.HuffTools},haxe.zip._InflateImpl={},haxe.zip._InflateImpl.Window=function(hasCrc){this.buffer=new haxe.io.Bytes(new ArrayBuffer(65536)),this.pos=0,hasCrc&&(this.crc=new haxe.crypto.Adler32)},haxe.zip._InflateImpl.Window.__name__=["haxe","zip","_InflateImpl","Window"],haxe.zip._InflateImpl.Window.prototype={slide:function(){null!=this.crc&&this.crc.update(this.buffer,0,32768);var b=new haxe.io.Bytes(new ArrayBuffer(65536));this.pos-=32768,b.blit(0,this.buffer,32768,this.pos),this.buffer=b},addBytes:function(b,p,len){65536<this.pos+len&&this.slide(),this.buffer.blit(this.pos,b,p,len),this.pos+=len},addByte:function(c){65536==this.pos&&this.slide(),this.buffer.b[this.pos]=255&c,this.pos++},getLastChar:function(){return this.buffer.b[this.pos-1]},available:function(){return this.pos},checksum:function(){return null!=this.crc&&this.crc.update(this.buffer,0,this.pos),this.crc},__class__:haxe.zip._InflateImpl.Window},haxe.zip._InflateImpl.State={__ename__:!0,__constructs__:["Head","Block","CData","Flat","Crc","Dist","DistOne","Done"]},haxe.zip._InflateImpl.State.Head=["Head",0],haxe.zip._InflateImpl.State.Head.toString=$estr,haxe.zip._InflateImpl.State.Head.__enum__=haxe.zip._InflateImpl.State,haxe.zip._InflateImpl.State.Block=["Block",1],haxe.zip._InflateImpl.State.Block.toString=$estr,haxe.zip._InflateImpl.State.Block.__enum__=haxe.zip._InflateImpl.State,haxe.zip._InflateImpl.State.CData=["CData",2],haxe.zip._InflateImpl.State.CData.toString=$estr,haxe.zip._InflateImpl.State.CData.__enum__=haxe.zip._InflateImpl.State,haxe.zip._InflateImpl.State.Flat=["Flat",3],haxe.zip._InflateImpl.State.Flat.toString=$estr,haxe.zip._InflateImpl.State.Flat.__enum__=haxe.zip._InflateImpl.State,haxe.zip._InflateImpl.State.Crc=["Crc",4],haxe.zip._InflateImpl.State.Crc.toString=$estr,haxe.zip._InflateImpl.State.Crc.__enum__=haxe.zip._InflateImpl.State,haxe.zip._InflateImpl.State.Dist=["Dist",5],haxe.zip._InflateImpl.State.Dist.toString=$estr,haxe.zip._InflateImpl.State.Dist.__enum__=haxe.zip._InflateImpl.State,haxe.zip._InflateImpl.State.DistOne=["DistOne",6],haxe.zip._InflateImpl.State.DistOne.toString=$estr,haxe.zip._InflateImpl.State.DistOne.__enum__=haxe.zip._InflateImpl.State,haxe.zip._InflateImpl.State.Done=["Done",7],haxe.zip._InflateImpl.State.Done.toString=$estr,haxe.zip._InflateImpl.State.Done.__enum__=haxe.zip._InflateImpl.State,haxe.zip.InflateImpl=function(i,header,crc){null==crc&&(crc=!0),null==header&&(header=!0),this.final=!1,this.htools=new haxe.zip.HuffTools,this.huffman=this.buildFixedHuffman(),this.huffdist=null,this.len=0,this.dist=0,this.state=header?haxe.zip._InflateImpl.State.Head:haxe.zip._InflateImpl.State.Block,this.input=i,this.bits=0,this.nbits=0,this.needed=0,this.output=null,this.outpos=0,this.lengths=[];for(var _g=0;_g<19;){_g++;this.lengths.push(-1)}this.window=new haxe.zip._InflateImpl.Window(crc)},haxe.zip.InflateImpl.__name__=["haxe","zip","InflateImpl"],haxe.zip.InflateImpl.prototype={buildFixedHuffman:function(){if(null!=haxe.zip.InflateImpl.FIXED_HUFFMAN)return haxe.zip.InflateImpl.FIXED_HUFFMAN;for(var a=[],_g=0;_g<288;){var n=_g++;a.push(n<=143?8:n<=255?9:n<=279?7:8)}return haxe.zip.InflateImpl.FIXED_HUFFMAN=this.htools.make(a,0,288,10),haxe.zip.InflateImpl.FIXED_HUFFMAN},readBytes:function(b,pos,len){if(this.needed=len,this.outpos=pos,this.output=b,0<len)for(;this.inflateLoop(););return len-this.needed},getBits:function(n){for(;this.nbits<n;)this.bits|=this.input.readByte()<<this.nbits,this.nbits+=8;var b=this.bits&(1<<n)-1;return this.nbits-=n,this.bits>>=n,b},getBit:function(){0==this.nbits&&(this.nbits=8,this.bits=this.input.readByte());var b=1==(1&this.bits);return this.nbits--,this.bits>>=1,b},getRevBits:function(n){return 0==n?0:this.getBit()?1<<n-1|this.getRevBits(n-1):this.getRevBits(n-1)},resetBits:function(){this.bits=0,this.nbits=0},addBytes:function(b,p,len){this.window.addBytes(b,p,len),this.output.blit(this.outpos,b,p,len),this.needed-=len,this.outpos+=len},addByte:function(b){this.window.addByte(b),this.output.b[this.outpos]=255&b,this.needed--,this.outpos++},addDistOne:function(n){for(var c=this.window.getLastChar(),_g1=0,_g=n;_g1<_g;){_g1++;this.addByte(c)}},addDist:function(d,len){this.addBytes(this.window.buffer,this.window.pos-d,len)},applyHuffman:function(h){switch(h[1]){case 0:return h[2];case 1:var b=h[3],a=h[2];return this.applyHuffman(this.getBit()?b:a);case 2:var tbl=h[3],n1=h[2];return this.applyHuffman(tbl[this.getBits(n1)])}},inflateLengths:function(a,max){for(var i=0,prev=0;i<max;){var n=this.applyHuffman(this.huffman);switch(n){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:prev=n,a[i]=n,++i;break;case 16:var end=i+3+this.getBits(2);if(max<end)throw new js._Boot.HaxeError("Invalid data");for(;i<end;)a[i]=prev,++i;break;case 17:if(max<(i+=3+this.getBits(3)))throw new js._Boot.HaxeError("Invalid data");break;case 18:if(max<(i+=11+this.getBits(7)))throw new js._Boot.HaxeError("Invalid data");break;default:throw new js._Boot.HaxeError("Invalid data")}}},inflateLoop:function(){switch(this.state[1]){case 0:var cmf=this.input.readByte();if(8!=(15&cmf))throw new js._Boot.HaxeError("Invalid data");var flg=this.input.readByte(),fdict=0!=(32&flg);if(((cmf<<8)+flg)%31!=0)throw new js._Boot.HaxeError("Invalid data");if(fdict)throw new js._Boot.HaxeError("Unsupported dictionary");return this.state=haxe.zip._InflateImpl.State.Block,!0;case 1:switch(this.final=this.getBit(),this.getBits(2)){case 0:if(this.len=this.input.readUInt16(),this.input.readUInt16()!=65535-this.len)throw new js._Boot.HaxeError("Invalid data");this.state=haxe.zip._InflateImpl.State.Flat;var r=this.inflateLoop();return this.resetBits(),r;case 1:return this.huffman=this.buildFixedHuffman(),this.huffdist=null,this.state=haxe.zip._InflateImpl.State.CData,!0;case 2:for(var hlit=this.getBits(5)+257,hdist=this.getBits(5)+1,hclen=this.getBits(4)+4,_g11=0,_g2=hclen;_g11<_g2;){var i=_g11++;this.lengths[haxe.zip.InflateImpl.CODE_LENGTHS_POS[i]]=this.getBits(3)}for(var _g3=hclen;_g3<19;){var i1=_g3++;this.lengths[haxe.zip.InflateImpl.CODE_LENGTHS_POS[i1]]=0}this.huffman=this.htools.make(this.lengths,0,19,8);for(var lengths=[],_g12=0,_g4=hlit+hdist;_g12<_g4;){_g12++;lengths.push(0)}return this.inflateLengths(lengths,hlit+hdist),this.huffdist=this.htools.make(lengths,hlit,hdist,16),this.huffman=this.htools.make(lengths,0,hlit,16),this.state=haxe.zip._InflateImpl.State.CData,!0;default:throw new js._Boot.HaxeError("Invalid data")}break;case 2:var n=this.applyHuffman(this.huffman);if(n<256)return this.addByte(n),0<this.needed;if(256==n)return this.state=this.final?haxe.zip._InflateImpl.State.Crc:haxe.zip._InflateImpl.State.Block,!0;n-=257;var extra_bits=haxe.zip.InflateImpl.LEN_EXTRA_BITS_TBL[n];if(-1==extra_bits)throw new js._Boot.HaxeError("Invalid data");this.len=haxe.zip.InflateImpl.LEN_BASE_VAL_TBL[n]+this.getBits(extra_bits);var dist_code=null==this.huffdist?this.getRevBits(5):this.applyHuffman(this.huffdist);if(-1==(extra_bits=haxe.zip.InflateImpl.DIST_EXTRA_BITS_TBL[dist_code]))throw new js._Boot.HaxeError("Invalid data");if(this.dist=haxe.zip.InflateImpl.DIST_BASE_VAL_TBL[dist_code]+this.getBits(extra_bits),this.dist>this.window.available())throw new js._Boot.HaxeError("Invalid data");return this.state=1==this.dist?haxe.zip._InflateImpl.State.DistOne:haxe.zip._InflateImpl.State.Dist,!0;case 3:var rlen=this.len<this.needed?this.len:this.needed,bytes=this.input.read(rlen);return this.len-=rlen,this.addBytes(bytes,0,rlen),0==this.len&&(this.state=this.final?haxe.zip._InflateImpl.State.Crc:haxe.zip._InflateImpl.State.Block),0<this.needed;case 4:var calc=this.window.checksum();if(null==calc)return this.state=haxe.zip._InflateImpl.State.Done,!0;var crc=haxe.crypto.Adler32.read(this.input);if(!calc.equals(crc))throw new js._Boot.HaxeError("Invalid CRC");return this.state=haxe.zip._InflateImpl.State.Done,!0;case 5:for(;0<this.len&&0<this.needed;){var rdist=this.len<this.dist?this.len:this.dist,rlen1=this.needed<rdist?this.needed:rdist;this.addDist(this.dist,rlen1),this.len-=rlen1}return 0==this.len&&(this.state=haxe.zip._InflateImpl.State.CData),0<this.needed;case 6:var rlen2=this.len<this.needed?this.len:this.needed;return this.addDistOne(rlen2),this.len-=rlen2,0==this.len&&(this.state=haxe.zip._InflateImpl.State.CData),0<this.needed;case 7:return!1}},__class__:haxe.zip.InflateImpl},haxe.zip.Reader=function(i){this.i=i},haxe.zip.Reader.__name__=["haxe","zip","Reader"],haxe.zip.Reader.prototype={readZipDate:function(){var t=this.i.readUInt16(),hour=t>>11&31,min=t>>5&63,sec=31&t,d=this.i.readUInt16();return new Date(1980+(d>>9),(d>>5&15)-1,31&d,hour,min,sec<<1)},readExtraFields:function(length){for(var fields=new List;0<length;){if(length<4)throw new js._Boot.HaxeError("Invalid extra fields data");var tag=this.i.readUInt16(),len=this.i.readUInt16();if(length<len)throw new js._Boot.HaxeError("Invalid extra fields data");if(28789==tag){var version=this.i.readByte();if(1!=version){var data=new haxe.io.BytesBuffer;data.b.push(version);for(var src=this.i.read(len-1),b2=(data.b,src.b),_g1=0,_g=src.length;_g1<_g;){var i=_g1++;data.b.push(b2[i])}fields.add(haxe.zip.ExtraField.FUnknown(tag,data.getBytes()))}else{var crc=this.i.readInt32(),name=this.i.read(len-5).toString();fields.add(haxe.zip.ExtraField.FInfoZipUnicodePath(name,crc))}}else fields.add(haxe.zip.ExtraField.FUnknown(tag,this.i.read(len)));length-=4+len}return fields},readEntryHeader:function(){var i=this.i,h=i.readInt32();if(33639248==h||101010256==h)return null;if(67324752!=h)throw new js._Boot.HaxeError("Invalid Zip Data");i.readUInt16();var flags=i.readUInt16(),utf8=0!=(2048&flags);if(0!=(63473&flags))throw new js._Boot.HaxeError("Unsupported flags "+flags);var compression=i.readUInt16(),compressed=0!=compression;if(compressed&&8!=compression)throw new js._Boot.HaxeError("Unsupported compression "+compression);var mtime=this.readZipDate(),crc32=i.readInt32(),csize=i.readInt32(),usize=i.readInt32(),fnamelen=i.readInt16(),elen=i.readInt16(),fname=i.readString(fnamelen),fields=this.readExtraFields(elen);utf8&&fields.push(haxe.zip.ExtraField.FUtf8);return 0!=(8&flags)&&(crc32=null),{fileName:fname,fileSize:usize,fileTime:mtime,compressed:compressed,dataSize:csize,data:null,crc32:crc32,extraFields:fields}},read:function(){for(var l=new List,tmp=null;;){var e=this.readEntryHeader();if(null==e)break;if(null==e.crc32){if(e.compressed){null==tmp&&(tmp=new haxe.io.Bytes(new ArrayBuffer(65536)));for(var out=new haxe.io.BytesBuffer,z=new haxe.zip.InflateImpl(this.i,!1,!1);;){var n=z.readBytes(tmp,0,65536);if(n<0||n>tmp.length)throw new js._Boot.HaxeError(haxe.io.Error.OutsideBounds);out.b;for(var b2=tmp.b,_g1=0,_g=n;_g1<_g;){var i=_g1++;out.b.push(b2[i])}if(n<65536)break}e.data=out.getBytes()}else e.data=this.i.read(e.dataSize);e.crc32=this.i.readInt32(),134695760==e.crc32&&(e.crc32=this.i.readInt32()),e.dataSize=this.i.readInt32(),e.fileSize=this.i.readInt32(),e.dataSize=e.fileSize,e.compressed=!1}else e.data=this.i.read(e.dataSize);l.add(e)}return l},__class__:haxe.zip.Reader},js._Boot={},js._Boot.HaxeError=function(val){Error.call(this),this.val=val,this.message=String(val),Error.captureStackTrace&&Error.captureStackTrace(this,js._Boot.HaxeError)},js._Boot.HaxeError.__name__=["js","_Boot","HaxeError"],js._Boot.HaxeError.wrap=function(val){return val instanceof Error?val:new js._Boot.HaxeError(val)},js._Boot.HaxeError.__super__=Error,js._Boot.HaxeError.prototype=$extend(Error.prototype,{__class__:js._Boot.HaxeError}),js.html={},js.html.compat={},js.html.compat.ArrayBuffer=function(a){if(a instanceof Array&&null==a.__enum__)this.a=a,this.byteLength=a.length;else{var len=a;this.a=[];for(var _g1=0,_g=len;_g1<_g;){var i=_g1++;this.a[i]=0}this.byteLength=len}},js.html.compat.ArrayBuffer.__name__=["js","html","compat","ArrayBuffer"],js.html.compat.ArrayBuffer.sliceImpl=function(begin,end){var u=new Uint8Array(this,begin,null==end?null:end-begin),result=new ArrayBuffer(u.byteLength);return new Uint8Array(result).set(u),result},js.html.compat.ArrayBuffer.prototype={slice:function(begin,end){return new js.html.compat.ArrayBuffer(this.a.slice(begin,end))},__class__:js.html.compat.ArrayBuffer},js.html.compat.Float32Array=function(){},js.html.compat.Float32Array.__name__=["js","html","compat","Float32Array"],js.html.compat.Float32Array._new=function(arg1,offset,length){var arr;if("number"==typeof arg1){arr=[];for(var _g1=0,_g=arg1;_g1<_g;){arr[_g1++]=0}arr.byteLength=arr.length<<2;for(var _g2=[],_g21=arr.byteOffset=0,_g11=arr.length<<2;_g21<_g11;){_g21++;_g2.push(0)}arr.buffer=new js.html.compat.ArrayBuffer(_g2)}else if(js.Boot.__instanceof(arg1,js.html.compat.ArrayBuffer)){var buffer=arg1;null==offset&&(offset=0),null==length&&(length=buffer.byteLength-offset>>2),arr=[];for(var _g12=0,_g3=length;_g12<_g3;){_g12++;var val=buffer.a[offset++]|buffer.a[offset++]<<8|buffer.a[offset++]<<16|buffer.a[offset++]<<24;arr.push(haxe.io.FPHelper.i32ToFloat(val))}arr.byteLength=arr.length<<2,arr.byteOffset=offset,arr.buffer=buffer}else{if(!(arg1 instanceof Array&&null==arg1.__enum__))throw new js._Boot.HaxeError("TODO "+Std.string(arg1));arr=arg1.slice();for(var buffer1=[],_g4=0;_g4<arr.length;){var f=arr[_g4];++_g4;var i3=haxe.io.FPHelper.floatToI32(f);buffer1.push(255&i3),buffer1.push(i3>>8&255),buffer1.push(i3>>16&255),buffer1.push(i3>>>24)}arr.byteLength=arr.length<<2,arr.byteOffset=0,arr.buffer=new js.html.compat.ArrayBuffer(buffer1)}return arr.subarray=js.html.compat.Float32Array._subarray,arr.set=js.html.compat.Float32Array._set,arr},js.html.compat.Float32Array._set=function(arg,offset){if(js.Boot.__instanceof(arg.buffer,js.html.compat.ArrayBuffer)){var a=arg;if(arg.byteLength+offset>this.byteLength)throw new js._Boot.HaxeError("set() outside of range");for(var _g1=0,_g=arg.byteLength;_g1<_g;){var i=_g1++;this[i+offset]=a[i]}}else{if(!(arg instanceof Array&&null==arg.__enum__))throw new js._Boot.HaxeError("TODO");var a1=arg;if(a1.length+offset>this.byteLength)throw new js._Boot.HaxeError("set() outside of range");for(var _g11=0,_g2=a1.length;_g11<_g2;){var i1=_g11++;this[i1+offset]=a1[i1]}}},js.html.compat.Float32Array._subarray=function(start,end){var a=js.html.compat.Float32Array._new(this.slice(start,end));return a.byteOffset=4*start,a},js.html.compat.Float64Array=function(){},js.html.compat.Float64Array.__name__=["js","html","compat","Float64Array"],js.html.compat.Float64Array._new=function(arg1,offset,length){var arr;if("number"==typeof arg1){arr=[];for(var _g1=0,_g=arg1;_g1<_g;){arr[_g1++]=0}arr.byteLength=arr.length<<3;for(var _g2=[],_g21=arr.byteOffset=0,_g11=arr.length<<3;_g21<_g11;){_g21++;_g2.push(0)}arr.buffer=new js.html.compat.ArrayBuffer(_g2)}else if(js.Boot.__instanceof(arg1,js.html.compat.ArrayBuffer)){var buffer=arg1;null==offset&&(offset=0),null==length&&(length=buffer.byteLength-offset>>3),arr=[];for(var _g12=0,_g3=length;_g12<_g3;){_g12++;var val1=buffer.a[offset++]|buffer.a[offset++]<<8|buffer.a[offset++]<<16|buffer.a[offset++]<<24,val2=buffer.a[offset++]|buffer.a[offset++]<<8|buffer.a[offset++]<<16|buffer.a[offset++]<<24;arr.push(haxe.io.FPHelper.i64ToDouble(val1,val2))}arr.byteLength=arr.length<<3,arr.byteOffset=offset,arr.buffer=buffer}else{if(!(arg1 instanceof Array&&null==arg1.__enum__))throw new js._Boot.HaxeError("TODO "+Std.string(arg1));arr=arg1.slice();for(var buffer1=[],_g4=0;_g4<arr.length;){var f=arr[_g4];++_g4;var v=haxe.io.FPHelper.doubleToI64(f),i3=v.low;buffer1.push(255&i3),buffer1.push(i3>>8&255),buffer1.push(i3>>16&255),buffer1.push(i3>>>24);var i4=v.high;buffer1.push(255&i4),buffer1.push(i4>>8&255),buffer1.push(i4>>16&255),buffer1.push(i4>>>24)}arr.byteLength=arr.length<<3,arr.byteOffset=0,arr.buffer=new js.html.compat.ArrayBuffer(buffer1)}return arr.subarray=js.html.compat.Float64Array._subarray,arr.set=js.html.compat.Float64Array._set,arr},js.html.compat.Float64Array._set=function(arg,offset){if(js.Boot.__instanceof(arg.buffer,js.html.compat.ArrayBuffer)){var a=arg;if(arg.byteLength+offset>this.byteLength)throw new js._Boot.HaxeError("set() outside of range");for(var _g1=0,_g=arg.byteLength;_g1<_g;){var i=_g1++;this[i+offset]=a[i]}}else{if(!(arg instanceof Array&&null==arg.__enum__))throw new js._Boot.HaxeError("TODO");var a1=arg;if(a1.length+offset>this.byteLength)throw new js._Boot.HaxeError("set() outside of range");for(var _g11=0,_g2=a1.length;_g11<_g2;){var i1=_g11++;this[i1+offset]=a1[i1]}}},js.html.compat.Float64Array._subarray=function(start,end){var a=js.html.compat.Float64Array._new(this.slice(start,end));return a.byteOffset=8*start,a},js.html.compat.Uint8Array=function(){},js.html.compat.Uint8Array.__name__=["js","html","compat","Uint8Array"],js.html.compat.Uint8Array._new=function(arg1,offset,length){var arr;if("number"==typeof arg1){arr=[];for(var _g1=0,_g=arg1;_g1<_g;){arr[_g1++]=0}arr.byteLength=arr.length,arr.byteOffset=0,arr.buffer=new js.html.compat.ArrayBuffer(arr)}else if(js.Boot.__instanceof(arg1,js.html.compat.ArrayBuffer)){var buffer=arg1;null==offset&&(offset=0),null==length&&(length=buffer.byteLength-offset),(arr=0==offset?buffer.a:buffer.a.slice(offset,offset+length)).byteLength=arr.length,arr.byteOffset=offset,arr.buffer=buffer}else{if(!(arg1 instanceof Array&&null==arg1.__enum__))throw new js._Boot.HaxeError("TODO "+Std.string(arg1));(arr=arg1.slice()).byteLength=arr.length,arr.byteOffset=0,arr.buffer=new js.html.compat.ArrayBuffer(arr)}return arr.subarray=js.html.compat.Uint8Array._subarray,arr.set=js.html.compat.Uint8Array._set,arr},js.html.compat.Uint8Array._set=function(arg,offset){if(js.Boot.__instanceof(arg.buffer,js.html.compat.ArrayBuffer)){var a=arg;if(arg.byteLength+offset>this.byteLength)throw new js._Boot.HaxeError("set() outside of range");for(var _g1=0,_g=arg.byteLength;_g1<_g;){var i=_g1++;this[i+offset]=a[i]}}else{if(!(arg instanceof Array&&null==arg.__enum__))throw new js._Boot.HaxeError("TODO");var a1=arg;if(a1.length+offset>this.byteLength)throw new js._Boot.HaxeError("set() outside of range");for(var _g11=0,_g2=a1.length;_g11<_g2;){var i1=_g11++;this[i1+offset]=a1[i1]}}},js.html.compat.Uint8Array._subarray=function(start,end){var a=js.html.compat.Uint8Array._new(this.slice(start,end));return a.byteOffset=start,a},system.ArgumentException=function(){system.Exception.call(this)},system.ArgumentException.__name__=["system","ArgumentException"],system.ArgumentException.__super__=system.Exception,system.ArgumentException.prototype=$extend(system.Exception.prototype,{ArgumentException_CsString_CsString:function(message,paramName){return this.Exception_CsString(message),this.ParamName=paramName,this},__class__:system.ArgumentException}),system.collections={},system.collections.generic={},system.collections.generic.IEnumerable=function(){},system.collections.generic.IEnumerable.__name__=["system","collections","generic","IEnumerable"],system.Convert=function(){},system.Convert.__name__=["system","Convert"],system.Convert.toInt8=function(v){return system.Convert._int32Buffer[0]=v,system.Convert._int8Buffer[0]},system.Convert.toUInt8=function(v){return system.Convert._int32Buffer[0]=v,system.Convert._uint8Buffer[0]},system.Convert.toInt16=function(v){return system.Convert._int32Buffer[0]=v,system.Convert._int16Buffer[0]},system.Convert.toUInt16=function(v){return system.Convert._int32Buffer[0]=v,system.Convert._uint16Buffer[0]},system.Convert.toUInt32=function(v){return system.Convert._int32Buffer[0]=v,system.Convert._uint32Buffer[0]},system.Convert.toInt32=function(v){return system.Convert._uint32Buffer[0]=v,system.Convert._int32Buffer[0]},system.Convert.toInt32_Double=function(v){if(0<=v){if(v<2147483647.5)return 0|v}else if(-2147483648.5<=v)return 0|v;return 0|v},system.Convert.toInt32_Single=function(v){var this1=v;return system.Convert.toInt32_Double(this1)},system._CsString={},system._CsString.CsString_Impl_={},system._CsString.CsString_Impl_.__name__=["system","_CsString","CsString_Impl_"],system._CsString.CsString_Impl_.split_CharArray=function(this1,chars){for(var strings=[],startPos=0,_g1=0,_g=this1.length;_g1<_g;){var i=_g1++,cc=HxOverrides.cca(this1,i);if(0<=chars.indexOf(cc)){var endPos=i;endPos<startPos?strings.push(""):strings.push(this1.substring(startPos,endPos)),startPos=1+i}}return startPos<this1.length&&strings.push(this1.substring(startPos,this1.length)),strings},system._EventAction={},system._EventAction.EventAction_Impl_={},system._EventAction.EventAction_Impl_.__name__=["system","_EventAction","EventAction_Impl_"],system._EventAction.EventAction_Impl_.add=function(lhs,rhs){null==lhs?lhs=null==rhs?null:[rhs]:lhs.push(rhs);return lhs},system._EventAction.EventAction_Impl_.sub=function(lhs,rhs){var raw=lhs,index=raw.indexOf(rhs);return-1!=index&&(raw.splice(index,1),0==raw.length)?null:lhs},system._EventAction.EventAction_Impl_.invoke=function(this1){if(null!=this1)for(var _g=0;_g<this1.length;){var x=this1[_g];++_g,x()}},system._EventAction1={},system._EventAction1.EventAction1_Impl_={},system._EventAction1.EventAction1_Impl_.__name__=["system","_EventAction1","EventAction1_Impl_"],system._EventAction1.EventAction1_Impl_.add=function(lhs,rhs){null==lhs?lhs=null==rhs?null:[rhs]:lhs.push(rhs);return lhs},system._EventAction1.EventAction1_Impl_.sub=function(lhs,rhs){var raw=lhs,index=raw.indexOf(rhs);return-1!=index&&(raw.splice(index,1),0==raw.length)?null:lhs},system._EventAction1.EventAction1_Impl_.invoke=function(this1,p){if(null!=this1)for(var _g=0;_g<this1.length;){var x=this1[_g];++_g,x(p)}},system._EventAction2={},system._EventAction2.EventAction2_Impl_={},system._EventAction2.EventAction2_Impl_.__name__=["system","_EventAction2","EventAction2_Impl_"],system._EventAction2.EventAction2_Impl_.add=function(lhs,rhs){null==lhs?lhs=null==rhs?null:[rhs]:lhs.push(rhs);return lhs},system._EventAction2.EventAction2_Impl_.sub=function(lhs,rhs){var raw=lhs,index=raw.indexOf(rhs);return-1!=index&&(raw.splice(index,1),0==raw.length)?null:lhs},system._EventAction2.EventAction2_Impl_.invoke=function(this1,p1,p2){if(null!=this1)for(var _g=0;_g<this1.length;){var x=this1[_g];++_g,x(p1,p2)}},system.IFormatProvider=function(){},system.IFormatProvider.__name__=["system","IFormatProvider"],system._Int32={},system._Int32.Int32_Impl_={},system._Int32.Int32_Impl_.__name__=["system","_Int32","Int32_Impl_"],system._Int32.Int32_Impl_.compareTo_Int32=function(this1,other){return this1<other?-1:other<this1?1:0},system.Int32ArrayIterator=function(array){this._array=array,this._i=0};system.Int32ArrayIterator.__name__=["system","Int32ArrayIterator"],system.Int32ArrayIterator.prototype={hasNext:function(){return this._i<this._array.length},next:function(){return this._array[this._i++]},__class__:system.Int32ArrayIterator},system.collections.generic.IterableEnumerable=function(i){this._iterable=i},system.collections.generic.IterableEnumerable.__name__=["system","collections","generic","IterableEnumerable"],system.collections.generic.IterableEnumerable.__interfaces__=[system.collections.generic.IEnumerable],system.collections.generic.IterableEnumerable.prototype={__class__:system.collections.generic.IterableEnumerable};var $_,$fid=0;function $bind(o,m){return null==m?null:(null==m.__id__&&(m.__id__=$fid++),null==o.hx__closures__?o.hx__closures__={}:f=o.hx__closures__[m.__id__],null==f&&((f=function(){return f.method.apply(f.scope,arguments)}).scope=o,f.method=m,o.hx__closures__[m.__id__]=f),f);var f}String.prototype.__class__=String,String.__name__=["String"],Array.__name__=["Array"],Date.prototype.__class__=Date,Date.__name__=["Date"];var Int={__name__:["Int"]},Dynamic={__name__:["Dynamic"]},Float=Number;Float.__name__=["Float"];var Bool=Boolean;Bool.__ename__=["Bool"];var Class={__name__:["Class"]},Enum={};Object.defineProperty(alphaTab.AlphaTabApi.prototype,"isReadyForPlayback",{get:alphaTab.AlphaTabApi.prototype.get_isReadyForPlayback}),Object.defineProperty(alphaTab.AlphaTabApi.prototype,"playerState",{get:alphaTab.AlphaTabApi.prototype.get_playerState}),Object.defineProperty(alphaTab.AlphaTabApi.prototype,"masterVolume",{get:alphaTab.AlphaTabApi.prototype.get_masterVolume,set:alphaTab.AlphaTabApi.prototype.set_masterVolume}),Object.defineProperty(alphaTab.AlphaTabApi.prototype,"metronomeVolume",{get:alphaTab.AlphaTabApi.prototype.get_metronomeVolume,set:alphaTab.AlphaTabApi.prototype.set_metronomeVolume}),Object.defineProperty(alphaTab.AlphaTabApi.prototype,"tickPosition",{get:alphaTab.AlphaTabApi.prototype.get_tickPosition,set:alphaTab.AlphaTabApi.prototype.set_tickPosition}),Object.defineProperty(alphaTab.AlphaTabApi.prototype,"timePosition",{get:alphaTab.AlphaTabApi.prototype.get_timePosition,set:alphaTab.AlphaTabApi.prototype.set_timePosition}),Object.defineProperty(alphaTab.AlphaTabApi.prototype,"playbackRange",{get:alphaTab.AlphaTabApi.prototype.get_playbackRange,set:alphaTab.AlphaTabApi.prototype.set_playbackRange}),Object.defineProperty(alphaTab.AlphaTabApi.prototype,"playbackSpeed",{get:alphaTab.AlphaTabApi.prototype.get_playbackSpeed,set:alphaTab.AlphaTabApi.prototype.set_playbackSpeed}),Object.defineProperty(alphaTab.AlphaTabApi.prototype,"isLooping",{get:alphaTab.AlphaTabApi.prototype.get_isLooping,set:alphaTab.AlphaTabApi.prototype.set_isLooping}),Object.defineProperty(alphaTab.platform.model.Color.prototype,"a",{get:alphaTab.platform.model.Color.prototype.get_a}),Object.defineProperty(alphaTab.platform.model.Color.prototype,"r",{get:alphaTab.platform.model.Color.prototype.get_r}),Object.defineProperty(alphaTab.platform.model.Color.prototype,"g",{get:alphaTab.platform.model.Color.prototype.get_g}),Object.defineProperty(alphaTab.platform.model.Color.prototype,"b",{get:alphaTab.platform.model.Color.prototype.get_b}),Object.defineProperty(alphaTab.platform.model.Font.prototype,"isBold",{get:alphaTab.platform.model.Font.prototype.get_isBold}),Object.defineProperty(alphaTab.platform.model.Font.prototype,"isItalic",{get:alphaTab.platform.model.Font.prototype.get_isItalic}),alphaTab.util.Logger.logLevel=0,alphaTab.util.Logger.logLevel=2,Object.defineProperty(alphaTab.audio.synth.AlphaSynth.prototype,"isReady",{get:alphaTab.audio.synth.AlphaSynth.prototype.get_isReady,set:alphaTab.audio.synth.AlphaSynth.prototype.set_isReady}),Object.defineProperty(alphaTab.audio.synth.AlphaSynth.prototype,"isReadyForPlayback",{get:alphaTab.audio.synth.AlphaSynth.prototype.get_isReadyForPlayback}),Object.defineProperty(alphaTab.audio.synth.AlphaSynth.prototype,"state",{get:alphaTab.audio.synth.AlphaSynth.prototype.get_state,set:alphaTab.audio.synth.AlphaSynth.prototype.set_state}),Object.defineProperty(alphaTab.audio.synth.AlphaSynth.prototype,"logLevel",{get:alphaTab.audio.synth.AlphaSynth.prototype.get_logLevel,set:alphaTab.audio.synth.AlphaSynth.prototype.set_logLevel}),Object.defineProperty(alphaTab.audio.synth.AlphaSynth.prototype,"masterVolume",{get:alphaTab.audio.synth.AlphaSynth.prototype.get_masterVolume,set:alphaTab.audio.synth.AlphaSynth.prototype.set_masterVolume}),Object.defineProperty(alphaTab.audio.synth.AlphaSynth.prototype,"metronomeVolume",{get:alphaTab.audio.synth.AlphaSynth.prototype.get_metronomeVolume,set:alphaTab.audio.synth.AlphaSynth.prototype.set_metronomeVolume}),Object.defineProperty(alphaTab.audio.synth.AlphaSynth.prototype,"playbackSpeed",{get:alphaTab.audio.synth.AlphaSynth.prototype.get_playbackSpeed,set:alphaTab.audio.synth.AlphaSynth.prototype.set_playbackSpeed}),Object.defineProperty(alphaTab.audio.synth.AlphaSynth.prototype,"tickPosition",{get:alphaTab.audio.synth.AlphaSynth.prototype.get_tickPosition,set:alphaTab.audio.synth.AlphaSynth.prototype.set_tickPosition}),Object.defineProperty(alphaTab.audio.synth.AlphaSynth.prototype,"timePosition",{get:alphaTab.audio.synth.AlphaSynth.prototype.get_timePosition,set:alphaTab.audio.synth.AlphaSynth.prototype.set_timePosition}),Object.defineProperty(alphaTab.audio.synth.AlphaSynth.prototype,"playbackRange",{get:alphaTab.audio.synth.AlphaSynth.prototype.get_playbackRange,set:alphaTab.audio.synth.AlphaSynth.prototype.set_playbackRange}),Object.defineProperty(alphaTab.audio.synth.AlphaSynth.prototype,"isLooping",{get:alphaTab.audio.synth.AlphaSynth.prototype.get_isLooping,set:alphaTab.audio.synth.AlphaSynth.prototype.set_isLooping}),alphaTab.Environment.scriptFile=null,alphaTab.Environment.bravuraFontChecker=null,alphaTab.Environment.RenderEngines=null,alphaTab.Environment.LayoutEngines=null,alphaTab.Environment.StaveProfiles=null,alphaTab.Environment.init(),Object.defineProperty(alphaTab.Settings.prototype,"songBook",{get:alphaTab.Settings.prototype.get_songBook}),Object.defineProperty(alphaTab.audio.synth.midi.event.MidiEvent.prototype,"channel",{get:alphaTab.audio.synth.midi.event.MidiEvent.prototype.get_channel}),Object.defineProperty(alphaTab.audio.synth.midi.event.MidiEvent.prototype,"command",{get:alphaTab.audio.synth.midi.event.MidiEvent.prototype.get_command}),Object.defineProperty(alphaTab.audio.synth.midi.event.MidiEvent.prototype,"data1",{get:alphaTab.audio.synth.midi.event.MidiEvent.prototype.get_data1,set:alphaTab.audio.synth.midi.event.MidiEvent.prototype.set_data1}),Object.defineProperty(alphaTab.audio.synth.midi.event.MidiEvent.prototype,"data2",{get:alphaTab.audio.synth.midi.event.MidiEvent.prototype.get_data2,set:alphaTab.audio.synth.midi.event.MidiEvent.prototype.set_data2}),Object.defineProperty(alphaTab.importer.ScoreImporter.prototype,"name",{get:alphaTab.importer.ScoreImporter.prototype.get_name}),Object.defineProperty(alphaTab.model.Bar.prototype,"masterBar",{get:alphaTab.model.Bar.prototype.get_masterBar}),Object.defineProperty(alphaTab.model.Bar.prototype,"isEmpty",{get:alphaTab.model.Bar.prototype.get_isEmpty}),Object.defineProperty(alphaTab.model.Beat.prototype,"isLastOfVoice",{get:alphaTab.model.Beat.prototype.get_isLastOfVoice}),Object.defineProperty(alphaTab.model.Beat.prototype,"isLegatoDestination",{get:alphaTab.model.Beat.prototype.get_isLegatoDestination}),Object.defineProperty(alphaTab.model.Beat.prototype,"isRest",{get:alphaTab.model.Beat.prototype.get_isRest}),Object.defineProperty(alphaTab.model.Beat.prototype,"hasTuplet",{get:alphaTab.model.Beat.prototype.get_hasTuplet}),Object.defineProperty(alphaTab.model.Beat.prototype,"hasWhammyBar",{get:alphaTab.model.Beat.prototype.get_hasWhammyBar}),Object.defineProperty(alphaTab.model.Beat.prototype,"hasChord",{get:alphaTab.model.Beat.prototype.get_hasChord}),Object.defineProperty(alphaTab.model.Beat.prototype,"chord",{get:alphaTab.model.Beat.prototype.get_chord}),Object.defineProperty(alphaTab.model.Beat.prototype,"isTremolo",{get:alphaTab.model.Beat.prototype.get_isTremolo}),Object.defineProperty(alphaTab.model.Beat.prototype,"absoluteDisplayStart",{get:alphaTab.model.Beat.prototype.get_absoluteDisplayStart}),Object.defineProperty(alphaTab.model.Beat.prototype,"absolutePlaybackStart",{get:alphaTab.model.Beat.prototype.get_absolutePlaybackStart}),Object.defineProperty(alphaTab.model.Beat.prototype,"isEffectSlurDestination",{get:alphaTab.model.Beat.prototype.get_isEffectSlurDestination}),Object.defineProperty(alphaTab.model.MasterBar.prototype,"isRepeatEnd",{get:alphaTab.model.MasterBar.prototype.get_isRepeatEnd}),Object.defineProperty(alphaTab.model.MasterBar.prototype,"isSectionStart",{get:alphaTab.model.MasterBar.prototype.get_isSectionStart}),Object.defineProperty(alphaTab.model.Note.prototype,"hasBend",{get:alphaTab.model.Note.prototype.get_hasBend}),Object.defineProperty(alphaTab.model.Note.prototype,"isStringed",{get:alphaTab.model.Note.prototype.get_isStringed}),Object.defineProperty(alphaTab.model.Note.prototype,"isPiano",{get:alphaTab.model.Note.prototype.get_isPiano}),Object.defineProperty(alphaTab.model.Note.prototype,"isPercussion",{get:alphaTab.model.Note.prototype.get_isPercussion}),Object.defineProperty(alphaTab.model.Note.prototype,"isHammerPullDestination",{get:alphaTab.model.Note.prototype.get_isHammerPullDestination}),Object.defineProperty(alphaTab.model.Note.prototype,"isSlurOrigin",{get:alphaTab.model.Note.prototype.get_isSlurOrigin}),Object.defineProperty(alphaTab.model.Note.prototype,"isHarmonic",{get:alphaTab.model.Note.prototype.get_isHarmonic}),Object.defineProperty(alphaTab.model.Note.prototype,"isTieOrigin",{get:alphaTab.model.Note.prototype.get_isTieOrigin}),Object.defineProperty(alphaTab.model.Note.prototype,"trillFret",{get:alphaTab.model.Note.prototype.get_trillFret}),Object.defineProperty(alphaTab.model.Note.prototype,"isTrill",{get:alphaTab.model.Note.prototype.get_isTrill}),Object.defineProperty(alphaTab.model.Note.prototype,"isEffectSlurDestination",{get:alphaTab.model.Note.prototype.get_isEffectSlurDestination}),Object.defineProperty(alphaTab.model.Note.prototype,"stringTuning",{get:alphaTab.model.Note.prototype.get_stringTuning}),Object.defineProperty(alphaTab.model.Note.prototype,"realValue",{get:alphaTab.model.Note.prototype.get_realValue}),Object.defineProperty(alphaTab.model.Note.prototype,"harmonicPitch",{get:alphaTab.model.Note.prototype.get_harmonicPitch}),Object.defineProperty(alphaTab.model.Note.prototype,"displayValue",{get:alphaTab.model.Note.prototype.get_displayValue}),Object.defineProperty(alphaTab.model.Note.prototype,"displayValueWithoutBend",{get:alphaTab.model.Note.prototype.get_displayValueWithoutBend}),Object.defineProperty(alphaTab.model.Note.prototype,"hasQuarterToneOffset",{get:alphaTab.model.Note.prototype.get_hasQuarterToneOffset}),Object.defineProperty(alphaTab.model.Staff.prototype,"isStringed",{get:alphaTab.model.Staff.prototype.get_isStringed}),alphaTab.model.Tuning._sevenStrings=null,alphaTab.model.Tuning._sixStrings=null,alphaTab.model.Tuning._fiveStrings=null,alphaTab.model.Tuning._fourStrings=null,alphaTab.model.Tuning._defaultTunings=null,alphaTab.model.Tuning.initialize(),alphaTab.platform.javaScript.AlphaSynthFlashOutput.Lookup=null,alphaTab.platform.javaScript.AlphaSynthFlashOutput.NextId=0;var this1={};alphaTab.platform.javaScript.AlphaSynthFlashOutput.Lookup=this1,Object.defineProperty(alphaTab.platform.javaScript.AlphaTabApi.prototype,"playerState",{get:alphaTab.platform.javaScript.AlphaTabApi.prototype.get_playerState}),Object.defineProperty(alphaTab.rendering.ScoreRenderer.prototype,"boundsLookup",{get:alphaTab.rendering.ScoreRenderer.prototype.get_boundsLookup,set:alphaTab.rendering.ScoreRenderer.prototype.set_boundsLookup}),Object.defineProperty(alphaTab.rendering.ScoreRenderer.prototype,"width",{get:alphaTab.rendering.ScoreRenderer.prototype.get_width,set:alphaTab.rendering.ScoreRenderer.prototype.set_width}),alphaTab.rendering.glyphs.ScoreBeatGlyph.NormalKeys=null,alphaTab.rendering.glyphs.ScoreBeatGlyph.XKeys=null;this1={};alphaTab.rendering.glyphs.ScoreBeatGlyph.NormalKeys=this1;for(var normalKeyNotes=new Int32Array([32,34,35,36,38,39,40,41,43,45,47,48,50,55,56,58,60,61]),i=0;i<normalKeyNotes.length;)alphaTab.rendering.glyphs.ScoreBeatGlyph.NormalKeys[normalKeyNotes[i]]=!0,++i;alphaTab.rendering.glyphs.ScoreBeatGlyph.XKeys={};for(var xKeyNotes=new Int32Array([31,33,37,42,44,54,62,63,64,65,66]),i1=0;i1<xKeyNotes.length;)alphaTab.rendering.glyphs.ScoreBeatGlyph.XKeys[xKeyNotes[i1]]=!0,++i1;alphaTab.xml.XmlParser.Escapes=null;this1={};alphaTab.xml.XmlParser.Escapes=this1,alphaTab.xml.XmlParser.Escapes.lt="<",alphaTab.xml.XmlParser.Escapes.gt=">",alphaTab.xml.XmlParser.Escapes.amp="&",alphaTab.xml.XmlParser.Escapes.quot='"',alphaTab.xml.XmlParser.Escapes.apos="'";var ArrayBuffer=$global.ArrayBuffer||js.html.compat.ArrayBuffer;null==ArrayBuffer.prototype.slice&&(ArrayBuffer.prototype.slice=js.html.compat.ArrayBuffer.sliceImpl);var Float32Array=$global.Float32Array||js.html.compat.Float32Array._new,Float64Array=$global.Float64Array||($global.Float32Array?"notsupported":null)||js.html.compat.Float64Array._new,Uint8Array=$global.Uint8Array||js.html.compat.Uint8Array._new;alphaTab.CoreSettings.__meta__={fields:{scriptFile:{json:["scriptFile"]},fontDirectory:{json:["fontDirectory"]},enableLazyLoading:{json:["enableLazyLoading"]},engine:{json:["engine"]},logLevel:{json:["logLevel"]},useWorkers:{json:["useWorkers"]},includeNoteBounds:{json:["includeNoteBounds"]}}},alphaTab.DisplaySettings.__meta__={fields:{scale:{json:["scale"]},stretchForce:{json:["stretchForce"]},layoutMode:{json:["layoutMode"]},staveProfile:{json:["staveProfile"]},barsPerRow:{json:["barsPerRow"]},startBar:{json:["startBar"]},barCount:{json:["barCount"]},barCountPerPartial:{json:["barCountPerPartial"]},resources:{json:["resources"]},padding:{json:["padding"]}}},alphaTab.platform.svg.SvgCanvas.BlurCorrection=0,alphaTab.platform.model.Color.__meta__={obj:{immutable:null}},alphaTab.platform.model.Color.BlackRgb="#000000",alphaTab.platform.model.Font.__meta__={obj:{immutable:null}},alphaTab.platform.javaScript.Html5Canvas.BlurCorrection=0,js.Boot.__toStr={}.toString,alphaTab.platform.javaScript.AlphaSynthWebWorker.CmdPrefix="alphaSynth.",alphaTab.platform.javaScript.AlphaSynthWebWorker.CmdInitialize="alphaSynth.initialize",alphaTab.platform.javaScript.AlphaSynthWebWorker.CmdSetLogLevel="alphaSynth.setLogLevel",alphaTab.platform.javaScript.AlphaSynthWebWorker.CmdSetMasterVolume="alphaSynth.setMasterVolume",alphaTab.platform.javaScript.AlphaSynthWebWorker.CmdSetMetronomeVolume="alphaSynth.setMetronomeVolume",alphaTab.platform.javaScript.AlphaSynthWebWorker.CmdSetPlaybackSpeed="alphaSynth.setPlaybackSpeed",alphaTab.platform.javaScript.AlphaSynthWebWorker.CmdSetTickPosition="alphaSynth.setTickPosition",alphaTab.platform.javaScript.AlphaSynthWebWorker.CmdSetTimePosition="alphaSynth.setTimePosition",alphaTab.platform.javaScript.AlphaSynthWebWorker.CmdSetPlaybackRange="alphaSynth.setPlaybackRange",alphaTab.platform.javaScript.AlphaSynthWebWorker.CmdSetIsLooping="alphaSynth.setIsLooping",alphaTab.platform.javaScript.AlphaSynthWebWorker.CmdPlay="alphaSynth.play",alphaTab.platform.javaScript.AlphaSynthWebWorker.CmdPause="alphaSynth.pause",alphaTab.platform.javaScript.AlphaSynthWebWorker.CmdPlayPause="alphaSynth.playPause",alphaTab.platform.javaScript.AlphaSynthWebWorker.CmdStop="alphaSynth.stop",alphaTab.platform.javaScript.AlphaSynthWebWorker.CmdLoadSoundFontBytes="alphaSynth.loadSoundFontBytes",alphaTab.platform.javaScript.AlphaSynthWebWorker.CmdLoadMidi="alphaSynth.loadMidi",alphaTab.platform.javaScript.AlphaSynthWebWorker.CmdSetChannelMute="alphaSynth.setChannelMute",alphaTab.platform.javaScript.AlphaSynthWebWorker.CmdSetChannelSolo="alphaSynth.setChannelSolo",alphaTab.platform.javaScript.AlphaSynthWebWorker.CmdSetChannelVolume="alphaSynth.setChannelVolume",alphaTab.platform.javaScript.AlphaSynthWebWorker.CmdSetChannelProgram="alphaSynth.setChannelProgram",alphaTab.platform.javaScript.AlphaSynthWebWorker.CmdResetChannelStates="alphaSynth.resetChannelStates",alphaTab.platform.javaScript.AlphaSynthWebWorker.CmdReady="alphaSynth.ready",alphaTab.platform.javaScript.AlphaSynthWebWorker.CmdReadyForPlayback="alphaSynth.readyForPlayback",alphaTab.platform.javaScript.AlphaSynthWebWorker.CmdPositionChanged="alphaSynth.positionChanged",alphaTab.platform.javaScript.AlphaSynthWebWorker.CmdPlayerStateChanged="alphaSynth.playerStateChanged",alphaTab.platform.javaScript.AlphaSynthWebWorker.CmdFinished="alphaSynth.finished",alphaTab.platform.javaScript.AlphaSynthWebWorker.CmdSoundFontLoaded="alphaSynth.soundFontLoaded",alphaTab.platform.javaScript.AlphaSynthWebWorker.CmdSoundFontLoadFailed="alphaSynth.soundFontLoadFailed",alphaTab.platform.javaScript.AlphaSynthWebWorker.CmdMidiLoaded="alphaSynth.midiLoaded",alphaTab.platform.javaScript.AlphaSynthWebWorker.CmdMidiLoadFailed="alphaSynth.midiLoadFailed",alphaTab.platform.javaScript.AlphaSynthWebWorker.CmdLog="alphaSynth.log",alphaTab.platform.javaScript.AlphaSynthWorkerSynthOutput.CmdOutputPrefix="alphaSynth.output.",alphaTab.platform.javaScript.AlphaSynthWorkerSynthOutput.CmdOutputSequencerFinished="alphaSynth.output.sequencerFinished",alphaTab.platform.javaScript.AlphaSynthWorkerSynthOutput.CmdOutputAddSamples="alphaSynth.output.addSamples",alphaTab.platform.javaScript.AlphaSynthWorkerSynthOutput.CmdOutputPlay="alphaSynth.output.play",alphaTab.platform.javaScript.AlphaSynthWorkerSynthOutput.CmdOutputPause="alphaSynth.output.pause",alphaTab.platform.javaScript.AlphaSynthWorkerSynthOutput.CmdOutputResetSamples="alphaSynth.output.resetSamples",alphaTab.platform.javaScript.AlphaSynthWorkerSynthOutput.CmdOutputSampleRequest="alphaSynth.output.sampleRequest",alphaTab.platform.javaScript.AlphaSynthWorkerSynthOutput.CmdOutputFinished="alphaSynth.output.finished",alphaTab.platform.javaScript.AlphaSynthWorkerSynthOutput.CmdOutputSamplesPlayed="alphaSynth.output.samplesPlayed",alphaTab.audio.synth.synthesis.TinySoundFont.MicroBufferCount=32,alphaTab.audio.synth.synthesis.TinySoundFont.MicroBufferSize=64,alphaTab.rendering.layout.PageViewLayout.PagePadding=new Float32Array([40,40,40,40]),alphaTab.rendering.layout.PageViewLayout.GroupSpacing=20,alphaTab.rendering.layout.HorizontalScreenLayout.PagePadding=new Float32Array([20,20,20,20]),alphaTab.rendering.layout.HorizontalScreenLayout.GroupSpacing=20,alphaTab._FingeringMode.FingeringMode_Impl_.ScoreDefault=0,alphaTab._FingeringMode.FingeringMode_Impl_.ScoreForcePiano=1,alphaTab._FingeringMode.FingeringMode_Impl_.SingleNoteEffectBand=2,alphaTab._FingeringMode.FingeringMode_Impl_.SingleNoteEffectBandForcePiano=3,alphaTab.ImporterSettings.__meta__={fields:{encoding:{json:["encoding"]},mergePartGroupsInMusicXml:{json:["mergePartGroupsInMusicXml"]}}},alphaTab._LayoutMode.LayoutMode_Impl_.Page=0,alphaTab._LayoutMode.LayoutMode_Impl_.Horizontal=1,alphaTab._NotationMode.NotationMode_Impl_.GuitarPro=0,alphaTab._NotationMode.NotationMode_Impl_.SongBook=1,alphaTab.NotationSettings.__meta__={fields:{notationMode:{json:["notationMode"]},fingeringMode:{json:["fingeringMode"]},hideInfo:{json:["hideInfo"]},hideTuning:{json:["hideTuning"]},hideTrackNames:{json:["hideTrackNames"]},hideChordDiagrams:{json:["hideChordDiagrams"]},rhythmMode:{json:["rhythmMode"]},rhythmHeight:{json:["rhythmHeight"]},transpositionPitches:{json:["transpositionPitches"]},displayTranspositionPitches:{json:["displayTranspositionPitches"]},smallGraceTabNotes:{json:["smallGraceTabNotes"]},extendBendArrowsOnTiedNotes:{json:["extendBendArrowsOnTiedNotes"]},showParenthesisForTiedBends:{json:["showParenthesisForTiedBends"]},showTabNoteOnTiedBend:{json:["showTabNoteOnTiedBend"]},showZeroOnDiveWhammy:{json:["showZeroOnDiveWhammy"]},extendLineEffectsToBeatEnd:{json:["extendLineEffectsToBeatEnd"]},slurHeight:{json:["slurHeight"]}}},alphaTab.PlayerSettings.__meta__={fields:{soundFont:{json:["soundFont"]},scrollElement:{json:["scrollElement"]},enablePlayer:{json:["enablePlayer"]},enableCursor:{json:["enableCursor"]},scrollOffsetX:{json:["scrollOffsetX"]},scrollOffsetY:{json:["scrollOffsetY"]},scrollMode:{json:["scrollMode"]},scrollSpeed:{json:["scrollSpeed"]},songBookBendDuration:{json:["songBookBendDuration"]},songBookDipDuration:{json:["songBookDipDuration"]},vibrato:{json:["vibrato"]}}},alphaTab.RenderingResources.__meta__={fields:{copyrightFont:{json:["copyrightFont"]},titleFont:{json:["titleFont"]},subTitleFont:{json:["subTitleFont"]},wordsFont:{json:["wordsFont"]},effectFont:{json:["effectFont"]},fretboardNumberFont:{json:["fretboardNumberFont"]},tablatureFont:{json:["tablatureFont"]},graceFont:{json:["graceFont"]},staffLineColor:{json:["staffLineColor"]},barSeparatorColor:{json:["barSeparatorColor"]},barNumberFont:{json:["barNumberFont"]},barNumberColor:{json:["barNumberColor"]},fingeringFont:{json:["fingeringFont"]},markerFont:{json:["markerFont"]},mainGlyphColor:{json:["mainGlyphColor"]},secondaryGlyphColor:{json:["secondaryGlyphColor"]},scoreInfoColor:{json:["scoreInfoColor"]}}},alphaTab._ScrollMode.ScrollMode_Impl_.Off=0,alphaTab._ScrollMode.ScrollMode_Impl_.Continuous=1,alphaTab._ScrollMode.ScrollMode_Impl_.OffScreen=2,alphaTab.Settings.__meta__={fields:{core:{json:["core",""]},display:{json:["display",""]},notation:{json:["notation"]},importer:{json:["importer"]},player:{json:["player"]}}},alphaTab._StaveProfile.StaveProfile_Impl_.Default=0,alphaTab._StaveProfile.StaveProfile_Impl_.ScoreTab=1,alphaTab._StaveProfile.StaveProfile_Impl_.Score=2,alphaTab._StaveProfile.StaveProfile_Impl_.Tab=3,alphaTab._StaveProfile.StaveProfile_Impl_.TabMixed=4,alphaTab._TabRhythmMode.TabRhythmMode_Impl_.Hidden=0,alphaTab._TabRhythmMode.TabRhythmMode_Impl_.ShowWithBeams=1,alphaTab._TabRhythmMode.TabRhythmMode_Impl_.ShowWithBars=2,alphaTab.VibratoPlaybackSettings.__meta__={fields:{noteWideLength:{json:["noteWideLength"]},noteWideAmplitude:{json:["noteWideAmplitude"]},noteSlightLength:{json:["noteSlightLength"]},noteSlightAmplitude:{json:["noteSlightAmplitude"]},beatWideLength:{json:["beatWideLength"]},beatWideAmplitude:{json:["beatWideAmplitude"]},beatSlightLength:{json:["beatSlightLength"]},beatSlightAmplitude:{json:["beatSlightAmplitude"]}}},alphaTab.audio.MidiUtils.QuarterTime=960,alphaTab.audio.MidiUtils.MinVelocity=15,alphaTab.audio.MidiUtils.VelocityIncrement=16,alphaTab.audio.generator.MidiFileGenerator.DefaultDurationDead=30,alphaTab.audio.generator.MidiFileGenerator.DefaultDurationPalmMute=80,alphaTab.audio.generator.MidiFileGenerator.DefaultBend=32,alphaTab.audio.generator.MidiFileGenerator.DefaultBendSemitone=2.75,alphaTab.audio.synth._PlayerState.PlayerState_Impl_.Paused=0,alphaTab.audio.synth._PlayerState.PlayerState_Impl_.Playing=1,alphaTab.audio.synth.midi.MidiHelper.MicroSecondsPerMinute=6e7,alphaTab.audio.synth.midi.MidiHelper.MinChannel=0,alphaTab.audio.synth.midi.MidiHelper.MaxChannel=15,alphaTab.audio.synth.midi.MidiHelper.DrumChannel=9,alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_.BankSelectCoarse=0,alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_.ModulationCoarse=1,alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_.DataEntryCoarse=6,alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_.VolumeCoarse=7,alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_.PanCoarse=10,alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_.ExpressionControllerCoarse=11,alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_.ModulationFine=33,alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_.DataEntryFine=38,alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_.VolumeFine=39,alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_.PanFine=42,alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_.ExpressionControllerFine=43,alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_.HoldPedal=64,alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_.LegatoPedal=68,alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_.NonRegisteredParameterFine=98,alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_.NonRegisteredParameterCourse=99,alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_.RegisteredParameterFine=100,alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_.RegisteredParameterCourse=101,alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_.ResetControllers=121,alphaTab.audio.synth.midi.event._ControllerType.ControllerType_Impl_.AllNotesOff=123,alphaTab.audio.synth.midi.event._MetaEventTypeEnum.MetaEventTypeEnum_Impl_.SequenceNumber=0,alphaTab.audio.synth.midi.event._MetaEventTypeEnum.MetaEventTypeEnum_Impl_.TextEvent=1,alphaTab.audio.synth.midi.event._MetaEventTypeEnum.MetaEventTypeEnum_Impl_.CopyrightNotice=2,alphaTab.audio.synth.midi.event._MetaEventTypeEnum.MetaEventTypeEnum_Impl_.SequenceOrTrackName=3,alphaTab.audio.synth.midi.event._MetaEventTypeEnum.MetaEventTypeEnum_Impl_.InstrumentName=4,alphaTab.audio.synth.midi.event._MetaEventTypeEnum.MetaEventTypeEnum_Impl_.LyricText=5,alphaTab.audio.synth.midi.event._MetaEventTypeEnum.MetaEventTypeEnum_Impl_.MarkerText=6,alphaTab.audio.synth.midi.event._MetaEventTypeEnum.MetaEventTypeEnum_Impl_.CuePoint=7,alphaTab.audio.synth.midi.event._MetaEventTypeEnum.MetaEventTypeEnum_Impl_.PatchName=8,alphaTab.audio.synth.midi.event._MetaEventTypeEnum.MetaEventTypeEnum_Impl_.PortName=9,alphaTab.audio.synth.midi.event._MetaEventTypeEnum.MetaEventTypeEnum_Impl_.MidiChannel=32,alphaTab.audio.synth.midi.event._MetaEventTypeEnum.MetaEventTypeEnum_Impl_.MidiPort=33,alphaTab.audio.synth.midi.event._MetaEventTypeEnum.MetaEventTypeEnum_Impl_.EndOfTrack=47,alphaTab.audio.synth.midi.event._MetaEventTypeEnum.MetaEventTypeEnum_Impl_.Tempo=81,alphaTab.audio.synth.midi.event._MetaEventTypeEnum.MetaEventTypeEnum_Impl_.SmpteOffset=84,alphaTab.audio.synth.midi.event._MetaEventTypeEnum.MetaEventTypeEnum_Impl_.TimeSignature=88,alphaTab.audio.synth.midi.event._MetaEventTypeEnum.MetaEventTypeEnum_Impl_.KeySignature=89,alphaTab.audio.synth.midi.event._MetaEventTypeEnum.MetaEventTypeEnum_Impl_.SequencerSpecific=127,alphaTab.audio.synth.midi.event._MidiEventType.MidiEventType_Impl_.NoteOff=128,alphaTab.audio.synth.midi.event._MidiEventType.MidiEventType_Impl_.NoteOn=144,alphaTab.audio.synth.midi.event._MidiEventType.MidiEventType_Impl_.NoteAftertouch=160,alphaTab.audio.synth.midi.event._MidiEventType.MidiEventType_Impl_.Controller=176,alphaTab.audio.synth.midi.event._MidiEventType.MidiEventType_Impl_.ProgramChange=192,alphaTab.audio.synth.midi.event._MidiEventType.MidiEventType_Impl_.ChannelAftertouch=208,alphaTab.audio.synth.midi.event._MidiEventType.MidiEventType_Impl_.PitchBend=224,alphaTab.audio.synth.midi.event._MidiEventType.MidiEventType_Impl_.Meta=255,alphaTab.audio.synth.midi.event._SystemCommonTypeEnum.SystemCommonTypeEnum_Impl_.SystemExclusive=240,alphaTab.audio.synth.midi.event._SystemCommonTypeEnum.SystemCommonTypeEnum_Impl_.MtcQuarterFrame=241,alphaTab.audio.synth.midi.event._SystemCommonTypeEnum.SystemCommonTypeEnum_Impl_.SongPosition=242,alphaTab.audio.synth.midi.event._SystemCommonTypeEnum.SystemCommonTypeEnum_Impl_.SongSelect=243,alphaTab.audio.synth.midi.event._SystemCommonTypeEnum.SystemCommonTypeEnum_Impl_.TuneRequest=246,alphaTab.audio.synth.midi.event._SystemCommonTypeEnum.SystemCommonTypeEnum_Impl_.SystemExclusive2=247,alphaTab.audio.synth.soundFont.HydraIbag.SizeInFile=4,alphaTab.audio.synth.soundFont.HydraIgen.SizeInFile=4,alphaTab.audio.synth.soundFont.HydraImod.SizeInFile=10,alphaTab.audio.synth.soundFont.HydraInst.SizeInFile=22,alphaTab.audio.synth.soundFont.HydraPbag.SizeInFile=4,alphaTab.audio.synth.soundFont.HydraPgen.SizeInFile=4,alphaTab.audio.synth.soundFont.HydraPgen.GenInstrument=41,alphaTab.audio.synth.soundFont.HydraPgen.GenKeyRange=43,alphaTab.audio.synth.soundFont.HydraPgen.GenVelRange=44,alphaTab.audio.synth.soundFont.HydraPgen.GenSampleId=53,alphaTab.audio.synth.soundFont.HydraPhdr.SizeInFile=38,alphaTab.audio.synth.soundFont.HydraPmod.SizeInFile=10,alphaTab.audio.synth.soundFont.HydraShdr.SizeInFile=46,alphaTab.audio.synth.soundFont.RiffChunk.HeaderSize=8,alphaTab.audio.synth.synthesis._LoopMode.LoopMode_Impl_.None=0,alphaTab.audio.synth.synthesis._LoopMode.LoopMode_Impl_.Continuous=1,alphaTab.audio.synth.synthesis._LoopMode.LoopMode_Impl_.Sustain=2,alphaTab.audio.synth.synthesis._OutputMode.OutputMode_Impl_.StereoInterleaved=0,alphaTab.audio.synth.synthesis._OutputMode.OutputMode_Impl_.StereoUnweaved=1,alphaTab.audio.synth.synthesis._OutputMode.OutputMode_Impl_.Mono=2,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.StartAddrsOffset=0,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.EndAddrsOffset=1,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.StartloopAddrsOffset=2,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.EndloopAddrsOffset=3,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.StartAddrsCoarseOffset=4,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.ModLfoToPitch=5,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.VibLfoToPitch=6,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.ModEnvToPitch=7,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.InitialFilterFc=8,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.InitialFilterQ=9,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.ModLfoToFilterFc=10,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.ModEnvToFilterFc=11,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.EndAddrsCoarseOffset=12,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.ModLfoToVolume=13,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.Unused1=14,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.ChorusEffectsSend=15,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.ReverbEffectsSend=16,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.Pan=17,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.Unused2=18,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.Unused3=19,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.Unused4=20,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.DelayModLFO=21,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.FreqModLFO=22,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.DelayVibLFO=23,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.FreqVibLFO=24,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.DelayModEnv=25,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.AttackModEnv=26,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.HoldModEnv=27,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.DecayModEnv=28,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.SustainModEnv=29,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.ReleaseModEnv=30,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.KeynumToModEnvHold=31,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.KeynumToModEnvDecay=32,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.DelayVolEnv=33,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.AttackVolEnv=34,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.HoldVolEnv=35,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.DecayVolEnv=36,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.SustainVolEnv=37,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.ReleaseVolEnv=38,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.KeynumToVolEnvHold=39,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.KeynumToVolEnvDecay=40,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.Instrument=41,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.Reserved1=42,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.KeyRange=43,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.VelRange=44,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.StartloopAddrsCoarseOffset=45,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.Keynum=46,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.Velocity=47,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.InitialAttenuation=48,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.Reserved2=49,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.EndloopAddrsCoarseOffset=50,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.CoarseTune=51,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.FineTune=52,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.SampleID=53,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.SampleModes=54,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.Reserved3=55,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.ScaleTuning=56,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.ExclusiveClass=57,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.OverridingRootKey=58,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.Unused5=59,alphaTab.audio.synth.synthesis._Region_GenOperators.Region_GenOperators_Impl_.EndOper=60,alphaTab.audio.synth.synthesis.Voice.RenderEffectSampleBLock=64,alphaTab.audio.synth.synthesis.VoiceEnvelope.FastReleaseTime=.01,alphaTab.audio.synth.synthesis._VoiceEnvelopeSegment.VoiceEnvelopeSegment_Impl_.None=0,alphaTab.audio.synth.synthesis._VoiceEnvelopeSegment.VoiceEnvelopeSegment_Impl_.Delay=1,alphaTab.audio.synth.synthesis._VoiceEnvelopeSegment.VoiceEnvelopeSegment_Impl_.Attack=2,alphaTab.audio.synth.synthesis._VoiceEnvelopeSegment.VoiceEnvelopeSegment_Impl_.Hold=3,alphaTab.audio.synth.synthesis._VoiceEnvelopeSegment.VoiceEnvelopeSegment_Impl_.Decay=4,alphaTab.audio.synth.synthesis._VoiceEnvelopeSegment.VoiceEnvelopeSegment_Impl_.Sustain=5,alphaTab.audio.synth.synthesis._VoiceEnvelopeSegment.VoiceEnvelopeSegment_Impl_.Release=6,alphaTab.audio.synth.synthesis._VoiceEnvelopeSegment.VoiceEnvelopeSegment_Impl_.Done=7,alphaTab.audio.synth.util.SynthConstants.DrumBank=128,alphaTab.audio.synth.util.SynthConstants.DefaultChannelCount=17,alphaTab.audio.synth.util.SynthConstants.MetronomeChannel=16,alphaTab.audio.synth.util.SynthConstants.AudioChannels=2,alphaTab.audio.synth.util.SynthConstants.MinVolume=0,alphaTab.audio.synth.util.SynthConstants.MaxVolume=1,alphaTab.audio.synth.util.SynthConstants.MinProgram=0,alphaTab.audio.synth.util.SynthConstants.MaxProgram=127,alphaTab.audio.synth.util.SynthConstants.MinPlaybackSpeed=.125,alphaTab.audio.synth.util.SynthConstants.MaxPlaybackSpeed=8,alphaTab.importer.AlphaTexImporter.Eof=0,alphaTab.importer._AlphaTexSymbols.AlphaTexSymbols_Impl_.No=0,alphaTab.importer._AlphaTexSymbols.AlphaTexSymbols_Impl_.Eof=1,alphaTab.importer._AlphaTexSymbols.AlphaTexSymbols_Impl_.Number=2,alphaTab.importer._AlphaTexSymbols.AlphaTexSymbols_Impl_.DoubleDot=3,alphaTab.importer._AlphaTexSymbols.AlphaTexSymbols_Impl_.Dot=4,alphaTab.importer._AlphaTexSymbols.AlphaTexSymbols_Impl_.String=5,alphaTab.importer._AlphaTexSymbols.AlphaTexSymbols_Impl_.Tuning=6,alphaTab.importer._AlphaTexSymbols.AlphaTexSymbols_Impl_.LParensis=7,alphaTab.importer._AlphaTexSymbols.AlphaTexSymbols_Impl_.RParensis=8,alphaTab.importer._AlphaTexSymbols.AlphaTexSymbols_Impl_.LBrace=9,alphaTab.importer._AlphaTexSymbols.AlphaTexSymbols_Impl_.RBrace=10,alphaTab.importer._AlphaTexSymbols.AlphaTexSymbols_Impl_.Pipe=11,alphaTab.importer._AlphaTexSymbols.AlphaTexSymbols_Impl_.MetaCommand=12,alphaTab.importer._AlphaTexSymbols.AlphaTexSymbols_Impl_.Multiply=13,alphaTab.importer._AlphaTexSymbols.AlphaTexSymbols_Impl_.LowerThan=14,alphaTab.importer._AlphaTexSymbols.AlphaTexSymbols_Impl_.Property=15,alphaTab.importer._BinaryStylesheetParser_DataType.BinaryStylesheetParser_DataType_Impl_.Boolean=0,alphaTab.importer._BinaryStylesheetParser_DataType.BinaryStylesheetParser_DataType_Impl_.Integer=1,alphaTab.importer._BinaryStylesheetParser_DataType.BinaryStylesheetParser_DataType_Impl_.Float=2,alphaTab.importer._BinaryStylesheetParser_DataType.BinaryStylesheetParser_DataType_Impl_.String=3,alphaTab.importer._BinaryStylesheetParser_DataType.BinaryStylesheetParser_DataType_Impl_.Point=4,alphaTab.importer._BinaryStylesheetParser_DataType.BinaryStylesheetParser_DataType_Impl_.Size=5,alphaTab.importer._BinaryStylesheetParser_DataType.BinaryStylesheetParser_DataType_Impl_.Rectangle=6,alphaTab.importer._BinaryStylesheetParser_DataType.BinaryStylesheetParser_DataType_Impl_.Color=7,alphaTab.importer.Gp3To5Importer.VersionString="FICHIER GUITAR PRO ",alphaTab.importer.Gp3To5Importer.BendStep=25,alphaTab.importer.GpifParser.InvalidId="-1",alphaTab.importer.GpifParser.BendPointPositionFactor=.6,alphaTab.importer.GpifParser.BendPointValueFactor=.04,alphaTab.importer.GpxFileSystem.HeaderBcFs="BCFS",alphaTab.importer.GpxFileSystem.HeaderBcFz="BCFZ",alphaTab.importer.GpxFileSystem.ScoreGpif="score.gpif",alphaTab.importer.GpxFileSystem.BinaryStylesheet="BinaryStylesheet",alphaTab.importer.GpxFileSystem.PartConfiguration="PartConfiguration",alphaTab.io.BitReader.ByteSize=8,alphaTab.model._AccentuationType.AccentuationType_Impl_.None=0,alphaTab.model._AccentuationType.AccentuationType_Impl_.Normal=1,alphaTab.model._AccentuationType.AccentuationType_Impl_.Heavy=2,alphaTab.model._AccidentalType.AccidentalType_Impl_.None=0,alphaTab.model._AccidentalType.AccidentalType_Impl_.Natural=1,alphaTab.model._AccidentalType.AccidentalType_Impl_.Sharp=2,alphaTab.model._AccidentalType.AccidentalType_Impl_.Flat=3,alphaTab.model._AccidentalType.AccidentalType_Impl_.NaturalQuarterNoteUp=4,alphaTab.model._AccidentalType.AccidentalType_Impl_.SharpQuarterNoteUp=5,alphaTab.model._AccidentalType.AccidentalType_Impl_.FlatQuarterNoteUp=6,alphaTab.model._AutomationType.AutomationType_Impl_.Tempo=0,alphaTab.model._AutomationType.AutomationType_Impl_.Volume=1,alphaTab.model._AutomationType.AutomationType_Impl_.Instrument=2,alphaTab.model._AutomationType.AutomationType_Impl_.Balance=3,alphaTab.model.Bar._globalBarId=0,alphaTab.model.Beat._globalBeatId=0,alphaTab.model.BendPoint.MaxPosition=60,alphaTab.model.BendPoint.MaxValue=12,alphaTab.model._BendStyle.BendStyle_Impl_.Default=0,alphaTab.model._BendStyle.BendStyle_Impl_.Gradual=1,alphaTab.model._BendStyle.BendStyle_Impl_.Fast=2,alphaTab.model._BendType.BendType_Impl_.None=0,alphaTab.model._BendType.BendType_Impl_.Custom=1,alphaTab.model._BendType.BendType_Impl_.Bend=2,alphaTab.model._BendType.BendType_Impl_.Release=3,alphaTab.model._BendType.BendType_Impl_.BendRelease=4,alphaTab.model._BendType.BendType_Impl_.Hold=5,alphaTab.model._BendType.BendType_Impl_.Prebend=6,alphaTab.model._BendType.BendType_Impl_.PrebendBend=7,alphaTab.model._BendType.BendType_Impl_.PrebendRelease=8,alphaTab.model._BrushType.BrushType_Impl_.None=0,alphaTab.model._BrushType.BrushType_Impl_.BrushUp=1,alphaTab.model._BrushType.BrushType_Impl_.BrushDown=2,alphaTab.model._BrushType.BrushType_Impl_.ArpeggioUp=3,alphaTab.model._BrushType.BrushType_Impl_.ArpeggioDown=4,alphaTab.model._Clef.Clef_Impl_.Neutral=0,alphaTab.model._Clef.Clef_Impl_.C3=1,alphaTab.model._Clef.Clef_Impl_.C4=2,alphaTab.model._Clef.Clef_Impl_.F4=3,alphaTab.model._Clef.Clef_Impl_.G2=4,alphaTab.model._CrescendoType.CrescendoType_Impl_.None=0,alphaTab.model._CrescendoType.CrescendoType_Impl_.Crescendo=1,alphaTab.model._CrescendoType.CrescendoType_Impl_.Decrescendo=2,alphaTab.model._Duration.Duration_Impl_.QuadrupleWhole=-4,alphaTab.model._Duration.Duration_Impl_.DoubleWhole=-2,alphaTab.model._Duration.Duration_Impl_.Whole=1,alphaTab.model._Duration.Duration_Impl_.Half=2,alphaTab.model._Duration.Duration_Impl_.Quarter=4,alphaTab.model._Duration.Duration_Impl_.Eighth=8,alphaTab.model._Duration.Duration_Impl_.Sixteenth=16,alphaTab.model._Duration.Duration_Impl_.ThirtySecond=32,alphaTab.model._Duration.Duration_Impl_.SixtyFourth=64,alphaTab.model._Duration.Duration_Impl_.OneHundredTwentyEighth=128,alphaTab.model._Duration.Duration_Impl_.TwoHundredFiftySixth=256,alphaTab.model._DynamicValue.DynamicValue_Impl_.PPP=0,alphaTab.model._DynamicValue.DynamicValue_Impl_.PP=1,alphaTab.model._DynamicValue.DynamicValue_Impl_.P=2,alphaTab.model._DynamicValue.DynamicValue_Impl_.MP=3,alphaTab.model._DynamicValue.DynamicValue_Impl_.MF=4,alphaTab.model._DynamicValue.DynamicValue_Impl_.F=5,alphaTab.model._DynamicValue.DynamicValue_Impl_.FF=6,alphaTab.model._DynamicValue.DynamicValue_Impl_.FFF=7,alphaTab.model._FermataType.FermataType_Impl_.Short=0,alphaTab.model._FermataType.FermataType_Impl_.Medium=1,alphaTab.model._FermataType.FermataType_Impl_.Long=2,alphaTab.model._Fingers.Fingers_Impl_.Unknown=-2,alphaTab.model._Fingers.Fingers_Impl_.NoOrDead=-1,alphaTab.model._Fingers.Fingers_Impl_.Thumb=0,alphaTab.model._Fingers.Fingers_Impl_.IndexFinger=1,alphaTab.model._Fingers.Fingers_Impl_.MiddleFinger=2,alphaTab.model._Fingers.Fingers_Impl_.AnnularFinger=3,alphaTab.model._Fingers.Fingers_Impl_.LittleFinger=4,alphaTab.model._GraceType.GraceType_Impl_.None=0,alphaTab.model._GraceType.GraceType_Impl_.OnBeat=1,alphaTab.model._GraceType.GraceType_Impl_.BeforeBeat=2,alphaTab.model._GraceType.GraceType_Impl_.BendGrace=3,alphaTab.model._HarmonicType.HarmonicType_Impl_.None=0,alphaTab.model._HarmonicType.HarmonicType_Impl_.Natural=1,alphaTab.model._HarmonicType.HarmonicType_Impl_.Artificial=2,alphaTab.model._HarmonicType.HarmonicType_Impl_.Pinch=3,alphaTab.model._HarmonicType.HarmonicType_Impl_.Tap=4,alphaTab.model._HarmonicType.HarmonicType_Impl_.Semi=5,alphaTab.model._HarmonicType.HarmonicType_Impl_.Feedback=6,alphaTab.model._KeySignature.KeySignature_Impl_.Cb=-7,alphaTab.model._KeySignature.KeySignature_Impl_.Gb=-6,alphaTab.model._KeySignature.KeySignature_Impl_.Db=-5,alphaTab.model._KeySignature.KeySignature_Impl_.Ab=-4,alphaTab.model._KeySignature.KeySignature_Impl_.Eb=-3,alphaTab.model._KeySignature.KeySignature_Impl_.Bb=-2,alphaTab.model._KeySignature.KeySignature_Impl_.F=-1,alphaTab.model._KeySignature.KeySignature_Impl_.C=0,alphaTab.model._KeySignature.KeySignature_Impl_.G=1,alphaTab.model._KeySignature.KeySignature_Impl_.D=2,alphaTab.model._KeySignature.KeySignature_Impl_.A=3,alphaTab.model._KeySignature.KeySignature_Impl_.E=4,alphaTab.model._KeySignature.KeySignature_Impl_.B=5,alphaTab.model._KeySignature.KeySignature_Impl_.FSharp=6,alphaTab.model._KeySignature.KeySignature_Impl_.CSharp=7,alphaTab.model._KeySignatureType.KeySignatureType_Impl_.Major=0,alphaTab.model._KeySignatureType.KeySignatureType_Impl_.Minor=1,alphaTab.model.Lyrics.CharCodeLF=10,alphaTab.model.Lyrics.CharCodeTab=9,alphaTab.model.Lyrics.CharCodeCR=13,alphaTab.model.Lyrics.CharCodeSpace=32,alphaTab.model.Lyrics.CharCodeBrackedClose=93,alphaTab.model.Lyrics.CharCodeBrackedOpen=91,alphaTab.model.Lyrics.CharCodeDash=45,alphaTab.model._Lyrics_LyricsState.Lyrics_LyricsState_Impl_.IgnoreSpaces=0,alphaTab.model._Lyrics_LyricsState.Lyrics_LyricsState_Impl_.Begin=1,alphaTab.model._Lyrics_LyricsState.Lyrics_LyricsState_Impl_.Text=2,alphaTab.model._Lyrics_LyricsState.Lyrics_LyricsState_Impl_.Comment=3,alphaTab.model._Lyrics_LyricsState.Lyrics_LyricsState_Impl_.Dash=4,alphaTab.model.MasterBar.MaxAlternateEndings=8,alphaTab.model.Note.GlobalNoteId=0,alphaTab.model.Note.MaxOffsetForSameLineSearch=3,alphaTab.model._NoteAccidentalMode.NoteAccidentalMode_Impl_.Default=0,alphaTab.model._NoteAccidentalMode.NoteAccidentalMode_Impl_.SwapAccidentals=1,alphaTab.model._NoteAccidentalMode.NoteAccidentalMode_Impl_.ForceNatural=2,alphaTab.model._NoteAccidentalMode.NoteAccidentalMode_Impl_.ForceSharp=3,alphaTab.model._NoteAccidentalMode.NoteAccidentalMode_Impl_.ForceFlat=4,alphaTab.model._Ottavia.Ottavia_Impl_._15ma=0,alphaTab.model._Ottavia.Ottavia_Impl_._8va=1,alphaTab.model._Ottavia.Ottavia_Impl_.Regular=2,alphaTab.model._Ottavia.Ottavia_Impl_._8vb=3,alphaTab.model._Ottavia.Ottavia_Impl_._15mb=4,alphaTab.model._PickStroke.PickStroke_Impl_.None=0,alphaTab.model._PickStroke.PickStroke_Impl_.Up=1,alphaTab.model._PickStroke.PickStroke_Impl_.Down=2,alphaTab.model._SimileMark.SimileMark_Impl_.None=0,alphaTab.model._SimileMark.SimileMark_Impl_.Simple=1,alphaTab.model._SimileMark.SimileMark_Impl_.FirstOfDouble=2,alphaTab.model._SimileMark.SimileMark_Impl_.SecondOfDouble=3,alphaTab.model._SlideInType.SlideInType_Impl_.None=0,alphaTab.model._SlideInType.SlideInType_Impl_.IntoFromBelow=1,alphaTab.model._SlideInType.SlideInType_Impl_.IntoFromAbove=2,alphaTab.model._SlideOutType.SlideOutType_Impl_.None=0,alphaTab.model._SlideOutType.SlideOutType_Impl_.Shift=1,alphaTab.model._SlideOutType.SlideOutType_Impl_.Legato=2,alphaTab.model._SlideOutType.SlideOutType_Impl_.OutUp=3,alphaTab.model._SlideOutType.SlideOutType_Impl_.OutDown=4,alphaTab.model._SlideOutType.SlideOutType_Impl_.PickSlideDown=5,alphaTab.model._SlideOutType.SlideOutType_Impl_.PickSlideUp=6,alphaTab.model.Track.ShortNameMaxLength=10,alphaTab.model._TripletFeel.TripletFeel_Impl_.NoTripletFeel=0,alphaTab.model._TripletFeel.TripletFeel_Impl_.Triplet16th=1,alphaTab.model._TripletFeel.TripletFeel_Impl_.Triplet8th=2,alphaTab.model._TripletFeel.TripletFeel_Impl_.Dotted16th=3,alphaTab.model._TripletFeel.TripletFeel_Impl_.Dotted8th=4,alphaTab.model._TripletFeel.TripletFeel_Impl_.Scottish16th=5,alphaTab.model._TripletFeel.TripletFeel_Impl_.Scottish8th=6,alphaTab.model.TupletGroup.HalfTicks=1920,alphaTab.model.TupletGroup.QuarterTicks=960,alphaTab.model.TupletGroup.EighthTicks=480,alphaTab.model.TupletGroup.SixteenthTicks=240,alphaTab.model.TupletGroup.ThirtySecondTicks=120,alphaTab.model.TupletGroup.SixtyFourthTicks=60,alphaTab.model.TupletGroup.OneHundredTwentyEighthTicks=30,alphaTab.model.TupletGroup.TwoHundredFiftySixthTicks=15,alphaTab.model.TupletGroup.AllTicks=new Int32Array([1920,960,480,240,120,60,30,15]),alphaTab.model._VibratoType.VibratoType_Impl_.None=0,alphaTab.model._VibratoType.VibratoType_Impl_.Slight=1,alphaTab.model._VibratoType.VibratoType_Impl_.Wide=2,alphaTab.model._WhammyType.WhammyType_Impl_.None=0,alphaTab.model._WhammyType.WhammyType_Impl_.Custom=1,alphaTab.model._WhammyType.WhammyType_Impl_.Dive=2,alphaTab.model._WhammyType.WhammyType_Impl_.Dip=3,alphaTab.model._WhammyType.WhammyType_Impl_.Hold=4,alphaTab.model._WhammyType.WhammyType_Impl_.Predive=5,alphaTab.model._WhammyType.WhammyType_Impl_.PrediveDive=6,alphaTab.platform.javaScript.AlphaSynthFlashOutput.PreferredSampleRate=44100,alphaTab.platform.javaScript.AlphaSynthFlashOutput.Id="alphaSynthFlashPlayer",alphaTab.platform.javaScript.AlphaSynthFlashOutput.NextId=0,alphaTab.platform.javaScript.AlphaSynthWebAudioOutput.BufferSize=4096,alphaTab.platform.javaScript.AlphaSynthWebAudioOutput.BufferCount=10,alphaTab.platform.javaScript.AlphaSynthWebAudioOutput.PreferredSampleRate=44100,alphaTab.platform.model._FontStyle.FontStyle_Impl_.Plain=0,alphaTab.platform.model._FontStyle.FontStyle_Impl_.Bold=1,alphaTab.platform.model._FontStyle.FontStyle_Impl_.Italic=2,alphaTab.platform.model._TextAlign.TextAlign_Impl_.Left=0,alphaTab.platform.model._TextAlign.TextAlign_Impl_.Center=1,alphaTab.platform.model._TextAlign.TextAlign_Impl_.Right=2,alphaTab.platform.model._TextBaseline.TextBaseline_Impl_.Top=0,alphaTab.platform.model._TextBaseline.TextBaseline_Impl_.Middle=1,alphaTab.platform.model._TextBaseline.TextBaseline_Impl_.Bottom=2,alphaTab.platform.svg.FontSizes.ControlChars=32,alphaTab.rendering._BeatXPosition.BeatXPosition_Impl_.PreNotes=0,alphaTab.rendering._BeatXPosition.BeatXPosition_Impl_.OnNotes=1,alphaTab.rendering._BeatXPosition.BeatXPosition_Impl_.MiddleNotes=2,alphaTab.rendering._BeatXPosition.BeatXPosition_Impl_.PostNotes=3,alphaTab.rendering._BeatXPosition.BeatXPosition_Impl_.EndBeat=4,alphaTab.rendering._EffectBarGlyphSizing.EffectBarGlyphSizing_Impl_.SinglePreBeat=0,alphaTab.rendering._EffectBarGlyphSizing.EffectBarGlyphSizing_Impl_.SingleOnBeat=1,alphaTab.rendering._EffectBarGlyphSizing.EffectBarGlyphSizing_Impl_.SingleOnBeatToEnd=2,alphaTab.rendering._EffectBarGlyphSizing.EffectBarGlyphSizing_Impl_.GroupedBeforeBeat=3,alphaTab.rendering._EffectBarGlyphSizing.EffectBarGlyphSizing_Impl_.GroupedOnBeat=4,alphaTab.rendering._EffectBarGlyphSizing.EffectBarGlyphSizing_Impl_.GroupedOnBeatToEnd=5,alphaTab.rendering._EffectBarGlyphSizing.EffectBarGlyphSizing_Impl_.FullBar=6,alphaTab.rendering.ScoreBarRenderer.StaffId="score",alphaTab.rendering.ScoreBarRenderer.SharpKsSteps=new Int32Array([1,4,0,3,6,2,5]),alphaTab.rendering.ScoreBarRenderer.FlatKsSteps=new Int32Array([5,2,6,3,7,4,8]),alphaTab.rendering.ScoreBarRenderer.LineSpacing=8,alphaTab.rendering.ScoreBarRenderer.StemWidth=1.3,alphaTab.rendering.TabBarRenderer.StaffId="tab",alphaTab.rendering.TabBarRenderer.LineSpacing=10,alphaTab.rendering.glyphs.AccidentalGroupGlyph.NonReserved=-3e3,alphaTab.rendering.glyphs.AlternateEndingsGlyph.Padding=3,alphaTab.rendering.glyphs.BendNoteHeadGroupGlyph.ElementPadding=2,alphaTab.rendering.glyphs.ChordDiagramContainerGlyph.Padding=3,alphaTab.rendering.glyphs.ChordDiagramGlyph.Padding=5,alphaTab.rendering.glyphs.ChordDiagramGlyph.Frets=5,alphaTab.rendering.glyphs.ChordDiagramGlyph.CircleRadius=2.5,alphaTab.rendering.glyphs.ChordDiagramGlyph.StringSpacing=10,alphaTab.rendering.glyphs.ChordDiagramGlyph.FretSpacing=12,alphaTab.rendering.glyphs.CrescendoGlyph.Padding=5,alphaTab.rendering.glyphs.GhostParenthesisGlyph.Size=6,alphaTab.rendering.glyphs.LineRangedGlyph.LineSpacing=3,alphaTab.rendering.glyphs.LineRangedGlyph.LineTopPadding=4,alphaTab.rendering.glyphs.LineRangedGlyph.LineTopOffset=5,alphaTab.rendering.glyphs.LineRangedGlyph.LineSize=8,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.None=-1,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.ClefG=57424,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.ClefC=57436,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.ClefF=57442,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.ClefNeutral=57449,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.ClefTab=57453,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.ClefTabSmall=57454,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.RestQuadrupleWhole=58593,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.RestDoubleWhole=58594,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.RestWhole=58595,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.RestHalf=58596,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.RestQuarter=58597,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.RestEighth=58598,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.RestSixteenth=58599,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.RestThirtySecond=58600,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.RestSixtyFourth=58601,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.RestOneHundredTwentyEighth=58602,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.RestTwoHundredFiftySixth=58603,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.Trill=58726,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.Num0=57472,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.Num1=57473,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.Num2=57474,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.Num3=57475,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.Num4=57476,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.Num5=57477,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.Num6=57478,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.Num7=57479,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.Num8=57480,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.Num9=57481,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.TimeSignatureCommon=57482,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.TimeSignatureCutCommon=57483,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.NoteQuadrupleWhole=57505,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.NoteDoubleWhole=57504,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.NoteWhole=57506,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.NoteHalf=57507,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.NoteQuarter=57508,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.NoteDead=57514,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.NoteHarmonic=57564,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.NoteHarmonicWhole=57566,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.NoteHiHat=57523,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.NoteSideStick=57513,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.NoteHiHatHalf=57591,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.NoteChineseCymbal=57593,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.FooterUpEighth=57920,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.FooterDownEighth=57921,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.FooterUpSixteenth=57922,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.FooterDownSixteenth=57923,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.FooterUpThirtySecond=57924,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.FooterDownThirtySecond=57925,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.FooterUpSixtyFourth=57926,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.FooterDownSixtyFourth=57927,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.FooterUpOneHundredTwentyEighth=57928,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.FooterDownOneHundredTwentyEighth=57929,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.FooterUpTwoHundredFiftySixth=57930,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.FooterDownTwoHundredFiftySixth=57931,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.DynamicPPP=58666,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.DynamicPP=58667,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.DynamicP=58656,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.DynamicMP=58668,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.DynamicMF=58669,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.DynamicF=58658,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.DynamicFF=58671,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.DynamicFFF=58672,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.Accentuation=58528,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.HeavyAccentuation=58540,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.WaveHorizontalSlight=60068,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.WaveHorizontalWide=60126,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.PickStrokeDown=58896,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.PickStrokeUp=58898,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.TremoloPickingThirtySecond=57890,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.TremoloPickingSixteenth=57889,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.TremoloPickingEighth=57888,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.Tempo=57813,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.NoteEighth=57815,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.AccidentalFlat=57952,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.AccidentalNatural=57953,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.AccidentalSharp=57954,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.AccidentalQuarterToneFlatArrowUp=57968,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.AccidentalQuarterToneSharpArrowUp=57972,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.AccidentalQuarterToneNaturalArrowUp=57970,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.Ottava8=58640,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.Ottava8va=58641,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.Ottava8vb=58652,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.Ottava15=58644,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.Ottava15ma=58645,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.OttavaMBaseline=60565,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.OttavaBBaseline=60563,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.SimileMarkSimple=58624,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.SimileMarkDouble=58625,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.FermataMedium=58560,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.FermataShort=58564,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.FermataLong=58566,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.FretboardX=59481,alphaTab.rendering.glyphs._MusicFontSymbol.MusicFontSymbol_Impl_.FretboardO=59482,alphaTab.rendering.glyphs.NoteHeadGlyph.GraceScale=.75,alphaTab.rendering.glyphs.NoteHeadGlyph.NoteHeadHeight=9,alphaTab.rendering.glyphs.NoteHeadGlyph.QuarterNoteHeadWidth=10,alphaTab.rendering.glyphs.NoteVibratoGlyph.SlightWaveOffset=10,alphaTab.rendering.glyphs.NoteVibratoGlyph.SlightWaveSize=8.5,alphaTab.rendering.glyphs.ScoreHelperNotesBaseGlyph.SlurHeight=11,alphaTab.rendering.glyphs.ScoreHelperNotesBaseGlyph.EndPadding=8,alphaTab.rendering.glyphs.ScoreWhammyBarGlyph.SimpleDipHeight=12,alphaTab.rendering.glyphs.ScoreWhammyBarGlyph.SimpleDipPadding=2,alphaTab.rendering.glyphs.TabBendGlyph.ArrowSize=6,alphaTab.rendering.glyphs.TabBendGlyph.DashSize=3,alphaTab.rendering.glyphs.TabBendGlyph.BendValueHeight=6,alphaTab.rendering.glyphs.TabWhammyBarGlyph.TopOffsetSharedDataKey="tab.whammy.topoffset",alphaTab.rendering.glyphs.TabWhammyBarGlyph.PerHalfSize=6,alphaTab.rendering.glyphs.TabWhammyBarGlyph.DashSize=3,alphaTab.rendering.glyphs.TripletFeelGlyph.NoteScale=.4,alphaTab.rendering.glyphs.TripletFeelGlyph.NoteHeight=12,alphaTab.rendering.glyphs.TripletFeelGlyph.NoteSeparation=12,alphaTab.rendering.glyphs.TripletFeelGlyph.BarHeight=2,alphaTab.rendering.glyphs.TripletFeelGlyph.BarSeparation=3,alphaTab.rendering.glyphs._TripletFeelGlyph_BarType.TripletFeelGlyph_BarType_Impl_.Full=0,alphaTab.rendering.glyphs._TripletFeelGlyph_BarType.TripletFeelGlyph_BarType_Impl_.PartialLeft=1,alphaTab.rendering.glyphs._TripletFeelGlyph_BarType.TripletFeelGlyph_BarType_Impl_.PartialRight=2,alphaTab.rendering.glyphs.VoiceContainerGlyph.KeySizeBeat="Beat",alphaTab.rendering.layout._HeaderFooterElements.HeaderFooterElements_Impl_.None=0,alphaTab.rendering.layout._HeaderFooterElements.HeaderFooterElements_Impl_.Title=1,alphaTab.rendering.layout._HeaderFooterElements.HeaderFooterElements_Impl_.SubTitle=2,alphaTab.rendering.layout._HeaderFooterElements.HeaderFooterElements_Impl_.Artist=4,alphaTab.rendering.layout._HeaderFooterElements.HeaderFooterElements_Impl_.Album=8,alphaTab.rendering.layout._HeaderFooterElements.HeaderFooterElements_Impl_.Words=16,alphaTab.rendering.layout._HeaderFooterElements.HeaderFooterElements_Impl_.Music=32,alphaTab.rendering.layout._HeaderFooterElements.HeaderFooterElements_Impl_.WordsAndMusic=64,alphaTab.rendering.layout._HeaderFooterElements.HeaderFooterElements_Impl_.Copyright=128,alphaTab.rendering.layout._HeaderFooterElements.HeaderFooterElements_Impl_.PageNumber=256,alphaTab.rendering.layout._HeaderFooterElements.HeaderFooterElements_Impl_.All=511,alphaTab.rendering.staves.BarLayoutingInfo.MinDuration=30,alphaTab.rendering.staves.BarLayoutingInfo.MinDurationWidth=10,alphaTab.rendering.staves.StaveGroup.AccoladeLabelSpacing=10,alphaTab.rendering.utils.AccidentalHelper.KeySignatureLookup=[[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],[!0,!0,!0,!0,!0,!1,!0,!0,!0,!0,!0,!0],[!1,!0,!0,!0,!0,!1,!0,!0,!0,!0,!0,!0],[!1,!0,!0,!0,!0,!1,!1,!1,!0,!0,!0,!0],[!1,!1,!1,!0,!0,!1,!1,!1,!0,!0,!0,!0],[!1,!1,!1,!0,!0,!1,!1,!1,!1,!1,!0,!0],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!0,!0],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!0,!0,!1,!1,!1,!1,!1],[!0,!0,!1,!1,!1,!0,!0,!1,!1,!1,!1,!1],[!0,!0,!1,!1,!1,!0,!0,!0,!0,!1,!1,!1],[!0,!0,!0,!0,!1,!0,!0,!0,!0,!1,!1,!1],[!0,!0,!0,!0,!1,!0,!0,!0,!0,!0,!0,!1],[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!1],[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0]],alphaTab.rendering.utils.AccidentalHelper.AccidentalNotes=[!1,!0,!1,!0,!1,!1,!0,!1,!0,!1,!0,!1],alphaTab.rendering.utils.AccidentalHelper.StepsPerOctave=7,alphaTab.rendering.utils.AccidentalHelper.OctaveSteps=new Int32Array([40,34,32,28,40]),alphaTab.rendering.utils.AccidentalHelper.SharpNoteSteps=new Int32Array([0,0,1,1,2,3,3,4,4,5,5,6]),alphaTab.rendering.utils.AccidentalHelper.FlatNoteSteps=new Int32Array([0,1,1,2,2,3,4,4,5,5,6,6]),alphaTab.rendering.utils._BeamDirection.BeamDirection_Impl_.Up=0,alphaTab.rendering.utils._BeamDirection.BeamDirection_Impl_.Down=1,alphaTab.rendering.utils.BeamingHelper.ScoreMiddleKeys=new Int32Array([71,60,57,50,71]),alphaTab.rendering.utils.PercussionMapper.ElementVariationToMidi=[new Int32Array([35,35,35]),new Int32Array([38,38,37]),new Int32Array([56,56,56]),new Int32Array([56,56,56]),new Int32Array([56,56,56]),new Int32Array([41,41,41]),new Int32Array([43,43,43]),new Int32Array([45,45,45]),new Int32Array([47,47,47]),new Int32Array([48,48,48]),new Int32Array([42,46,46]),new Int32Array([44,44,44]),new Int32Array([49,49,49]),new Int32Array([57,57,57]),new Int32Array([55,55,55]),new Int32Array([51,59,53]),new Int32Array([52,52,52])],alphaTab.util._LogLevel.LogLevel_Impl_.None=0,alphaTab.util._LogLevel.LogLevel_Impl_.Debug=1,alphaTab.util._LogLevel.LogLevel_Impl_.Info=2,alphaTab.util._LogLevel.LogLevel_Impl_.Warning=3,alphaTab.util._LogLevel.LogLevel_Impl_.Error=4,alphaTab.xml._XmlNodeType.XmlNodeType_Impl_.None=0,alphaTab.xml._XmlNodeType.XmlNodeType_Impl_.Element=1,alphaTab.xml._XmlNodeType.XmlNodeType_Impl_.Attribute=2,alphaTab.xml._XmlNodeType.XmlNodeType_Impl_.Text=3,alphaTab.xml._XmlNodeType.XmlNodeType_Impl_.CDATA=4,alphaTab.xml._XmlNodeType.XmlNodeType_Impl_.EntityReference=5,alphaTab.xml._XmlNodeType.XmlNodeType_Impl_.Entity=6,alphaTab.xml._XmlNodeType.XmlNodeType_Impl_.ProcessingInstruction=7,alphaTab.xml._XmlNodeType.XmlNodeType_Impl_.Comment=8,alphaTab.xml._XmlNodeType.XmlNodeType_Impl_.Document=9,alphaTab.xml._XmlNodeType.XmlNodeType_Impl_.DocumentType=10,alphaTab.xml._XmlNodeType.XmlNodeType_Impl_.DocumentFragment=11,alphaTab.xml._XmlNodeType.XmlNodeType_Impl_.Notation=12,alphaTab.xml._XmlNodeType.XmlNodeType_Impl_.Whitespace=13,alphaTab.xml._XmlNodeType.XmlNodeType_Impl_.SignificantWhitespace=14,alphaTab.xml._XmlNodeType.XmlNodeType_Impl_.EndElement=15,alphaTab.xml._XmlNodeType.XmlNodeType_Impl_.EndEntity=16,alphaTab.xml._XmlNodeType.XmlNodeType_Impl_.XmlDeclaration=17,alphaTab.xml.XmlParser.CharCodeLF=10,alphaTab.xml.XmlParser.CharCodeTab=9,alphaTab.xml.XmlParser.CharCodeCR=13,alphaTab.xml.XmlParser.CharCodeSpace=32,alphaTab.xml.XmlParser.CharCodeLowerThan=60,alphaTab.xml.XmlParser.CharCodeAmp=38,alphaTab.xml.XmlParser.CharCodeBrackedClose=93,alphaTab.xml.XmlParser.CharCodeBrackedOpen=91,alphaTab.xml.XmlParser.CharCodeGreaterThan=62,alphaTab.xml.XmlParser.CharCodeExclamation=33,alphaTab.xml.XmlParser.CharCodeUpperD=68,alphaTab.xml.XmlParser.CharCodeLowerD=100,alphaTab.xml.XmlParser.CharCodeMinus=45,alphaTab.xml.XmlParser.CharCodeQuestion=63,alphaTab.xml.XmlParser.CharCodeSlash=47,alphaTab.xml.XmlParser.CharCodeEquals=61,alphaTab.xml.XmlParser.CharCodeDoubleQuote=34,alphaTab.xml.XmlParser.CharCodeSingleQuote=39,alphaTab.xml.XmlParser.CharCodeSharp=35,alphaTab.xml.XmlParser.CharCodeLowerX=120,alphaTab.xml.XmlParser.CharCodeLowerA=97,alphaTab.xml.XmlParser.CharCodeLowerZ=122,alphaTab.xml.XmlParser.CharCodeUpperA=65,alphaTab.xml.XmlParser.CharCodeUpperZ=90,alphaTab.xml.XmlParser.CharCode0=48,alphaTab.xml.XmlParser.CharCode9=57,alphaTab.xml.XmlParser.CharCodeColon=58,alphaTab.xml.XmlParser.CharCodeDot=46,alphaTab.xml.XmlParser.CharCodeUnderscore=95,alphaTab.xml.XmlParser_XmlState.IgnoreSpaces=0,alphaTab.xml.XmlParser_XmlState.Begin=1,alphaTab.xml.XmlParser_XmlState.BeginNode=2,alphaTab.xml.XmlParser_XmlState.TagName=3,alphaTab.xml.XmlParser_XmlState.Body=4,alphaTab.xml.XmlParser_XmlState.AttribName=5,alphaTab.xml.XmlParser_XmlState.Equals=6,alphaTab.xml.XmlParser_XmlState.AttvalBegin=7,alphaTab.xml.XmlParser_XmlState.AttribVal=8,alphaTab.xml.XmlParser_XmlState.Childs=9,alphaTab.xml.XmlParser_XmlState.Close=10,alphaTab.xml.XmlParser_XmlState.WaitEnd=11,alphaTab.xml.XmlParser_XmlState.WaitEndRet=12,alphaTab.xml.XmlParser_XmlState.Pcdata=13,alphaTab.xml.XmlParser_XmlState.Header=14,alphaTab.xml.XmlParser_XmlState.Comment=15,alphaTab.xml.XmlParser_XmlState.Doctype=16,alphaTab.xml.XmlParser_XmlState.Cdata=17,alphaTab.xml.XmlParser_XmlState.Escape=18,haxe.io.FPHelper.i64tmp=new haxe._Int64.___Int64(0,0),haxe.zip.InflateImpl.LEN_EXTRA_BITS_TBL=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,-1,-1],haxe.zip.InflateImpl.LEN_BASE_VAL_TBL=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],haxe.zip.InflateImpl.DIST_EXTRA_BITS_TBL=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,-1,-1],haxe.zip.InflateImpl.DIST_BASE_VAL_TBL=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],haxe.zip.InflateImpl.CODE_LENGTHS_POS=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],js.html.compat.Float32Array.BYTES_PER_ELEMENT=4,js.html.compat.Float64Array.BYTES_PER_ELEMENT=8,js.html.compat.Uint8Array.BYTES_PER_ELEMENT=1,system.Convert._conversionBuffer=new ArrayBuffer(8),system.Convert._int8Buffer=new Int8Array(system.Convert._conversionBuffer),system.Convert._uint8Buffer=new Uint8Array(system.Convert._conversionBuffer),system.Convert._int16Buffer=new Int16Array(system.Convert._conversionBuffer),system.Convert._uint16Buffer=new Uint16Array(system.Convert._conversionBuffer),system.Convert._int32Buffer=new Int32Array(system.Convert._conversionBuffer),system.Convert._uint32Buffer=new Uint32Array(system.Convert._conversionBuffer),alphaTab.Main.main()}("undefined"!=typeof exports?exports:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);